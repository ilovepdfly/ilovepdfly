const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/HomePage-Ba2A2mA0.js","assets/useWorkflows-B0t5ojGk.js","assets/react-Ckhrjn13.js","assets/ToolPage-DYYXrWtS.js","assets/useSignature-GEdDf6Pl.js","assets/html2canvas.esm-B0tyYwQk.js","assets/useSignedDocuments-DRpsHhER.js","assets/useLastTasks-BdpWPeBA.js","assets/index-KBQInnZT.js","assets/jspdf.es.min-X9YdMHv2.js","assets/xlsx-eYdzo_tC.js","assets/AboutPage--BVFZ9ix.js","assets/BlogPage-D6XMJC0H.js","assets/BlogPostPage-CB6rapbi.js","assets/ContactPage-CA_AVVUY.js","assets/LoginPage-B-7BSFha.js","assets/SignUpPage-ulHfRJzP.js","assets/DeveloperPage-S6VZQ4xi.js","assets/FaqPage-DvgAibvB.js","assets/SitemapPage-DRFIv49F.js","assets/InvoiceGeneratorPage-Csz4KKnr.js","assets/CVGeneratorPage-9j_312Zj.js","assets/LessonPlanCreatorPage-DclCHCov.js","assets/AIQuestionGeneratorPage-DBsY2Fay.js","assets/PricingPage-Bby5pXEE.js","assets/PremiumFeaturePage-B7fEsl1c.js","assets/PaymentPage-W6FXJy5A.js","assets/DeveloperAccessPage-BQiAXtfN.js","assets/AdminDashboardPage-SyUdkII5.js","assets/HowToUsePage-BPN9G4BU.js","assets/EducationPage-aqweBJAT.js","assets/BusinessPage-DNQA8qQ4.js","assets/PrivacyPolicyPage-CiujB50j.js","assets/TermsOfServicePage-DcUXcXPv.js","assets/CookiesPolicyPage-B-F_ni_B.js","assets/CeoPage-K4nfgda_.js","assets/ApiPricingPage-Dk4w970L.js","assets/ApiReferencePage-BbnQ7dim.js","assets/ApiPdfPage-BNKhMa7h.js","assets/ApiImagePage-Bo8FjxGi.js","assets/ApiSignaturePage-BpANaPn6.js","assets/AccountSettingsPage-irz1aBXq.js","assets/PressPage-CRmtYPDy.js","assets/WorkflowsPage-BLb1GkmD.js","assets/CreateWorkflowPage-CbuQ3A1G.js","assets/UserDashboardLayout-CIzvEn-b.js","assets/LegalPage-BFM5ORu_.js","assets/SecurityPolicyPage-En8tvHsn.js","assets/FeaturesPage-npk2FGSI.js","assets/SecurityPage-CfcAFho-.js","assets/TeamPage-BPHxR9DK.js","assets/LastTasksPage-1B5lvFWJ.js","assets/SignaturesOverviewPage-CYlc52Mf.js","assets/SentPage-B4QH29f0.js","assets/InboxPage-Cak9m7N_.js","assets/SignedPage-Ncws4acm.js","assets/TemplatesPage-DMQGm8MO.js","assets/ContactsPage-1y10EHbP.js","assets/SignatureSettingsPage-DTyVfgdP.js","assets/PlansAndPackagesPage-CDWhRK8r.js","assets/BusinessDetailsPage-OHfB28-8.js","assets/InvoicesPage-BpQI7IWb.js"])))=>i.map(i=>d[i]);
import{r as Sw,g as ad,a as Pw}from"./react-Ckhrjn13.js";function TI(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const s in i)if(s!=="default"&&!(s in n)){const r=Object.getOwnPropertyDescriptor(i,s);r&&Object.defineProperty(n,s,r.get?r:{enumerable:!0,get:()=>i[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}})();var Ch={exports:{}},Sa={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vy;function xI(){if(Vy)return Sa;Vy=1;var n=Sw(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,r={key:!0,ref:!0,__self:!0,__source:!0};function o(a,l,c){var d,f={},m=null,y=null;c!==void 0&&(m=""+c),l.key!==void 0&&(m=""+l.key),l.ref!==void 0&&(y=l.ref);for(d in l)i.call(l,d)&&!r.hasOwnProperty(d)&&(f[d]=l[d]);if(a&&a.defaultProps)for(d in l=a.defaultProps,l)f[d]===void 0&&(f[d]=l[d]);return{$$typeof:e,type:a,key:m,ref:y,props:f,_owner:s.current}}return Sa.Fragment=t,Sa.jsx=o,Sa.jsxs=o,Sa}var Oy;function EI(){return Oy||(Oy=1,Ch.exports=xI()),Ch.exports}var g=EI(),M=Sw();const bo=ad(M),AI=TI({__proto__:null,default:bo},[M]);var Oc={},Uy;function II(){if(Uy)return Oc;Uy=1;var n=Pw();return Oc.createRoot=n.createRoot,Oc.hydrateRoot=n.hydrateRoot,Oc}var CI=II();const SI=ad(CI);Pw();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function wl(){return wl=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},wl.apply(this,arguments)}var is;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(is||(is={}));const By="popstate";function PI(n){n===void 0&&(n={});function e(i,s){let{pathname:r,search:o,hash:a}=i.location;return hf("",{pathname:r,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(i,s){return typeof s=="string"?s:Au(s)}return kI(e,t,null,n)}function ut(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Rw(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function RI(){return Math.random().toString(36).substr(2,8)}function zy(n,e){return{usr:n.state,key:n.key,idx:e}}function hf(n,e,t,i){return t===void 0&&(t=null),wl({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Wo(e):e,{state:t,key:e&&e.key||i||RI()})}function Au(n){let{pathname:e="/",search:t="",hash:i=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Wo(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substr(i),n=n.substr(0,i)),n&&(e.pathname=n)}return e}function kI(n,e,t,i){i===void 0&&(i={});let{window:s=document.defaultView,v5Compat:r=!1}=i,o=s.history,a=is.Pop,l=null,c=d();c==null&&(c=0,o.replaceState(wl({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function f(){a=is.Pop;let T=d(),x=T==null?null:T-c;c=T,l&&l({action:a,location:w.location,delta:x})}function m(T,x){a=is.Push;let P=hf(w.location,T,x);c=d()+1;let S=zy(P,c),L=w.createHref(P);try{o.pushState(S,"",L)}catch(F){if(F instanceof DOMException&&F.name==="DataCloneError")throw F;s.location.assign(L)}r&&l&&l({action:a,location:w.location,delta:1})}function y(T,x){a=is.Replace;let P=hf(w.location,T,x);c=d();let S=zy(P,c),L=w.createHref(P);o.replaceState(S,"",L),r&&l&&l({action:a,location:w.location,delta:0})}function v(T){let x=s.location.origin!=="null"?s.location.origin:s.location.href,P=typeof T=="string"?T:Au(T);return P=P.replace(/ $/,"%20"),ut(x,"No window.location.(origin|href) available to create URL for href: "+P),new URL(P,x)}let w={get action(){return a},get location(){return n(s,o)},listen(T){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(By,f),l=T,()=>{s.removeEventListener(By,f),l=null}},createHref(T){return e(s,T)},createURL:v,encodeLocation(T){let x=v(T);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:m,replace:y,go(T){return o.go(T)}};return w}var qy;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(qy||(qy={}));function NI(n,e,t){return t===void 0&&(t="/"),MI(n,e,t)}function MI(n,e,t,i){let s=typeof e=="string"?Wo(e):e,r=Pp(s.pathname||"/",t);if(r==null)return null;let o=kw(n);DI(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=jI(r);a=HI(o[l],c)}return a}function kw(n,e,t,i){e===void 0&&(e=[]),t===void 0&&(t=[]),i===void 0&&(i="");let s=(r,o,a)=>{let l={relativePath:a===void 0?r.path||"":a,caseSensitive:r.caseSensitive===!0,childrenIndex:o,route:r};l.relativePath.startsWith("/")&&(ut(l.relativePath.startsWith(i),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(i.length));let c=ls([i,l.relativePath]),d=t.concat(l);r.children&&r.children.length>0&&(ut(r.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),kw(r.children,e,d,c)),!(r.path==null&&!r.index)&&e.push({path:c,score:zI(c,r.index),routesMeta:d})};return n.forEach((r,o)=>{var a;if(r.path===""||!((a=r.path)!=null&&a.includes("?")))s(r,o);else for(let l of Nw(r.path))s(r,o,l)}),e}function Nw(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,s=t.endsWith("?"),r=t.replace(/\?$/,"");if(i.length===0)return s?[r,""]:[r];let o=Nw(i.join("/")),a=[];return a.push(...o.map(l=>l===""?r:[r,l].join("/"))),s&&a.push(...o),a.map(l=>n.startsWith("/")&&l===""?"/":l)}function DI(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:qI(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}const LI=/^:[\w-]+$/,FI=3,VI=2,OI=1,UI=10,BI=-2,Hy=n=>n==="*";function zI(n,e){let t=n.split("/"),i=t.length;return t.some(Hy)&&(i+=BI),e&&(i+=VI),t.filter(s=>!Hy(s)).reduce((s,r)=>s+(LI.test(r)?FI:r===""?OI:UI),i)}function qI(n,e){return n.length===e.length&&n.slice(0,-1).every((i,s)=>i===e[s])?n[n.length-1]-e[e.length-1]:0}function HI(n,e,t){let{routesMeta:i}=n,s={},r="/",o=[];for(let a=0;a<i.length;++a){let l=i[a],c=a===i.length-1,d=r==="/"?e:e.slice(r.length)||"/",f=GI({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),m=l.route;if(!f)return null;Object.assign(s,f.params),o.push({params:s,pathname:ls([r,f.pathname]),pathnameBase:JI(ls([r,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(r=ls([r,f.pathnameBase]))}return o}function GI(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=$I(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let r=s[0],o=r.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:i.reduce((c,d,f)=>{let{paramName:m,isOptional:y}=d;if(m==="*"){let w=a[f]||"";o=r.slice(0,r.length-w.length).replace(/(.)\/+$/,"$1")}const v=a[f];return y&&!v?c[m]=void 0:c[m]=(v||"").replace(/%2F/g,"/"),c},{}),pathname:r,pathnameBase:o,pattern:n}}function $I(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),Rw(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let i=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(i.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),i]}function jI(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Rw(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function Pp(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function WI(n,e){e===void 0&&(e="/");let{pathname:t,search:i="",hash:s=""}=typeof n=="string"?Wo(n):n;return{pathname:t?t.startsWith("/")?t:KI(t,e):e,search:XI(i),hash:QI(s)}}function KI(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function Sh(n,e,t,i){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function YI(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Rp(n,e){let t=YI(n);return e?t.map((i,s)=>s===t.length-1?i.pathname:i.pathnameBase):t.map(i=>i.pathnameBase)}function kp(n,e,t,i){i===void 0&&(i=!1);let s;typeof n=="string"?s=Wo(n):(s=wl({},n),ut(!s.pathname||!s.pathname.includes("?"),Sh("?","pathname","search",s)),ut(!s.pathname||!s.pathname.includes("#"),Sh("#","pathname","hash",s)),ut(!s.search||!s.search.includes("#"),Sh("#","search","hash",s)));let r=n===""||s.pathname==="",o=r?"/":s.pathname,a;if(o==null)a=t;else{let f=e.length-1;if(!i&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),f-=1;s.pathname=m.join("/")}a=f>=0?e[f]:"/"}let l=WI(s,a),c=o&&o!=="/"&&o.endsWith("/"),d=(r||o===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const ls=n=>n.join("/").replace(/\/\/+/g,"/"),JI=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),XI=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,QI=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function ZI(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const Mw=["post","put","patch","delete"];new Set(Mw);const eC=["get",...Mw];new Set(eC);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bl(){return bl=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},bl.apply(this,arguments)}const Np=M.createContext(null),tC=M.createContext(null),Ss=M.createContext(null),ld=M.createContext(null),fi=M.createContext({outlet:null,matches:[],isDataRoute:!1}),Dw=M.createContext(null);function nC(n,e){let{relative:t}=e===void 0?{}:e;Ko()||ut(!1);let{basename:i,navigator:s}=M.useContext(Ss),{hash:r,pathname:o,search:a}=Fw(n,{relative:t}),l=o;return i!=="/"&&(l=o==="/"?i:ls([i,o])),s.createHref({pathname:l,search:a,hash:r})}function Ko(){return M.useContext(ld)!=null}function Cr(){return Ko()||ut(!1),M.useContext(ld).location}function Lw(n){M.useContext(Ss).static||M.useLayoutEffect(n)}function Kl(){let{isDataRoute:n}=M.useContext(fi);return n?yC():iC()}function iC(){Ko()||ut(!1);let n=M.useContext(Np),{basename:e,future:t,navigator:i}=M.useContext(Ss),{matches:s}=M.useContext(fi),{pathname:r}=Cr(),o=JSON.stringify(Rp(s,t.v7_relativeSplatPath)),a=M.useRef(!1);return Lw(()=>{a.current=!0}),M.useCallback(function(c,d){if(d===void 0&&(d={}),!a.current)return;if(typeof c=="number"){i.go(c);return}let f=kp(c,JSON.parse(o),r,d.relative==="path");n==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:ls([e,f.pathname])),(d.replace?i.replace:i.push)(f,d.state,d)},[e,i,o,r,n])}const sC=M.createContext(null);function rC(n){let e=M.useContext(fi).outlet;return e&&M.createElement(sC.Provider,{value:n},e)}function yW(){let{matches:n}=M.useContext(fi),e=n[n.length-1];return e?e.params:{}}function Fw(n,e){let{relative:t}=e===void 0?{}:e,{future:i}=M.useContext(Ss),{matches:s}=M.useContext(fi),{pathname:r}=Cr(),o=JSON.stringify(Rp(s,i.v7_relativeSplatPath));return M.useMemo(()=>kp(n,JSON.parse(o),r,t==="path"),[n,o,r,t])}function oC(n,e){return aC(n,e)}function aC(n,e,t,i){Ko()||ut(!1);let{navigator:s}=M.useContext(Ss),{matches:r}=M.useContext(fi),o=r[r.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=Cr(),d;if(e){var f;let T=typeof e=="string"?Wo(e):e;l==="/"||(f=T.pathname)!=null&&f.startsWith(l)||ut(!1),d=T}else d=c;let m=d.pathname||"/",y=m;if(l!=="/"){let T=l.replace(/^\//,"").split("/");y="/"+m.replace(/^\//,"").split("/").slice(T.length).join("/")}let v=NI(n,{pathname:y}),w=hC(v&&v.map(T=>Object.assign({},T,{params:Object.assign({},a,T.params),pathname:ls([l,s.encodeLocation?s.encodeLocation(T.pathname).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?l:ls([l,s.encodeLocation?s.encodeLocation(T.pathnameBase).pathname:T.pathnameBase])})),r,t,i);return e&&w?M.createElement(ld.Provider,{value:{location:bl({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:is.Pop}},w):w}function lC(){let n=gC(),e=ZI(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},e),t?M.createElement("pre",{style:s},t):null,null)}const cC=M.createElement(lC,null);class uC extends M.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?M.createElement(fi.Provider,{value:this.props.routeContext},M.createElement(Dw.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function dC(n){let{routeContext:e,match:t,children:i}=n,s=M.useContext(Np);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),M.createElement(fi.Provider,{value:e},i)}function hC(n,e,t,i){var s;if(e===void 0&&(e=[]),t===void 0&&(t=null),i===void 0&&(i=null),n==null){var r;if(!t)return null;if(t.errors)n=t.matches;else if((r=i)!=null&&r.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,a=(s=t)==null?void 0:s.errors;if(a!=null){let d=o.findIndex(f=>f.route.id&&a?.[f.route.id]!==void 0);d>=0||ut(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,c=-1;if(t&&i&&i.v7_partialHydration)for(let d=0;d<o.length;d++){let f=o[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=d),f.route.id){let{loaderData:m,errors:y}=t,v=f.route.loader&&m[f.route.id]===void 0&&(!y||y[f.route.id]===void 0);if(f.route.lazy||v){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((d,f,m)=>{let y,v=!1,w=null,T=null;t&&(y=a&&f.route.id?a[f.route.id]:void 0,w=f.route.errorElement||cC,l&&(c<0&&m===0?(vC("route-fallback"),v=!0,T=null):c===m&&(v=!0,T=f.route.hydrateFallbackElement||null)));let x=e.concat(o.slice(0,m+1)),P=()=>{let S;return y?S=w:v?S=T:f.route.Component?S=M.createElement(f.route.Component,null):f.route.element?S=f.route.element:S=d,M.createElement(dC,{match:f,routeContext:{outlet:d,matches:x,isDataRoute:t!=null},children:S})};return t&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?M.createElement(uC,{location:t.location,revalidation:t.revalidation,component:w,error:y,children:P(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):P()},null)}var Vw=(function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n})(Vw||{}),Ow=(function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n})(Ow||{});function fC(n){let e=M.useContext(Np);return e||ut(!1),e}function pC(n){let e=M.useContext(tC);return e||ut(!1),e}function mC(n){let e=M.useContext(fi);return e||ut(!1),e}function Uw(n){let e=mC(),t=e.matches[e.matches.length-1];return t.route.id||ut(!1),t.route.id}function gC(){var n;let e=M.useContext(Dw),t=pC(),i=Uw();return e!==void 0?e:(n=t.errors)==null?void 0:n[i]}function yC(){let{router:n}=fC(Vw.UseNavigateStable),e=Uw(Ow.UseNavigateStable),t=M.useRef(!1);return Lw(()=>{t.current=!0}),M.useCallback(function(s,r){r===void 0&&(r={}),t.current&&(typeof s=="number"?n.navigate(s):n.navigate(s,bl({fromRouteId:e},r)))},[n,e])}const Gy={};function vC(n,e,t){Gy[n]||(Gy[n]=!0)}function _C(n,e){n?.v7_startTransition,n?.v7_relativeSplatPath}function Bw(n){let{to:e,replace:t,state:i,relative:s}=n;Ko()||ut(!1);let{future:r,static:o}=M.useContext(Ss),{matches:a}=M.useContext(fi),{pathname:l}=Cr(),c=Kl(),d=kp(e,Rp(a,r.v7_relativeSplatPath),l,s==="path"),f=JSON.stringify(d);return M.useEffect(()=>c(JSON.parse(f),{replace:t,state:i,relative:s}),[c,f,s,t,i]),null}function zw(n){return rC(n.context)}function oe(n){ut(!1)}function wC(n){let{basename:e="/",children:t=null,location:i,navigationType:s=is.Pop,navigator:r,static:o=!1,future:a}=n;Ko()&&ut(!1);let l=e.replace(/^\/*/,"/"),c=M.useMemo(()=>({basename:l,navigator:r,static:o,future:bl({v7_relativeSplatPath:!1},a)}),[l,a,r,o]);typeof i=="string"&&(i=Wo(i));let{pathname:d="/",search:f="",hash:m="",state:y=null,key:v="default"}=i,w=M.useMemo(()=>{let T=Pp(d,l);return T==null?null:{location:{pathname:T,search:f,hash:m,state:y,key:v},navigationType:s}},[l,d,f,m,y,v,s]);return w==null?null:M.createElement(Ss.Provider,{value:c},M.createElement(ld.Provider,{children:t,value:w}))}function bC(n){let{children:e,location:t}=n;return oC(ff(e),t)}new Promise(()=>{});function ff(n,e){e===void 0&&(e=[]);let t=[];return M.Children.forEach(n,(i,s)=>{if(!M.isValidElement(i))return;let r=[...e,s];if(i.type===M.Fragment){t.push.apply(t,ff(i.props.children,r));return}i.type!==oe&&ut(!1),!i.props.index||!i.props.children||ut(!1);let o={id:i.props.id||r.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(o.children=ff(i.props.children,r)),t.push(o)}),t}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function pf(){return pf=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},pf.apply(this,arguments)}function TC(n,e){if(n==null)return{};var t={},i=Object.keys(n),s,r;for(r=0;r<i.length;r++)s=i[r],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}function xC(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function EC(n,e){return n.button===0&&(!e||e==="_self")&&!xC(n)}const AC=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],IC="6";try{window.__reactRouterVersion=IC}catch{}const CC="startTransition",$y=AI[CC];function SC(n){let{basename:e,children:t,future:i,window:s}=n,r=M.useRef();r.current==null&&(r.current=PI({window:s,v5Compat:!0}));let o=r.current,[a,l]=M.useState({action:o.action,location:o.location}),{v7_startTransition:c}=i||{},d=M.useCallback(f=>{c&&$y?$y(()=>l(f)):l(f)},[l,c]);return M.useLayoutEffect(()=>o.listen(d),[o,d]),M.useEffect(()=>_C(i),[i]),M.createElement(wC,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:o,future:i})}const PC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",RC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,gt=M.forwardRef(function(e,t){let{onClick:i,relative:s,reloadDocument:r,replace:o,state:a,target:l,to:c,preventScrollReset:d,viewTransition:f}=e,m=TC(e,AC),{basename:y}=M.useContext(Ss),v,w=!1;if(typeof c=="string"&&RC.test(c)&&(v=c,PC))try{let S=new URL(window.location.href),L=c.startsWith("//")?new URL(S.protocol+c):new URL(c),F=Pp(L.pathname,y);L.origin===S.origin&&F!=null?c=F+L.search+L.hash:w=!0}catch{}let T=nC(c,{relative:s}),x=kC(c,{replace:o,state:a,target:l,preventScrollReset:d,relative:s,viewTransition:f});function P(S){i&&i(S),S.defaultPrevented||x(S)}return M.createElement("a",pf({},m,{href:v||T,onClick:w||r?i:P,ref:t,target:l}))});var jy;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(jy||(jy={}));var Wy;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(Wy||(Wy={}));function kC(n,e){let{target:t,replace:i,state:s,preventScrollReset:r,relative:o,viewTransition:a}=e===void 0?{}:e,l=Kl(),c=Cr(),d=Fw(n,{relative:o});return M.useCallback(f=>{if(EC(f,t)){f.preventDefault();let m=i!==void 0?i:Au(c)===Au(d);l(n,{replace:m,state:s,preventScrollReset:r,relative:o,viewTransition:a})}},[c,l,d,i,s,t,n,r,o,a])}const NC="modulepreload",MC=function(n){return"/"+n},Ky={},le=function(e,t,i){let s=Promise.resolve();if(t&&t.length>0){let l=function(c){return Promise.all(c.map(d=>Promise.resolve(d).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=o?.nonce||o?.getAttribute("nonce");s=l(t.map(c=>{if(c=MC(c),c in Ky)return;Ky[c]=!0;const d=c.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":NC,d||(m.as="script"),m.crossOrigin="",m.href=c,a&&m.setAttribute("nonce",a),document.head.appendChild(m),d)return new Promise((y,v)=>{m.addEventListener("load",y),m.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${c}`)))})}))}function r(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&r(a.reason);return e().catch(r)})},qw=M.createContext(void 0),DC=({children:n})=>{const[e,t]=M.useState(()=>{if(typeof window<"u"){const s=localStorage.getItem("theme");return s==="light"||s==="dark"?s:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}return"light"});M.useEffect(()=>{const s=window.document.documentElement;e==="dark"?s.classList.add("dark"):s.classList.remove("dark"),localStorage.setItem("theme",e)},[e]);const i=()=>{t(s=>s==="light"?"dark":"light")};return g.jsx(qw.Provider,{value:{theme:e,toggleTheme:i},children:n})},Hw=()=>{const n=M.useContext(qw);if(n===void 0)throw new Error("useTheme must be used within a ThemeProvider");return n},LC=()=>{};var Yy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gw=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let s=n.charCodeAt(i);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},FC=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const s=n[t++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const r=n[t++];e[i++]=String.fromCharCode((s&31)<<6|r&63)}else if(s>239&&s<365){const r=n[t++],o=n[t++],a=n[t++],l=((s&7)<<18|(r&63)<<12|(o&63)<<6|a&63)-65536;e[i++]=String.fromCharCode(55296+(l>>10)),e[i++]=String.fromCharCode(56320+(l&1023))}else{const r=n[t++],o=n[t++];e[i++]=String.fromCharCode((s&15)<<12|(r&63)<<6|o&63)}}return e.join("")},$w={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<n.length;s+=3){const r=n[s],o=s+1<n.length,a=o?n[s+1]:0,l=s+2<n.length,c=l?n[s+2]:0,d=r>>2,f=(r&3)<<4|a>>4;let m=(a&15)<<2|c>>6,y=c&63;l||(y=64,o||(m=64)),i.push(t[d],t[f],t[m],t[y])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Gw(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):FC(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<n.length;){const r=t[n.charAt(s++)],a=s<n.length?t[n.charAt(s)]:0;++s;const c=s<n.length?t[n.charAt(s)]:64;++s;const f=s<n.length?t[n.charAt(s)]:64;if(++s,r==null||a==null||c==null||f==null)throw new VC;const m=r<<2|a>>4;if(i.push(m),c!==64){const y=a<<4&240|c>>2;if(i.push(y),f!==64){const v=c<<6&192|f;i.push(v)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class VC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const OC=function(n){const e=Gw(n);return $w.encodeByteArray(e,!0)},Iu=function(n){return OC(n).replace(/\./g,"")},Mp=function(n){try{return $w.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Cu(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!UC(t)||(n[t]=Cu(n[t],e[t]));return n}function UC(n){return n!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dp(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BC=()=>Dp().__FIREBASE_DEFAULTS__,zC=()=>{if(typeof process>"u"||typeof Yy>"u")return;const n=Yy.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},qC=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Mp(n[1]);return e&&JSON.parse(e)},Lp=()=>{try{return LC()||BC()||zC()||qC()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Fp=()=>Lp()?.config,HC=n=>Lp()?.[`_${n}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ps(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Vp(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jw(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",s=n.iat||0,r=n.sub||n.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Iu(JSON.stringify(t)),Iu(JSON.stringify(o)),""].join(".")}const el={};function $C(){const n={prod:[],emulator:[]};for(const e of Object.keys(el))el[e]?n.emulator.push(e):n.prod.push(e);return n}function jC(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Jy=!1;function Op(n,e){if(typeof window>"u"||typeof document>"u"||!Ps(window.location.host)||el[n]===e||el[n]||Jy)return;el[n]=e;function t(m){return`__firebase__banner__${m}`}const i="__firebase__banner",r=$C().prod.length>0;function o(){const m=document.getElementById(i);m&&m.remove()}function a(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function l(m,y){m.setAttribute("width","24"),m.setAttribute("id",y),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function c(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{Jy=!0,o()},m}function d(m,y){m.setAttribute("id",y),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function f(){const m=jC(i),y=t("text"),v=document.getElementById(y)||document.createElement("span"),w=t("learnmore"),T=document.getElementById(w)||document.createElement("a"),x=t("preprendIcon"),P=document.getElementById(x)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const S=m.element;a(S),d(T,w);const L=c();l(P,x),S.append(P,v,T,L),document.body.appendChild(S)}r?(v.innerText="Preview backend disconnected.",P.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(P.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,v.innerText="Preview backend running in this workspace."),v.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function et(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function WC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(et())}function cd(){const n=Lp()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function KC(){return typeof window<"u"||Ww()}function Ww(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function YC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Kw(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Up(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Yw(){const n=et();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Jw(){return!cd()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Xw(){return!cd()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function Tl(){try{return typeof indexedDB=="object"}catch{return!1}}function JC(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{e(s.error?.message||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XC="FirebaseError";class Yt extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=XC,Object.setPrototypeOf(this,Yt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Sr.prototype.create)}}class Sr{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},s=`${this.service}/${e}`,r=this.errors[e],o=r?QC(r,i):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Yt(s,a,i)}}function QC(n,e){return n.replace(ZC,(t,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const ZC=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xy(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function eS(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function ms(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const s of t){if(!i.includes(s))return!1;const r=n[s],o=e[s];if(Qy(r)&&Qy(o)){if(!ms(r,o))return!1}else if(r!==o)return!1}for(const s of i)if(!t.includes(s))return!1;return!0}function Qy(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yo(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function ro(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[s,r]=i.split("=");e[decodeURIComponent(s)]=decodeURIComponent(r)}}),e}function Ga(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function Qw(n,e){const t=new tS(n,e);return t.subscribe.bind(t)}class tS{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let s;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");nS(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:i},s.next===void 0&&(s.next=Ph),s.error===void 0&&(s.error=Ph),s.complete===void 0&&(s.complete=Ph);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),r}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function nS(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Ph(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function se(n){return n&&n._delegate?n._delegate:n}class Ln{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ws="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new GC;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(rS(e))try{this.getOrInitializeService({instanceIdentifier:Ws})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const r=this.getOrInitializeService({instanceIdentifier:s});i.resolve(r)}catch{}}}}clearInstance(e=Ws){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ws){return this.instances.has(e)}getOptions(e=Ws){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[r,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);i===a&&o.resolve(s)}return s}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),s=this.onInitCallbacks.get(i)??new Set;s.add(e),this.onInitCallbacks.set(i,s);const r=this.instances.get(i);return r&&e(r,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const s of i)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:sS(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Ws){return this.component?this.component.multipleInstances?e:Ws:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function sS(n){return n===Ws?void 0:n}function rS(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new iS(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bp=[];var be;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(be||(be={}));const eb={debug:be.DEBUG,verbose:be.VERBOSE,info:be.INFO,warn:be.WARN,error:be.ERROR,silent:be.SILENT},oS=be.INFO,aS={[be.DEBUG]:"log",[be.VERBOSE]:"log",[be.INFO]:"info",[be.WARN]:"warn",[be.ERROR]:"error"},lS=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),s=aS[e];if(s)console[s](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ud{constructor(e){this.name=e,this._logLevel=oS,this._logHandler=lS,this._userLogHandler=null,Bp.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in be))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?eb[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,be.DEBUG,...e),this._logHandler(this,be.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,be.VERBOSE,...e),this._logHandler(this,be.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,be.INFO,...e),this._logHandler(this,be.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,be.WARN,...e),this._logHandler(this,be.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,be.ERROR,...e),this._logHandler(this,be.ERROR,...e)}}function cS(n){Bp.forEach(e=>{e.setLogLevel(n)})}function uS(n,e){for(const t of Bp){let i=null;e&&e.level&&(i=eb[e.level]),n===null?t.userLogHandler=null:t.userLogHandler=(s,r,...o)=>{const a=o.map(l=>{if(l==null)return null;if(typeof l=="string")return l;if(typeof l=="number"||typeof l=="boolean")return l.toString();if(l instanceof Error)return l.message;try{return JSON.stringify(l)}catch{return null}}).filter(l=>l).join(" ");r>=(i??s.logLevel)&&n({level:be[r].toLowerCase(),message:a,args:o,type:s.name})}}}const dS=(n,e)=>e.some(t=>n instanceof t);let Zy,ev;function hS(){return Zy||(Zy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function fS(){return ev||(ev=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const tb=new WeakMap,mf=new WeakMap,nb=new WeakMap,Rh=new WeakMap,zp=new WeakMap;function pS(n){const e=new Promise((t,i)=>{const s=()=>{n.removeEventListener("success",r),n.removeEventListener("error",o)},r=()=>{t(cs(n.result)),s()},o=()=>{i(n.error),s()};n.addEventListener("success",r),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&tb.set(t,n)}).catch(()=>{}),zp.set(e,n),e}function mS(n){if(mf.has(n))return;const e=new Promise((t,i)=>{const s=()=>{n.removeEventListener("complete",r),n.removeEventListener("error",o),n.removeEventListener("abort",o)},r=()=>{t(),s()},o=()=>{i(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",r),n.addEventListener("error",o),n.addEventListener("abort",o)});mf.set(n,e)}let gf={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return mf.get(n);if(e==="objectStoreNames")return n.objectStoreNames||nb.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return cs(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function gS(n){gf=n(gf)}function yS(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(kh(this),e,...t);return nb.set(i,e.sort?e.sort():[e]),cs(i)}:fS().includes(n)?function(...e){return n.apply(kh(this),e),cs(tb.get(this))}:function(...e){return cs(n.apply(kh(this),e))}}function vS(n){return typeof n=="function"?yS(n):(n instanceof IDBTransaction&&mS(n),dS(n,hS())?new Proxy(n,gf):n)}function cs(n){if(n instanceof IDBRequest)return pS(n);if(Rh.has(n))return Rh.get(n);const e=vS(n);return e!==n&&(Rh.set(n,e),zp.set(e,n)),e}const kh=n=>zp.get(n);function _S(n,e,{blocked:t,upgrade:i,blocking:s,terminated:r}={}){const o=indexedDB.open(n,e),a=cs(o);return i&&o.addEventListener("upgradeneeded",l=>{i(cs(o.result),l.oldVersion,l.newVersion,cs(o.transaction),l)}),t&&o.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),a.then(l=>{r&&l.addEventListener("close",()=>r()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const wS=["get","getKey","getAll","getAllKeys","count"],bS=["put","add","delete","clear"],Nh=new Map;function tv(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Nh.get(e))return Nh.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,s=bS.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(s||wS.includes(t)))return;const r=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return i&&(c=c.index(a.shift())),(await Promise.all([c[t](...a),s&&l.done]))[0]};return Nh.set(e,r),r}gS(n=>({...n,get:(e,t,i)=>tv(e,t)||n.get(e,t,i),has:(e,t)=>!!tv(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(xS(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function xS(n){return n.getComponent()?.type==="VERSION"}const Su="@firebase/app",yf="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ii=new ud("@firebase/app"),ES="@firebase/app-compat",AS="@firebase/analytics-compat",IS="@firebase/analytics",CS="@firebase/app-check-compat",SS="@firebase/app-check",PS="@firebase/auth",RS="@firebase/auth-compat",kS="@firebase/database",NS="@firebase/data-connect",MS="@firebase/database-compat",DS="@firebase/functions",LS="@firebase/functions-compat",FS="@firebase/installations",VS="@firebase/installations-compat",OS="@firebase/messaging",US="@firebase/messaging-compat",BS="@firebase/performance",zS="@firebase/performance-compat",qS="@firebase/remote-config",HS="@firebase/remote-config-compat",GS="@firebase/storage",$S="@firebase/storage-compat",jS="@firebase/firestore",WS="@firebase/ai",KS="@firebase/firestore-compat",YS="firebase",JS="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gs="[DEFAULT]",XS={[Su]:"fire-core",[ES]:"fire-core-compat",[IS]:"fire-analytics",[AS]:"fire-analytics-compat",[SS]:"fire-app-check",[CS]:"fire-app-check-compat",[PS]:"fire-auth",[RS]:"fire-auth-compat",[kS]:"fire-rtdb",[NS]:"fire-data-connect",[MS]:"fire-rtdb-compat",[DS]:"fire-fn",[LS]:"fire-fn-compat",[FS]:"fire-iid",[VS]:"fire-iid-compat",[OS]:"fire-fcm",[US]:"fire-fcm-compat",[BS]:"fire-perf",[zS]:"fire-perf-compat",[qS]:"fire-rc",[HS]:"fire-rc-compat",[GS]:"fire-gcs",[$S]:"fire-gcs-compat",[jS]:"fire-fst",[KS]:"fire-fst-compat",[WS]:"fire-vertex","fire-js":"fire-js",[YS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ys=new Map,To=new Map,xo=new Map;function xl(n,e){try{n.container.addComponent(e)}catch(t){Ii.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ib(n,e){n.container.addOrOverwriteComponent(e)}function Ci(n){const e=n.name;if(xo.has(e))return Ii.debug(`There were multiple attempts to register component ${e}.`),!1;xo.set(e,n);for(const t of ys.values())xl(t,n);for(const t of To.values())xl(t,n);return!0}function sb(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function QS(n,e,t=gs){sb(n,e).clearInstance(t)}function qp(n){return n.options!==void 0}function rb(n){return qp(n)?!1:"authIdToken"in n||"appCheckToken"in n||"releaseOnDeref"in n||"automaticDataCollectionEnabled"in n}function je(n){return n==null?!1:n.settings!==void 0}function ZS(){xo.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},In=new Sr("app","Firebase",eP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ob=class{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ln("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw In.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nv(n,e){const t=Mp(n.split(".")[1]);if(t===null){console.error(`FirebaseServerApp ${e} is invalid: second part could not be parsed.`);return}if(JSON.parse(t).exp===void 0){console.error(`FirebaseServerApp ${e} is invalid: expiration claim could not be parsed`);return}const s=JSON.parse(t).exp*1e3,r=new Date().getTime();s-r<=0&&console.error(`FirebaseServerApp ${e} is invalid: the token has expired.`)}class tP extends ob{constructor(e,t,i,s){const r=t.automaticDataCollectionEnabled!==void 0?t.automaticDataCollectionEnabled:!0,o={name:i,automaticDataCollectionEnabled:r};if(e.apiKey!==void 0)super(e,o,s);else{const a=e;super(a.options,o,s)}this._serverConfig={automaticDataCollectionEnabled:r,...t},this._serverConfig.authIdToken&&nv(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&nv(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,Cn(Su,yf,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Gp(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw In.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ki=JS;function Hp(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i={name:gs,automaticDataCollectionEnabled:!0,...e},s=i.name;if(typeof s!="string"||!s)throw In.create("bad-app-name",{appName:String(s)});if(t||(t=Fp()),!t)throw In.create("no-options");const r=ys.get(s);if(r){if(ms(t,r.options)&&ms(i,r.config))return r;throw In.create("duplicate-app",{appName:s})}const o=new Zw(s);for(const l of xo.values())o.addComponent(l);const a=new ob(t,i,o);return ys.set(s,a),a}function nP(n,e={}){if(KC()&&!Ww())throw In.create("invalid-server-app-environment");let t,i=e||{};if(n&&(qp(n)?t=n.options:rb(n)?i=n:t=n),i.automaticDataCollectionEnabled===void 0&&(i.automaticDataCollectionEnabled=!0),t||(t=Fp()),!t)throw In.create("no-options");const s={...i,...t};s.releaseOnDeref!==void 0&&delete s.releaseOnDeref;const r=d=>[...d].reduce((f,m)=>Math.imul(31,f)+m.charCodeAt(0)|0,0);if(i.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw In.create("finalization-registry-not-supported",{});const o=""+r(JSON.stringify(s)),a=To.get(o);if(a)return a.incRefCount(i.releaseOnDeref),a;const l=new Zw(o);for(const d of xo.values())l.addComponent(d);const c=new tP(t,i,o,l);return To.set(o,c),c}function iP(n=gs){const e=ys.get(n);if(!e&&n===gs&&Fp())return Hp();if(!e)throw In.create("no-app",{appName:n});return e}function sP(){return Array.from(ys.values())}async function Gp(n){let e=!1;const t=n.name;ys.has(t)?(e=!0,ys.delete(t)):To.has(t)&&n.decRefCount()<=0&&(To.delete(t),e=!0),e&&(await Promise.all(n.container.getProviders().map(i=>i.delete())),n.isDeleted=!0)}function Cn(n,e,t){let i=XS[n]??n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),r=e.match(/\s|\//);if(s||r){const o=[`Unable to register library "${i}" with version "${e}":`];s&&o.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&r&&o.push("and"),r&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ii.warn(o.join(" "));return}Ci(new Ln(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function ab(n,e){if(n!==null&&typeof n!="function")throw In.create("invalid-log-argument");uS(n,e)}function lb(n){cS(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rP="firebase-heartbeat-database",oP=1,El="firebase-heartbeat-store";let Mh=null;function cb(){return Mh||(Mh=_S(rP,oP,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(El)}catch(t){console.warn(t)}}}}).catch(n=>{throw In.create("idb-open",{originalErrorMessage:n.message})})),Mh}async function aP(n){try{const t=(await cb()).transaction(El),i=await t.objectStore(El).get(ub(n));return await t.done,i}catch(e){if(e instanceof Yt)Ii.warn(e.message);else{const t=In.create("idb-get",{originalErrorMessage:e?.message});Ii.warn(t.message)}}}async function iv(n,e){try{const i=(await cb()).transaction(El,"readwrite");await i.objectStore(El).put(e,ub(n)),await i.done}catch(t){if(t instanceof Yt)Ii.warn(t.message);else{const i=In.create("idb-set",{originalErrorMessage:t?.message});Ii.warn(i.message)}}}function ub(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lP=1024,cP=30;class uP{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new hP(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=sv();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(s=>s.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:t}),this._heartbeatsCache.heartbeats.length>cP){const s=fP(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Ii.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=sv(),{heartbeatsToSend:t,unsentEntries:i}=dP(this._heartbeatsCache.heartbeats),s=Iu(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return Ii.warn(e),""}}}function sv(){return new Date().toISOString().substring(0,10)}function dP(n,e=lP){const t=[];let i=n.slice();for(const s of n){const r=t.find(o=>o.agent===s.agent);if(r){if(r.dates.push(s.date),rv(t)>e){r.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),rv(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class hP{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Tl()?JC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await aP(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return iv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return iv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function rv(n){return Iu(JSON.stringify({version:2,heartbeats:n})).length}function fP(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pP(n){Ci(new Ln("platform-logger",e=>new TS(e),"PRIVATE")),Ci(new Ln("heartbeat",e=>new uP(e),"PRIVATE")),Cn(Su,yf,n),Cn(Su,yf,"esm2020"),Cn("fire-js","")}pP("");const mP=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Yt,SDK_VERSION:ki,_DEFAULT_ENTRY_NAME:gs,_addComponent:xl,_addOrOverwriteComponent:ib,_apps:ys,_clearComponents:ZS,_components:xo,_getProvider:sb,_isFirebaseApp:qp,_isFirebaseServerApp:je,_isFirebaseServerAppSettings:rb,_registerComponent:Ci,_removeServiceInstance:QS,_serverApps:To,deleteApp:Gp,getApp:iP,getApps:sP,initializeApp:Hp,initializeServerApp:nP,onLog:ab,registerVersion:Cn,setLogLevel:lb},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP{constructor(e,t){this._delegate=e,this.firebase=t,xl(e,new Ln("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),Gp(this._delegate)))}_getService(e,t=gs){this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return!i.isInitialized()&&i.getComponent()?.instantiationMode==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:t})}_removeServiceInstance(e,t=gs){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){xl(this._delegate,e)}_addOrOverwriteComponent(e){ib(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yP={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},ov=new Sr("app-compat","Firebase",yP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vP(n){const e={},t={__esModule:!0,initializeApp:r,app:s,registerVersion:Cn,setLogLevel:lb,onLog:ab,apps:null,SDK_VERSION:ki,INTERNAL:{registerComponent:a,removeApp:i,useAsService:l,modularAPIs:mP}};t.default=t,Object.defineProperty(t,"apps",{get:o});function i(c){delete e[c]}function s(c){if(c=c||gs,!Xy(e,c))throw ov.create("no-app",{appName:c});return e[c]}s.App=n;function r(c,d={}){const f=Hp(c,d);if(Xy(e,f.name))return e[f.name];const m=new n(f,t);return e[f.name]=m,m}function o(){return Object.keys(e).map(c=>e[c])}function a(c){const d=c.name,f=d.replace("-compat","");if(Ci(c)&&c.type==="PUBLIC"){const m=(y=s())=>{if(typeof y[f]!="function")throw ov.create("invalid-app-argument",{appName:d});return y[f]()};c.serviceProps!==void 0&&Cu(m,c.serviceProps),t[f]=m,n.prototype[f]=function(...y){return this._getService.bind(this,d).apply(this,c.multipleInstances?y:[])}}return c.type==="PUBLIC"?t[f]:null}function l(c,d){return d==="serverAuth"?null:d}return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function db(){const n=vP(gP);n.INTERNAL={...n.INTERNAL,createFirebaseNamespace:db,extendNamespace:e,createSubscribe:Qw,ErrorFactory:Sr,deepExtend:Cu};function e(t){Cu(n,t)}return n}const _P=db();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const av=new ud("@firebase/app-compat"),wP="@firebase/app-compat",bP="0.5.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TP(n){Cn(wP,bP,n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const n=Dp();if(n.firebase!==void 0){av.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=n.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&av.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const an=_P;TP();var xP="firebase",EP="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */an.registerVersion(xP,EP,"app-compat");const Pa={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",TWITTER:"twitter.com"},Gr={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AP(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements.","invalid-hosting-link-domain":"The provided Hosting link domain is not configured in Firebase Hosting or is not owned by the current project. This cannot be a default Hosting domain (`web.app` or `firebaseapp.com`)."}}function hb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const IP=AP,CP=hb,fb=new Sr("auth","Firebase",hb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pu=new ud("@firebase/auth");function SP(n,...e){Pu.logLevel<=be.WARN&&Pu.warn(`Auth (${ki}): ${n}`,...e)}function ou(n,...e){Pu.logLevel<=be.ERROR&&Pu.error(`Auth (${ki}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vt(n,...e){throw jp(n,...e)}function Tt(n,...e){return jp(n,...e)}function $p(n,e,t){const i={...CP(),[e]:t};return new Sr("auth","Firebase",i).create(e,{appName:n.name})}function Rt(n){return $p(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Jo(n,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&Vt(n,"argument-error"),$p(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function jp(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return fb.create(n,...e)}function j(n,e,...t){if(!n)throw jp(e,...t)}function ii(n){const e="INTERNAL ASSERTION FAILED: "+n;throw ou(e),new Error(e)}function Gn(n,e){n||ii(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Al(){return typeof self<"u"&&self.location?.href||""}function Wp(){return lv()==="http:"||lv()==="https:"}function lv(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PP(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Wp()||Kw()||"connection"in navigator)?navigator.onLine:!0}function RP(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl{constructor(e,t){this.shortDelay=e,this.longDelay=t,Gn(t>e,"Short delay should be less than long delay!"),this.isMobile=WC()||Up()}get(){return PP()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kp(n,e){Gn(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pb{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ii("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ii("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ii("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NP=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],MP=new Yl(3e4,6e4);function rt(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function ot(n,e,t,i,s={}){return mb(n,s,async()=>{let r={},o={};i&&(e==="GET"?o=i:r={body:JSON.stringify(i)});const a=Yo({key:n.config.apiKey,...o}).slice(1),l=await n._getAdditionalHeaders();l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode);const c={method:e,headers:l,...r};return YC()||(c.referrerPolicy="no-referrer"),n.emulatorConfig&&Ps(n.emulatorConfig.host)&&(c.credentials="include"),pb.fetch()(await gb(n,n.config.apiHost,t,a),c)})}async function mb(n,e,t){n._canInitEmulator=!1;const i={...kP,...e};try{const s=new LP(n),r=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const o=await r.json();if("needConfirmation"in o)throw $a(n,"account-exists-with-different-credential",o);if(r.ok&&!("errorMessage"in o))return o;{const a=r.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw $a(n,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw $a(n,"email-already-in-use",o);if(l==="USER_DISABLED")throw $a(n,"user-disabled",o);const d=i[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw $p(n,d,c);Vt(n,d)}}catch(s){if(s instanceof Yt)throw s;Vt(n,"network-request-failed",{message:String(s)})}}async function Ni(n,e,t,i,s={}){const r=await ot(n,e,t,i,s);return"mfaPendingCredential"in r&&Vt(n,"multi-factor-auth-required",{_serverResponse:r}),r}async function gb(n,e,t,i){const s=`${e}${t}?${i}`,r=n,o=r.config.emulator?Kp(n.config,s):`${n.config.apiScheme}://${s}`;return NP.includes(t)&&(await r._persistenceManagerAvailable,r._getPersistenceType()==="COOKIE")?r._getPersistence()._getFinalTarget(o).toString():o}function DP(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class LP{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Tt(this.auth,"network-request-failed")),MP.get())})}}function $a(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const s=Tt(n,e,i);return s.customData._tokenResponse=t,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cv(n){return n!==void 0&&n.getResponse!==void 0}function uv(n){return n!==void 0&&n.enterprise!==void 0}class yb{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return DP(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FP(n){return(await ot(n,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function vb(n,e){return ot(n,"GET","/v2/recaptchaConfig",rt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VP(n,e){return ot(n,"POST","/v1/accounts:delete",e)}async function OP(n,e){return ot(n,"POST","/v1/accounts:update",e)}async function Ru(n,e){return ot(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tl(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function UP(n,e=!1){const t=se(n),i=await t.getIdToken(e),s=dd(i);j(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const r=typeof s.firebase=="object"?s.firebase:void 0,o=r?.sign_in_provider;return{claims:s,token:i,authTime:tl(Dh(s.auth_time)),issuedAtTime:tl(Dh(s.iat)),expirationTime:tl(Dh(s.exp)),signInProvider:o||null,signInSecondFactor:r?.sign_in_second_factor||null}}function Dh(n){return Number(n)*1e3}function dd(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return ou("JWT malformed, contained fewer than 3 sections"),null;try{const s=Mp(t);return s?JSON.parse(s):(ou("Failed to decode base64 JWT payload"),null)}catch(s){return ou("Caught error parsing JWT payload as JSON",s?.toString()),null}}function dv(n){const e=dd(n);return j(e,"internal-error"),j(typeof e.exp<"u","internal-error"),j(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Si(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Yt&&BP(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function BP({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zP{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=tl(this.lastLoginAt),this.creationTime=tl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Il(n){const e=n.auth,t=await n.getIdToken(),i=await Si(n,Ru(e,{idToken:t}));j(i?.users.length,e,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const r=s.providerUserInfo?.length?_b(s.providerUserInfo):[],o=HP(n.providerData,r),a=n.isAnonymous,l=!(n.email&&s.passwordHash)&&!o?.length,c=a?l:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new vf(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(n,d)}async function qP(n){const e=se(n);await Il(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function HP(n,e){return[...n.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function _b(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GP(n,e){const t=await mb(n,{},async()=>{const i=Yo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:r}=n.config,o=await gb(n,s,"/v1/token",`key=${r}`),a=await n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:i};return n.emulatorConfig&&Ps(n.emulatorConfig.host)&&(l.credentials="include"),pb.fetch()(o,l)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function $P(n,e){return ot(n,"POST","/v2/accounts:revokeToken",rt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){j(e.idToken,"internal-error"),j(typeof e.idToken<"u","internal-error"),j(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):dv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){j(e.length!==0,"internal-error");const t=dv(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(j(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:s,expiresIn:r}=await GP(e,t);this.updateTokensAndExpiration(i,s,Number(r))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:s,expirationTime:r}=t,o=new lo;return i&&(j(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),s&&(j(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),r&&(j(typeof r=="number","internal-error",{appName:e}),o.expirationTime=r),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new lo,this.toJSON())}_performRefresh(){return ii("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yi(n,e){j(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class zn{constructor({uid:e,auth:t,stsTokenManager:i,...s}){this.providerId="firebase",this.proactiveRefresh=new zP(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new vf(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await Si(this,this.stsTokenManager.getToken(this.auth,e));return j(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return UP(this,e)}reload(){return qP(this)}_assign(e){this!==e&&(j(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new zn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){j(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Il(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(je(this.auth.app))return Promise.reject(Rt(this.auth));const e=await this.getIdToken();return await Si(this,VP(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,s=t.email??void 0,r=t.phoneNumber??void 0,o=t.photoURL??void 0,a=t.tenantId??void 0,l=t._redirectEventId??void 0,c=t.createdAt??void 0,d=t.lastLoginAt??void 0,{uid:f,emailVerified:m,isAnonymous:y,providerData:v,stsTokenManager:w}=t;j(f&&w,e,"internal-error");const T=lo.fromJSON(this.name,w);j(typeof f=="string",e,"internal-error"),Yi(i,e.name),Yi(s,e.name),j(typeof m=="boolean",e,"internal-error"),j(typeof y=="boolean",e,"internal-error"),Yi(r,e.name),Yi(o,e.name),Yi(a,e.name),Yi(l,e.name),Yi(c,e.name),Yi(d,e.name);const x=new zn({uid:f,auth:e,email:s,emailVerified:m,displayName:i,isAnonymous:y,photoURL:o,phoneNumber:r,tenantId:a,stsTokenManager:T,createdAt:c,lastLoginAt:d});return v&&Array.isArray(v)&&(x.providerData=v.map(P=>({...P}))),l&&(x._redirectEventId=l),x}static async _fromIdTokenResponse(e,t,i=!1){const s=new lo;s.updateFromServerResponse(t);const r=new zn({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await Il(r),r}static async _fromGetAccountInfoResponse(e,t,i){const s=t.users[0];j(s.localId!==void 0,"internal-error");const r=s.providerUserInfo!==void 0?_b(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!r?.length,a=new lo;a.updateFromIdToken(i);const l=new zn({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:r,metadata:new vf(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!r?.length};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hv=new Map;function An(n){Gn(n instanceof Function,"Expected a class definition");let e=hv.get(n);return e?(Gn(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,hv.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}wb.type="NONE";const Eo=wb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ar(n,e,t){return`firebase:${n}:${e}:${t}`}class co{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:s,name:r}=this.auth;this.fullUserKey=ar(this.userKey,s.apiKey,r),this.fullPersistenceKey=ar("persistence",s.apiKey,r),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Ru(this.auth,{idToken:e}).catch(()=>{});return t?zn._fromGetAccountInfoResponse(this.auth,t,e):null}return zn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new co(An(Eo),e,i);const s=(await Promise.all(t.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let r=s[0]||An(Eo);const o=ar(i,e.config.apiKey,e.name);let a=null;for(const c of t)try{const d=await c._get(o);if(d){let f;if(typeof d=="string"){const m=await Ru(e,{idToken:d}).catch(()=>{});if(!m)break;f=await zn._fromGetAccountInfoResponse(e,m,d)}else f=zn._fromJSON(e,d);c!==r&&(a=f),r=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!r._shouldAllowMigration||!l.length?new co(r,e,i):(r=l[0],a&&await r._set(o,a.toJSON()),await Promise.all(t.map(async c=>{if(c!==r)try{await c._remove(o)}catch{}})),new co(r,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fv(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Eb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(bb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Ab(e))return"Blackberry";if(Ib(e))return"Webos";if(Tb(e))return"Safari";if((e.includes("chrome/")||xb(e))&&!e.includes("edge/"))return"Chrome";if(Jl(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function bb(n=et()){return/firefox\//i.test(n)}function Tb(n=et()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function xb(n=et()){return/crios\//i.test(n)}function Eb(n=et()){return/iemobile/i.test(n)}function Jl(n=et()){return/android/i.test(n)}function Ab(n=et()){return/blackberry/i.test(n)}function Ib(n=et()){return/webos/i.test(n)}function Xl(n=et()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function jP(n=et()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(n)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(n)}function WP(n=et()){return Xl(n)&&!!window.navigator?.standalone}function KP(){return Yw()&&document.documentMode===10}function Cb(n=et()){return Xl(n)||Jl(n)||Ib(n)||Ab(n)||/windows phone/i.test(n)||Eb(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sb(n,e=[]){let t;switch(n){case"Browser":t=fv(et());break;case"Worker":t=`${fv(et())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ki}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YP{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=r=>new Promise((o,a)=>{try{const l=e(r);o(l)}catch(l){a(l)}});i.onAbort=t,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JP(n,e={}){return ot(n,"GET","/v2/passwordPolicy",rt(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XP=6;class QP{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??XP,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,s,r){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZP{constructor(e,t,i,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new pv(this),this.idTokenSubscription=new pv(this),this.beforeStateQueue=new YP(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=fb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(r=>this._resolvePersistenceManagerAvailable=r)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=An(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await co.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Ru(this,{idToken:e}),i=await zn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(je(this.app)){const r=this.app.settings.authIdToken;return r?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(r).then(o,o))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const r=this.redirectUser?._redirectEventId,o=i?._redirectEventId,a=await this.tryRedirectSignIn(e);(!r||r===o)&&a?.user&&(i=a.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(r){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(r))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return j(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Il(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=RP()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(je(this.app))return Promise.reject(Rt(this));const t=e?se(e):null;return t&&j(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&j(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return je(this.app)?Promise.reject(Rt(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return je(this.app)?Promise.reject(Rt(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(An(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await JP(this),t=new QP(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Sr("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await $P(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&An(e)||this._popupRedirectResolver;j(t,this,"argument-error"),this.redirectPersistenceManager=await co.create(this,[An(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,s){if(this._deleted)return()=>{};const r=typeof t=="function"?t:t.next.bind(t);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(j(a,this,"internal-error"),a.then(()=>{o||r(this.currentUser)}),typeof t=="function"){const l=e.addObserver(t,i,s);return()=>{o=!0,l()}}else{const l=e.addObserver(t);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return j(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Sb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(je(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&SP(`Error while retrieving App Check token: ${e.error}`),e?.token}}function tt(n){return se(n)}class pv{constructor(e){this.auth=e,this.observer=null,this.addObserver=Qw(t=>this.observer=t)}get next(){return j(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ql={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function eR(n){Ql=n}function Yp(n){return Ql.loadJS(n)}function tR(){return Ql.recaptchaV2Script}function nR(){return Ql.recaptchaEnterpriseScript}function iR(){return Ql.gapiScript}function Pb(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sR=500,rR=6e4,Uc=1e12;class oR{constructor(e){this.auth=e,this.counter=Uc,this._widgets=new Map}render(e,t){const i=this.counter;return this._widgets.set(i,new cR(e,this.auth.name,t||{})),this.counter++,i}reset(e){const t=e||Uc;this._widgets.get(t)?.delete(),this._widgets.delete(t)}getResponse(e){const t=e||Uc;return this._widgets.get(t)?.getResponse()||""}async execute(e){const t=e||Uc;return this._widgets.get(t)?.execute(),""}}class aR{constructor(){this.enterprise=new lR}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class lR{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class cR{constructor(e,t,i){this.params=i,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const s=typeof e=="string"?document.getElementById(e):e;j(s,"argument-error",{appName:t}),this.container=s,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=uR(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch{}this.isVisible&&this.execute()},rR)},sR))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function uR(n){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let i=0;i<n;i++)e.push(t.charAt(Math.floor(Math.random()*t.length)));return e.join("")}const dR="recaptcha-enterprise",nl="NO_RECAPTCHA";class Rb{constructor(e){this.type=dR,this.auth=tt(e)}async verify(e="verify",t=!1){async function i(r){if(!t){if(r.tenantId==null&&r._agentRecaptchaConfig!=null)return r._agentRecaptchaConfig.siteKey;if(r.tenantId!=null&&r._tenantRecaptchaConfigs[r.tenantId]!==void 0)return r._tenantRecaptchaConfigs[r.tenantId].siteKey}return new Promise(async(o,a)=>{vb(r,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new yb(l);return r.tenantId==null?r._agentRecaptchaConfig=c:r._tenantRecaptchaConfigs[r.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function s(r,o,a){const l=window.grecaptcha;uv(l)?l.enterprise.ready(()=>{l.enterprise.execute(r,{action:e}).then(c=>{o(c)}).catch(()=>{o(nl)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new aR().execute("siteKey",{action:"verify"}):new Promise((r,o)=>{i(this.auth).then(a=>{if(!t&&uv(window.grecaptcha))s(a,r,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=nR();l.length!==0&&(l+=a),Yp(l).then(()=>{s(a,r,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function Ra(n,e,t,i=!1,s=!1){const r=new Rb(n);let o;if(s)o=nl;else try{o=await r.verify(t)}catch{o=await r.verify(t,!0)}const a={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return i?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function us(n,e,t,i,s){if(s==="EMAIL_PASSWORD_PROVIDER")if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const r=await Ra(n,e,t,t==="getOobCode");return i(n,r)}else return i(n,e).catch(async r=>{if(r.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await Ra(n,e,t,t==="getOobCode");return i(n,o)}else return Promise.reject(r)});else if(s==="PHONE_PROVIDER")if(n._getRecaptchaConfig()?.isProviderEnabled("PHONE_PROVIDER")){const r=await Ra(n,e,t);return i(n,r).catch(async o=>{if(n._getRecaptchaConfig()?.getProviderEnforcementState("PHONE_PROVIDER")==="AUDIT"&&(o.code==="auth/missing-recaptcha-token"||o.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);const a=await Ra(n,e,t,!1,!0);return i(n,a)}return Promise.reject(o)})}else{const r=await Ra(n,e,t,!1,!0);return i(n,r)}else return Promise.reject(s+" provider is not supported.")}async function hR(n){const e=tt(n),t=await vb(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),i=new yb(t);e.tenantId==null?e._agentRecaptchaConfig=i:e._tenantRecaptchaConfigs[e.tenantId]=i,i.isAnyProviderEnabled()&&new Rb(e).verify()}function fR(n,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(An);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function pR(n,e,t){const i=tt(n);j(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!!t?.disableWarnings,r=kb(e),{host:o,port:a}=mR(e),l=a===null?"":`:${a}`,c={url:`${r}//${o}${l}/`},d=Object.freeze({host:o,port:a,protocol:r.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){j(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),j(ms(c,i.config.emulator)&&ms(d,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=c,i.emulatorConfig=d,i.settings.appVerificationDisabledForTesting=!0,Ps(o)?(Vp(`${r}//${o}${l}`),Op("Auth",!0)):s||gR()}function kb(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function mR(n){const e=kb(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const r=s[1];return{host:r,port:mv(i.substr(r.length+1))}}else{const[r,o]=i.split(":");return{host:r,port:mv(o)}}}function mv(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function gR(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ii("not implemented")}_getIdTokenResponse(e){return ii("not implemented")}_linkToIdToken(e,t){return ii("not implemented")}_getReauthenticationResolver(e){return ii("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nb(n,e){return ot(n,"POST","/v1/accounts:resetPassword",rt(n,e))}async function yR(n,e){return ot(n,"POST","/v1/accounts:update",e)}async function vR(n,e){return ot(n,"POST","/v1/accounts:signUp",e)}async function _R(n,e){return ot(n,"POST","/v1/accounts:update",rt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wR(n,e){return Ni(n,"POST","/v1/accounts:signInWithPassword",rt(n,e))}async function hd(n,e){return ot(n,"POST","/v1/accounts:sendOobCode",rt(n,e))}async function bR(n,e){return hd(n,e)}async function TR(n,e){return hd(n,e)}async function xR(n,e){return hd(n,e)}async function ER(n,e){return hd(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AR(n,e){return Ni(n,"POST","/v1/accounts:signInWithEmailLink",rt(n,e))}async function IR(n,e){return Ni(n,"POST","/v1/accounts:signInWithEmailLink",rt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl extends Xo{constructor(e,t,i,s=null){super("password",i),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new Cl(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new Cl(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return us(e,t,"signInWithPassword",wR,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return AR(e,{email:this._email,oobCode:this._password});default:Vt(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return us(e,i,"signUpPassword",vR,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return IR(e,{idToken:t,email:this._email,oobCode:this._password});default:Vt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ei(n,e){return Ni(n,"POST","/v1/accounts:signInWithIdp",rt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CR="http://localhost";class ui extends Xo{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ui(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Vt("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s,...r}=t;if(!i||!s)return null;const o=new ui(i,s);return o.idToken=r.idToken||void 0,o.accessToken=r.accessToken||void 0,o.secret=r.secret,o.nonce=r.nonce,o.pendingToken=r.pendingToken||null,o}_getIdTokenResponse(e){const t=this.buildRequest();return Ei(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Ei(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ei(e,t)}buildRequest(){const e={requestUri:CR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Yo(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gv(n,e){return ot(n,"POST","/v1/accounts:sendVerificationCode",rt(n,e))}async function SR(n,e){return Ni(n,"POST","/v1/accounts:signInWithPhoneNumber",rt(n,e))}async function PR(n,e){const t=await Ni(n,"POST","/v1/accounts:signInWithPhoneNumber",rt(n,e));if(t.temporaryProof)throw $a(n,"account-exists-with-different-credential",t);return t}const RR={USER_NOT_FOUND:"user-not-found"};async function kR(n,e){const t={...e,operation:"REAUTH"};return Ni(n,"POST","/v1/accounts:signInWithPhoneNumber",rt(n,t),RR)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr extends Xo{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new lr({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new lr({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return SR(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return PR(e,{idToken:t,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return kR(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:i,verificationCode:s}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:i,code:s}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:t,verificationCode:i,phoneNumber:s,temporaryProof:r}=e;return!i&&!t&&!s&&!r?null:new lr({verificationId:t,verificationCode:i,phoneNumber:s,temporaryProof:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NR(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function MR(n){const e=ro(Ga(n)).link,t=e?ro(Ga(e)).deep_link_id:null,i=ro(Ga(n)).deep_link_id;return(i?ro(Ga(i)).link:null)||i||t||e||n}class fd{constructor(e){const t=ro(Ga(e)),i=t.apiKey??null,s=t.oobCode??null,r=NR(t.mode??null);j(i&&s&&r,"argument-error"),this.apiKey=i,this.operation=r,this.code=s,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=MR(e);try{return new fd(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs{constructor(){this.providerId=Rs.PROVIDER_ID}static credential(e,t){return Cl._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=fd.parseLink(t);return j(i,"argument-error"),Cl._fromEmailAndCode(e,i.code,i.tenantId)}}Rs.PROVIDER_ID="password";Rs.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Rs.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo extends Mi{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class uo extends Qo{static credentialFromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;return j("providerId"in t&&"signInMethod"in t,"argument-error"),ui._fromParams(t)}credential(e){return this._credential({...e,nonce:e.rawNonce})}_credential(e){return j(e.idToken||e.accessToken,"argument-error"),ui._fromParams({...e,providerId:this.providerId,signInMethod:this.providerId})}static credentialFromResult(e){return uo.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return uo.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i,oauthTokenSecret:s,pendingToken:r,nonce:o,providerId:a}=e;if(!i&&!s&&!t&&!r||!a)return null;try{return new uo(a)._credential({idToken:t,accessToken:i,nonce:o,pendingToken:r})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn extends Qo{constructor(){super("facebook.com")}static credential(e){return ui._fromParams({providerId:Qn.PROVIDER_ID,signInMethod:Qn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Qn.credentialFromTaggedObject(e)}static credentialFromError(e){return Qn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Qn.credential(e.oauthAccessToken)}catch{return null}}}Qn.FACEBOOK_SIGN_IN_METHOD="facebook.com";Qn.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn extends Qo{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ui._fromParams({providerId:Zn.PROVIDER_ID,signInMethod:Zn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Zn.credentialFromTaggedObject(e)}static credentialFromError(e){return Zn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Zn.credential(t,i)}catch{return null}}}Zn.GOOGLE_SIGN_IN_METHOD="google.com";Zn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei extends Qo{constructor(){super("github.com")}static credential(e){return ui._fromParams({providerId:ei.PROVIDER_ID,signInMethod:ei.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ei.credentialFromTaggedObject(e)}static credentialFromError(e){return ei.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ei.credential(e.oauthAccessToken)}catch{return null}}}ei.GITHUB_SIGN_IN_METHOD="github.com";ei.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DR="http://localhost";class Ao extends Xo{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){const t=this.buildRequest();return Ei(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Ei(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ei(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s,pendingToken:r}=t;return!i||!s||!r||i!==s?null:new Ao(i,r)}static _create(e,t){return new Ao(e,t)}buildRequest(){return{requestUri:DR,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LR="saml.";class ku extends Mi{constructor(e){j(e.startsWith(LR),"argument-error"),super(e)}static credentialFromResult(e){return ku.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return ku.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=Ao.fromJSON(e);return j(t,"argument-error"),t}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:t,providerId:i}=e;if(!t||!i)return null;try{return Ao._create(i,t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti extends Qo{constructor(){super("twitter.com")}static credential(e,t){return ui._fromParams({providerId:ti.PROVIDER_ID,signInMethod:ti.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ti.credentialFromTaggedObject(e)}static credentialFromError(e){return ti.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return ti.credential(t,i)}catch{return null}}}ti.TWITTER_SIGN_IN_METHOD="twitter.com";ti.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mb(n,e){return Ni(n,"POST","/v1/accounts:signUp",rt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,s=!1){const r=await zn._fromIdTokenResponse(e,i,s),o=yv(i);return new Fn({user:r,providerId:o,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const s=yv(i);return new Fn({user:e,providerId:s,_tokenResponse:i,operationType:t})}}function yv(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FR(n){if(je(n.app))return Promise.reject(Rt(n));const e=tt(n);if(await e._initializationPromise,e.currentUser?.isAnonymous)return new Fn({user:e.currentUser,providerId:null,operationType:"signIn"});const t=await Mb(e,{returnSecureToken:!0}),i=await Fn._fromIdTokenResponse(e,"signIn",t,!0);return await e._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu extends Yt{constructor(e,t,i,s){super(t.code,t.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,Nu.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,s){return new Nu(e,t,i,s)}}function Db(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(r=>{throw r.code==="auth/multi-factor-auth-required"?Nu._fromErrorAndOperation(n,r,e,i):r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lb(n){return new Set(n.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VR(n,e){const t=se(n);await pd(!0,t,e);const{providerUserInfo:i}=await OP(t.auth,{idToken:await t.getIdToken(),deleteProvider:[e]}),s=Lb(i||[]);return t.providerData=t.providerData.filter(r=>s.has(r.providerId)),s.has("phone")||(t.phoneNumber=null),await t.auth._persistUserIfCurrent(t),t}async function Jp(n,e,t=!1){const i=await Si(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Fn._forOperation(n,"link",i)}async function pd(n,e,t){await Il(e);const i=Lb(e.providerData),s=n===!1?"provider-already-linked":"no-such-provider";j(i.has(t)===n,e.auth,s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fb(n,e,t=!1){const{auth:i}=n;if(je(i.app))return Promise.reject(Rt(i));const s="reauthenticate";try{const r=await Si(n,Db(i,s,e,n),t);j(r.idToken,i,"internal-error");const o=dd(r.idToken);j(o,i,"internal-error");const{sub:a}=o;return j(n.uid===a,i,"user-mismatch"),Fn._forOperation(n,s,r)}catch(r){throw r?.code==="auth/user-not-found"&&Vt(i,"user-mismatch"),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vb(n,e,t=!1){if(je(n.app))return Promise.reject(Rt(n));const i="signIn",s=await Db(n,i,e),r=await Fn._fromIdTokenResponse(n,i,s);return t||await n._updateCurrentUser(r.user),r}async function md(n,e){return Vb(tt(n),e)}async function Ob(n,e){const t=se(n);return await pd(!1,t,e.providerId),Jp(t,e)}async function Ub(n,e){return Fb(se(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OR(n,e){return Ni(n,"POST","/v1/accounts:signInWithCustomToken",rt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UR(n,e){if(je(n.app))return Promise.reject(Rt(n));const t=tt(n),i=await OR(t,{token:e,returnSecureToken:!0}),s=await Fn._fromIdTokenResponse(t,"signIn",i);return await t._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?Xp._fromServerResponse(e,t):"totpInfo"in t?Qp._fromServerResponse(e,t):Vt(e,"internal-error")}}class Xp extends Zl{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new Xp(t)}}class Qp extends Zl{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new Qp(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gd(n,e,t){j(t.url?.length>0,n,"invalid-continue-uri"),j(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),j(typeof t.linkDomain>"u"||t.linkDomain.length>0,n,"invalid-hosting-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.linkDomain=t.linkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(j(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(j(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zp(n){const e=tt(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function BR(n,e,t){const i=tt(n),s={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};t&&gd(i,s,t),await us(i,s,"getOobCode",TR,"EMAIL_PASSWORD_PROVIDER")}async function zR(n,e,t){await Nb(se(n),{oobCode:e,newPassword:t}).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&Zp(n),i})}async function qR(n,e){await _R(se(n),{oobCode:e})}async function Bb(n,e){const t=se(n),i=await Nb(t,{oobCode:e}),s=i.requestType;switch(j(s,t,"internal-error"),s){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":j(i.newEmail,t,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":j(i.mfaInfo,t,"internal-error");default:j(i.email,t,"internal-error")}let r=null;return i.mfaInfo&&(r=Zl._fromServerResponse(tt(t),i.mfaInfo)),{data:{email:(i.requestType==="VERIFY_AND_CHANGE_EMAIL"?i.newEmail:i.email)||null,previousEmail:(i.requestType==="VERIFY_AND_CHANGE_EMAIL"?i.email:i.newEmail)||null,multiFactorInfo:r},operation:s}}async function HR(n,e){const{data:t}=await Bb(se(n),e);return t.email}async function GR(n,e,t){if(je(n.app))return Promise.reject(Rt(n));const i=tt(n),o=await us(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Mb,"EMAIL_PASSWORD_PROVIDER").catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&Zp(n),l}),a=await Fn._fromIdTokenResponse(i,"signIn",o);return await i._updateCurrentUser(a.user),a}function $R(n,e,t){return je(n.app)?Promise.reject(Rt(n)):md(se(n),Rs.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&Zp(n),i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jR(n,e,t){const i=tt(n),s={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function r(o,a){j(a.handleCodeInApp,i,"argument-error"),a&&gd(i,o,a)}r(s,t),await us(i,s,"getOobCode",xR,"EMAIL_PASSWORD_PROVIDER")}function WR(n,e){return fd.parseLink(e)?.operation==="EMAIL_SIGNIN"}async function KR(n,e,t){if(je(n.app))return Promise.reject(Rt(n));const i=se(n),s=Rs.credentialWithLink(e,t||Al());return j(s._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),md(i,s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YR(n,e){return ot(n,"POST","/v1/accounts:createAuthUri",rt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JR(n,e){const t=Wp()?Al():"http://localhost",i={identifier:e,continueUri:t},{signinMethods:s}=await YR(se(n),i);return s||[]}async function XR(n,e){const t=se(n),s={requestType:"VERIFY_EMAIL",idToken:await n.getIdToken()};e&&gd(t.auth,s,e);const{email:r}=await bR(t.auth,s);r!==n.email&&await n.reload()}async function QR(n,e,t){const i=se(n),r={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await n.getIdToken(),newEmail:e};t&&gd(i.auth,r,t);const{email:o}=await ER(i.auth,r);o!==n.email&&await n.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZR(n,e){return ot(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ek(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const i=se(n),r={idToken:await i.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},o=await Si(i,ZR(i.auth,r));i.displayName=o.displayName||null,i.photoURL=o.photoUrl||null;const a=i.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=i.displayName,a.photoURL=i.photoURL),await i._updateTokensIfNecessary(o)}function tk(n,e){const t=se(n);return je(t.auth.app)?Promise.reject(Rt(t.auth)):zb(t,e,null)}function nk(n,e){return zb(se(n),null,e)}async function zb(n,e,t){const{auth:i}=n,r={idToken:await n.getIdToken(),returnSecureToken:!0};e&&(r.email=e),t&&(r.password=t);const o=await Si(n,yR(i,r));await n._updateTokensIfNecessary(o,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ik(n){if(!n)return null;const{providerId:e}=n,t=n.rawUserInfo?JSON.parse(n.rawUserInfo):{},i=n.isNewUser||n.kind==="identitytoolkit#SignupNewUserResponse";if(!e&&n?.idToken){const s=dd(n.idToken)?.firebase?.sign_in_provider;if(s){const r=s!=="anonymous"&&s!=="custom"?s:null;return new ho(i,r)}}if(!e)return null;switch(e){case"facebook.com":return new sk(i,t);case"github.com":return new rk(i,t);case"google.com":return new ok(i,t);case"twitter.com":return new ak(i,t,n.screenName||null);case"custom":case"anonymous":return new ho(i,null);default:return new ho(i,e,t)}}class ho{constructor(e,t,i={}){this.isNewUser=e,this.providerId=t,this.profile=i}}class qb extends ho{constructor(e,t,i,s){super(e,t,i),this.username=s}}class sk extends ho{constructor(e,t){super(e,"facebook.com",t)}}class rk extends qb{constructor(e,t){super(e,"github.com",t,typeof t?.login=="string"?t?.login:null)}}class ok extends ho{constructor(e,t){super(e,"google.com",t)}}class ak extends qb{constructor(e,t,i){super(e,"twitter.com",t,i)}}function lk(n){const{user:e,_tokenResponse:t}=n;return e.isAnonymous&&!t?{providerId:null,isNewUser:!1,profile:null}:ik(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr{constructor(e,t,i){this.type=e,this.credential=t,this.user=i}static _fromIdtoken(e,t){return new nr("enroll",e,t)}static _fromMfaPendingCredential(e){return new nr("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){if(e?.multiFactorSession){if(e.multiFactorSession?.pendingCredential)return nr._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(e.multiFactorSession?.idToken)return nr._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class em{constructor(e,t,i){this.session=e,this.hints=t,this.signInResolver=i}static _fromError(e,t){const i=tt(e),s=t.customData._serverResponse,r=(s.mfaInfo||[]).map(a=>Zl._fromServerResponse(i,a));j(s.mfaPendingCredential,i,"internal-error");const o=nr._fromMfaPendingCredential(s.mfaPendingCredential);return new em(o,r,async a=>{const l=await a._process(i,o);delete s.mfaInfo,delete s.mfaPendingCredential;const c={...s,idToken:l.idToken,refreshToken:l.refreshToken};switch(t.operationType){case"signIn":const d=await Fn._fromIdTokenResponse(i,t.operationType,c);return await i._updateCurrentUser(d.user),d;case"reauthenticate":return j(t.user,i,"internal-error"),Fn._forOperation(t.user,t.operationType,c);default:Vt(i,"internal-error")}})}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}function ck(n,e){const t=se(n),i=e;return j(e.customData.operationType,t,"argument-error"),j(i.customData._serverResponse?.mfaPendingCredential,t,"argument-error"),em._fromError(t,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vv(n,e){return ot(n,"POST","/v2/accounts/mfaEnrollment:start",rt(n,e))}function uk(n,e){return ot(n,"POST","/v2/accounts/mfaEnrollment:finalize",rt(n,e))}function dk(n,e){return ot(n,"POST","/v2/accounts/mfaEnrollment:withdraw",rt(n,e))}class tm{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map(i=>Zl._fromServerResponse(e.auth,i)))})}static _fromUser(e){return new tm(e)}async getSession(){return nr._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const i=e,s=await this.getSession(),r=await Si(this.user,i._process(this.user.auth,s,t));return await this.user._updateTokensIfNecessary(r),this.user.reload()}async unenroll(e){const t=typeof e=="string"?e:e.uid,i=await this.user.getIdToken();try{const s=await Si(this.user,dk(this.user.auth,{idToken:i,mfaEnrollmentId:t}));this.enrolledFactors=this.enrolledFactors.filter(({uid:r})=>r!==t),await this.user._updateTokensIfNecessary(s),await this.user.reload()}catch(s){throw s}}}const Lh=new WeakMap;function hk(n){const e=se(n);return Lh.has(e)||Lh.set(e,tm._fromUser(e)),Lh.get(e)}const Mu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Mu,"1"),this.storage.removeItem(Mu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fk=1e3,pk=10;class Gb extends Hb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Cb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),s=this.localCache[t];i!==s&&e(t,s,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const i=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(i);!t&&this.localCache[i]===o||this.notifyListeners(i,o)},r=this.storage.getItem(i);KP()&&r!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,pk):s()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},fk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Gb.type="LOCAL";const nm=Gb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $b extends Hb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}$b.type="SESSION";const dr=$b;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mk(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const i=new yd(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:s,data:r}=t.data,o=this.handlersMap[s];if(!o?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const a=Array.from(o).map(async c=>c(t.origin,r)),l=await mk(a);t.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:l})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}yd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ec(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gk{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let r,o;return new Promise((a,l)=>{const c=ec("",20);s.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},i);o={messageChannel:s,onMessage(f){const m=f;if(m.data.eventId===c)switch(m.data.status){case"ack":clearTimeout(d),r=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),a(m.data.response);break;default:clearTimeout(d),clearTimeout(r),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yt(){return window}function yk(n){yt().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function im(){return typeof yt().WorkerGlobalScope<"u"&&typeof yt().importScripts=="function"}async function vk(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function _k(){return navigator?.serviceWorker?.controller||null}function wk(){return im()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jb="firebaseLocalStorageDb",bk=1,Du="firebaseLocalStorage",Wb="fbase_key";class tc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function vd(n,e){return n.transaction([Du],e?"readwrite":"readonly").objectStore(Du)}function Tk(){const n=indexedDB.deleteDatabase(jb);return new tc(n).toPromise()}function _f(){const n=indexedDB.open(jb,bk);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Du,{keyPath:Wb})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Du)?e(i):(i.close(),await Tk(),e(await _f()))})})}async function _v(n,e,t){const i=vd(n,!0).put({[Wb]:e,value:t});return new tc(i).toPromise()}async function xk(n,e){const t=vd(n,!1).get(e),i=await new tc(t).toPromise();return i===void 0?null:i.value}function wv(n,e){const t=vd(n,!0).delete(e);return new tc(t).toPromise()}const Ek=800,Ak=3;class Kb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await _f(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>Ak)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return im()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=yd._getInstance(wk()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await vk(),!this.activeServiceWorker)return;this.sender=new gk(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||_k()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await _f();return await _v(e,Mu,"1"),await wv(e,Mu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>_v(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>xk(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>wv(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const r=vd(s,!1).getAll();return new tc(r).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:s,value:r}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(r)&&(this.notifyListeners(s,r),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Ek)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Kb.type="LOCAL";const Sl=Kb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bv(n,e){return ot(n,"POST","/v2/accounts/mfaSignIn:start",rt(n,e))}function Ik(n,e){return ot(n,"POST","/v2/accounts/mfaSignIn:finalize",rt(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fh=Pb("rcb"),Ck=new Yl(3e4,6e4);class Sk{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!yt().grecaptcha?.render}load(e,t=""){return j(Pk(t),e,"argument-error"),this.shouldResolveImmediately(t)&&cv(yt().grecaptcha)?Promise.resolve(yt().grecaptcha):new Promise((i,s)=>{const r=yt().setTimeout(()=>{s(Tt(e,"network-request-failed"))},Ck.get());yt()[Fh]=()=>{yt().clearTimeout(r),delete yt()[Fh];const a=yt().grecaptcha;if(!a||!cv(a)){s(Tt(e,"internal-error"));return}const l=a.render;a.render=(c,d)=>{const f=l(c,d);return this.counter++,f},this.hostLanguage=t,i(a)};const o=`${tR()}?${Yo({onload:Fh,render:"explicit",hl:t})}`;Yp(o).catch(()=>{clearTimeout(r),s(Tt(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){return!!yt().grecaptcha?.render&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function Pk(n){return n.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(n)}class Rk{async load(e){return new oR(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const il="recaptcha",kk={theme:"light",type:"image"};let Nk=class{constructor(e,t,i={...kk}){this.parameters=i,this.type=il,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=tt(e),this.isInvisible=this.parameters.size==="invisible",j(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const s=typeof t=="string"?document.getElementById(t):t;j(s,this.auth,"argument-error"),this.container=s,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Rk:new Sk,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),i=t.getResponse(e);return i||new Promise(s=>{const r=o=>{o&&(this.tokenChangeListeners.delete(r),s(o))};this.tokenChangeListeners.add(r),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){j(!this.parameters.sitekey,this.auth,"argument-error"),j(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),j(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(i=>i(t)),typeof e=="function")e(t);else if(typeof e=="string"){const i=yt()[e];typeof i=="function"&&i(t)}}}assertNotDestroyed(){j(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){j(Wp()&&!im(),this.auth,"internal-error"),await Mk(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await FP(this.auth);j(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return j(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function Mk(){let n=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}n=()=>e(),window.addEventListener("load",n)}).catch(e=>{throw n&&window.removeEventListener("load",n),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=lr._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function Dk(n,e,t){if(je(n.app))return Promise.reject(Rt(n));const i=tt(n),s=await _d(i,e,se(t));return new sm(s,r=>md(i,r))}async function Lk(n,e,t){const i=se(n);await pd(!1,i,"phone");const s=await _d(i.auth,e,se(t));return new sm(s,r=>Ob(i,r))}async function Fk(n,e,t){const i=se(n);if(je(i.auth.app))return Promise.reject(Rt(i.auth));const s=await _d(i.auth,e,se(t));return new sm(s,r=>Ub(i,r))}async function _d(n,e,t){if(!n._getRecaptchaConfig())try{await hR(n)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(typeof e=="string"?i={phoneNumber:e}:i=e,"session"in i){const s=i.session;if("phoneNumber"in i){j(s.type==="enroll",n,"internal-error");const r={idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await us(n,r,"mfaSmsEnrollment",async(c,d)=>{if(d.phoneEnrollmentInfo.captchaResponse===nl){j(t?.type===il,c,"argument-error");const f=await Vh(c,d,t);return vv(c,f)}return vv(c,d)},"PHONE_PROVIDER").catch(c=>Promise.reject(c))).phoneSessionInfo.sessionInfo}else{j(s.type==="signin",n,"internal-error");const r=i.multiFactorHint?.uid||i.multiFactorUid;j(r,n,"missing-multi-factor-info");const o={mfaPendingCredential:s.credential,mfaEnrollmentId:r,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await us(n,o,"mfaSmsSignIn",async(d,f)=>{if(f.phoneSignInInfo.captchaResponse===nl){j(t?.type===il,d,"argument-error");const m=await Vh(d,f,t);return bv(d,m)}return bv(d,f)},"PHONE_PROVIDER").catch(d=>Promise.reject(d))).phoneResponseInfo.sessionInfo}}else{const s={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await us(n,s,"sendVerificationCode",async(l,c)=>{if(c.captchaResponse===nl){j(t?.type===il,l,"argument-error");const d=await Vh(l,c,t);return gv(l,d)}return gv(l,c)},"PHONE_PROVIDER").catch(l=>Promise.reject(l))).sessionInfo}}finally{t?._reset()}}async function Vk(n,e){const t=se(n);if(je(t.auth.app))return Promise.reject(Rt(t.auth));await Jp(t,e)}async function Vh(n,e,t){j(t.type===il,n,"argument-error");const i=await t.verify();j(typeof i=="string",n,"argument-error");const s={...e};if("phoneEnrollmentInfo"in s){const r=s.phoneEnrollmentInfo.phoneNumber,o=s.phoneEnrollmentInfo.captchaResponse,a=s.phoneEnrollmentInfo.clientType,l=s.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:r,recaptchaToken:i,captchaResponse:o,clientType:a,recaptchaVersion:l}}),s}else if("phoneSignInInfo"in s){const r=s.phoneSignInInfo.captchaResponse,o=s.phoneSignInInfo.clientType,a=s.phoneSignInInfo.recaptchaVersion;return Object.assign(s,{phoneSignInInfo:{recaptchaToken:i,captchaResponse:r,clientType:o,recaptchaVersion:a}}),s}else return Object.assign(s,{recaptchaToken:i}),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hr=class au{constructor(e){this.providerId=au.PROVIDER_ID,this.auth=tt(e)}verifyPhoneNumber(e,t){return _d(this.auth,e,se(t))}static credential(e,t){return lr._fromVerification(e,t)}static credentialFromResult(e){const t=e;return au.credentialFromTaggedObject(t)}static credentialFromError(e){return au.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:i}=e;return t&&i?lr._fromTokenResponse(t,i):null}};hr.PROVIDER_ID="phone";hr.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pr(n,e){return e?An(e):(j(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rm extends Xo{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ei(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ei(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ei(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Ok(n){return Vb(n.auth,new rm(n),n.bypassAuthState)}function Uk(n){const{auth:e,user:t}=n;return j(t,e,"internal-error"),Fb(t,new rm(n),n.bypassAuthState)}async function Bk(n){const{auth:e,user:t}=n;return j(t,e,"internal-error"),Jp(t,new rm(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yb{constructor(e,t,i,s,r=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:s,tenantId:r,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:t,sessionId:i,tenantId:r||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Ok;case"linkViaPopup":case"linkViaRedirect":return Bk;case"reauthViaPopup":case"reauthViaRedirect":return Uk;default:Vt(this.auth,"internal-error")}}resolve(e){Gn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Gn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zk=new Yl(2e3,1e4);async function qk(n,e,t){if(je(n.app))return Promise.reject(Tt(n,"operation-not-supported-in-this-environment"));const i=tt(n);Jo(n,e,Mi);const s=Pr(i,t);return new Ti(i,"signInViaPopup",e,s).executeNotNull()}async function Hk(n,e,t){const i=se(n);if(je(i.auth.app))return Promise.reject(Tt(i.auth,"operation-not-supported-in-this-environment"));Jo(i.auth,e,Mi);const s=Pr(i.auth,t);return new Ti(i.auth,"reauthViaPopup",e,s,i).executeNotNull()}async function Gk(n,e,t){const i=se(n);Jo(i.auth,e,Mi);const s=Pr(i.auth,t);return new Ti(i.auth,"linkViaPopup",e,s,i).executeNotNull()}class Ti extends Yb{constructor(e,t,i,s,r){super(e,t,s,r),this.provider=i,this.authWindow=null,this.pollId=null,Ti.currentPopupAction&&Ti.currentPopupAction.cancel(),Ti.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return j(e,this.auth,"internal-error"),e}async onExecution(){Gn(this.filter.length===1,"Popup operations only handle one event");const e=ec();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Tt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Tt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ti.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Tt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,zk.get())};e()}}Ti.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $k="pendingRedirect",sl=new Map;class jk extends Yb{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=sl.get(this.auth._key());if(!e){try{const i=await Wk(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}sl.set(this.auth._key(),e)}return this.bypassAuthState||sl.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Wk(n,e){const t=Xb(e),i=Jb(n);if(!await i._isAvailable())return!1;const s=await i._get(t)==="true";return await i._remove(t),s}async function om(n,e){return Jb(n)._set(Xb(e),"true")}function Kk(){sl.clear()}function am(n,e){sl.set(n._key(),e)}function Jb(n){return An(n._redirectPersistence)}function Xb(n){return ar($k,n.config.apiKey,n.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yk(n,e,t){return Jk(n,e,t)}async function Jk(n,e,t){if(je(n.app))return Promise.reject(Rt(n));const i=tt(n);Jo(n,e,Mi),await i._initializationPromise;const s=Pr(i,t);return await om(s,i),s._openRedirect(i,e,"signInViaRedirect")}function Xk(n,e,t){return Qk(n,e,t)}async function Qk(n,e,t){const i=se(n);if(Jo(i.auth,e,Mi),je(i.auth.app))return Promise.reject(Rt(i.auth));await i.auth._initializationPromise;const s=Pr(i.auth,t);await om(s,i.auth);const r=await Qb(i);return s._openRedirect(i.auth,e,"reauthViaRedirect",r)}function Zk(n,e,t){return e3(n,e,t)}async function e3(n,e,t){const i=se(n);Jo(i.auth,e,Mi),await i.auth._initializationPromise;const s=Pr(i.auth,t);await pd(!1,i,e.providerId),await om(s,i.auth);const r=await Qb(i);return s._openRedirect(i.auth,e,"linkViaRedirect",r)}async function t3(n,e){return await tt(n)._initializationPromise,wd(n,e,!1)}async function wd(n,e,t=!1){if(je(n.app))return Promise.reject(Rt(n));const i=tt(n),s=Pr(i,e),o=await new jk(i,s,t).execute();return o&&!t&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,e)),o}async function Qb(n){const e=ec(`${n.uid}:::`);return n._redirectEventId=e,await n.auth._setRedirectUser(n),await n.auth._persistUserIfCurrent(n),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n3=600*1e3;class Zb{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!i3(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!e2(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Tt(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=n3&&this.cachedEventUids.clear(),this.cachedEventUids.has(Tv(e))}saveEventToCache(e){this.cachedEventUids.add(Tv(e)),this.lastProcessedEventTime=Date.now()}}function Tv(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function e2({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function i3(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return e2(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t2(n,e={}){return ot(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s3=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,r3=/^https?/;async function o3(n){if(n.config.emulator)return;const{authorizedDomains:e}=await t2(n);for(const t of e)try{if(a3(t))return}catch{}Vt(n,"unauthorized-domain")}function a3(n){const e=Al(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return o.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===i}if(!r3.test(t))return!1;if(s3.test(n))return i===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l3=new Yl(3e4,6e4);function xv(){const n=yt().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function c3(n){return new Promise((e,t)=>{function i(){xv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{xv(),t(Tt(n,"network-request-failed"))},timeout:l3.get()})}if(yt().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(yt().gapi?.load)i();else{const s=Pb("iframefcb");return yt()[s]=()=>{gapi.load?i():t(Tt(n,"network-request-failed"))},Yp(`${iR()}?onload=${s}`).catch(r=>t(r))}}).catch(e=>{throw lu=null,e})}let lu=null;function u3(n){return lu=lu||c3(n),lu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d3=new Yl(5e3,15e3),h3="__/auth/iframe",f3="emulator/auth/iframe",p3={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},m3=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function g3(n){const e=n.config;j(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Kp(e,f3):`https://${n.config.authDomain}/${h3}`,i={apiKey:e.apiKey,appName:n.name,v:ki},s=m3.get(n.config.apiHost);s&&(i.eid=s);const r=n._getFrameworks();return r.length&&(i.fw=r.join(",")),`${t}?${Yo(i).slice(1)}`}async function y3(n){const e=await u3(n),t=yt().gapi;return j(t,n,"internal-error"),e.open({where:document.body,url:g3(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:p3,dontclear:!0},i=>new Promise(async(s,r)=>{await i.restyle({setHideOnLeave:!1});const o=Tt(n,"network-request-failed"),a=yt().setTimeout(()=>{r(o)},d3.get());function l(){yt().clearTimeout(a),s(i)}i.ping(l).then(l,()=>{r(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v3={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},_3=500,w3=600,b3="_blank",T3="http://localhost";class Ev{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function x3(n,e,t,i=_3,s=w3){const r=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const l={...v3,width:i.toString(),height:s.toString(),top:r,left:o},c=et().toLowerCase();t&&(a=xb(c)?b3:t),bb(c)&&(e=e||T3,l.scrollbars="yes");const d=Object.entries(l).reduce((m,[y,v])=>`${m}${y}=${v},`,"");if(WP(c)&&a!=="_self")return E3(e||"",a),new Ev(null);const f=window.open(e||"",a,d);j(f,n,"popup-blocked");try{f.focus()}catch{}return new Ev(f)}function E3(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A3="__/auth/handler",I3="emulator/auth/handler",C3=encodeURIComponent("fac");async function wf(n,e,t,i,s,r){j(n.config.authDomain,n,"auth-domain-config-required"),j(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:ki,eventId:s};if(e instanceof Mi){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",eS(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,f]of Object.entries(r||{}))o[d]=f}if(e instanceof Qo){const d=e.getScopes().filter(f=>f!=="");d.length>0&&(o.scopes=d.join(","))}n.tenantId&&(o.tid=n.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await n._getAppCheckToken(),c=l?`#${C3}=${encodeURIComponent(l)}`:"";return`${S3(n)}?${Yo(a).slice(1)}${c}`}function S3({config:n}){return n.emulator?Kp(n,I3):`https://${n.authDomain}/${A3}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oh="webStorageSupport";class P3{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=dr,this._completeRedirectFn=wd,this._overrideRedirectResult=am}async _openPopup(e,t,i,s){Gn(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const r=await wf(e,t,i,Al(),s);return x3(e,r,ec())}async _openRedirect(e,t,i,s){await this._originValidation(e);const r=await wf(e,t,i,Al(),s);return yk(r),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:r}=this.eventManagers[t];return s?Promise.resolve(s):(Gn(r,"If manager is not set, promise should be"),r)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await y3(e),i=new Zb(e);return t.register("authEvent",s=>(j(s?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Oh,{type:Oh},s=>{const r=s?.[0]?.[Oh];r!==void 0&&t(!!r),Vt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=o3(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Cb()||Tb()||Xl()}}const R3=P3;class k3{constructor(e){this.factorId=e}_process(e,t,i){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,i);case"signin":return this._finalizeSignIn(e,t.credential);default:return ii("unexpected MultiFactorSessionType")}}}class lm extends k3{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new lm(e)}_finalizeEnroll(e,t,i){return uk(e,{idToken:t,displayName:i,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return Ik(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class n2{constructor(){}static assertion(e){return lm._fromCredential(e)}}n2.FACTOR_ID="phone";var Av="@firebase/auth",Iv="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N3{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){j(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M3(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function D3(n){Ci(new Ln("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),r=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;j(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});const l={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Sb(n)},c=new ZP(i,s,r,l);return fR(c,t),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Ci(new Ln("auth-internal",e=>{const t=tt(e.getProvider("auth").getImmediate());return(i=>new N3(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Cn(Av,Iv,M3(n)),Cn(Av,Iv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L3=300;HC("authIdTokenMaxAge");function F3(){return document.getElementsByTagName("head")?.[0]??document}eR({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=s=>{const r=Tt("internal-error");r.customData=s,t(r)},i.type="text/javascript",i.charset="UTF-8",F3().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});D3("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fr(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V3=2e3;async function O3(n,e,t){const{BuildInfo:i}=fr();Gn(e.sessionId,"AuthEvent did not contain a session ID");const s=await H3(e.sessionId),r={};return Xl()?r.ibi=i.packageName:Jl()?r.apn=i.packageName:Vt(n,"operation-not-supported-in-this-environment"),i.displayName&&(r.appDisplayName=i.displayName),r.sessionId=s,wf(n,t,e.type,void 0,e.eventId??void 0,r)}async function U3(n){const{BuildInfo:e}=fr(),t={};Xl()?t.iosBundleId=e.packageName:Jl()?t.androidPackageName=e.packageName:Vt(n,"operation-not-supported-in-this-environment"),await t2(n,t)}function B3(n){const{cordova:e}=fr();return new Promise(t=>{e.plugins.browsertab.isAvailable(i=>{let s=null;i?e.plugins.browsertab.openUrl(n):s=e.InAppBrowser.open(n,jP()?"_blank":"_system","location=yes"),t(s)})})}async function z3(n,e,t){const{cordova:i}=fr();let s=()=>{};try{await new Promise((r,o)=>{let a=null;function l(){r();const f=i.plugins.browsertab?.close;typeof f=="function"&&f(),typeof t?.close=="function"&&t.close()}function c(){a||(a=window.setTimeout(()=>{o(Tt(n,"redirect-cancelled-by-user"))},V3))}function d(){document?.visibilityState==="visible"&&c()}e.addPassiveListener(l),document.addEventListener("resume",c,!1),Jl()&&document.addEventListener("visibilitychange",d,!1),s=()=>{e.removePassiveListener(l),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",d,!1),a&&window.clearTimeout(a)}})}finally{s()}}function q3(n){const e=fr();j(typeof e?.universalLinks?.subscribe=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),j(typeof e?.BuildInfo?.packageName<"u",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),j(typeof e?.cordova?.plugins?.browsertab?.openUrl=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),j(typeof e?.cordova?.plugins?.browsertab?.isAvailable=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),j(typeof e?.cordova?.InAppBrowser?.open=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function H3(n){const e=G3(n),t=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(t)).map(s=>s.toString(16).padStart(2,"0")).join("")}function G3(n){if(Gn(/[0-9a-zA-Z]+/.test(n),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(n);const e=new ArrayBuffer(n.length),t=new Uint8Array(e);for(let i=0;i<n.length;i++)t[i]=n.charCodeAt(i);return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $3=20;class j3 extends Zb{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInitialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach(t=>t(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function W3(n,e,t=null){return{type:e,eventId:t,urlResponse:null,sessionId:J3(),postBody:null,tenantId:n.tenantId,error:Tt(n,"no-auth-event")}}function K3(n,e){return bf()._set(Tf(n),e)}async function Cv(n){const e=await bf()._get(Tf(n));return e&&await bf()._remove(Tf(n)),e}function Y3(n,e){const t=Q3(e);if(t.includes("/__/auth/callback")){const i=cu(t),r=(i.firebaseError?X3(decodeURIComponent(i.firebaseError)):null)?.code?.split("auth/")?.[1],o=r?Tt(r):null;return o?{type:n.type,eventId:n.eventId,tenantId:n.tenantId,error:o,urlResponse:null,sessionId:null,postBody:null}:{type:n.type,eventId:n.eventId,tenantId:n.tenantId,sessionId:n.sessionId,urlResponse:t,postBody:null}}return null}function J3(){const n=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let t=0;t<$3;t++){const i=Math.floor(Math.random()*e.length);n.push(e.charAt(i))}return n.join("")}function bf(){return An(nm)}function Tf(n){return ar("authEvent",n.config.apiKey,n.name)}function X3(n){try{return JSON.parse(n)}catch{return null}}function Q3(n){const e=cu(n),t=e.link?decodeURIComponent(e.link):void 0,i=cu(t).link,s=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return cu(s).link||s||i||t||n}function cu(n){if(!n?.includes("?"))return{};const[e,...t]=n.split("?");return ro(t.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z3=500;class e5{constructor(){this._redirectPersistence=dr,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=wd,this._overrideRedirectResult=am}async _initialize(e){const t=e._key();let i=this.eventManagers.get(t);return i||(i=new j3(e),this.eventManagers.set(t,i),this.attachCallbackListeners(e,i)),i}_openPopup(e){Vt(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,i,s){q3(e);const r=await this._initialize(e);await r.initialized(),r.resetRedirect(),Kk(),await this._originValidation(e);const o=W3(e,i,s);await K3(e,o);const a=await O3(e,o,t),l=await B3(a);return z3(e,r,l)}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=U3(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:i,handleOpenURL:s,BuildInfo:r}=fr(),o=setTimeout(async()=>{await Cv(e),t.onEvent(Sv())},Z3),a=async d=>{clearTimeout(o);const f=await Cv(e);let m=null;f&&d?.url&&(m=Y3(f,d.url)),t.onEvent(m||Sv())};typeof i<"u"&&typeof i.subscribe=="function"&&i.subscribe(null,a);const l=s,c=`${r.packageName.toLowerCase()}://`;fr().handleOpenURL=async d=>{if(d.toLowerCase().startsWith(c)&&a({url:d}),typeof l=="function")try{l(d)}catch(f){console.error(f)}}}}const t5=e5;function Sv(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Tt("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n5(n,e){tt(n)._logFramework(e)}var i5="@firebase/auth-compat",s5="0.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r5=1e3;function rl(){return self?.location?.protocol||null}function o5(){return rl()==="http:"||rl()==="https:"}function i2(n=et()){return!!((rl()==="file:"||rl()==="ionic:"||rl()==="capacitor:")&&n.toLowerCase().match(/iphone|ipad|ipod|android/))}function a5(){return Up()||cd()}function l5(){return Yw()&&document?.documentMode===11}function c5(n=et()){return/Edge\/\d+/.test(n)}function u5(n=et()){return l5()||c5(n)}function s2(){try{const n=self.localStorage,e=ec();if(n)return n.setItem(e,"1"),n.removeItem(e),u5()?Tl():!0}catch{return cm()&&Tl()}return!1}function cm(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Uh(){return(o5()||Kw()||i2())&&!a5()&&s2()&&!cm()}function r2(){return i2()&&typeof document<"u"}async function d5(){return r2()?new Promise(n=>{const e=setTimeout(()=>{n(!1)},r5);document.addEventListener("deviceready",()=>{clearTimeout(e),n(!0)})}):!1}function h5(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xn={LOCAL:"local",NONE:"none",SESSION:"session"},ka=j,o2="persistence";function f5(n,e){if(ka(Object.values(xn).includes(e),n,"invalid-persistence-type"),Up()){ka(e!==xn.SESSION,n,"unsupported-persistence-type");return}if(cd()){ka(e===xn.NONE,n,"unsupported-persistence-type");return}if(cm()){ka(e===xn.NONE||e===xn.LOCAL&&Tl(),n,"unsupported-persistence-type");return}ka(e===xn.NONE||s2(),n,"unsupported-persistence-type")}async function xf(n){await n._initializationPromise;const e=a2(),t=ar(o2,n.config.apiKey,n.name);e&&e.setItem(t,n._getPersistenceType())}function p5(n,e){const t=a2();if(!t)return[];const i=ar(o2,n,e);switch(t.getItem(i)){case xn.NONE:return[Eo];case xn.LOCAL:return[Sl,dr];case xn.SESSION:return[dr];default:return[]}}function a2(){try{return h5()?.sessionStorage||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m5=j;class ss{constructor(){this.browserResolver=An(R3),this.cordovaResolver=An(t5),this.underlyingResolver=null,this._redirectPersistence=dr,this._completeRedirectFn=wd,this._overrideRedirectResult=am}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,i,s){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,i,s)}async _openRedirect(e,t,i,s){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,i,s)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return r2()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return m5(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await d5();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l2(n){return n.unwrap()}function g5(n){return n.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y5(n){return c2(n)}function v5(n,e){const t=e.customData?._tokenResponse;if(e?.code==="auth/multi-factor-auth-required"){const i=e;i.resolver=new _5(n,ck(n,e))}else if(t){const i=c2(e),s=e;i&&(s.credential=i,s.tenantId=t.tenantId||void 0,s.email=t.email||void 0,s.phoneNumber=t.phoneNumber||void 0)}}function c2(n){const{_tokenResponse:e}=n instanceof Yt?n.customData:n;if(!e)return null;if(!(n instanceof Yt)&&"temporaryProof"in e&&"phoneNumber"in e)return hr.credentialFromResult(n);const t=e.providerId;if(!t||t===Pa.PASSWORD)return null;let i;switch(t){case Pa.GOOGLE:i=Zn;break;case Pa.FACEBOOK:i=Qn;break;case Pa.GITHUB:i=ei;break;case Pa.TWITTER:i=ti;break;default:const{oauthIdToken:s,oauthAccessToken:r,oauthTokenSecret:o,pendingToken:a,nonce:l}=e;return!r&&!o&&!s&&!a?null:a?t.startsWith("saml.")?Ao._create(t,a):ui._fromParams({providerId:t,signInMethod:t,pendingToken:a,idToken:s,accessToken:r}):new uo(t).credential({idToken:s,accessToken:r,rawNonce:l})}return n instanceof Yt?i.credentialFromError(n):i.credentialFromResult(n)}function pn(n,e){return e.catch(t=>{throw t instanceof Yt&&v5(n,t),t}).then(t=>{const i=t.operationType,s=t.user;return{operationType:i,credential:y5(t),additionalUserInfo:lk(t),user:bd.getOrCreate(s)}})}async function Ef(n,e){const t=await e;return{verificationId:t.verificationId,confirm:i=>pn(n,t.confirm(i))}}class _5{constructor(e,t){this.resolver=t,this.auth=g5(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return pn(l2(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bd=class ja{constructor(e){this._delegate=e,this.multiFactor=hk(e)}static getOrCreate(e){return ja.USER_MAP.has(e)||ja.USER_MAP.set(e,new ja(e)),ja.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return pn(this.auth,Ob(this._delegate,e))}async linkWithPhoneNumber(e,t){return Ef(this.auth,Lk(this._delegate,e,t))}async linkWithPopup(e){return pn(this.auth,Gk(this._delegate,e,ss))}async linkWithRedirect(e){return await xf(tt(this.auth)),Zk(this._delegate,e,ss)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return pn(this.auth,Ub(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return Ef(this.auth,Fk(this._delegate,e,t))}reauthenticateWithPopup(e){return pn(this.auth,Hk(this._delegate,e,ss))}async reauthenticateWithRedirect(e){return await xf(tt(this.auth)),Xk(this._delegate,e,ss)}sendEmailVerification(e){return XR(this._delegate,e)}async unlink(e){return await VR(this._delegate,e),this}updateEmail(e){return tk(this._delegate,e)}updatePassword(e){return nk(this._delegate,e)}updatePhoneNumber(e){return Vk(this._delegate,e)}updateProfile(e){return ek(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return QR(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}};bd.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Na=j;class Af{constructor(e,t){if(this.app=e,t.isInitialized()){this._delegate=t.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:i}=e.options;Na(i,"invalid-api-key",{appName:e.name}),Na(i,"invalid-api-key",{appName:e.name});const s=typeof window<"u"?ss:void 0;this._delegate=t.initialize({options:{persistence:w5(i,e.name),popupRedirectResolver:s}}),this._delegate._updateErrorMap(IP),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?bd.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){pR(this._delegate,e,t)}applyActionCode(e){return qR(this._delegate,e)}checkActionCode(e){return Bb(this._delegate,e)}confirmPasswordReset(e,t){return zR(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return pn(this._delegate,GR(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return JR(this._delegate,e)}isSignInWithEmailLink(e){return WR(this._delegate,e)}async getRedirectResult(){Na(Uh(),this._delegate,"operation-not-supported-in-this-environment");const e=await t3(this._delegate,ss);return e?pn(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){n5(this._delegate,e)}onAuthStateChanged(e,t,i){const{next:s,error:r,complete:o}=Pv(e,t,i);return this._delegate.onAuthStateChanged(s,r,o)}onIdTokenChanged(e,t,i){const{next:s,error:r,complete:o}=Pv(e,t,i);return this._delegate.onIdTokenChanged(s,r,o)}sendSignInLinkToEmail(e,t){return jR(this._delegate,e,t)}sendPasswordResetEmail(e,t){return BR(this._delegate,e,t||void 0)}async setPersistence(e){f5(this._delegate,e);let t;switch(e){case xn.SESSION:t=dr;break;case xn.LOCAL:t=await An(Sl)._isAvailable()?Sl:nm;break;case xn.NONE:t=Eo;break;default:return Vt("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return pn(this._delegate,FR(this._delegate))}signInWithCredential(e){return pn(this._delegate,md(this._delegate,e))}signInWithCustomToken(e){return pn(this._delegate,UR(this._delegate,e))}signInWithEmailAndPassword(e,t){return pn(this._delegate,$R(this._delegate,e,t))}signInWithEmailLink(e,t){return pn(this._delegate,KR(this._delegate,e,t))}signInWithPhoneNumber(e,t){return Ef(this._delegate,Dk(this._delegate,e,t))}async signInWithPopup(e){return Na(Uh(),this._delegate,"operation-not-supported-in-this-environment"),pn(this._delegate,qk(this._delegate,e,ss))}async signInWithRedirect(e){return Na(Uh(),this._delegate,"operation-not-supported-in-this-environment"),await xf(this._delegate),Yk(this._delegate,e,ss)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return HR(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}Af.Persistence=xn;function Pv(n,e,t){let i=n;typeof n!="function"&&({next:i,error:e,complete:t}=n);const s=i;return{next:o=>s(o&&bd.getOrCreate(o)),error:e,complete:t}}function w5(n,e){const t=p5(n,e);if(typeof self<"u"&&!t.includes(Sl)&&t.push(Sl),typeof window<"u")for(const i of[nm,dr])t.includes(i)||t.push(i);return t.includes(Eo)||t.push(Eo),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{static credential(e,t){return hr.credential(e,t)}constructor(){this.providerId="phone",this._delegate=new hr(l2(an.auth()))}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}um.PHONE_SIGN_IN_METHOD=hr.PHONE_SIGN_IN_METHOD;um.PROVIDER_ID=hr.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b5=j;class T5{constructor(e,t,i=an.app()){b5(i.options?.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new Nk(i.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x5="auth-compat";function E5(n){n.INTERNAL.registerComponent(new Ln(x5,e=>{const t=e.getProvider("app-compat").getImmediate(),i=e.getProvider("auth");return new Af(t,i)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Gr.EMAIL_SIGNIN,PASSWORD_RESET:Gr.PASSWORD_RESET,RECOVER_EMAIL:Gr.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:Gr.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:Gr.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:Gr.VERIFY_EMAIL}},EmailAuthProvider:Rs,FacebookAuthProvider:Qn,GithubAuthProvider:ei,GoogleAuthProvider:Zn,OAuthProvider:uo,SAMLAuthProvider:ku,PhoneAuthProvider:um,PhoneMultiFactorGenerator:n2,RecaptchaVerifier:T5,TwitterAuthProvider:ti,Auth:Af,AuthCredential:Xo,Error:Yt}).setInstantiationMode("LAZY").setMultipleInstances(!1)),n.registerVersion(i5,s5)}E5(an);var Rv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ds,u2;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,A){function E(){}E.prototype=A.prototype,C.D=A.prototype,C.prototype=new E,C.prototype.constructor=C,C.C=function(D,k,N){for(var R=Array(arguments.length-2),q=2;q<arguments.length;q++)R[q-2]=arguments[q];return A.prototype[k].apply(D,R)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(C,A,E){E||(E=0);var D=Array(16);if(typeof A=="string")for(var k=0;16>k;++k)D[k]=A.charCodeAt(E++)|A.charCodeAt(E++)<<8|A.charCodeAt(E++)<<16|A.charCodeAt(E++)<<24;else for(k=0;16>k;++k)D[k]=A[E++]|A[E++]<<8|A[E++]<<16|A[E++]<<24;A=C.g[0],E=C.g[1],k=C.g[2];var N=C.g[3],R=A+(N^E&(k^N))+D[0]+3614090360&4294967295;A=E+(R<<7&4294967295|R>>>25),R=N+(k^A&(E^k))+D[1]+3905402710&4294967295,N=A+(R<<12&4294967295|R>>>20),R=k+(E^N&(A^E))+D[2]+606105819&4294967295,k=N+(R<<17&4294967295|R>>>15),R=E+(A^k&(N^A))+D[3]+3250441966&4294967295,E=k+(R<<22&4294967295|R>>>10),R=A+(N^E&(k^N))+D[4]+4118548399&4294967295,A=E+(R<<7&4294967295|R>>>25),R=N+(k^A&(E^k))+D[5]+1200080426&4294967295,N=A+(R<<12&4294967295|R>>>20),R=k+(E^N&(A^E))+D[6]+2821735955&4294967295,k=N+(R<<17&4294967295|R>>>15),R=E+(A^k&(N^A))+D[7]+4249261313&4294967295,E=k+(R<<22&4294967295|R>>>10),R=A+(N^E&(k^N))+D[8]+1770035416&4294967295,A=E+(R<<7&4294967295|R>>>25),R=N+(k^A&(E^k))+D[9]+2336552879&4294967295,N=A+(R<<12&4294967295|R>>>20),R=k+(E^N&(A^E))+D[10]+4294925233&4294967295,k=N+(R<<17&4294967295|R>>>15),R=E+(A^k&(N^A))+D[11]+2304563134&4294967295,E=k+(R<<22&4294967295|R>>>10),R=A+(N^E&(k^N))+D[12]+1804603682&4294967295,A=E+(R<<7&4294967295|R>>>25),R=N+(k^A&(E^k))+D[13]+4254626195&4294967295,N=A+(R<<12&4294967295|R>>>20),R=k+(E^N&(A^E))+D[14]+2792965006&4294967295,k=N+(R<<17&4294967295|R>>>15),R=E+(A^k&(N^A))+D[15]+1236535329&4294967295,E=k+(R<<22&4294967295|R>>>10),R=A+(k^N&(E^k))+D[1]+4129170786&4294967295,A=E+(R<<5&4294967295|R>>>27),R=N+(E^k&(A^E))+D[6]+3225465664&4294967295,N=A+(R<<9&4294967295|R>>>23),R=k+(A^E&(N^A))+D[11]+643717713&4294967295,k=N+(R<<14&4294967295|R>>>18),R=E+(N^A&(k^N))+D[0]+3921069994&4294967295,E=k+(R<<20&4294967295|R>>>12),R=A+(k^N&(E^k))+D[5]+3593408605&4294967295,A=E+(R<<5&4294967295|R>>>27),R=N+(E^k&(A^E))+D[10]+38016083&4294967295,N=A+(R<<9&4294967295|R>>>23),R=k+(A^E&(N^A))+D[15]+3634488961&4294967295,k=N+(R<<14&4294967295|R>>>18),R=E+(N^A&(k^N))+D[4]+3889429448&4294967295,E=k+(R<<20&4294967295|R>>>12),R=A+(k^N&(E^k))+D[9]+568446438&4294967295,A=E+(R<<5&4294967295|R>>>27),R=N+(E^k&(A^E))+D[14]+3275163606&4294967295,N=A+(R<<9&4294967295|R>>>23),R=k+(A^E&(N^A))+D[3]+4107603335&4294967295,k=N+(R<<14&4294967295|R>>>18),R=E+(N^A&(k^N))+D[8]+1163531501&4294967295,E=k+(R<<20&4294967295|R>>>12),R=A+(k^N&(E^k))+D[13]+2850285829&4294967295,A=E+(R<<5&4294967295|R>>>27),R=N+(E^k&(A^E))+D[2]+4243563512&4294967295,N=A+(R<<9&4294967295|R>>>23),R=k+(A^E&(N^A))+D[7]+1735328473&4294967295,k=N+(R<<14&4294967295|R>>>18),R=E+(N^A&(k^N))+D[12]+2368359562&4294967295,E=k+(R<<20&4294967295|R>>>12),R=A+(E^k^N)+D[5]+4294588738&4294967295,A=E+(R<<4&4294967295|R>>>28),R=N+(A^E^k)+D[8]+2272392833&4294967295,N=A+(R<<11&4294967295|R>>>21),R=k+(N^A^E)+D[11]+1839030562&4294967295,k=N+(R<<16&4294967295|R>>>16),R=E+(k^N^A)+D[14]+4259657740&4294967295,E=k+(R<<23&4294967295|R>>>9),R=A+(E^k^N)+D[1]+2763975236&4294967295,A=E+(R<<4&4294967295|R>>>28),R=N+(A^E^k)+D[4]+1272893353&4294967295,N=A+(R<<11&4294967295|R>>>21),R=k+(N^A^E)+D[7]+4139469664&4294967295,k=N+(R<<16&4294967295|R>>>16),R=E+(k^N^A)+D[10]+3200236656&4294967295,E=k+(R<<23&4294967295|R>>>9),R=A+(E^k^N)+D[13]+681279174&4294967295,A=E+(R<<4&4294967295|R>>>28),R=N+(A^E^k)+D[0]+3936430074&4294967295,N=A+(R<<11&4294967295|R>>>21),R=k+(N^A^E)+D[3]+3572445317&4294967295,k=N+(R<<16&4294967295|R>>>16),R=E+(k^N^A)+D[6]+76029189&4294967295,E=k+(R<<23&4294967295|R>>>9),R=A+(E^k^N)+D[9]+3654602809&4294967295,A=E+(R<<4&4294967295|R>>>28),R=N+(A^E^k)+D[12]+3873151461&4294967295,N=A+(R<<11&4294967295|R>>>21),R=k+(N^A^E)+D[15]+530742520&4294967295,k=N+(R<<16&4294967295|R>>>16),R=E+(k^N^A)+D[2]+3299628645&4294967295,E=k+(R<<23&4294967295|R>>>9),R=A+(k^(E|~N))+D[0]+4096336452&4294967295,A=E+(R<<6&4294967295|R>>>26),R=N+(E^(A|~k))+D[7]+1126891415&4294967295,N=A+(R<<10&4294967295|R>>>22),R=k+(A^(N|~E))+D[14]+2878612391&4294967295,k=N+(R<<15&4294967295|R>>>17),R=E+(N^(k|~A))+D[5]+4237533241&4294967295,E=k+(R<<21&4294967295|R>>>11),R=A+(k^(E|~N))+D[12]+1700485571&4294967295,A=E+(R<<6&4294967295|R>>>26),R=N+(E^(A|~k))+D[3]+2399980690&4294967295,N=A+(R<<10&4294967295|R>>>22),R=k+(A^(N|~E))+D[10]+4293915773&4294967295,k=N+(R<<15&4294967295|R>>>17),R=E+(N^(k|~A))+D[1]+2240044497&4294967295,E=k+(R<<21&4294967295|R>>>11),R=A+(k^(E|~N))+D[8]+1873313359&4294967295,A=E+(R<<6&4294967295|R>>>26),R=N+(E^(A|~k))+D[15]+4264355552&4294967295,N=A+(R<<10&4294967295|R>>>22),R=k+(A^(N|~E))+D[6]+2734768916&4294967295,k=N+(R<<15&4294967295|R>>>17),R=E+(N^(k|~A))+D[13]+1309151649&4294967295,E=k+(R<<21&4294967295|R>>>11),R=A+(k^(E|~N))+D[4]+4149444226&4294967295,A=E+(R<<6&4294967295|R>>>26),R=N+(E^(A|~k))+D[11]+3174756917&4294967295,N=A+(R<<10&4294967295|R>>>22),R=k+(A^(N|~E))+D[2]+718787259&4294967295,k=N+(R<<15&4294967295|R>>>17),R=E+(N^(k|~A))+D[9]+3951481745&4294967295,C.g[0]=C.g[0]+A&4294967295,C.g[1]=C.g[1]+(k+(R<<21&4294967295|R>>>11))&4294967295,C.g[2]=C.g[2]+k&4294967295,C.g[3]=C.g[3]+N&4294967295}i.prototype.u=function(C,A){A===void 0&&(A=C.length);for(var E=A-this.blockSize,D=this.B,k=this.h,N=0;N<A;){if(k==0)for(;N<=E;)s(this,C,N),N+=this.blockSize;if(typeof C=="string"){for(;N<A;)if(D[k++]=C.charCodeAt(N++),k==this.blockSize){s(this,D),k=0;break}}else for(;N<A;)if(D[k++]=C[N++],k==this.blockSize){s(this,D),k=0;break}}this.h=k,this.o+=A},i.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var A=1;A<C.length-8;++A)C[A]=0;var E=8*this.o;for(A=C.length-8;A<C.length;++A)C[A]=E&255,E/=256;for(this.u(C),C=Array(16),A=E=0;4>A;++A)for(var D=0;32>D;D+=8)C[E++]=this.g[A]>>>D&255;return C};function r(C,A){var E=a;return Object.prototype.hasOwnProperty.call(E,C)?E[C]:E[C]=A(C)}function o(C,A){this.h=A;for(var E=[],D=!0,k=C.length-1;0<=k;k--){var N=C[k]|0;D&&N==A||(E[k]=N,D=!1)}this.g=E}var a={};function l(C){return-128<=C&&128>C?r(C,function(A){return new o([A|0],0>A?-1:0)}):new o([C|0],0>C?-1:0)}function c(C){if(isNaN(C)||!isFinite(C))return f;if(0>C)return T(c(-C));for(var A=[],E=1,D=0;C>=E;D++)A[D]=C/E|0,E*=4294967296;return new o(A,0)}function d(C,A){if(C.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(C.charAt(0)=="-")return T(d(C.substring(1),A));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=c(Math.pow(A,8)),D=f,k=0;k<C.length;k+=8){var N=Math.min(8,C.length-k),R=parseInt(C.substring(k,k+N),A);8>N?(N=c(Math.pow(A,N)),D=D.j(N).add(c(R))):(D=D.j(E),D=D.add(c(R)))}return D}var f=l(0),m=l(1),y=l(16777216);n=o.prototype,n.m=function(){if(w(this))return-T(this).m();for(var C=0,A=1,E=0;E<this.g.length;E++){var D=this.i(E);C+=(0<=D?D:4294967296+D)*A,A*=4294967296}return C},n.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(v(this))return"0";if(w(this))return"-"+T(this).toString(C);for(var A=c(Math.pow(C,6)),E=this,D="";;){var k=L(E,A).g;E=x(E,k.j(A));var N=((0<E.g.length?E.g[0]:E.h)>>>0).toString(C);if(E=k,v(E))return N+D;for(;6>N.length;)N="0"+N;D=N+D}},n.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function v(C){if(C.h!=0)return!1;for(var A=0;A<C.g.length;A++)if(C.g[A]!=0)return!1;return!0}function w(C){return C.h==-1}n.l=function(C){return C=x(this,C),w(C)?-1:v(C)?0:1};function T(C){for(var A=C.g.length,E=[],D=0;D<A;D++)E[D]=~C.g[D];return new o(E,~C.h).add(m)}n.abs=function(){return w(this)?T(this):this},n.add=function(C){for(var A=Math.max(this.g.length,C.g.length),E=[],D=0,k=0;k<=A;k++){var N=D+(this.i(k)&65535)+(C.i(k)&65535),R=(N>>>16)+(this.i(k)>>>16)+(C.i(k)>>>16);D=R>>>16,N&=65535,R&=65535,E[k]=R<<16|N}return new o(E,E[E.length-1]&-2147483648?-1:0)};function x(C,A){return C.add(T(A))}n.j=function(C){if(v(this)||v(C))return f;if(w(this))return w(C)?T(this).j(T(C)):T(T(this).j(C));if(w(C))return T(this.j(T(C)));if(0>this.l(y)&&0>C.l(y))return c(this.m()*C.m());for(var A=this.g.length+C.g.length,E=[],D=0;D<2*A;D++)E[D]=0;for(D=0;D<this.g.length;D++)for(var k=0;k<C.g.length;k++){var N=this.i(D)>>>16,R=this.i(D)&65535,q=C.i(k)>>>16,te=C.i(k)&65535;E[2*D+2*k]+=R*te,P(E,2*D+2*k),E[2*D+2*k+1]+=N*te,P(E,2*D+2*k+1),E[2*D+2*k+1]+=R*q,P(E,2*D+2*k+1),E[2*D+2*k+2]+=N*q,P(E,2*D+2*k+2)}for(D=0;D<A;D++)E[D]=E[2*D+1]<<16|E[2*D];for(D=A;D<2*A;D++)E[D]=0;return new o(E,0)};function P(C,A){for(;(C[A]&65535)!=C[A];)C[A+1]+=C[A]>>>16,C[A]&=65535,A++}function S(C,A){this.g=C,this.h=A}function L(C,A){if(v(A))throw Error("division by zero");if(v(C))return new S(f,f);if(w(C))return A=L(T(C),A),new S(T(A.g),T(A.h));if(w(A))return A=L(C,T(A)),new S(T(A.g),A.h);if(30<C.g.length){if(w(C)||w(A))throw Error("slowDivide_ only works with positive integers.");for(var E=m,D=A;0>=D.l(C);)E=F(E),D=F(D);var k=U(E,1),N=U(D,1);for(D=U(D,2),E=U(E,2);!v(D);){var R=N.add(D);0>=R.l(C)&&(k=k.add(E),N=R),D=U(D,1),E=U(E,1)}return A=x(C,k.j(A)),new S(k,A)}for(k=f;0<=C.l(A);){for(E=Math.max(1,Math.floor(C.m()/A.m())),D=Math.ceil(Math.log(E)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),N=c(E),R=N.j(A);w(R)||0<R.l(C);)E-=D,N=c(E),R=N.j(A);v(N)&&(N=m),k=k.add(N),C=x(C,R)}return new S(k,C)}n.A=function(C){return L(this,C).h},n.and=function(C){for(var A=Math.max(this.g.length,C.g.length),E=[],D=0;D<A;D++)E[D]=this.i(D)&C.i(D);return new o(E,this.h&C.h)},n.or=function(C){for(var A=Math.max(this.g.length,C.g.length),E=[],D=0;D<A;D++)E[D]=this.i(D)|C.i(D);return new o(E,this.h|C.h)},n.xor=function(C){for(var A=Math.max(this.g.length,C.g.length),E=[],D=0;D<A;D++)E[D]=this.i(D)^C.i(D);return new o(E,this.h^C.h)};function F(C){for(var A=C.g.length+1,E=[],D=0;D<A;D++)E[D]=C.i(D)<<1|C.i(D-1)>>>31;return new o(E,C.h)}function U(C,A){var E=A>>5;A%=32;for(var D=C.g.length-E,k=[],N=0;N<D;N++)k[N]=0<A?C.i(N+E)>>>A|C.i(N+E+1)<<32-A:C.i(N+E);return new o(k,C.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,u2=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=d,ds=o}).apply(typeof Rv<"u"?Rv:typeof self<"u"?self:typeof window<"u"?window:{});var Bc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var d2,Wa,h2,uu,If,f2,p2,m2;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(p,_,b){return p==Array.prototype||p==Object.prototype||(p[_]=b.value),p};function t(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof Bc=="object"&&Bc];for(var _=0;_<p.length;++_){var b=p[_];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var i=t(this);function s(p,_){if(_)e:{var b=i;p=p.split(".");for(var I=0;I<p.length-1;I++){var O=p[I];if(!(O in b))break e;b=b[O]}p=p[p.length-1],I=b[p],_=_(I),_!=I&&_!=null&&e(b,p,{configurable:!0,writable:!0,value:_})}}function r(p,_){p instanceof String&&(p+="");var b=0,I=!1,O={next:function(){if(!I&&b<p.length){var z=b++;return{value:_(z,p[z]),done:!1}}return I=!0,{done:!0,value:void 0}}};return O[Symbol.iterator]=function(){return O},O}s("Array.prototype.values",function(p){return p||function(){return r(this,function(_,b){return b})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(p){var _=typeof p;return _=_!="object"?_:p?Array.isArray(p)?"array":_:"null",_=="array"||_=="object"&&typeof p.length=="number"}function c(p){var _=typeof p;return _=="object"&&p!=null||_=="function"}function d(p,_,b){return p.call.apply(p.bind,arguments)}function f(p,_,b){if(!p)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var O=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(O,I),p.apply(_,O)}}return function(){return p.apply(_,arguments)}}function m(p,_,b){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,m.apply(null,arguments)}function y(p,_){var b=Array.prototype.slice.call(arguments,1);return function(){var I=b.slice();return I.push.apply(I,arguments),p.apply(this,I)}}function v(p,_){function b(){}b.prototype=_.prototype,p.aa=_.prototype,p.prototype=new b,p.prototype.constructor=p,p.Qb=function(I,O,z){for(var J=Array(arguments.length-2),Ve=2;Ve<arguments.length;Ve++)J[Ve-2]=arguments[Ve];return _.prototype[O].apply(I,J)}}function w(p){const _=p.length;if(0<_){const b=Array(_);for(let I=0;I<_;I++)b[I]=p[I];return b}return[]}function T(p,_){for(let b=1;b<arguments.length;b++){const I=arguments[b];if(l(I)){const O=p.length||0,z=I.length||0;p.length=O+z;for(let J=0;J<z;J++)p[O+J]=I[J]}else p.push(I)}}class x{constructor(_,b){this.i=_,this.j=b,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function P(p){return/^[\s\xa0]*$/.test(p)}function S(){var p=a.navigator;return p&&(p=p.userAgent)?p:""}function L(p){return L[" "](p),p}L[" "]=function(){};var F=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function U(p,_,b){for(const I in p)_.call(b,p[I],I,p)}function C(p,_){for(const b in p)_.call(void 0,p[b],b,p)}function A(p){const _={};for(const b in p)_[b]=p[b];return _}const E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(p,_){let b,I;for(let O=1;O<arguments.length;O++){I=arguments[O];for(b in I)p[b]=I[b];for(let z=0;z<E.length;z++)b=E[z],Object.prototype.hasOwnProperty.call(I,b)&&(p[b]=I[b])}}function k(p){var _=1;p=p.split(":");const b=[];for(;0<_&&p.length;)b.push(p.shift()),_--;return p.length&&b.push(p.join(":")),b}function N(p){a.setTimeout(()=>{throw p},0)}function R(){var p=me;let _=null;return p.g&&(_=p.g,p.g=p.g.next,p.g||(p.h=null),_.next=null),_}class q{constructor(){this.h=this.g=null}add(_,b){const I=te.get();I.set(_,b),this.h?this.h.next=I:this.g=I,this.h=I}}var te=new x(()=>new W,p=>p.reset());class W{constructor(){this.next=this.g=this.h=null}set(_,b){this.h=_,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let K,Ee=!1,me=new q,Et=()=>{const p=a.Promise.resolve(void 0);K=()=>{p.then(Ke)}};var Ke=()=>{for(var p;p=R();){try{p.h.call(p.g)}catch(b){N(b)}var _=te;_.j(p),100>_.h&&(_.h++,p.next=_.g,_.g=p)}Ee=!1};function Re(){this.s=this.s,this.C=this.C}Re.prototype.s=!1,Re.prototype.ma=function(){this.s||(this.s=!0,this.N())},Re.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ge(p,_){this.type=p,this.g=this.target=_,this.defaultPrevented=!1}ge.prototype.h=function(){this.defaultPrevented=!0};var kt=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var p=!1,_=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const b=()=>{};a.addEventListener("test",b,_),a.removeEventListener("test",b,_)}catch{}return p})();function at(p,_){if(ge.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p){var b=this.type=p.type,I=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;if(this.target=p.target||p.srcElement,this.g=_,_=p.relatedTarget){if(F){e:{try{L(_.nodeName);var O=!0;break e}catch{}O=!1}O||(_=null)}}else b=="mouseover"?_=p.fromElement:b=="mouseout"&&(_=p.toElement);this.relatedTarget=_,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=typeof p.pointerType=="string"?p.pointerType:Be[p.pointerType]||"",this.state=p.state,this.i=p,p.defaultPrevented&&at.aa.h.call(this)}}v(at,ge);var Be={2:"touch",3:"pen",4:"mouse"};at.prototype.h=function(){at.aa.h.call(this);var p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var Ae="closure_listenable_"+(1e6*Math.random()|0),vn=0;function pi(p,_,b,I,O){this.listener=p,this.proxy=null,this.src=_,this.type=b,this.capture=!!I,this.ha=O,this.key=++vn,this.da=this.fa=!1}function Ot(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function _n(p){this.src=p,this.g={},this.h=0}_n.prototype.add=function(p,_,b,I,O){var z=p.toString();p=this.g[z],p||(p=this.g[z]=[],this.h++);var J=zi(p,_,I,O);return-1<J?(_=p[J],b||(_.fa=!1)):(_=new pi(_,this.src,z,!!I,O),_.fa=b,p.push(_)),_};function At(p,_){var b=_.type;if(b in p.g){var I=p.g[b],O=Array.prototype.indexOf.call(I,_,void 0),z;(z=0<=O)&&Array.prototype.splice.call(I,O,1),z&&(Ot(_),p.g[b].length==0&&(delete p.g[b],p.h--))}}function zi(p,_,b,I){for(var O=0;O<p.length;++O){var z=p[O];if(!z.da&&z.listener==_&&z.capture==!!b&&z.ha==I)return O}return-1}var qi="closure_lm_"+(1e6*Math.random()|0),Hi={};function H(p,_,b,I,O){if(Array.isArray(_)){for(var z=0;z<_.length;z++)H(p,_[z],b,I,O);return null}return b=ce(b),p&&p[Ae]?p.K(_,b,c(I)?!!I.capture:!1,O):Ie(p,_,b,!1,I,O)}function Ie(p,_,b,I,O,z){if(!_)throw Error("Invalid event type");var J=c(O)?!!O.capture:!!O,Ve=ha(p);if(Ve||(p[qi]=Ve=new _n(p)),b=Ve.add(_,b,I,J,z),b.proxy)return b;if(I=Nt(),b.proxy=I,I.src=p,I.listener=b,p.addEventListener)kt||(O=J),O===void 0&&(O=!1),p.addEventListener(_.toString(),I,O);else if(p.attachEvent)p.attachEvent(bc(_.toString()),I);else if(p.addListener&&p.removeListener)p.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return b}function Nt(){function p(b){return _.call(p.src,p.listener,b)}const _=hh;return p}function Os(p,_,b,I,O){if(Array.isArray(_))for(var z=0;z<_.length;z++)Os(p,_[z],b,I,O);else I=c(I)?!!I.capture:!!I,b=ce(b),p&&p[Ae]?(p=p.i,_=String(_).toString(),_ in p.g&&(z=p.g[_],b=zi(z,b,I,O),-1<b&&(Ot(z[b]),Array.prototype.splice.call(z,b,1),z.length==0&&(delete p.g[_],p.h--)))):p&&(p=ha(p))&&(_=p.g[_.toString()],p=-1,_&&(p=zi(_,b,I,O)),(b=-1<p?_[p]:null)&&Gi(b))}function Gi(p){if(typeof p!="number"&&p&&!p.da){var _=p.src;if(_&&_[Ae])At(_.i,p);else{var b=p.type,I=p.proxy;_.removeEventListener?_.removeEventListener(b,I,p.capture):_.detachEvent?_.detachEvent(bc(b),I):_.addListener&&_.removeListener&&_.removeListener(I),(b=ha(_))?(At(b,p),b.h==0&&(b.src=null,_[qi]=null)):Ot(p)}}}function bc(p){return p in Hi?Hi[p]:Hi[p]="on"+p}function hh(p,_){if(p.da)p=!0;else{_=new at(_,this);var b=p.listener,I=p.ha||p.src;p.fa&&Gi(p),p=b.call(I,_)}return p}function ha(p){return p=p[qi],p instanceof _n?p:null}var Q="__closure_events_fn_"+(1e9*Math.random()>>>0);function ce(p){return typeof p=="function"?p:(p[Q]||(p[Q]=function(_){return p.handleEvent(_)}),p[Q])}function we(){Re.call(this),this.i=new _n(this),this.M=this,this.F=null}v(we,Re),we.prototype[Ae]=!0,we.prototype.removeEventListener=function(p,_,b,I){Os(this,p,_,b,I)};function Se(p,_){var b,I=p.F;if(I)for(b=[];I;I=I.F)b.push(I);if(p=p.M,I=_.type||_,typeof _=="string")_=new ge(_,p);else if(_ instanceof ge)_.target=_.target||p;else{var O=_;_=new ge(I,p),D(_,O)}if(O=!0,b)for(var z=b.length-1;0<=z;z--){var J=_.g=b[z];O=It(J,I,!0,_)&&O}if(J=_.g=p,O=It(J,I,!0,_)&&O,O=It(J,I,!1,_)&&O,b)for(z=0;z<b.length;z++)J=_.g=b[z],O=It(J,I,!1,_)&&O}we.prototype.N=function(){if(we.aa.N.call(this),this.i){var p=this.i,_;for(_ in p.g){for(var b=p.g[_],I=0;I<b.length;I++)Ot(b[I]);delete p.g[_],p.h--}}this.F=null},we.prototype.K=function(p,_,b,I){return this.i.add(String(p),_,!1,b,I)},we.prototype.L=function(p,_,b,I){return this.i.add(String(p),_,!0,b,I)};function It(p,_,b,I){if(_=p.i.g[String(_)],!_)return!0;_=_.concat();for(var O=!0,z=0;z<_.length;++z){var J=_[z];if(J&&!J.da&&J.capture==b){var Ve=J.listener,Mt=J.ha||J.src;J.fa&&At(p.i,J),O=Ve.call(Mt,I)!==!1&&O}}return O&&!I.defaultPrevented}function $i(p,_,b){if(typeof p=="function")b&&(p=m(p,b));else if(p&&typeof p.handleEvent=="function")p=m(p.handleEvent,p);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:a.setTimeout(p,_||0)}function mi(p){p.g=$i(()=>{p.g=null,p.i&&(p.i=!1,mi(p))},p.l);const _=p.h;p.h=null,p.m.apply(null,_)}class fa extends Re{constructor(_,b){super(),this.m=_,this.l=b,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:mi(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function gi(p){Re.call(this),this.h=p,this.g={}}v(gi,Re);var Ur=[];function Us(p){U(p.g,function(_,b){this.g.hasOwnProperty(b)&&Gi(_)},p),p.g={}}gi.prototype.N=function(){gi.aa.N.call(this),Us(this)},gi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Bs=a.JSON.stringify,pa=a.JSON.parse,ma=class{stringify(p){return a.JSON.stringify(p,void 0)}parse(p){return a.JSON.parse(p,void 0)}};function zs(){}zs.prototype.h=null;function Tc(p){return p.h||(p.h=p.i())}function Wg(){}var ga={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function fh(){ge.call(this,"d")}v(fh,ge);function ph(){ge.call(this,"c")}v(ph,ge);var qs={},Kg=null;function xc(){return Kg=Kg||new we}qs.La="serverreachability";function Yg(p){ge.call(this,qs.La,p)}v(Yg,ge);function ya(p){const _=xc();Se(_,new Yg(_))}qs.STAT_EVENT="statevent";function Jg(p,_){ge.call(this,qs.STAT_EVENT,p),this.stat=_}v(Jg,ge);function Qt(p){const _=xc();Se(_,new Jg(_,p))}qs.Ma="timingevent";function Xg(p,_){ge.call(this,qs.Ma,p),this.size=_}v(Xg,ge);function va(p,_){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){p()},_)}function _a(){this.g=!0}_a.prototype.xa=function(){this.g=!1};function ZA(p,_,b,I,O,z){p.info(function(){if(p.g)if(z)for(var J="",Ve=z.split("&"),Mt=0;Mt<Ve.length;Mt++){var ke=Ve[Mt].split("=");if(1<ke.length){var Ut=ke[0];ke=ke[1];var Bt=Ut.split("_");J=2<=Bt.length&&Bt[1]=="type"?J+(Ut+"="+ke+"&"):J+(Ut+"=redacted&")}}else J=null;else J=z;return"XMLHTTP REQ ("+I+") [attempt "+O+"]: "+_+`
`+b+`
`+J})}function eI(p,_,b,I,O,z,J){p.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+O+"]: "+_+`
`+b+`
`+z+" "+J})}function Br(p,_,b,I){p.info(function(){return"XMLHTTP TEXT ("+_+"): "+nI(p,b)+(I?" "+I:"")})}function tI(p,_){p.info(function(){return"TIMEOUT: "+_})}_a.prototype.info=function(){};function nI(p,_){if(!p.g)return _;if(!_)return null;try{var b=JSON.parse(_);if(b){for(p=0;p<b.length;p++)if(Array.isArray(b[p])){var I=b[p];if(!(2>I.length)){var O=I[1];if(Array.isArray(O)&&!(1>O.length)){var z=O[0];if(z!="noop"&&z!="stop"&&z!="close")for(var J=1;J<O.length;J++)O[J]=""}}}}return Bs(b)}catch{return _}}var Ec={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Qg={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},mh;function Ac(){}v(Ac,zs),Ac.prototype.g=function(){return new XMLHttpRequest},Ac.prototype.i=function(){return{}},mh=new Ac;function ji(p,_,b,I){this.j=p,this.i=_,this.l=b,this.R=I||1,this.U=new gi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Zg}function Zg(){this.i=null,this.g="",this.h=!1}var ey={},gh={};function yh(p,_,b){p.L=1,p.v=Pc(yi(_)),p.m=b,p.P=!0,ty(p,null)}function ty(p,_){p.F=Date.now(),Ic(p),p.A=yi(p.v);var b=p.A,I=p.R;Array.isArray(I)||(I=[String(I)]),my(b.i,"t",I),p.C=0,b=p.j.J,p.h=new Zg,p.g=My(p.j,b?_:null,!p.m),0<p.O&&(p.M=new fa(m(p.Y,p,p.g),p.O)),_=p.U,b=p.g,I=p.ca;var O="readystatechange";Array.isArray(O)||(O&&(Ur[0]=O.toString()),O=Ur);for(var z=0;z<O.length;z++){var J=H(b,O[z],I||_.handleEvent,!1,_.h||_);if(!J)break;_.g[J.key]=J}_=p.H?A(p.H):{},p.m?(p.u||(p.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.A,p.u,p.m,_)):(p.u="GET",p.g.ea(p.A,p.u,null,_)),ya(),ZA(p.i,p.u,p.A,p.l,p.R,p.m)}ji.prototype.ca=function(p){p=p.target;const _=this.M;_&&vi(p)==3?_.j():this.Y(p)},ji.prototype.Y=function(p){try{if(p==this.g)e:{const Bt=vi(this.g);var _=this.g.Ba();const Hr=this.g.Z();if(!(3>Bt)&&(Bt!=3||this.g&&(this.h.h||this.g.oa()||Ty(this.g)))){this.J||Bt!=4||_==7||(_==8||0>=Hr?ya(3):ya(2)),vh(this);var b=this.g.Z();this.X=b;t:if(ny(this)){var I=Ty(this.g);p="";var O=I.length,z=vi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Hs(this),wa(this);var J="";break t}this.h.i=new a.TextDecoder}for(_=0;_<O;_++)this.h.h=!0,p+=this.h.i.decode(I[_],{stream:!(z&&_==O-1)});I.length=0,this.h.g+=p,this.C=0,J=this.h.g}else J=this.g.oa();if(this.o=b==200,eI(this.i,this.u,this.A,this.l,this.R,Bt,b),this.o){if(this.T&&!this.K){t:{if(this.g){var Ve,Mt=this.g;if((Ve=Mt.g?Mt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(Ve)){var ke=Ve;break t}}ke=null}if(b=ke)Br(this.i,this.l,b,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,_h(this,b);else{this.o=!1,this.s=3,Qt(12),Hs(this),wa(this);break e}}if(this.P){b=!0;let Vn;for(;!this.J&&this.C<J.length;)if(Vn=iI(this,J),Vn==gh){Bt==4&&(this.s=4,Qt(14),b=!1),Br(this.i,this.l,null,"[Incomplete Response]");break}else if(Vn==ey){this.s=4,Qt(15),Br(this.i,this.l,J,"[Invalid Chunk]"),b=!1;break}else Br(this.i,this.l,Vn,null),_h(this,Vn);if(ny(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Bt!=4||J.length!=0||this.h.h||(this.s=1,Qt(16),b=!1),this.o=this.o&&b,!b)Br(this.i,this.l,J,"[Invalid Chunked Response]"),Hs(this),wa(this);else if(0<J.length&&!this.W){this.W=!0;var Ut=this.j;Ut.g==this&&Ut.ba&&!Ut.M&&(Ut.j.info("Great, no buffering proxy detected. Bytes received: "+J.length),Ah(Ut),Ut.M=!0,Qt(11))}}else Br(this.i,this.l,J,null),_h(this,J);Bt==4&&Hs(this),this.o&&!this.J&&(Bt==4?Py(this.j,this):(this.o=!1,Ic(this)))}else wI(this.g),b==400&&0<J.indexOf("Unknown SID")?(this.s=3,Qt(12)):(this.s=0,Qt(13)),Hs(this),wa(this)}}}catch{}finally{}};function ny(p){return p.g?p.u=="GET"&&p.L!=2&&p.j.Ca:!1}function iI(p,_){var b=p.C,I=_.indexOf(`
`,b);return I==-1?gh:(b=Number(_.substring(b,I)),isNaN(b)?ey:(I+=1,I+b>_.length?gh:(_=_.slice(I,I+b),p.C=I+b,_)))}ji.prototype.cancel=function(){this.J=!0,Hs(this)};function Ic(p){p.S=Date.now()+p.I,iy(p,p.I)}function iy(p,_){if(p.B!=null)throw Error("WatchDog timer not null");p.B=va(m(p.ba,p),_)}function vh(p){p.B&&(a.clearTimeout(p.B),p.B=null)}ji.prototype.ba=function(){this.B=null;const p=Date.now();0<=p-this.S?(tI(this.i,this.A),this.L!=2&&(ya(),Qt(17)),Hs(this),this.s=2,wa(this)):iy(this,this.S-p)};function wa(p){p.j.G==0||p.J||Py(p.j,p)}function Hs(p){vh(p);var _=p.M;_&&typeof _.ma=="function"&&_.ma(),p.M=null,Us(p.U),p.g&&(_=p.g,p.g=null,_.abort(),_.ma())}function _h(p,_){try{var b=p.j;if(b.G!=0&&(b.g==p||wh(b.h,p))){if(!p.K&&wh(b.h,p)&&b.G==3){try{var I=b.Da.g.parse(_)}catch{I=null}if(Array.isArray(I)&&I.length==3){var O=I;if(O[0]==0){e:if(!b.u){if(b.g)if(b.g.F+3e3<p.F)Lc(b),Mc(b);else break e;Eh(b),Qt(18)}}else b.za=O[1],0<b.za-b.T&&37500>O[2]&&b.F&&b.v==0&&!b.C&&(b.C=va(m(b.Za,b),6e3));if(1>=oy(b.h)&&b.ca){try{b.ca()}catch{}b.ca=void 0}}else $s(b,11)}else if((p.K||b.g==p)&&Lc(b),!P(_))for(O=b.Da.g.parse(_),_=0;_<O.length;_++){let ke=O[_];if(b.T=ke[0],ke=ke[1],b.G==2)if(ke[0]=="c"){b.K=ke[1],b.ia=ke[2];const Ut=ke[3];Ut!=null&&(b.la=Ut,b.j.info("VER="+b.la));const Bt=ke[4];Bt!=null&&(b.Aa=Bt,b.j.info("SVER="+b.Aa));const Hr=ke[5];Hr!=null&&typeof Hr=="number"&&0<Hr&&(I=1.5*Hr,b.L=I,b.j.info("backChannelRequestTimeoutMs_="+I)),I=b;const Vn=p.g;if(Vn){const Vc=Vn.g?Vn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Vc){var z=I.h;z.g||Vc.indexOf("spdy")==-1&&Vc.indexOf("quic")==-1&&Vc.indexOf("h2")==-1||(z.j=z.l,z.g=new Set,z.h&&(bh(z,z.h),z.h=null))}if(I.D){const Ih=Vn.g?Vn.g.getResponseHeader("X-HTTP-Session-Id"):null;Ih&&(I.ya=Ih,He(I.I,I.D,Ih))}}b.G=3,b.l&&b.l.ua(),b.ba&&(b.R=Date.now()-p.F,b.j.info("Handshake RTT: "+b.R+"ms")),I=b;var J=p;if(I.qa=Ny(I,I.J?I.ia:null,I.W),J.K){ay(I.h,J);var Ve=J,Mt=I.L;Mt&&(Ve.I=Mt),Ve.B&&(vh(Ve),Ic(Ve)),I.g=J}else Cy(I);0<b.i.length&&Dc(b)}else ke[0]!="stop"&&ke[0]!="close"||$s(b,7);else b.G==3&&(ke[0]=="stop"||ke[0]=="close"?ke[0]=="stop"?$s(b,7):xh(b):ke[0]!="noop"&&b.l&&b.l.ta(ke),b.v=0)}}ya(4)}catch{}}var sI=class{constructor(p,_){this.g=p,this.map=_}};function sy(p){this.l=p||10,a.PerformanceNavigationTiming?(p=a.performance.getEntriesByType("navigation"),p=0<p.length&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ry(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function oy(p){return p.h?1:p.g?p.g.size:0}function wh(p,_){return p.h?p.h==_:p.g?p.g.has(_):!1}function bh(p,_){p.g?p.g.add(_):p.h=_}function ay(p,_){p.h&&p.h==_?p.h=null:p.g&&p.g.has(_)&&p.g.delete(_)}sy.prototype.cancel=function(){if(this.i=ly(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function ly(p){if(p.h!=null)return p.i.concat(p.h.D);if(p.g!=null&&p.g.size!==0){let _=p.i;for(const b of p.g.values())_=_.concat(b.D);return _}return w(p.i)}function rI(p){if(p.V&&typeof p.V=="function")return p.V();if(typeof Map<"u"&&p instanceof Map||typeof Set<"u"&&p instanceof Set)return Array.from(p.values());if(typeof p=="string")return p.split("");if(l(p)){for(var _=[],b=p.length,I=0;I<b;I++)_.push(p[I]);return _}_=[],b=0;for(I in p)_[b++]=p[I];return _}function oI(p){if(p.na&&typeof p.na=="function")return p.na();if(!p.V||typeof p.V!="function"){if(typeof Map<"u"&&p instanceof Map)return Array.from(p.keys());if(!(typeof Set<"u"&&p instanceof Set)){if(l(p)||typeof p=="string"){var _=[];p=p.length;for(var b=0;b<p;b++)_.push(b);return _}_=[],b=0;for(const I in p)_[b++]=I;return _}}}function cy(p,_){if(p.forEach&&typeof p.forEach=="function")p.forEach(_,void 0);else if(l(p)||typeof p=="string")Array.prototype.forEach.call(p,_,void 0);else for(var b=oI(p),I=rI(p),O=I.length,z=0;z<O;z++)_.call(void 0,I[z],b&&b[z],p)}var uy=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function aI(p,_){if(p){p=p.split("&");for(var b=0;b<p.length;b++){var I=p[b].indexOf("="),O=null;if(0<=I){var z=p[b].substring(0,I);O=p[b].substring(I+1)}else z=p[b];_(z,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function Gs(p){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,p instanceof Gs){this.h=p.h,Cc(this,p.j),this.o=p.o,this.g=p.g,Sc(this,p.s),this.l=p.l;var _=p.i,b=new xa;b.i=_.i,_.g&&(b.g=new Map(_.g),b.h=_.h),dy(this,b),this.m=p.m}else p&&(_=String(p).match(uy))?(this.h=!1,Cc(this,_[1]||"",!0),this.o=ba(_[2]||""),this.g=ba(_[3]||"",!0),Sc(this,_[4]),this.l=ba(_[5]||"",!0),dy(this,_[6]||"",!0),this.m=ba(_[7]||"")):(this.h=!1,this.i=new xa(null,this.h))}Gs.prototype.toString=function(){var p=[],_=this.j;_&&p.push(Ta(_,hy,!0),":");var b=this.g;return(b||_=="file")&&(p.push("//"),(_=this.o)&&p.push(Ta(_,hy,!0),"@"),p.push(encodeURIComponent(String(b)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.s,b!=null&&p.push(":",String(b))),(b=this.l)&&(this.g&&b.charAt(0)!="/"&&p.push("/"),p.push(Ta(b,b.charAt(0)=="/"?uI:cI,!0))),(b=this.i.toString())&&p.push("?",b),(b=this.m)&&p.push("#",Ta(b,hI)),p.join("")};function yi(p){return new Gs(p)}function Cc(p,_,b){p.j=b?ba(_,!0):_,p.j&&(p.j=p.j.replace(/:$/,""))}function Sc(p,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);p.s=_}else p.s=null}function dy(p,_,b){_ instanceof xa?(p.i=_,fI(p.i,p.h)):(b||(_=Ta(_,dI)),p.i=new xa(_,p.h))}function He(p,_,b){p.i.set(_,b)}function Pc(p){return He(p,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),p}function ba(p,_){return p?_?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function Ta(p,_,b){return typeof p=="string"?(p=encodeURI(p).replace(_,lI),b&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function lI(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var hy=/[#\/\?@]/g,cI=/[#\?:]/g,uI=/[#\?]/g,dI=/[#\?@]/g,hI=/#/g;function xa(p,_){this.h=this.g=null,this.i=p||null,this.j=!!_}function Wi(p){p.g||(p.g=new Map,p.h=0,p.i&&aI(p.i,function(_,b){p.add(decodeURIComponent(_.replace(/\+/g," ")),b)}))}n=xa.prototype,n.add=function(p,_){Wi(this),this.i=null,p=zr(this,p);var b=this.g.get(p);return b||this.g.set(p,b=[]),b.push(_),this.h+=1,this};function fy(p,_){Wi(p),_=zr(p,_),p.g.has(_)&&(p.i=null,p.h-=p.g.get(_).length,p.g.delete(_))}function py(p,_){return Wi(p),_=zr(p,_),p.g.has(_)}n.forEach=function(p,_){Wi(this),this.g.forEach(function(b,I){b.forEach(function(O){p.call(_,O,I,this)},this)},this)},n.na=function(){Wi(this);const p=Array.from(this.g.values()),_=Array.from(this.g.keys()),b=[];for(let I=0;I<_.length;I++){const O=p[I];for(let z=0;z<O.length;z++)b.push(_[I])}return b},n.V=function(p){Wi(this);let _=[];if(typeof p=="string")py(this,p)&&(_=_.concat(this.g.get(zr(this,p))));else{p=Array.from(this.g.values());for(let b=0;b<p.length;b++)_=_.concat(p[b])}return _},n.set=function(p,_){return Wi(this),this.i=null,p=zr(this,p),py(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[_]),this.h+=1,this},n.get=function(p,_){return p?(p=this.V(p),0<p.length?String(p[0]):_):_};function my(p,_,b){fy(p,_),0<b.length&&(p.i=null,p.g.set(zr(p,_),w(b)),p.h+=b.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],_=Array.from(this.g.keys());for(var b=0;b<_.length;b++){var I=_[b];const z=encodeURIComponent(String(I)),J=this.V(I);for(I=0;I<J.length;I++){var O=z;J[I]!==""&&(O+="="+encodeURIComponent(String(J[I]))),p.push(O)}}return this.i=p.join("&")};function zr(p,_){return _=String(_),p.j&&(_=_.toLowerCase()),_}function fI(p,_){_&&!p.j&&(Wi(p),p.i=null,p.g.forEach(function(b,I){var O=I.toLowerCase();I!=O&&(fy(this,I),my(this,O,b))},p)),p.j=_}function pI(p,_){const b=new _a;if(a.Image){const I=new Image;I.onload=y(Ki,b,"TestLoadImage: loaded",!0,_,I),I.onerror=y(Ki,b,"TestLoadImage: error",!1,_,I),I.onabort=y(Ki,b,"TestLoadImage: abort",!1,_,I),I.ontimeout=y(Ki,b,"TestLoadImage: timeout",!1,_,I),a.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=p}else _(!1)}function mI(p,_){const b=new _a,I=new AbortController,O=setTimeout(()=>{I.abort(),Ki(b,"TestPingServer: timeout",!1,_)},1e4);fetch(p,{signal:I.signal}).then(z=>{clearTimeout(O),z.ok?Ki(b,"TestPingServer: ok",!0,_):Ki(b,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(O),Ki(b,"TestPingServer: error",!1,_)})}function Ki(p,_,b,I,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),I(b)}catch{}}function gI(){this.g=new ma}function yI(p,_,b){const I=b||"";try{cy(p,function(O,z){let J=O;c(O)&&(J=Bs(O)),_.push(I+z+"="+encodeURIComponent(J))})}catch(O){throw _.push(I+"type="+encodeURIComponent("_badmap")),O}}function Rc(p){this.l=p.Ub||null,this.j=p.eb||!1}v(Rc,zs),Rc.prototype.g=function(){return new kc(this.l,this.j)},Rc.prototype.i=(function(p){return function(){return p}})({});function kc(p,_){we.call(this),this.D=p,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}v(kc,we),n=kc.prototype,n.open=function(p,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=p,this.A=_,this.readyState=1,Aa(this)},n.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};p&&(_.body=p),(this.D||a).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ea(this)),this.readyState=0},n.Sa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,Aa(this)),this.g&&(this.readyState=3,Aa(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;gy(this)}else p.text().then(this.Ra.bind(this),this.ga.bind(this))};function gy(p){p.j.read().then(p.Pa.bind(p)).catch(p.ga.bind(p))}n.Pa=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var _=p.value?p.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!p.done}))&&(this.response=this.responseText+=_)}p.done?Ea(this):Aa(this),this.readyState==3&&gy(this)}},n.Ra=function(p){this.g&&(this.response=this.responseText=p,Ea(this))},n.Qa=function(p){this.g&&(this.response=p,Ea(this))},n.ga=function(){this.g&&Ea(this)};function Ea(p){p.readyState=4,p.l=null,p.j=null,p.v=null,Aa(p)}n.setRequestHeader=function(p,_){this.u.append(p,_)},n.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],_=this.h.entries();for(var b=_.next();!b.done;)b=b.value,p.push(b[0]+": "+b[1]),b=_.next();return p.join(`\r
`)};function Aa(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty(kc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function yy(p){let _="";return U(p,function(b,I){_+=I,_+=":",_+=b,_+=`\r
`}),_}function Th(p,_,b){e:{for(I in b){var I=!1;break e}I=!0}I||(b=yy(b),typeof p=="string"?b!=null&&encodeURIComponent(String(b)):He(p,_,b))}function it(p){we.call(this),this.headers=new Map,this.o=p||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}v(it,we);var vI=/^https?$/i,_I=["POST","PUT"];n=it.prototype,n.Ha=function(p){this.J=p},n.ea=function(p,_,b,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);_=_?_.toUpperCase():"GET",this.D=p,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():mh.g(),this.v=this.o?Tc(this.o):Tc(mh),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(_,String(p),!0),this.B=!1}catch(z){vy(this,z);return}if(p=b||"",b=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var O in I)b.set(O,I[O]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const z of I.keys())b.set(z,I.get(z));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(b.keys()).find(z=>z.toLowerCase()=="content-type"),O=a.FormData&&p instanceof a.FormData,!(0<=Array.prototype.indexOf.call(_I,_,void 0))||I||O||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[z,J]of b)this.g.setRequestHeader(z,J);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{by(this),this.u=!0,this.g.send(p),this.u=!1}catch(z){vy(this,z)}};function vy(p,_){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=_,p.m=5,_y(p),Nc(p)}function _y(p){p.A||(p.A=!0,Se(p,"complete"),Se(p,"error"))}n.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=p||7,Se(this,"complete"),Se(this,"abort"),Nc(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Nc(this,!0)),it.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?wy(this):this.bb())},n.bb=function(){wy(this)};function wy(p){if(p.h&&typeof o<"u"&&(!p.v[1]||vi(p)!=4||p.Z()!=2)){if(p.u&&vi(p)==4)$i(p.Ea,0,p);else if(Se(p,"readystatechange"),vi(p)==4){p.h=!1;try{const J=p.Z();e:switch(J){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var b;if(!(b=_)){var I;if(I=J===0){var O=String(p.D).match(uy)[1]||null;!O&&a.self&&a.self.location&&(O=a.self.location.protocol.slice(0,-1)),I=!vI.test(O?O.toLowerCase():"")}b=I}if(b)Se(p,"complete"),Se(p,"success");else{p.m=6;try{var z=2<vi(p)?p.g.statusText:""}catch{z=""}p.l=z+" ["+p.Z()+"]",_y(p)}}finally{Nc(p)}}}}function Nc(p,_){if(p.g){by(p);const b=p.g,I=p.v[0]?()=>{}:null;p.g=null,p.v=null,_||Se(p,"ready");try{b.onreadystatechange=I}catch{}}}function by(p){p.I&&(a.clearTimeout(p.I),p.I=null)}n.isActive=function(){return!!this.g};function vi(p){return p.g?p.g.readyState:0}n.Z=function(){try{return 2<vi(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(p){if(this.g){var _=this.g.responseText;return p&&_.indexOf(p)==0&&(_=_.substring(p.length)),pa(_)}};function Ty(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.H){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function wI(p){const _={};p=(p.g&&2<=vi(p)&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<p.length;I++){if(P(p[I]))continue;var b=k(p[I]);const O=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const z=_[O]||[];_[O]=z,z.push(b)}C(_,function(I){return I.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ia(p,_,b){return b&&b.internalChannelParams&&b.internalChannelParams[p]||_}function xy(p){this.Aa=0,this.i=[],this.j=new _a,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ia("failFast",!1,p),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ia("baseRetryDelayMs",5e3,p),this.cb=Ia("retryDelaySeedMs",1e4,p),this.Wa=Ia("forwardChannelMaxRetries",2,p),this.wa=Ia("forwardChannelRequestTimeoutMs",2e4,p),this.pa=p&&p.xmlHttpFactory||void 0,this.Xa=p&&p.Tb||void 0,this.Ca=p&&p.useFetchStreams||!1,this.L=void 0,this.J=p&&p.supportsCrossDomainXhr||!1,this.K="",this.h=new sy(p&&p.concurrentRequestLimit),this.Da=new gI,this.P=p&&p.fastHandshake||!1,this.O=p&&p.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=p&&p.Rb||!1,p&&p.xa&&this.j.xa(),p&&p.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&p&&p.detectBufferingProxy||!1,this.ja=void 0,p&&p.longPollingTimeout&&0<p.longPollingTimeout&&(this.ja=p.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=xy.prototype,n.la=8,n.G=1,n.connect=function(p,_,b,I){Qt(0),this.W=p,this.H=_||{},b&&I!==void 0&&(this.H.OSID=b,this.H.OAID=I),this.F=this.X,this.I=Ny(this,null,this.W),Dc(this)};function xh(p){if(Ey(p),p.G==3){var _=p.U++,b=yi(p.I);if(He(b,"SID",p.K),He(b,"RID",_),He(b,"TYPE","terminate"),Ca(p,b),_=new ji(p,p.j,_),_.L=2,_.v=Pc(yi(b)),b=!1,a.navigator&&a.navigator.sendBeacon)try{b=a.navigator.sendBeacon(_.v.toString(),"")}catch{}!b&&a.Image&&(new Image().src=_.v,b=!0),b||(_.g=My(_.j,null),_.g.ea(_.v)),_.F=Date.now(),Ic(_)}ky(p)}function Mc(p){p.g&&(Ah(p),p.g.cancel(),p.g=null)}function Ey(p){Mc(p),p.u&&(a.clearTimeout(p.u),p.u=null),Lc(p),p.h.cancel(),p.s&&(typeof p.s=="number"&&a.clearTimeout(p.s),p.s=null)}function Dc(p){if(!ry(p.h)&&!p.s){p.s=!0;var _=p.Ga;K||Et(),Ee||(K(),Ee=!0),me.add(_,p),p.B=0}}function bI(p,_){return oy(p.h)>=p.h.j-(p.s?1:0)?!1:p.s?(p.i=_.D.concat(p.i),!0):p.G==1||p.G==2||p.B>=(p.Va?0:p.Wa)?!1:(p.s=va(m(p.Ga,p,_),Ry(p,p.B)),p.B++,!0)}n.Ga=function(p){if(this.s)if(this.s=null,this.G==1){if(!p){this.U=Math.floor(1e5*Math.random()),p=this.U++;const O=new ji(this,this.j,p);let z=this.o;if(this.S&&(z?(z=A(z),D(z,this.S)):z=this.S),this.m!==null||this.O||(O.H=z,z=null),this.P)e:{for(var _=0,b=0;b<this.i.length;b++){t:{var I=this.i[b];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(_+=I,4096<_){_=b;break e}if(_===4096||b===this.i.length-1){_=b+1;break e}}_=1e3}else _=1e3;_=Iy(this,O,_),b=yi(this.I),He(b,"RID",p),He(b,"CVER",22),this.D&&He(b,"X-HTTP-Session-Id",this.D),Ca(this,b),z&&(this.O?_="headers="+encodeURIComponent(String(yy(z)))+"&"+_:this.m&&Th(b,this.m,z)),bh(this.h,O),this.Ua&&He(b,"TYPE","init"),this.P?(He(b,"$req",_),He(b,"SID","null"),O.T=!0,yh(O,b,null)):yh(O,b,_),this.G=2}}else this.G==3&&(p?Ay(this,p):this.i.length==0||ry(this.h)||Ay(this))};function Ay(p,_){var b;_?b=_.l:b=p.U++;const I=yi(p.I);He(I,"SID",p.K),He(I,"RID",b),He(I,"AID",p.T),Ca(p,I),p.m&&p.o&&Th(I,p.m,p.o),b=new ji(p,p.j,b,p.B+1),p.m===null&&(b.H=p.o),_&&(p.i=_.D.concat(p.i)),_=Iy(p,b,1e3),b.I=Math.round(.5*p.wa)+Math.round(.5*p.wa*Math.random()),bh(p.h,b),yh(b,I,_)}function Ca(p,_){p.H&&U(p.H,function(b,I){He(_,I,b)}),p.l&&cy({},function(b,I){He(_,I,b)})}function Iy(p,_,b){b=Math.min(p.i.length,b);var I=p.l?m(p.l.Na,p.l,p):null;e:{var O=p.i;let z=-1;for(;;){const J=["count="+b];z==-1?0<b?(z=O[0].g,J.push("ofs="+z)):z=0:J.push("ofs="+z);let Ve=!0;for(let Mt=0;Mt<b;Mt++){let ke=O[Mt].g;const Ut=O[Mt].map;if(ke-=z,0>ke)z=Math.max(0,O[Mt].g-100),Ve=!1;else try{yI(Ut,J,"req"+ke+"_")}catch{I&&I(Ut)}}if(Ve){I=J.join("&");break e}}}return p=p.i.splice(0,b),_.D=p,I}function Cy(p){if(!p.g&&!p.u){p.Y=1;var _=p.Fa;K||Et(),Ee||(K(),Ee=!0),me.add(_,p),p.v=0}}function Eh(p){return p.g||p.u||3<=p.v?!1:(p.Y++,p.u=va(m(p.Fa,p),Ry(p,p.v)),p.v++,!0)}n.Fa=function(){if(this.u=null,Sy(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var p=2*this.R;this.j.info("BP detection timer enabled: "+p),this.A=va(m(this.ab,this),p)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Qt(10),Mc(this),Sy(this))};function Ah(p){p.A!=null&&(a.clearTimeout(p.A),p.A=null)}function Sy(p){p.g=new ji(p,p.j,"rpc",p.Y),p.m===null&&(p.g.H=p.o),p.g.O=0;var _=yi(p.qa);He(_,"RID","rpc"),He(_,"SID",p.K),He(_,"AID",p.T),He(_,"CI",p.F?"0":"1"),!p.F&&p.ja&&He(_,"TO",p.ja),He(_,"TYPE","xmlhttp"),Ca(p,_),p.m&&p.o&&Th(_,p.m,p.o),p.L&&(p.g.I=p.L);var b=p.g;p=p.ia,b.L=1,b.v=Pc(yi(_)),b.m=null,b.P=!0,ty(b,p)}n.Za=function(){this.C!=null&&(this.C=null,Mc(this),Eh(this),Qt(19))};function Lc(p){p.C!=null&&(a.clearTimeout(p.C),p.C=null)}function Py(p,_){var b=null;if(p.g==_){Lc(p),Ah(p),p.g=null;var I=2}else if(wh(p.h,_))b=_.D,ay(p.h,_),I=1;else return;if(p.G!=0){if(_.o)if(I==1){b=_.m?_.m.length:0,_=Date.now()-_.F;var O=p.B;I=xc(),Se(I,new Xg(I,b)),Dc(p)}else Cy(p);else if(O=_.s,O==3||O==0&&0<_.X||!(I==1&&bI(p,_)||I==2&&Eh(p)))switch(b&&0<b.length&&(_=p.h,_.i=_.i.concat(b)),O){case 1:$s(p,5);break;case 4:$s(p,10);break;case 3:$s(p,6);break;default:$s(p,2)}}}function Ry(p,_){let b=p.Ta+Math.floor(Math.random()*p.cb);return p.isActive()||(b*=2),b*_}function $s(p,_){if(p.j.info("Error code "+_),_==2){var b=m(p.fb,p),I=p.Xa;const O=!I;I=new Gs(I||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Cc(I,"https"),Pc(I),O?pI(I.toString(),b):mI(I.toString(),b)}else Qt(2);p.G=0,p.l&&p.l.sa(_),ky(p),Ey(p)}n.fb=function(p){p?(this.j.info("Successfully pinged google.com"),Qt(2)):(this.j.info("Failed to ping google.com"),Qt(1))};function ky(p){if(p.G=0,p.ka=[],p.l){const _=ly(p.h);(_.length!=0||p.i.length!=0)&&(T(p.ka,_),T(p.ka,p.i),p.h.i.length=0,w(p.i),p.i.length=0),p.l.ra()}}function Ny(p,_,b){var I=b instanceof Gs?yi(b):new Gs(b);if(I.g!="")_&&(I.g=_+"."+I.g),Sc(I,I.s);else{var O=a.location;I=O.protocol,_=_?_+"."+O.hostname:O.hostname,O=+O.port;var z=new Gs(null);I&&Cc(z,I),_&&(z.g=_),O&&Sc(z,O),b&&(z.l=b),I=z}return b=p.D,_=p.ya,b&&_&&He(I,b,_),He(I,"VER",p.la),Ca(p,I),I}function My(p,_,b){if(_&&!p.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=p.Ca&&!p.pa?new it(new Rc({eb:b})):new it(p.pa),_.Ha(p.J),_}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Dy(){}n=Dy.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Fc(){}Fc.prototype.g=function(p,_){return new wn(p,_)};function wn(p,_){we.call(this),this.g=new xy(_),this.l=p,this.h=_&&_.messageUrlParams||null,p=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(p?p["X-WebChannel-Content-Type"]=_.messageContentType:p={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(p?p["X-WebChannel-Client-Profile"]=_.va:p={"X-WebChannel-Client-Profile":_.va}),this.g.S=p,(p=_&&_.Sb)&&!P(p)&&(this.g.m=p),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!P(_)&&(this.g.D=_,p=this.h,p!==null&&_ in p&&(p=this.h,_ in p&&delete p[_])),this.j=new qr(this)}v(wn,we),wn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},wn.prototype.close=function(){xh(this.g)},wn.prototype.o=function(p){var _=this.g;if(typeof p=="string"){var b={};b.__data__=p,p=b}else this.u&&(b={},b.__data__=Bs(p),p=b);_.i.push(new sI(_.Ya++,p)),_.G==3&&Dc(_)},wn.prototype.N=function(){this.g.l=null,delete this.j,xh(this.g),delete this.g,wn.aa.N.call(this)};function Ly(p){fh.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var _=p.__sm__;if(_){e:{for(const b in _){p=b;break e}p=void 0}(this.i=p)&&(p=this.i,_=_!==null&&p in _?_[p]:void 0),this.data=_}else this.data=p}v(Ly,fh);function Fy(){ph.call(this),this.status=1}v(Fy,ph);function qr(p){this.g=p}v(qr,Dy),qr.prototype.ua=function(){Se(this.g,"a")},qr.prototype.ta=function(p){Se(this.g,new Ly(p))},qr.prototype.sa=function(p){Se(this.g,new Fy)},qr.prototype.ra=function(){Se(this.g,"b")},Fc.prototype.createWebChannel=Fc.prototype.g,wn.prototype.send=wn.prototype.o,wn.prototype.open=wn.prototype.m,wn.prototype.close=wn.prototype.close,m2=function(){return new Fc},p2=function(){return xc()},f2=qs,If={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ec.NO_ERROR=0,Ec.TIMEOUT=8,Ec.HTTP_ERROR=6,uu=Ec,Qg.COMPLETE="complete",h2=Qg,Wg.EventType=ga,ga.OPEN="a",ga.CLOSE="b",ga.ERROR="c",ga.MESSAGE="d",we.prototype.listen=we.prototype.K,Wa=Wg,it.prototype.listenOnce=it.prototype.L,it.prototype.getLastError=it.prototype.Ka,it.prototype.getLastErrorCode=it.prototype.Ba,it.prototype.getStatus=it.prototype.Z,it.prototype.getResponseJson=it.prototype.Oa,it.prototype.getResponseText=it.prototype.oa,it.prototype.send=it.prototype.ea,it.prototype.setWithCredentials=it.prototype.Ha,d2=it}).apply(typeof Bc<"u"?Bc:typeof self<"u"?self:typeof window<"u"?window:{});const kv="@firebase/firestore",Nv="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Pt.UNAUTHENTICATED=new Pt(null),Pt.GOOGLE_CREDENTIALS=new Pt("google-credentials-uid"),Pt.FIRST_PARTY=new Pt("first-party-uid"),Pt.MOCK_USER=new Pt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zo="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vs=new ud("@firebase/firestore");function Qr(){return vs.logLevel}function A5(n){vs.setLogLevel(n)}function $(n,...e){if(vs.logLevel<=be.DEBUG){const t=e.map(dm);vs.debug(`Firestore (${Zo}): ${n}`,...t)}}function ct(n,...e){if(vs.logLevel<=be.ERROR){const t=e.map(dm);vs.error(`Firestore (${Zo}): ${n}`,...t)}}function di(n,...e){if(vs.logLevel<=be.WARN){const t=e.map(dm);vs.warn(`Firestore (${Zo}): ${n}`,...t)}}function dm(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,g2(n,i,t)}function g2(n,e,t){let i=`FIRESTORE (${Zo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw ct(i),new Error(i)}function ne(n,e,t,i){let s="Unexpected state";typeof t=="string"?s=t:i=t,n||g2(e,s,i)}function I5(n,e){n||Z(57014,e)}function X(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class G extends Yt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class C5{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Pt.UNAUTHENTICATED)))}shutdown(){}}class S5{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class P5{constructor(e){this.t=e,this.currentUser=Pt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ne(this.o===void 0,42304);let i=this.i;const s=l=>this.i!==i?(i=this.i,t(l)):Promise.resolve();let r=new Ft;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new Ft,e.enqueueRetryable((()=>s(this.currentUser)))};const o=()=>{const l=r;e.enqueueRetryable((async()=>{await l.promise,await s(this.currentUser)}))},a=l=>{$("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((l=>a(l))),setTimeout((()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):($("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new Ft)}}),0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?($("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ne(typeof i.accessToken=="string",31837,{l:i}),new y2(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ne(e===null||typeof e=="string",2055,{h:e}),new Pt(e)}}class R5{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=Pt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class k5{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new R5(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Pt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Mv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class N5{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,je(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ne(this.o===void 0,3512);const i=r=>{r.error!=null&&$("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${r.error.message}`);const o=r.token!==this.m;return this.m=r.token,$("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(r.token):Promise.resolve()};this.o=r=>{e.enqueueRetryable((()=>i(r)))};const s=r=>{$("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((r=>s(r))),setTimeout((()=>{if(!this.appCheck){const r=this.V.getImmediate({optional:!0});r?s(r):$("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Mv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(ne(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Mv(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M5(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=M5(40);for(let r=0;r<s.length;++r)i.length<20&&s[r]<t&&(i+=e.charAt(s[r]%62))}return i}}function he(n,e){return n<e?-1:n>e?1:0}function Cf(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++){const s=n.charAt(i),r=e.charAt(i);if(s!==r)return Bh(s)===Bh(r)?he(s,r):Bh(s)?1:-1}return he(n.length,e.length)}const D5=55296,L5=57343;function Bh(n){const e=n.charCodeAt(0);return e>=D5&&e<=L5}function Io(n,e,t){return n.length===e.length&&n.every(((i,s)=>t(i,e[s])))}function v2(n){return n+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dv="__name__";class Yn{constructor(e,t,i){t===void 0?t=0:t>e.length&&Z(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Z(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Yn.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Yn?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let s=0;s<i;s++){const r=Yn.compareSegments(e.get(s),t.get(s));if(r!==0)return r}return he(e.length,t.length)}static compareSegments(e,t){const i=Yn.isNumericId(e),s=Yn.isNumericId(t);return i&&!s?-1:!i&&s?1:i&&s?Yn.extractNumericId(e).compare(Yn.extractNumericId(t)):Cf(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ds.fromString(e.substring(4,e.length-2))}}class Te extends Yn{construct(e,t,i){return new Te(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new G(B.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((s=>s.length>0)))}return new Te(t)}static emptyPath(){return new Te([])}}const F5=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xe extends Yn{construct(e,t,i){return new Xe(e,t,i)}static isValidIdentifier(e){return F5.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xe.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Dv}static keyField(){return new Xe([Dv])}static fromServerFormat(e){const t=[];let i="",s=0;const r=()=>{if(i.length===0)throw new G(B.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new G(B.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new G(B.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(i+=a,s++):(r(),s++)}if(r(),o)throw new G(B.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Xe(t)}static emptyPath(){return new Xe([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.path=e}static fromPath(e){return new Y(Te.fromString(e))}static fromName(e){return new Y(Te.fromString(e).popFirst(5))}static empty(){return new Y(Te.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Te.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Te.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Y(new Te(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fm(n,e,t){if(!t)throw new G(B.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function _2(n,e,t,i){if(e===!0&&i===!0)throw new G(B.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Lv(n){if(!Y.isDocumentKey(n))throw new G(B.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Fv(n){if(Y.isDocumentKey(n))throw new G(B.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function w2(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Td(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Z(12329,{type:typeof n})}function Ne(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new G(B.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Td(n);throw new G(B.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function b2(n,e){if(e<=0)throw new G(B.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _t(n,e){const t={typeString:n};return e&&(t.value=e),t}function nc(n,e){if(!w2(n))throw new G(B.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const s=e[i].typeString,r="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const o=n[i];if(s&&typeof o!==s){t=`JSON field '${i}' must be a ${s}.`;break}if(r!==void 0&&o!==r.value){t=`Expected '${i}' field to equal '${r.value}'`;break}}if(t)throw new G(B.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vv=-62135596800,Ov=1e6;class De{static now(){return De.fromMillis(Date.now())}static fromDate(e){return De.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*Ov);return new De(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new G(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new G(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Vv)throw new G(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new G(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ov}_compareTo(e){return this.seconds===e.seconds?he(this.nanoseconds,e.nanoseconds):he(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:De._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(nc(e,De._jsonSchema))return new De(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Vv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}De._jsonSchemaVersion="firestore/timestamp/1.0",De._jsonSchema={type:_t("string",De._jsonSchemaVersion),seconds:_t("number"),nanoseconds:_t("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{static fromTimestamp(e){return new re(e)}static min(){return new re(new De(0,0))}static max(){return new re(new De(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Co=-1;class Lu{constructor(e,t,i,s){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=s}}function Sf(n){return n.fields.find((e=>e.kind===2))}function Ks(n){return n.fields.filter((e=>e.kind!==2))}Lu.UNKNOWN_ID=-1;class du{constructor(e,t){this.fieldPath=e,this.kind=t}}class Pl{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Pl(0,Sn.min())}}function T2(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,s=re.fromTimestamp(i===1e9?new De(t+1,0):new De(t,i));return new Sn(s,Y.empty(),e)}function x2(n){return new Sn(n.readTime,n.key,Co)}class Sn{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Sn(re.min(),Y.empty(),Co)}static max(){return new Sn(re.max(),Y.empty(),Co)}}function pm(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Y.comparator(n.documentKey,e.documentKey),t!==0?t:he(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class A2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ks(n){if(n.code!==B.FAILED_PRECONDITION||n.message!==E2)throw n;$("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Z(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new V(((i,s)=>{this.nextCallback=r=>{this.wrapSuccess(e,r).next(i,s)},this.catchCallback=r=>{this.wrapFailure(t,r).next(i,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof V?t:V.resolve(t)}catch(t){return V.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):V.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):V.reject(t)}static resolve(e){return new V(((t,i)=>{t(e)}))}static reject(e){return new V(((t,i)=>{i(e)}))}static waitFor(e){return new V(((t,i)=>{let s=0,r=0,o=!1;e.forEach((a=>{++s,a.next((()=>{++r,o&&r===s&&t()}),(l=>i(l)))})),o=!0,r===s&&t()}))}static or(e){let t=V.resolve(!1);for(const i of e)t=t.next((s=>s?V.resolve(s):i()));return t}static forEach(e,t){const i=[];return e.forEach(((s,r)=>{i.push(t.call(this,s,r))})),this.waitFor(i)}static mapArray(e,t){return new V(((i,s)=>{const r=e.length,o=new Array(r);let a=0;for(let l=0;l<r;l++){const c=l;t(e[c]).next((d=>{o[c]=d,++a,a===r&&i(o)}),(d=>s(d)))}}))}static doWhile(e,t){return new V(((i,s)=>{const r=()=>{e()===!0?t().next((()=>{r()}),s):i()};r()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tn="SimpleDb";class xd{static open(e,t,i,s){try{return new xd(t,e.transaction(s,i))}catch(r){throw new ol(t,r)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Ft,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new ol(e,t.error)):this.S.resolve()},this.transaction.onerror=i=>{const s=mm(i.target.error);this.S.reject(new ol(e,s))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||($(Tn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new O5(t)}}class oi{static delete(e){return $(Tn,"Removing database:",e),Js(Dp().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!Tl())return!1;if(oi.F())return!0;const e=et(),t=oi.M(e),i=0<t&&t<10,s=I2(e),r=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||r)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(i)}constructor(e,t,i){this.name=e,this.version=t,this.N=i,this.B=null,oi.M(et())===12.2&&ct("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||($(Tn,"Opening database:",this.name),this.db=await new Promise(((t,i)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=r=>{const o=r.target.result;t(o)},s.onblocked=()=>{i(new ol(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=r=>{const o=r.target.error;o.name==="VersionError"?i(new G(B.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?i(new G(B.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):i(new ol(e,o))},s.onupgradeneeded=r=>{$(Tn,'Database "'+this.name+'" requires upgrade from version:',r.oldVersion);const o=r.target.result;this.N.k(o,s.transaction,r.oldVersion,this.version).next((()=>{$(Tn,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,i,s){const r=t==="readonly";let o=0;for(;;){++o;try{this.db=await this.L(e);const a=xd.open(this.db,e,r?"readonly":"readwrite",i),l=s(a).next((c=>(a.C(),c))).catch((c=>(a.abort(c),V.reject(c)))).toPromise();return l.catch((()=>{})),await a.D,l}catch(a){const l=a,c=l.name!=="FirebaseError"&&o<3;if($(Tn,"Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function I2(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class V5{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return Js(this.U.delete())}}class ol extends G{constructor(e,t){super(B.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ns(n){return n.name==="IndexedDbTransactionError"}class O5{constructor(e){this.store=e}put(e,t){let i;return t!==void 0?($(Tn,"PUT",this.store.name,e,t),i=this.store.put(t,e)):($(Tn,"PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),Js(i)}add(e){return $(Tn,"ADD",this.store.name,e,e),Js(this.store.add(e))}get(e){return Js(this.store.get(e)).next((t=>(t===void 0&&(t=null),$(Tn,"GET",this.store.name,e,t),t)))}delete(e){return $(Tn,"DELETE",this.store.name,e),Js(this.store.delete(e))}count(){return $(Tn,"COUNT",this.store.name),Js(this.store.count())}J(e,t){const i=this.options(e,t),s=i.index?this.store.index(i.index):this.store;if(typeof s.getAll=="function"){const r=s.getAll(i.range);return new V(((o,a)=>{r.onerror=l=>{a(l.target.error)},r.onsuccess=l=>{o(l.target.result)}}))}{const r=this.cursor(i),o=[];return this.H(r,((a,l)=>{o.push(l)})).next((()=>o))}}Y(e,t){const i=this.store.getAll(e,t===null?void 0:t);return new V(((s,r)=>{i.onerror=o=>{r(o.target.error)},i.onsuccess=o=>{s(o.target.result)}}))}Z(e,t){$(Tn,"DELETE ALL",this.store.name);const i=this.options(e,t);i.X=!1;const s=this.cursor(i);return this.H(s,((r,o,a)=>a.delete()))}ee(e,t){let i;t?i=e:(i={},t=e);const s=this.cursor(i);return this.H(s,t)}te(e){const t=this.cursor({});return new V(((i,s)=>{t.onerror=r=>{const o=mm(r.target.error);s(o)},t.onsuccess=r=>{const o=r.target.result;o?e(o.primaryKey,o.value).next((a=>{a?o.continue():i()})):i()}}))}H(e,t){const i=[];return new V(((s,r)=>{e.onerror=o=>{r(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void s();const l=new V5(a),c=t(a.primaryKey,a.value,l);if(c instanceof V){const d=c.catch((f=>(l.done(),V.reject(f))));i.push(d)}l.isDone?s():l.G===null?a.continue():a.continue(l.G)}})).next((()=>V.waitFor(i)))}options(e,t){let i;return e!==void 0&&(typeof e=="string"?i=e:t=e),{index:i,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const i=this.store.index(e.index);return e.X?i.openKeyCursor(e.range,t):i.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Js(n){return new V(((e,t)=>{n.onsuccess=i=>{const s=i.target.result;e(s)},n.onerror=i=>{const s=mm(i.target.error);t(s)}}))}let Uv=!1;function mm(n){const e=oi.M(et());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const i=new G("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Uv||(Uv=!0,setTimeout((()=>{throw i}),0)),i}}return n}const al="IndexBackfiller";class U5{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){$(al,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();$(al,`Documents written: ${t}`)}catch(t){Ns(t)?$(al,"Ignoring IndexedDB error during index backfill: ",t):await ks(t)}await this.re(6e4)}))}}class B5{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const i=new Set;let s=t,r=!0;return V.doWhile((()=>r===!0&&s>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((o=>{if(o!==null&&!i.has(o))return $(al,`Processing collection: ${o}`),this.oe(e,o,s).next((a=>{s-=a,i.add(o)}));r=!1})))).next((()=>t-s))}oe(e,t,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((s=>this.localStore.localDocuments.getNextDocuments(e,t,s,i).next((r=>{const o=r.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next((()=>this._e(s,r))).next((a=>($(al,`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a)))).next((()=>o.size))}))))}_e(e,t){let i=e;return t.changes.forEach(((s,r)=>{const o=x2(r);pm(o,i)>0&&(i=o)})),new Sn(i.readTime,i.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}mn.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hs=-1;function ic(n){return n==null}function Rl(n){return n===0&&1/n==-1/0}function C2(n){return typeof n=="number"&&Number.isInteger(n)&&!Rl(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fu="";function Jt(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Bv(e)),e=z5(n.get(t),e);return Bv(e)}function z5(n,e){let t=e;const i=n.length;for(let s=0;s<i;s++){const r=n.charAt(s);switch(r){case"\0":t+="";break;case Fu:t+="";break;default:t+=r}}return t}function Bv(n){return n+Fu+""}function si(n){const e=n.length;if(ne(e>=2,64408,{path:n}),e===2)return ne(n.charAt(0)===Fu&&n.charAt(1)==="",56145,{path:n}),Te.emptyPath();const t=e-2,i=[];let s="";for(let r=0;r<e;){const o=n.indexOf(Fu,r);switch((o<0||o>t)&&Z(50515,{path:n}),n.charAt(o+1)){case"":const a=n.substring(r,o);let l;s.length===0?l=a:(s+=a,l=s,s=""),i.push(l);break;case"":s+=n.substring(r,o),s+="\0";break;case"":s+=n.substring(r,o+1);break;default:Z(61167,{path:n})}r=o+2}return new Te(i)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ys="remoteDocuments",sc="owner",$r="owner",kl="mutationQueues",q5="userId",Bn="mutations",zv="batchId",ir="userMutationsIndex",qv=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hu(n,e){return[n,Jt(e)]}function S2(n,e,t){return[n,Jt(e),t]}const H5={},So="documentMutations",Vu="remoteDocumentsV14",G5=["prefixPath","collectionGroup","readTime","documentId"],fu="documentKeyIndex",$5=["prefixPath","collectionGroup","documentId"],P2="collectionGroupIndex",j5=["collectionGroup","readTime","prefixPath","documentId"],Nl="remoteDocumentGlobal",Pf="remoteDocumentGlobalKey",Po="targets",R2="queryTargetsIndex",W5=["canonicalId","targetId"],Ro="targetDocuments",K5=["targetId","path"],gm="documentTargetsIndex",Y5=["path","targetId"],Ou="targetGlobalKey",cr="targetGlobal",Ml="collectionParents",J5=["collectionId","parent"],ko="clientMetadata",X5="clientId",Ed="bundles",Q5="bundleId",Ad="namedQueries",Z5="name",ym="indexConfiguration",e4="indexId",Rf="collectionGroupIndex",t4="collectionGroup",ll="indexState",n4=["indexId","uid"],k2="sequenceNumberIndex",i4=["uid","sequenceNumber"],cl="indexEntries",s4=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],N2="documentKeyIndex",r4=["indexId","uid","orderedDocumentKey"],Id="documentOverlays",o4=["userId","collectionPath","documentId"],kf="collectionPathOverlayIndex",a4=["userId","collectionPath","largestBatchId"],M2="collectionGroupOverlayIndex",l4=["userId","collectionGroup","largestBatchId"],vm="globals",c4="name",D2=[kl,Bn,So,Ys,Po,sc,cr,Ro,ko,Nl,Ml,Ed,Ad],u4=[...D2,Id],L2=[kl,Bn,So,Vu,Po,sc,cr,Ro,ko,Nl,Ml,Ed,Ad,Id],F2=L2,_m=[...F2,ym,ll,cl],d4=_m,V2=[..._m,vm],h4=V2;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf extends A2{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function xt(n,e){const t=X(n);return oi.O(t.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hv(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ms(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function O2(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{constructor(e,t){this.comparator=e,this.root=t||Dt.EMPTY}insert(e,t){return new qe(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Dt.BLACK,null,null))}remove(e){return new qe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Dt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return t+i.left.size;s<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new zc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new zc(this.root,e,this.comparator,!1)}getReverseIterator(){return new zc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new zc(this.root,e,this.comparator,!0)}}class zc{constructor(e,t,i,s){this.isReverse=s,this.nodeStack=[];let r=1;for(;!e.isEmpty();)if(r=t?i(e.key,t):1,t&&s&&(r*=-1),r<0)e=this.isReverse?e.left:e.right;else{if(r===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Dt{constructor(e,t,i,s,r){this.key=e,this.value=t,this.color=i??Dt.RED,this.left=s??Dt.EMPTY,this.right=r??Dt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,s,r){return new Dt(e??this.key,t??this.value,i??this.color,s??this.left,r??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let s=this;const r=i(e,s.key);return s=r<0?s.copy(null,null,null,s.left.insert(e,t,i),null):r===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Dt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return Dt.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Dt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Dt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Z(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Z(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Z(27949);return e+(this.isRed()?0:1)}}Dt.EMPTY=null,Dt.RED=!0,Dt.BLACK=!1;Dt.EMPTY=new class{constructor(){this.size=0}get key(){throw Z(57766)}get value(){throw Z(16141)}get color(){throw Z(16727)}get left(){throw Z(29726)}get right(){throw Z(36894)}copy(e,t,i,s,r){return this}insert(e,t,i){return new Dt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(e){this.comparator=e,this.data=new qe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Gv(this.data.getIterator())}getIteratorFrom(e){return new Gv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Fe)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,r=i.getNext().key;if(this.comparator(s,r)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Fe(this.comparator);return t.data=e,t}}class Gv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function jr(n){return n.hasNext()?n.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e){this.fields=e,e.sort(Xe.comparator)}static empty(){return new gn([])}unionWith(e){let t=new Fe(Xe.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new gn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Io(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f4(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new U2("Invalid base64 string: "+r):r}})(e);return new st(t)}static fromUint8Array(e){const t=(function(s){let r="";for(let o=0;o<s.length;++o)r+=String.fromCharCode(s[o]);return r})(e);return new st(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let s=0;s<t.length;s++)i[s]=t.charCodeAt(s);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return he(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}st.EMPTY_BYTE_STRING=new st("");const p4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Pi(n){if(ne(!!n,39018),typeof n=="string"){let e=0;const t=p4.exec(n);if(ne(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Je(n.seconds),nanos:Je(n.nanos)}}function Je(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ri(n){return typeof n=="string"?st.fromBase64String(n):st.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B2="server_timestamp",z2="__type__",q2="__previous_value__",H2="__local_write_time__";function Cd(n){return(n?.mapValue?.fields||{})[z2]?.stringValue===B2}function Sd(n){const e=n.mapValue.fields[q2];return Cd(e)?Sd(e):e}function Dl(n){const e=Pi(n.mapValue.fields[H2].timestampValue);return new De(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m4{constructor(e,t,i,s,r,o,a,l,c,d){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=s,this.ssl=r,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c,this.isUsingEmulator=d}}const Mf="(default)";class _s{constructor(e,t){this.projectId=e,this.database=t||Mf}static empty(){return new _s("","")}get isDefaultDatabase(){return this.database===Mf}isEqual(e){return e instanceof _s&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wm="__type__",G2="__max__",rs={mapValue:{fields:{__type__:{stringValue:G2}}}},bm="__vector__",No="value",pu={nullValue:"NULL_VALUE"};function ws(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Cd(n)?4:$2(n)?9007199254740991:Pd(n)?10:11:Z(28295,{value:n})}function hi(n,e){if(n===e)return!0;const t=ws(n);if(t!==ws(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Dl(n).isEqual(Dl(e));case 3:return(function(s,r){if(typeof s.timestampValue=="string"&&typeof r.timestampValue=="string"&&s.timestampValue.length===r.timestampValue.length)return s.timestampValue===r.timestampValue;const o=Pi(s.timestampValue),a=Pi(r.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(s,r){return Ri(s.bytesValue).isEqual(Ri(r.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(s,r){return Je(s.geoPointValue.latitude)===Je(r.geoPointValue.latitude)&&Je(s.geoPointValue.longitude)===Je(r.geoPointValue.longitude)})(n,e);case 2:return(function(s,r){if("integerValue"in s&&"integerValue"in r)return Je(s.integerValue)===Je(r.integerValue);if("doubleValue"in s&&"doubleValue"in r){const o=Je(s.doubleValue),a=Je(r.doubleValue);return o===a?Rl(o)===Rl(a):isNaN(o)&&isNaN(a)}return!1})(n,e);case 9:return Io(n.arrayValue.values||[],e.arrayValue.values||[],hi);case 10:case 11:return(function(s,r){const o=s.mapValue.fields||{},a=r.mapValue.fields||{};if(Hv(o)!==Hv(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!hi(o[l],a[l])))return!1;return!0})(n,e);default:return Z(52216,{left:n})}}function Ll(n,e){return(n.values||[]).find((t=>hi(t,e)))!==void 0}function bs(n,e){if(n===e)return 0;const t=ws(n),i=ws(e);if(t!==i)return he(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return he(n.booleanValue,e.booleanValue);case 2:return(function(r,o){const a=Je(r.integerValue||r.doubleValue),l=Je(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1})(n,e);case 3:return $v(n.timestampValue,e.timestampValue);case 4:return $v(Dl(n),Dl(e));case 5:return Cf(n.stringValue,e.stringValue);case 6:return(function(r,o){const a=Ri(r),l=Ri(o);return a.compareTo(l)})(n.bytesValue,e.bytesValue);case 7:return(function(r,o){const a=r.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const d=he(a[c],l[c]);if(d!==0)return d}return he(a.length,l.length)})(n.referenceValue,e.referenceValue);case 8:return(function(r,o){const a=he(Je(r.latitude),Je(o.latitude));return a!==0?a:he(Je(r.longitude),Je(o.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return jv(n.arrayValue,e.arrayValue);case 10:return(function(r,o){const a=r.fields||{},l=o.fields||{},c=a[No]?.arrayValue,d=l[No]?.arrayValue,f=he(c?.values?.length||0,d?.values?.length||0);return f!==0?f:jv(c,d)})(n.mapValue,e.mapValue);case 11:return(function(r,o){if(r===rs.mapValue&&o===rs.mapValue)return 0;if(r===rs.mapValue)return 1;if(o===rs.mapValue)return-1;const a=r.fields||{},l=Object.keys(a),c=o.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let f=0;f<l.length&&f<d.length;++f){const m=Cf(l[f],d[f]);if(m!==0)return m;const y=bs(a[l[f]],c[d[f]]);if(y!==0)return y}return he(l.length,d.length)})(n.mapValue,e.mapValue);default:throw Z(23264,{he:t})}}function $v(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return he(n,e);const t=Pi(n),i=Pi(e),s=he(t.seconds,i.seconds);return s!==0?s:he(t.nanos,i.nanos)}function jv(n,e){const t=n.values||[],i=e.values||[];for(let s=0;s<t.length&&s<i.length;++s){const r=bs(t[s],i[s]);if(r)return r}return he(t.length,i.length)}function Mo(n){return Df(n)}function Df(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=Pi(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Ri(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Y.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",s=!0;for(const r of t.values||[])s?s=!1:i+=",",i+=Df(r);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let s="{",r=!0;for(const o of i)r?r=!1:s+=",",s+=`${o}:${Df(t.fields[o])}`;return s+"}"})(n.mapValue):Z(61005,{value:n})}function mu(n){switch(ws(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Sd(n);return e?16+mu(e):16;case 5:return 2*n.stringValue.length;case 6:return Ri(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((s,r)=>s+mu(r)),0)})(n.arrayValue);case 10:case 11:return(function(i){let s=0;return Ms(i.fields,((r,o)=>{s+=r.length+mu(o)})),s})(n.mapValue);default:throw Z(13486,{value:n})}}function pr(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Lf(n){return!!n&&"integerValue"in n}function Fl(n){return!!n&&"arrayValue"in n}function Wv(n){return!!n&&"nullValue"in n}function Kv(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function gu(n){return!!n&&"mapValue"in n}function Pd(n){return(n?.mapValue?.fields||{})[wm]?.stringValue===bm}function ul(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Ms(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=ul(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ul(n.arrayValue.values[t]);return e}return{...n}}function $2(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===G2}const j2={mapValue:{fields:{[wm]:{stringValue:bm},[No]:{arrayValue:{}}}}};function g4(n){return"nullValue"in n?pu:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?pr(_s.empty(),Y.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Pd(n)?j2:{mapValue:{}}:Z(35942,{value:n})}function y4(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?pr(_s.empty(),Y.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?j2:"mapValue"in n?Pd(n)?{mapValue:{}}:rs:Z(61959,{value:n})}function Yv(n,e){const t=bs(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Jv(n,e){const t=bs(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.value=e}static empty(){return new Lt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!gu(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ul(t)}setAll(e){let t=Xe.emptyPath(),i={},s=[];e.forEach(((o,a)=>{if(!t.isImmediateParentOf(a)){const l=this.getFieldsMap(t);this.applyChanges(l,i,s),i={},s=[],t=a.popLast()}o?i[a.lastSegment()]=ul(o):s.push(a.lastSegment())}));const r=this.getFieldsMap(t);this.applyChanges(r,i,s)}delete(e){const t=this.field(e.popLast());gu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return hi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=t.mapValue.fields[e.get(i)];gu(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,i){Ms(t,((s,r)=>e[s]=r));for(const s of i)delete e[s]}clone(){return new Lt(ul(this.value))}}function W2(n){const e=[];return Ms(n.fields,((t,i)=>{const s=new Xe([t]);if(gu(i)){const r=W2(i.mapValue).fields;if(r.length===0)e.push(s);else for(const o of r)e.push(s.child(o))}else e.push(s)})),new gn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(e,t,i,s,r,o,a){this.key=e,this.documentType=t,this.version=i,this.readTime=s,this.createTime=r,this.data=o,this.documentState=a}static newInvalidDocument(e){return new $e(e,0,re.min(),re.min(),re.min(),Lt.empty(),0)}static newFoundDocument(e,t,i,s){return new $e(e,1,t,re.min(),i,s,0)}static newNoDocument(e,t){return new $e(e,2,t,re.min(),re.min(),Lt.empty(),0)}static newUnknownDocument(e,t){return new $e(e,3,t,re.min(),re.min(),Lt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Lt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Lt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof $e&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new $e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e,t){this.position=e,this.inclusive=t}}function Xv(n,e,t){let i=0;for(let s=0;s<n.position.length;s++){const r=e[s],o=n.position[s];if(r.field.isKeyField()?i=Y.comparator(Y.fromName(o.referenceValue),t.key):i=bs(o,t.data.field(r.field)),r.dir==="desc"&&(i*=-1),i!==0)break}return i}function Qv(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!hi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(e,t="asc"){this.field=e,this.dir=t}}function v4(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K2{}class xe extends K2{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new _4(e,t,i):t==="array-contains"?new T4(e,i):t==="in"?new eT(e,i):t==="not-in"?new x4(e,i):t==="array-contains-any"?new E4(e,i):new xe(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new w4(e,i):new b4(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(bs(t,this.value)):t!==null&&ws(this.value)===ws(t)&&this.matchesComparison(bs(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Z(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Le extends K2{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Le(e,t)}matches(e){return Do(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Do(n){return n.op==="and"}function Ff(n){return n.op==="or"}function Tm(n){return Y2(n)&&Do(n)}function Y2(n){for(const e of n.filters)if(e instanceof Le)return!1;return!0}function Vf(n){if(n instanceof xe)return n.field.canonicalString()+n.op.toString()+Mo(n.value);if(Tm(n))return n.filters.map((e=>Vf(e))).join(",");{const e=n.filters.map((t=>Vf(t))).join(",");return`${n.op}(${e})`}}function J2(n,e){return n instanceof xe?(function(i,s){return s instanceof xe&&i.op===s.op&&i.field.isEqual(s.field)&&hi(i.value,s.value)})(n,e):n instanceof Le?(function(i,s){return s instanceof Le&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce(((r,o,a)=>r&&J2(o,s.filters[a])),!0):!1})(n,e):void Z(19439)}function X2(n,e){const t=n.filters.concat(e);return Le.create(t,n.op)}function Q2(n){return n instanceof xe?(function(t){return`${t.field.canonicalString()} ${t.op} ${Mo(t.value)}`})(n):n instanceof Le?(function(t){return t.op.toString()+" {"+t.getFilters().map(Q2).join(" ,")+"}"})(n):"Filter"}class _4 extends xe{constructor(e,t,i){super(e,t,i),this.key=Y.fromName(i.referenceValue)}matches(e){const t=Y.comparator(e.key,this.key);return this.matchesComparison(t)}}class w4 extends xe{constructor(e,t){super(e,"in",t),this.keys=Z2("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class b4 extends xe{constructor(e,t){super(e,"not-in",t),this.keys=Z2("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Z2(n,e){return(e.arrayValue?.values||[]).map((t=>Y.fromName(t.referenceValue)))}class T4 extends xe{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Fl(t)&&Ll(t.arrayValue,this.value)}}class eT extends xe{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Ll(this.value.arrayValue,t)}}class x4 extends xe{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ll(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Ll(this.value.arrayValue,t)}}class E4 extends xe{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Fl(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>Ll(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A4{constructor(e,t=null,i=[],s=[],r=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=s,this.limit=r,this.startAt=o,this.endAt=a,this.Te=null}}function Of(n,e=null,t=[],i=[],s=null,r=null,o=null){return new A4(n,e,t,i,s,r,o)}function mr(n){const e=X(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>Vf(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(r){return r.field.canonicalString()+r.dir})(i))).join(","),ic(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Mo(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Mo(i))).join(",")),e.Te=t}return e.Te}function rc(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!v4(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!J2(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Qv(n.startAt,e.startAt)&&Qv(n.endAt,e.endAt)}function Uu(n){return Y.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Bu(n,e){return n.filters.filter((t=>t instanceof xe&&t.field.isEqual(e)))}function Zv(n,e,t){let i=pu,s=!0;for(const r of Bu(n,e)){let o=pu,a=!0;switch(r.op){case"<":case"<=":o=g4(r.value);break;case"==":case"in":case">=":o=r.value;break;case">":o=r.value,a=!1;break;case"!=":case"not-in":o=pu}Yv({value:i,inclusive:s},{value:o,inclusive:a})<0&&(i=o,s=a)}if(t!==null){for(let r=0;r<n.orderBy.length;++r)if(n.orderBy[r].field.isEqual(e)){const o=t.position[r];Yv({value:i,inclusive:s},{value:o,inclusive:t.inclusive})<0&&(i=o,s=t.inclusive);break}}return{value:i,inclusive:s}}function e0(n,e,t){let i=rs,s=!0;for(const r of Bu(n,e)){let o=rs,a=!0;switch(r.op){case">=":case">":o=y4(r.value),a=!1;break;case"==":case"in":case"<=":o=r.value;break;case"<":o=r.value,a=!1;break;case"!=":case"not-in":o=rs}Jv({value:i,inclusive:s},{value:o,inclusive:a})>0&&(i=o,s=a)}if(t!==null){for(let r=0;r<n.orderBy.length;++r)if(n.orderBy[r].field.isEqual(e)){const o=t.position[r];Jv({value:i,inclusive:s},{value:o,inclusive:t.inclusive})>0&&(i=o,s=t.inclusive);break}}return{value:i,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(e,t=null,i=[],s=[],r=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=s,this.limit=r,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function tT(n,e,t,i,s,r,o,a){return new Di(n,e,t,i,s,r,o,a)}function ea(n){return new Di(n)}function t0(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function xm(n){return n.collectionGroup!==null}function fo(n){const e=X(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const r of e.explicitOrderBy)e.Ie.push(r),t.add(r.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Fe(Xe.comparator);return o.filters.forEach((l=>{l.getFlattenedFilters().forEach((c=>{c.isInequality()&&(a=a.add(c.field))}))})),a})(e).forEach((r=>{t.has(r.canonicalString())||r.isKeyField()||e.Ie.push(new Vl(r,i))})),t.has(Xe.keyField().canonicalString())||e.Ie.push(new Vl(Xe.keyField(),i))}return e.Ie}function ln(n){const e=X(n);return e.Ee||(e.Ee=I4(e,fo(n))),e.Ee}function I4(n,e){if(n.limitType==="F")return Of(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((s=>{const r=s.dir==="desc"?"asc":"desc";return new Vl(s.field,r)}));const t=n.endAt?new Ts(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Ts(n.startAt.position,n.startAt.inclusive):null;return Of(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function Uf(n,e){const t=n.filters.concat([e]);return new Di(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function zu(n,e,t){return new Di(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function oc(n,e){return rc(ln(n),ln(e))&&n.limitType===e.limitType}function nT(n){return`${mr(ln(n))}|lt:${n.limitType}`}function Zr(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((s=>Q2(s))).join(", ")}]`),ic(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((s=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(s))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((s=>Mo(s))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((s=>Mo(s))).join(",")),`Target(${i})`})(ln(n))}; limitType=${n.limitType})`}function ac(n,e){return e.isFoundDocument()&&(function(i,s){const r=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(r):Y.isDocumentKey(i.path)?i.path.isEqual(r):i.path.isImmediateParentOf(r)})(n,e)&&(function(i,s){for(const r of fo(i))if(!r.field.isKeyField()&&s.data.field(r.field)===null)return!1;return!0})(n,e)&&(function(i,s){for(const r of i.filters)if(!r.matches(s))return!1;return!0})(n,e)&&(function(i,s){return!(i.startAt&&!(function(o,a,l){const c=Xv(o,a,l);return o.inclusive?c<=0:c<0})(i.startAt,fo(i),s)||i.endAt&&!(function(o,a,l){const c=Xv(o,a,l);return o.inclusive?c>=0:c>0})(i.endAt,fo(i),s))})(n,e)}function iT(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function sT(n){return(e,t)=>{let i=!1;for(const s of fo(n)){const r=C4(s,e,t);if(r!==0)return r;i=i||s.field.isKeyField()}return 0}}function C4(n,e,t){const i=n.field.isKeyField()?Y.comparator(e.key,t.key):(function(r,o,a){const l=o.data.field(r),c=a.data.field(r);return l!==null&&c!==null?bs(l,c):Z(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Z(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[s,r]of i)if(this.equalsFn(s,e))return r}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return void(s[r]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[t]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ms(this.inner,((t,i)=>{for(const[s,r]of i)e(s,r)}))}isEmpty(){return O2(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S4=new qe(Y.comparator);function yn(){return S4}const rT=new qe(Y.comparator);function Ka(...n){let e=rT;for(const t of n)e=e.insert(t.key,t);return e}function oT(n){let e=rT;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function ri(){return dl()}function aT(){return dl()}function dl(){return new Li((n=>n.toString()),((n,e)=>n.isEqual(e)))}const P4=new qe(Y.comparator),R4=new Fe(Y.comparator);function pe(...n){let e=R4;for(const t of n)e=e.add(t);return e}const k4=new Fe(he);function Em(){return k4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Am(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Rl(e)?"-0":e}}function lT(n){return{integerValue:""+n}}function cT(n,e){return C2(e)?lT(e):Am(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd{constructor(){this._=void 0}}function N4(n,e,t){return n instanceof Lo?(function(s,r){const o={fields:{[z2]:{stringValue:B2},[H2]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return r&&Cd(r)&&(r=Sd(r)),r&&(o.fields[q2]=r),{mapValue:o}})(t,e):n instanceof gr?dT(n,e):n instanceof yr?hT(n,e):(function(s,r){const o=uT(s,r),a=n0(o)+n0(s.Ae);return Lf(o)&&Lf(s.Ae)?lT(a):Am(s.serializer,a)})(n,e)}function M4(n,e,t){return n instanceof gr?dT(n,e):n instanceof yr?hT(n,e):t}function uT(n,e){return n instanceof Fo?(function(i){return Lf(i)||(function(r){return!!r&&"doubleValue"in r})(i)})(e)?e:{integerValue:0}:null}class Lo extends Rd{}class gr extends Rd{constructor(e){super(),this.elements=e}}function dT(n,e){const t=fT(e);for(const i of n.elements)t.some((s=>hi(s,i)))||t.push(i);return{arrayValue:{values:t}}}class yr extends Rd{constructor(e){super(),this.elements=e}}function hT(n,e){let t=fT(e);for(const i of n.elements)t=t.filter((s=>!hi(s,i)));return{arrayValue:{values:t}}}class Fo extends Rd{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function n0(n){return Je(n.integerValue||n.doubleValue)}function fT(n){return Fl(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc{constructor(e,t){this.field=e,this.transform=t}}function D4(n,e){return n.field.isEqual(e.field)&&(function(i,s){return i instanceof gr&&s instanceof gr||i instanceof yr&&s instanceof yr?Io(i.elements,s.elements,hi):i instanceof Fo&&s instanceof Fo?hi(i.Ae,s.Ae):i instanceof Lo&&s instanceof Lo})(n.transform,e.transform)}class L4{constructor(e,t){this.version=e,this.transformResults=t}}class Qe{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Qe}static exists(e){return new Qe(void 0,e)}static updateTime(e){return new Qe(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function yu(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class kd{}function pT(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new na(n.key,Qe.none()):new ta(n.key,n.data,Qe.none());{const t=n.data,i=Lt.empty();let s=new Fe(Xe.comparator);for(let r of e.fields)if(!s.has(r)){let o=t.field(r);o===null&&r.length>1&&(r=r.popLast(),o=t.field(r)),o===null?i.delete(r):i.set(r,o),s=s.add(r)}return new Fi(n.key,i,new gn(s.toArray()),Qe.none())}}function F4(n,e,t){n instanceof ta?(function(s,r,o){const a=s.value.clone(),l=s0(s.fieldTransforms,r,o.transformResults);a.setAll(l),r.convertToFoundDocument(o.version,a).setHasCommittedMutations()})(n,e,t):n instanceof Fi?(function(s,r,o){if(!yu(s.precondition,r))return void r.convertToUnknownDocument(o.version);const a=s0(s.fieldTransforms,r,o.transformResults),l=r.data;l.setAll(mT(s)),l.setAll(a),r.convertToFoundDocument(o.version,l).setHasCommittedMutations()})(n,e,t):(function(s,r,o){r.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,t)}function hl(n,e,t,i){return n instanceof ta?(function(r,o,a,l){if(!yu(r.precondition,o))return a;const c=r.value.clone(),d=r0(r.fieldTransforms,l,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null})(n,e,t,i):n instanceof Fi?(function(r,o,a,l){if(!yu(r.precondition,o))return a;const c=r0(r.fieldTransforms,l,o),d=o.data;return d.setAll(mT(r)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map((f=>f.field)))})(n,e,t,i):(function(r,o,a){return yu(r.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a})(n,e,t)}function V4(n,e){let t=null;for(const i of n.fieldTransforms){const s=e.data.field(i.field),r=uT(i.transform,s||null);r!=null&&(t===null&&(t=Lt.empty()),t.set(i.field,r))}return t||null}function i0(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&Io(i,s,((r,o)=>D4(r,o)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class ta extends kd{constructor(e,t,i,s=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Fi extends kd{constructor(e,t,i,s,r=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=s,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function mT(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function s0(n,e,t){const i=new Map;ne(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let s=0;s<t.length;s++){const r=n[s],o=r.transform,a=e.data.field(r.field);i.set(r.field,M4(o,a,t[s]))}return i}function r0(n,e,t){const i=new Map;for(const s of n){const r=s.transform,o=t.data.field(s.field);i.set(s.field,N4(r,o,e))}return i}class na extends kd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Im extends kd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cm{constructor(e,t,i,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const r=this.mutations[s];r.key.isEqual(e.key)&&F4(r,e,i[s])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=hl(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=hl(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=aT();return this.mutations.forEach((s=>{const r=e.get(s.key),o=r.overlayedDocument;let a=this.applyToLocalView(o,r.mutatedFields);a=t.has(s.key)?null:a;const l=pT(o,a);l!==null&&i.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(re.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),pe())}isEqual(e){return this.batchId===e.batchId&&Io(this.mutations,e.mutations,((t,i)=>i0(t,i)))&&Io(this.baseMutations,e.baseMutations,((t,i)=>i0(t,i)))}}class Sm{constructor(e,t,i,s){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=s}static from(e,t,i){ne(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let s=(function(){return P4})();const r=e.mutations;for(let o=0;o<r.length;o++)s=s.insert(r[o].key,i[o].version);return new Sm(e,t,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O4{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mt,Pe;function gT(n){switch(n){case B.OK:return Z(64938);case B.CANCELLED:case B.UNKNOWN:case B.DEADLINE_EXCEEDED:case B.RESOURCE_EXHAUSTED:case B.INTERNAL:case B.UNAVAILABLE:case B.UNAUTHENTICATED:return!1;case B.INVALID_ARGUMENT:case B.NOT_FOUND:case B.ALREADY_EXISTS:case B.PERMISSION_DENIED:case B.FAILED_PRECONDITION:case B.ABORTED:case B.OUT_OF_RANGE:case B.UNIMPLEMENTED:case B.DATA_LOSS:return!0;default:return Z(15467,{code:n})}}function yT(n){if(n===void 0)return ct("GRPC error has no .code"),B.UNKNOWN;switch(n){case mt.OK:return B.OK;case mt.CANCELLED:return B.CANCELLED;case mt.UNKNOWN:return B.UNKNOWN;case mt.DEADLINE_EXCEEDED:return B.DEADLINE_EXCEEDED;case mt.RESOURCE_EXHAUSTED:return B.RESOURCE_EXHAUSTED;case mt.INTERNAL:return B.INTERNAL;case mt.UNAVAILABLE:return B.UNAVAILABLE;case mt.UNAUTHENTICATED:return B.UNAUTHENTICATED;case mt.INVALID_ARGUMENT:return B.INVALID_ARGUMENT;case mt.NOT_FOUND:return B.NOT_FOUND;case mt.ALREADY_EXISTS:return B.ALREADY_EXISTS;case mt.PERMISSION_DENIED:return B.PERMISSION_DENIED;case mt.FAILED_PRECONDITION:return B.FAILED_PRECONDITION;case mt.ABORTED:return B.ABORTED;case mt.OUT_OF_RANGE:return B.OUT_OF_RANGE;case mt.UNIMPLEMENTED:return B.UNIMPLEMENTED;case mt.DATA_LOSS:return B.DATA_LOSS;default:return Z(39323,{code:n})}}(Pe=mt||(mt={}))[Pe.OK=0]="OK",Pe[Pe.CANCELLED=1]="CANCELLED",Pe[Pe.UNKNOWN=2]="UNKNOWN",Pe[Pe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Pe[Pe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Pe[Pe.NOT_FOUND=5]="NOT_FOUND",Pe[Pe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Pe[Pe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Pe[Pe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Pe[Pe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Pe[Pe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Pe[Pe.ABORTED=10]="ABORTED",Pe[Pe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Pe[Pe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Pe[Pe.INTERNAL=13]="INTERNAL",Pe[Pe.UNAVAILABLE=14]="UNAVAILABLE",Pe[Pe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vT(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U4=new ds([4294967295,4294967295],0);function o0(n){const e=vT().encode(n),t=new u2;return t.update(e),new Uint8Array(t.digest())}function a0(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),r=e.getUint32(12,!0);return[new ds([t,i],0),new ds([s,r],0)]}class Rm{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Ya(`Invalid padding: ${t}`);if(i<0)throw new Ya(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Ya(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Ya(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=ds.fromNumber(this.ge)}ye(e,t,i){let s=e.add(t.multiply(ds.fromNumber(i)));return s.compare(U4)===1&&(s=new ds([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=o0(e),[i,s]=a0(t);for(let r=0;r<this.hashCount;r++){const o=this.ye(i,s,r);if(!this.we(o))return!1}return!0}static create(e,t,i){const s=e%8==0?0:8-e%8,r=new Uint8Array(Math.ceil(e/8)),o=new Rm(r,s,t);return i.forEach((a=>o.insert(a))),o}insert(e){if(this.ge===0)return;const t=o0(e),[i,s]=a0(t);for(let r=0;r<this.hashCount;r++){const o=this.ye(i,s,r);this.Se(o)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Ya extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc{constructor(e,t,i,s,r){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const s=new Map;return s.set(e,uc.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new cc(re.min(),s,new qe(he),yn(),pe())}}class uc{constructor(e,t,i,s,r){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new uc(i,t,pe(),pe(),pe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(e,t,i,s){this.be=e,this.removedTargetIds=t,this.key=i,this.De=s}}class _T{constructor(e,t){this.targetId=e,this.Ce=t}}class wT{constructor(e,t,i=st.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=s}}class l0{constructor(){this.ve=0,this.Fe=c0(),this.Me=st.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=pe(),t=pe(),i=pe();return this.Fe.forEach(((s,r)=>{switch(r){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:i=i.add(s);break;default:Z(38017,{changeType:r})}})),new uc(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=c0()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ne(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class B4{constructor(e){this.Ge=e,this.ze=new Map,this.je=yn(),this.Je=qc(),this.He=qc(),this.Ye=new qe(he)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:Z(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,s)=>{this.rt(s)&&t(s)}))}st(e){const t=e.targetId,i=e.Ce.count,s=this.ot(t);if(s){const r=s.target;if(Uu(r))if(i===0){const o=new Y(r.path);this.et(t,o,$e.newNoDocument(o,re.min()))}else ne(i===1,20013,{expectedCount:i});else{const o=this._t(t);if(o!==i){const a=this.ut(e),l=a?this.ct(a,e,o):1;if(l!==0){this.it(t);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,c)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:r=0}=t;let o,a;try{o=Ri(i).toUint8Array()}catch(l){if(l instanceof U2)return di("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Rm(o,s,r)}catch(l){return di(l instanceof Ya?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let s=0;return i.forEach((r=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${r.path.canonicalString()}`;e.mightContain(a)||(this.et(t,r,null),s++)})),s}Tt(e){const t=new Map;this.ze.forEach(((r,o)=>{const a=this.ot(o);if(a){if(r.current&&Uu(a.target)){const l=new Y(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,$e.newNoDocument(l,e))}r.Be&&(t.set(o,r.ke()),r.qe())}}));let i=pe();this.He.forEach(((r,o)=>{let a=!0;o.forEachWhile((l=>{const c=this.ot(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)})),a&&(i=i.add(r))})),this.je.forEach(((r,o)=>o.setReadTime(e)));const s=new cc(e,t,this.Ye,this.je,i);return this.je=yn(),this.Je=qc(),this.He=qc(),this.Ye=new qe(he),s}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,t)?s.Qe(t,1):s.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new l0,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Fe(he),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Fe(he),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||$("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new l0),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function qc(){return new qe(Y.comparator)}function c0(){return new qe(Y.comparator)}const z4={asc:"ASCENDING",desc:"DESCENDING"},q4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},H4={and:"AND",or:"OR"};class G4{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Bf(n,e){return n.useProto3Json||ic(e)?e:{value:e}}function Vo(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function bT(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function $4(n,e){return Vo(n,e.toTimestamp())}function dt(n){return ne(!!n,49232),re.fromTimestamp((function(t){const i=Pi(t);return new De(i.seconds,i.nanos)})(n))}function km(n,e){return zf(n,e).canonicalString()}function zf(n,e){const t=(function(s){return new Te(["projects",s.projectId,"databases",s.database])})(n).child("documents");return e===void 0?t:t.child(e)}function TT(n){const e=Te.fromString(n);return ne(NT(e),10190,{key:e.toString()}),e}function Ol(n,e){return km(n.databaseId,e.path)}function ai(n,e){const t=TT(e);if(t.get(1)!==n.databaseId.projectId)throw new G(B.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new G(B.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Y(AT(t))}function xT(n,e){return km(n.databaseId,e)}function ET(n){const e=TT(n);return e.length===4?Te.emptyPath():AT(e)}function qf(n){return new Te(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function AT(n){return ne(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function u0(n,e,t){return{name:Ol(n,e),fields:t.value.mapValue.fields}}function IT(n,e,t){const i=ai(n,e.name),s=dt(e.updateTime),r=e.createTime?dt(e.createTime):re.min(),o=new Lt({mapValue:{fields:e.fields}}),a=$e.newFoundDocument(i,s,r,o);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function j4(n,e){return"found"in e?(function(i,s){ne(!!s.found,43571),s.found.name,s.found.updateTime;const r=ai(i,s.found.name),o=dt(s.found.updateTime),a=s.found.createTime?dt(s.found.createTime):re.min(),l=new Lt({mapValue:{fields:s.found.fields}});return $e.newFoundDocument(r,o,a,l)})(n,e):"missing"in e?(function(i,s){ne(!!s.missing,3894),ne(!!s.readTime,22933);const r=ai(i,s.missing),o=dt(s.readTime);return $e.newNoDocument(r,o)})(n,e):Z(7234,{result:e})}function W4(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Z(39313,{state:c})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],r=(function(c,d){return c.useProto3Json?(ne(d===void 0||typeof d=="string",58123),st.fromBase64String(d||"")):(ne(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),st.fromUint8Array(d||new Uint8Array))})(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&(function(c){const d=c.code===void 0?B.UNKNOWN:yT(c.code);return new G(d,c.message||"")})(o);t=new wT(i,s,r,a||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=ai(n,i.document.name),r=dt(i.document.updateTime),o=i.document.createTime?dt(i.document.createTime):re.min(),a=new Lt({mapValue:{fields:i.document.fields}}),l=$e.newFoundDocument(s,r,o,a),c=i.targetIds||[],d=i.removedTargetIds||[];t=new vu(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=ai(n,i.document),r=i.readTime?dt(i.readTime):re.min(),o=$e.newNoDocument(s,r),a=i.removedTargetIds||[];t=new vu([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=ai(n,i.document),r=i.removedTargetIds||[];t=new vu([],r,s,null)}else{if(!("filter"in e))return Z(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:s=0,unchangedNames:r}=i,o=new O4(s,r),a=i.targetId;t=new _T(a,o)}}return t}function Ul(n,e){let t;if(e instanceof ta)t={update:u0(n,e.key,e.value)};else if(e instanceof na)t={delete:Ol(n,e.key)};else if(e instanceof Fi)t={update:u0(n,e.key,e.data),updateMask:Z4(e.fieldMask)};else{if(!(e instanceof Im))return Z(16599,{Vt:e.type});t={verify:Ol(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(r,o){const a=o.transform;if(a instanceof Lo)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof gr)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof yr)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Fo)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw Z(20930,{transform:o.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(s,r){return r.updateTime!==void 0?{updateTime:$4(s,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:Z(27497)})(n,e.precondition)),t}function Hf(n,e){const t=e.currentDocument?(function(r){return r.updateTime!==void 0?Qe.updateTime(dt(r.updateTime)):r.exists!==void 0?Qe.exists(r.exists):Qe.none()})(e.currentDocument):Qe.none(),i=e.updateTransforms?e.updateTransforms.map((s=>(function(o,a){let l=null;if("setToServerValue"in a)ne(a.setToServerValue==="REQUEST_TIME",16630,{proto:a}),l=new Lo;else if("appendMissingElements"in a){const d=a.appendMissingElements.values||[];l=new gr(d)}else if("removeAllFromArray"in a){const d=a.removeAllFromArray.values||[];l=new yr(d)}else"increment"in a?l=new Fo(o,a.increment):Z(16584,{proto:a});const c=Xe.fromServerFormat(a.fieldPath);return new lc(c,l)})(n,s))):[];if(e.update){e.update.name;const s=ai(n,e.update.name),r=new Lt({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=(function(l){const c=l.fieldPaths||[];return new gn(c.map((d=>Xe.fromServerFormat(d))))})(e.updateMask);return new Fi(s,r,o,t,i)}return new ta(s,r,t,i)}if(e.delete){const s=ai(n,e.delete);return new na(s,t)}if(e.verify){const s=ai(n,e.verify);return new Im(s,t)}return Z(1463,{proto:e})}function K4(n,e){return n&&n.length>0?(ne(e!==void 0,14353),n.map((t=>(function(s,r){let o=s.updateTime?dt(s.updateTime):dt(r);return o.isEqual(re.min())&&(o=dt(r)),new L4(o,s.transformResults||[])})(t,e)))):[]}function CT(n,e){return{documents:[xT(n,e.path)]}}function ST(n,e){const t={structuredQuery:{}},i=e.path;let s;e.collectionGroup!==null?(s=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=xT(n,s);const r=(function(c){if(c.length!==0)return kT(Le.create(c,"and"))})(e.filters);r&&(t.structuredQuery.where=r);const o=(function(c){if(c.length!==0)return c.map((d=>(function(m){return{field:eo(m.field),direction:J4(m.dir)}})(d)))})(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=Bf(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=(function(c){return{before:c.inclusive,values:c.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(c){return{before:!c.inclusive,values:c.position}})(e.endAt)),{ft:t,parent:s}}function PT(n){let e=ET(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let s=null;if(i>0){ne(i===1,65062);const d=t.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let r=[];t.where&&(r=(function(f){const m=RT(f);return m instanceof Le&&Tm(m)?m.getFilters():[m]})(t.where));let o=[];t.orderBy&&(o=(function(f){return f.map((m=>(function(v){return new Vl(to(v.field),(function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(v.direction))})(m)))})(t.orderBy));let a=null;t.limit&&(a=(function(f){let m;return m=typeof f=="object"?f.value:f,ic(m)?null:m})(t.limit));let l=null;t.startAt&&(l=(function(f){const m=!!f.before,y=f.values||[];return new Ts(y,m)})(t.startAt));let c=null;return t.endAt&&(c=(function(f){const m=!f.before,y=f.values||[];return new Ts(y,m)})(t.endAt)),tT(e,s,o,r,a,"F",l,c)}function Y4(n,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Z(28987,{purpose:s})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function RT(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=to(t.unaryFilter.field);return xe.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=to(t.unaryFilter.field);return xe.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=to(t.unaryFilter.field);return xe.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=to(t.unaryFilter.field);return xe.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Z(61313);default:return Z(60726)}})(n):n.fieldFilter!==void 0?(function(t){return xe.create(to(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Z(58110);default:return Z(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Le.create(t.compositeFilter.filters.map((i=>RT(i))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Z(1026)}})(t.compositeFilter.op))})(n):Z(30097,{filter:n})}function J4(n){return z4[n]}function X4(n){return q4[n]}function Q4(n){return H4[n]}function eo(n){return{fieldPath:n.canonicalString()}}function to(n){return Xe.fromServerFormat(n.fieldPath)}function kT(n){return n instanceof xe?(function(t){if(t.op==="=="){if(Kv(t.value))return{unaryFilter:{field:eo(t.field),op:"IS_NAN"}};if(Wv(t.value))return{unaryFilter:{field:eo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Kv(t.value))return{unaryFilter:{field:eo(t.field),op:"IS_NOT_NAN"}};if(Wv(t.value))return{unaryFilter:{field:eo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:eo(t.field),op:X4(t.op),value:t.value}}})(n):n instanceof Le?(function(t){const i=t.getFilters().map((s=>kT(s)));return i.length===1?i[0]:{compositeFilter:{op:Q4(t.op),filters:i}}})(n):Z(54877,{filter:n})}function Z4(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function NT(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(e,t,i,s,r=re.min(),o=re.min(),a=st.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new xi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new xi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new xi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new xi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT{constructor(e){this.yt=e}}function e6(n,e){let t;if(e.document)t=IT(n.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=Y.fromSegments(e.noDocument.path),s=_r(e.noDocument.readTime);t=$e.newNoDocument(i,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Z(56709);{const i=Y.fromSegments(e.unknownDocument.path),s=_r(e.unknownDocument.version);t=$e.newUnknownDocument(i,s)}}return e.readTime&&t.setReadTime((function(s){const r=new De(s[0],s[1]);return re.fromTimestamp(r)})(e.readTime)),t}function d0(n,e){const t=e.key,i={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:qu(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document=(function(r,o){return{name:Ol(r,o.key),fields:o.data.value.mapValue.fields,updateTime:Vo(r,o.version.toTimestamp()),createTime:Vo(r,o.createTime.toTimestamp())}})(n.yt,e);else if(e.isNoDocument())i.noDocument={path:t.path.toArray(),readTime:vr(e.version)};else{if(!e.isUnknownDocument())return Z(57904,{document:e});i.unknownDocument={path:t.path.toArray(),version:vr(e.version)}}return i}function qu(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function vr(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function _r(n){const e=new De(n.seconds,n.nanoseconds);return re.fromTimestamp(e)}function Xs(n,e){const t=(e.baseMutations||[]).map((r=>Hf(n.yt,r)));for(let r=0;r<e.mutations.length-1;++r){const o=e.mutations[r];if(r+1<e.mutations.length&&e.mutations[r+1].transform!==void 0){const a=e.mutations[r+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(r+1,1),++r}}const i=e.mutations.map((r=>Hf(n.yt,r))),s=De.fromMillis(e.localWriteTimeMs);return new Cm(e.batchId,s,t,i)}function Ja(n){const e=_r(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?_r(n.lastLimboFreeSnapshotVersion):re.min();let i;return i=(function(r){return r.documents!==void 0})(n.query)?(function(r){const o=r.documents.length;return ne(o===1,1966,{count:o}),ln(ea(ET(r.documents[0])))})(n.query):(function(r){return ln(PT(r))})(n.query),new xi(i,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,st.fromBase64String(n.resumeToken))}function DT(n,e){const t=vr(e.snapshotVersion),i=vr(e.lastLimboFreeSnapshotVersion);let s;s=Uu(e.target)?CT(n.yt,e.target):ST(n.yt,e.target).ft;const r=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:mr(e.target),readTime:t,resumeToken:r,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:s}}function Nm(n){const e=PT({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?zu(e,e.limit,"L"):e}function zh(n,e){return new Pm(e.largestBatchId,Hf(n.yt,e.overlayMutation))}function h0(n,e){const t=e.path.lastSegment();return[n,Jt(e.path.popLast()),t]}function f0(n,e,t,i){return{indexId:n,uid:e,sequenceNumber:t,readTime:vr(i.readTime),documentKey:Jt(i.documentKey.path),largestBatchId:i.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t6{getBundleMetadata(e,t){return p0(e).get(t).next((i=>{if(i)return(function(r){return{id:r.bundleId,createTime:_r(r.createTime),version:r.version}})(i)}))}saveBundleMetadata(e,t){return p0(e).put((function(s){return{bundleId:s.id,createTime:vr(dt(s.createTime)),version:s.version}})(t))}getNamedQuery(e,t){return m0(e).get(t).next((i=>{if(i)return(function(r){return{name:r.name,query:Nm(r.bundledQuery),readTime:_r(r.readTime)}})(i)}))}saveNamedQuery(e,t){return m0(e).put((function(s){return{name:s.name,readTime:vr(dt(s.readTime)),bundledQuery:s.bundledQuery}})(t))}}function p0(n){return xt(n,Ed)}function m0(n){return xt(n,Ad)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const i=t.uid||"";return new Nd(e,i)}getOverlay(e,t){return Ma(e).get(h0(this.userId,t)).next((i=>i?zh(this.serializer,i):null))}getOverlays(e,t){const i=ri();return V.forEach(t,(s=>this.getOverlay(e,s).next((r=>{r!==null&&i.set(s,r)})))).next((()=>i))}saveOverlays(e,t,i){const s=[];return i.forEach(((r,o)=>{const a=new Pm(t,o);s.push(this.St(e,a))})),V.waitFor(s)}removeOverlaysForBatchId(e,t,i){const s=new Set;t.forEach((o=>s.add(Jt(o.getCollectionPath()))));const r=[];return s.forEach((o=>{const a=IDBKeyRange.bound([this.userId,o,i],[this.userId,o,i+1],!1,!0);r.push(Ma(e).Z(kf,a))})),V.waitFor(r)}getOverlaysForCollection(e,t,i){const s=ri(),r=Jt(t),o=IDBKeyRange.bound([this.userId,r,i],[this.userId,r,Number.POSITIVE_INFINITY],!0);return Ma(e).J(kf,o).next((a=>{for(const l of a){const c=zh(this.serializer,l);s.set(c.getKey(),c)}return s}))}getOverlaysForCollectionGroup(e,t,i,s){const r=ri();let o;const a=IDBKeyRange.bound([this.userId,t,i],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Ma(e).ee({index:M2,range:a},((l,c,d)=>{const f=zh(this.serializer,c);r.size()<s||f.largestBatchId===o?(r.set(f.getKey(),f),o=f.largestBatchId):d.done()})).next((()=>r))}St(e,t){return Ma(e).put((function(s,r,o){const[a,l,c]=h0(r,o.mutation.key);return{userId:r,collectionPath:l,documentId:c,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Ul(s.yt,o.mutation)}})(this.serializer,this.userId,t))}}function Ma(n){return xt(n,Id)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n6{bt(e){return xt(e,vm)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const i=t?.value;return i?st.fromUint8Array(i):st.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(Je(e.integerValue));else if("doubleValue"in e){const i=Je(e.doubleValue);isNaN(i)?this.Ft(t,13):(this.Ft(t,15),Rl(i)?t.Mt(0):t.Mt(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Ft(t,20),typeof i=="string"&&(i=Pi(i)),t.xt(`${i.seconds||""}`),t.Mt(i.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Ri(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const i=e.geoPointValue;this.Ft(t,45),t.Mt(i.latitude||0),t.Mt(i.longitude||0)}else"mapValue"in e?$2(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Pd(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):Z(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const i=e.fields||{};this.Ft(t,55);for(const s of Object.keys(i))this.Ot(s,t),this.Ct(i[s],t)}kt(e,t){const i=e.fields||{};this.Ft(t,53);const s=No,r=i[s].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(Je(r)),this.Ot(s,t),this.Ct(i[s],t)}Qt(e,t){const i=e.values||[];this.Ft(t,50);for(const s of i)this.Ct(s,t)}Lt(e,t){this.Ft(t,37),Y.fromName(e).path.forEach((i=>{this.Ft(t,60),this.Ut(i,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}Qs.Kt=new Qs;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wr=255;function i6(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function g0(n){const e=64-(function(i){let s=0;for(let r=0;r<8;++r){const o=i6(255&i[r]);if(s+=o,o!==8)break}return s})(n);return Math.ceil(e/8)}class s6{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Gt(i.value),i=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Jt(i.value),i=t.next();this.Ht()}Yt(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Gt(i);else if(i<2048)this.Gt(960|i>>>6),this.Gt(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i);else{const s=t.codePointAt(0);this.Gt(240|s>>>18),this.Gt(128|63&s>>>12),this.Gt(128|63&s>>>6),this.Gt(128|63&s)}}this.zt()}Zt(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Jt(i);else if(i<2048)this.Jt(960|i>>>6),this.Jt(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i);else{const s=t.codePointAt(0);this.Jt(240|s>>>18),this.Jt(128|63&s>>>12),this.Jt(128|63&s>>>6),this.Jt(128|63&s)}}this.Ht()}Xt(e){const t=this.en(e),i=g0(t);this.tn(1+i),this.buffer[this.position++]=255&i;for(let s=t.length-i;s<t.length;++s)this.buffer[this.position++]=255&t[s]}nn(e){const t=this.en(e),i=g0(t);this.tn(1+i),this.buffer[this.position++]=~(255&i);for(let s=t.length-i;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}rn(){this.sn(Wr),this.sn(255)}_n(){this.an(Wr),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(r){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,r,!1),new Uint8Array(o.buffer)})(e),i=!!(128&t[0]);t[0]^=i?255:128;for(let s=1;s<t.length;++s)t[s]^=i?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===Wr?(this.sn(Wr),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===Wr?(this.an(Wr),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let i=2*this.buffer.length;i<t&&(i=t);const s=new Uint8Array(i);s.set(this.buffer),this.buffer=s}}class r6{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class o6{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Da{constructor(){this.cn=new s6,this.ln=new r6(this.cn),this.hn=new o6(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(e,t,i,s){this.Tn=e,this.In=t,this.En=i,this.dn=s}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,i=new Uint8Array(t);return i.set(this.dn,0),t!==e?i.set([0],this.dn.length):++i[i.length-1],new Zs(this.Tn,this.In,this.En,i)}Rn(e,t,i){return{indexId:this.Tn,uid:e,arrayValue:_u(this.En),directionalValue:_u(this.dn),orderedDocumentKey:_u(t),documentKey:i.path.toArray()}}Vn(e,t,i){const s=this.Rn(e,t,i);return[s.indexId,s.uid,s.arrayValue,s.directionalValue,s.orderedDocumentKey,s.documentKey]}}function Ji(n,e){let t=n.Tn-e.Tn;return t!==0?t:(t=y0(n.En,e.En),t!==0?t:(t=y0(n.dn,e.dn),t!==0?t:Y.comparator(n.In,e.In)))}function y0(n,e){for(let t=0;t<n.length&&t<e.length;++t){const i=n[t]-e[t];if(i!==0)return i}return n.length-e.length}function _u(n){return Xw()?(function(t){let i="";for(let s=0;s<t.length;s++)i+=String.fromCharCode(t[s]);return i})(n):n}function v0(n){return typeof n!="string"?n:(function(t){const i=new Uint8Array(t.length);for(let s=0;s<t.length;s++)i[s]=t.charCodeAt(s);return i})(n)}class _0{constructor(e){this.mn=new Fe(((t,i)=>Xe.comparator(t.field,i.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const i=t;i.isInequality()?this.mn=this.mn.add(i):this.gn.push(i)}}get pn(){return this.mn.size>1}yn(e){if(ne(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=Sf(e);if(t!==void 0&&!this.wn(t))return!1;const i=Ks(e);let s=new Set,r=0,o=0;for(;r<i.length&&this.wn(i[r]);++r)s=s.add(i[r].fieldPath.canonicalString());if(r===i.length)return!0;if(this.mn.size>0){const a=this.mn.getIterator().getNext();if(!s.has(a.field.canonicalString())){const l=i[r];if(!this.Sn(a,l)||!this.bn(this.fn[o++],l))return!1}++r}for(;r<i.length;++r){const a=i[r];if(o>=this.fn.length||!this.bn(this.fn[o++],a))return!1}return!0}Dn(){if(this.pn)return null;let e=new Fe(Xe.comparator);const t=[];for(const i of this.gn)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")t.push(new du(i.field,2));else{if(e.has(i.field))continue;e=e.add(i.field),t.push(new du(i.field,0))}for(const i of this.fn)i.field.isKeyField()||e.has(i.field)||(e=e.add(i.field),t.push(new du(i.field,i.dir==="asc"?0:1)));return new Lu(Lu.UNKNOWN_ID,this.collectionId,t,Pl.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const i=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===i}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LT(n){if(ne(n instanceof xe||n instanceof Le,20012),n instanceof xe){if(n instanceof eT){const t=n.value.arrayValue?.values?.map((i=>xe.create(n.field,"==",i)))||[];return Le.create(t,"or")}return n}const e=n.filters.map((t=>LT(t)));return Le.create(e,n.op)}function a6(n){if(n.getFilters().length===0)return[];const e=jf(LT(n));return ne(FT(e),7391),Gf(e)||$f(e)?[e]:e.getFilters()}function Gf(n){return n instanceof xe}function $f(n){return n instanceof Le&&Tm(n)}function FT(n){return Gf(n)||$f(n)||(function(t){if(t instanceof Le&&Ff(t)){for(const i of t.getFilters())if(!Gf(i)&&!$f(i))return!1;return!0}return!1})(n)}function jf(n){if(ne(n instanceof xe||n instanceof Le,34018),n instanceof xe)return n;if(n.filters.length===1)return jf(n.filters[0]);const e=n.filters.map((i=>jf(i)));let t=Le.create(e,n.op);return t=Hu(t),FT(t)?t:(ne(t instanceof Le,64498),ne(Do(t),40251),ne(t.filters.length>1,57927),t.filters.reduce(((i,s)=>Mm(i,s))))}function Mm(n,e){let t;return ne(n instanceof xe||n instanceof Le,38388),ne(e instanceof xe||e instanceof Le,25473),t=n instanceof xe?e instanceof xe?(function(s,r){return Le.create([s,r],"and")})(n,e):w0(n,e):e instanceof xe?w0(e,n):(function(s,r){if(ne(s.filters.length>0&&r.filters.length>0,48005),Do(s)&&Do(r))return X2(s,r.getFilters());const o=Ff(s)?s:r,a=Ff(s)?r:s,l=o.filters.map((c=>Mm(c,a)));return Le.create(l,"or")})(n,e),Hu(t)}function w0(n,e){if(Do(e))return X2(e,n.getFilters());{const t=e.filters.map((i=>Mm(n,i)));return Le.create(t,"or")}}function Hu(n){if(ne(n instanceof xe||n instanceof Le,11850),n instanceof xe)return n;const e=n.getFilters();if(e.length===1)return Hu(e[0]);if(Y2(n))return n;const t=e.map((s=>Hu(s))),i=[];return t.forEach((s=>{s instanceof xe?i.push(s):s instanceof Le&&(s.op===n.op?i.push(...s.filters):i.push(s))})),i.length===1?i[0]:Le.create(i,n.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l6{constructor(){this.Cn=new Dm}addToCollectionParentIndex(e,t){return this.Cn.add(t),V.resolve()}getCollectionParents(e,t){return V.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return V.resolve()}deleteFieldIndex(e,t){return V.resolve()}deleteAllFieldIndexes(e){return V.resolve()}createTargetIndexes(e,t){return V.resolve()}getDocumentsMatchingTarget(e,t){return V.resolve(null)}getIndexType(e,t){return V.resolve(0)}getFieldIndexes(e,t){return V.resolve([])}getNextCollectionGroupToUpdate(e){return V.resolve(null)}getMinOffset(e,t){return V.resolve(Sn.min())}getMinOffsetFromCollectionGroup(e,t){return V.resolve(Sn.min())}updateCollectionGroup(e,t,i){return V.resolve()}updateIndexEntries(e,t){return V.resolve()}}class Dm{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),s=this.index[t]||new Fe(Te.comparator),r=!s.has(i);return this.index[t]=s.add(i),r}has(e){const t=e.lastSegment(),i=e.popLast(),s=this.index[t];return s&&s.has(i)}getEntries(e){return(this.index[e]||new Fe(Te.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b0="IndexedDbIndexManager",Hc=new Uint8Array(0);class c6{constructor(e,t){this.databaseId=t,this.vn=new Dm,this.Fn=new Li((i=>mr(i)),((i,s)=>rc(i,s))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const i=t.lastSegment(),s=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const r={collectionId:i,parent:Jt(s)};return T0(e).put(r)}return V.resolve()}getCollectionParents(e,t){const i=[],s=IDBKeyRange.bound([t,""],[v2(t),""],!1,!0);return T0(e).J(s).next((r=>{for(const o of r){if(o.collectionId!==t)break;i.push(si(o.parent))}return i}))}addFieldIndex(e,t){const i=La(e),s=(function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map((l=>[l.fieldPath.canonicalString(),l.kind]))}})(t);delete s.indexId;const r=i.add(s);if(t.indexState){const o=Yr(e);return r.next((a=>{o.put(f0(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return r.next()}deleteFieldIndex(e,t){const i=La(e),s=Yr(e),r=Kr(e);return i.delete(t.indexId).next((()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=La(e),i=Kr(e),s=Yr(e);return t.Z().next((()=>i.Z())).next((()=>s.Z()))}createTargetIndexes(e,t){return V.forEach(this.Mn(t),(i=>this.getIndexType(e,i).next((s=>{if(s===0||s===1){const r=new _0(i).Dn();if(r!=null)return this.addFieldIndex(e,r)}}))))}getDocumentsMatchingTarget(e,t){const i=Kr(e);let s=!0;const r=new Map;return V.forEach(this.Mn(t),(o=>this.xn(e,o).next((a=>{s&&(s=!!a),r.set(o,a)})))).next((()=>{if(s){let o=pe();const a=[];return V.forEach(r,((l,c)=>{$(b0,`Using index ${(function(S){return`id=${S.indexId}|cg=${S.collectionGroup}|f=${S.fields.map((L=>`${L.fieldPath}:${L.kind}`)).join(",")}`})(l)} to execute ${mr(t)}`);const d=(function(S,L){const F=Sf(L);if(F===void 0)return null;for(const U of Bu(S,F.fieldPath))switch(U.op){case"array-contains-any":return U.value.arrayValue.values||[];case"array-contains":return[U.value]}return null})(c,l),f=(function(S,L){const F=new Map;for(const U of Ks(L))for(const C of Bu(S,U.fieldPath))switch(C.op){case"==":case"in":F.set(U.fieldPath.canonicalString(),C.value);break;case"not-in":case"!=":return F.set(U.fieldPath.canonicalString(),C.value),Array.from(F.values())}return null})(c,l),m=(function(S,L){const F=[];let U=!0;for(const C of Ks(L)){const A=C.kind===0?Zv(S,C.fieldPath,S.startAt):e0(S,C.fieldPath,S.startAt);F.push(A.value),U&&(U=A.inclusive)}return new Ts(F,U)})(c,l),y=(function(S,L){const F=[];let U=!0;for(const C of Ks(L)){const A=C.kind===0?e0(S,C.fieldPath,S.endAt):Zv(S,C.fieldPath,S.endAt);F.push(A.value),U&&(U=A.inclusive)}return new Ts(F,U)})(c,l),v=this.On(l,c,m),w=this.On(l,c,y),T=this.Nn(l,c,f),x=this.Bn(l.indexId,d,v,m.inclusive,w,y.inclusive,T);return V.forEach(x,(P=>i.Y(P,t.limit).next((S=>{S.forEach((L=>{const F=Y.fromSegments(L.documentKey);o.has(F)||(o=o.add(F),a.push(F))}))}))))})).next((()=>a))}return V.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=a6(Le.create(e.filters,"and")).map((i=>Of(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,i,s,r,o,a){const l=(t!=null?t.length:1)*Math.max(i.length,r.length),c=l/(t!=null?t.length:1),d=[];for(let f=0;f<l;++f){const m=t?this.Ln(t[f/c]):Hc,y=this.kn(e,m,i[f%c],s),v=this.qn(e,m,r[f%c],o),w=a.map((T=>this.kn(e,m,T,!0)));d.push(...this.createRange(y,v,w))}return d}kn(e,t,i,s){const r=new Zs(e,Y.empty(),t,i);return s?r:r.An()}qn(e,t,i,s){const r=new Zs(e,Y.empty(),t,i);return s?r.An():r}xn(e,t){const i=new _0(t),s=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next((r=>{let o=null;for(const a of r)i.yn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o}))}getIndexType(e,t){let i=2;const s=this.Mn(t);return V.forEach(s,(r=>this.xn(e,r).next((o=>{o?i!==0&&o.fields.length<(function(l){let c=new Fe(Xe.comparator),d=!1;for(const f of l.filters)for(const m of f.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?d=!0:c=c.add(m.field));for(const f of l.orderBy)f.field.isKeyField()||(c=c.add(f.field));return c.size+(d?1:0)})(r)&&(i=1):i=0})))).next((()=>(function(o){return o.limit!==null})(t)&&s.length>1&&i===2?1:i))}Qn(e,t){const i=new Da;for(const s of Ks(e)){const r=t.data.field(s.fieldPath);if(r==null)return null;const o=i.Pn(s.kind);Qs.Kt.Dt(r,o)}return i.un()}Ln(e){const t=new Da;return Qs.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const i=new Da;return Qs.Kt.Dt(pr(this.databaseId,t),i.Pn((function(r){const o=Ks(r);return o.length===0?0:o[o.length-1].kind})(e))),i.un()}Nn(e,t,i){if(i===null)return[];let s=[];s.push(new Da);let r=0;for(const o of Ks(e)){const a=i[r++];for(const l of s)if(this.Un(t,o.fieldPath)&&Fl(a))s=this.Kn(s,o,a);else{const c=l.Pn(o.kind);Qs.Kt.Dt(a,c)}}return this.Wn(s)}On(e,t,i){return this.Nn(e,t,i.position)}Wn(e){const t=[];for(let i=0;i<e.length;++i)t[i]=e[i].un();return t}Kn(e,t,i){const s=[...e],r=[];for(const o of i.arrayValue.values||[])for(const a of s){const l=new Da;l.seed(a.un()),Qs.Kt.Dt(o,l.Pn(t.kind)),r.push(l)}return r}Un(e,t){return!!e.filters.find((i=>i instanceof xe&&i.field.isEqual(t)&&(i.op==="in"||i.op==="not-in")))}getFieldIndexes(e,t){const i=La(e),s=Yr(e);return(t?i.J(Rf,IDBKeyRange.bound(t,t)):i.J()).next((r=>{const o=[];return V.forEach(r,(a=>s.get([a.indexId,this.uid]).next((l=>{o.push((function(d,f){const m=f?new Pl(f.sequenceNumber,new Sn(_r(f.readTime),new Y(si(f.documentKey)),f.largestBatchId)):Pl.empty(),y=d.fields.map((([v,w])=>new du(Xe.fromServerFormat(v),w)));return new Lu(d.indexId,d.collectionGroup,y,m)})(a,l))})))).next((()=>o))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((i,s)=>{const r=i.indexState.sequenceNumber-s.indexState.sequenceNumber;return r!==0?r:he(i.collectionGroup,s.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,i){const s=La(e),r=Yr(e);return this.Gn(e).next((o=>s.J(Rf,IDBKeyRange.bound(t,t)).next((a=>V.forEach(a,(l=>r.put(f0(l.indexId,this.uid,o,i))))))))}updateIndexEntries(e,t){const i=new Map;return V.forEach(t,((s,r)=>{const o=i.get(s.collectionGroup);return(o?V.resolve(o):this.getFieldIndexes(e,s.collectionGroup)).next((a=>(i.set(s.collectionGroup,a),V.forEach(a,(l=>this.zn(e,s,l).next((c=>{const d=this.jn(r,l);return c.isEqual(d)?V.resolve():this.Jn(e,r,l,c,d)})))))))}))}Hn(e,t,i,s){return Kr(e).put(s.Rn(this.uid,this.$n(i,t.key),t.key))}Yn(e,t,i,s){return Kr(e).delete(s.Vn(this.uid,this.$n(i,t.key),t.key))}zn(e,t,i){const s=Kr(e);let r=new Fe(Ji);return s.ee({index:N2,range:IDBKeyRange.only([i.indexId,this.uid,_u(this.$n(i,t))])},((o,a)=>{r=r.add(new Zs(i.indexId,t,v0(a.arrayValue),v0(a.directionalValue)))})).next((()=>r))}jn(e,t){let i=new Fe(Ji);const s=this.Qn(t,e);if(s==null)return i;const r=Sf(t);if(r!=null){const o=e.data.field(r.fieldPath);if(Fl(o))for(const a of o.arrayValue.values||[])i=i.add(new Zs(t.indexId,e.key,this.Ln(a),s))}else i=i.add(new Zs(t.indexId,e.key,Hc,s));return i}Jn(e,t,i,s,r){$(b0,"Updating index entries for document '%s'",t.key);const o=[];return(function(l,c,d,f,m){const y=l.getIterator(),v=c.getIterator();let w=jr(y),T=jr(v);for(;w||T;){let x=!1,P=!1;if(w&&T){const S=d(w,T);S<0?P=!0:S>0&&(x=!0)}else w!=null?P=!0:x=!0;x?(f(T),T=jr(v)):P?(m(w),w=jr(y)):(w=jr(y),T=jr(v))}})(s,r,Ji,(a=>{o.push(this.Hn(e,t,i,a))}),(a=>{o.push(this.Yn(e,t,i,a))})),V.waitFor(o)}Gn(e){let t=1;return Yr(e).ee({index:k2,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((i,s,r)=>{r.done(),t=s.sequenceNumber+1})).next((()=>t))}createRange(e,t,i){i=i.sort(((o,a)=>Ji(o,a))).filter(((o,a,l)=>!a||Ji(o,l[a-1])!==0));const s=[];s.push(e);for(const o of i){const a=Ji(o,e),l=Ji(o,t);if(a===0)s[0]=e.An();else if(a>0&&l<0)s.push(o),s.push(o.An());else if(l>0)break}s.push(t);const r=[];for(let o=0;o<s.length;o+=2){if(this.Zn(s[o],s[o+1]))return[];const a=s[o].Vn(this.uid,Hc,Y.empty()),l=s[o+1].Vn(this.uid,Hc,Y.empty());r.push(IDBKeyRange.bound(a,l))}return r}Zn(e,t){return Ji(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(x0)}getMinOffset(e,t){return V.mapArray(this.Mn(t),(i=>this.xn(e,i).next((s=>s||Z(44426))))).next(x0)}}function T0(n){return xt(n,Ml)}function Kr(n){return xt(n,cl)}function La(n){return xt(n,ym)}function Yr(n){return xt(n,ll)}function x0(n){ne(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let i=1;i<n.length;i++){const s=n[i].indexState.offset;pm(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new Sn(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},VT=41943040;class Ht{static withCacheSize(e){return new Ht(e,Ht.DEFAULT_COLLECTION_PERCENTILE,Ht.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OT(n,e,t){const i=n.store(Bn),s=n.store(So),r=[],o=IDBKeyRange.only(t.batchId);let a=0;const l=i.ee({range:o},((d,f,m)=>(a++,m.delete())));r.push(l.next((()=>{ne(a===1,47070,{batchId:t.batchId})})));const c=[];for(const d of t.mutations){const f=S2(e,d.key.path,t.batchId);r.push(s.delete(f)),c.push(d.key)}return V.waitFor(r).next((()=>c))}function Gu(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Z(14731);e=n.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ht.DEFAULT_COLLECTION_PERCENTILE=10,Ht.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ht.DEFAULT=new Ht(VT,Ht.DEFAULT_COLLECTION_PERCENTILE,Ht.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ht.DISABLED=new Ht(-1,0,0);class Md{constructor(e,t,i,s){this.userId=e,this.serializer=t,this.indexManager=i,this.referenceDelegate=s,this.Xn={}}static wt(e,t,i,s){ne(e.uid!=="",64387);const r=e.isAuthenticated()?e.uid:"";return new Md(r,t,i,s)}checkEmpty(e){let t=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Xi(e).ee({index:ir,range:i},((s,r,o)=>{t=!1,o.done()})).next((()=>t))}addMutationBatch(e,t,i,s){const r=no(e),o=Xi(e);return o.add({}).next((a=>{ne(typeof a=="number",49019);const l=new Cm(a,t,i,s),c=(function(y,v,w){const T=w.baseMutations.map((P=>Ul(y.yt,P))),x=w.mutations.map((P=>Ul(y.yt,P)));return{userId:v,batchId:w.batchId,localWriteTimeMs:w.localWriteTime.toMillis(),baseMutations:T,mutations:x}})(this.serializer,this.userId,l),d=[];let f=new Fe(((m,y)=>he(m.canonicalString(),y.canonicalString())));for(const m of s){const y=S2(this.userId,m.key.path,a);f=f.add(m.key.path.popLast()),d.push(o.put(c)),d.push(r.put(y,H5))}return f.forEach((m=>{d.push(this.indexManager.addToCollectionParentIndex(e,m))})),e.addOnCommittedListener((()=>{this.Xn[a]=l.keys()})),V.waitFor(d).next((()=>l))}))}lookupMutationBatch(e,t){return Xi(e).get(t).next((i=>i?(ne(i.userId===this.userId,48,"Unexpected user for mutation batch",{userId:i.userId,batchId:t}),Xs(this.serializer,i)):null))}er(e,t){return this.Xn[t]?V.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((i=>{if(i){const s=i.keys();return this.Xn[t]=s,s}return null}))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,s=IDBKeyRange.lowerBound([this.userId,i]);let r=null;return Xi(e).ee({index:ir,range:s},((o,a,l)=>{a.userId===this.userId&&(ne(a.batchId>=i,47524,{tr:i}),r=Xs(this.serializer,a)),l.done()})).next((()=>r))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=hs;return Xi(e).ee({index:ir,range:t,reverse:!0},((s,r,o)=>{i=r.batchId,o.done()})).next((()=>i))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,hs],[this.userId,Number.POSITIVE_INFINITY]);return Xi(e).J(ir,t).next((i=>i.map((s=>Xs(this.serializer,s)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const i=hu(this.userId,t.path),s=IDBKeyRange.lowerBound(i),r=[];return no(e).ee({range:s},((o,a,l)=>{const[c,d,f]=o,m=si(d);if(c===this.userId&&t.path.isEqual(m))return Xi(e).get(f).next((y=>{if(!y)throw Z(61480,{nr:o,batchId:f});ne(y.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:y.userId,batchId:f}),r.push(Xs(this.serializer,y))}));l.done()})).next((()=>r))}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Fe(he);const s=[];return t.forEach((r=>{const o=hu(this.userId,r.path),a=IDBKeyRange.lowerBound(o),l=no(e).ee({range:a},((c,d,f)=>{const[m,y,v]=c,w=si(y);m===this.userId&&r.path.isEqual(w)?i=i.add(v):f.done()}));s.push(l)})),V.waitFor(s).next((()=>this.rr(e,i)))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,s=i.length+1,r=hu(this.userId,i),o=IDBKeyRange.lowerBound(r);let a=new Fe(he);return no(e).ee({range:o},((l,c,d)=>{const[f,m,y]=l,v=si(m);f===this.userId&&i.isPrefixOf(v)?v.length===s&&(a=a.add(y)):d.done()})).next((()=>this.rr(e,a)))}rr(e,t){const i=[],s=[];return t.forEach((r=>{s.push(Xi(e).get(r).next((o=>{if(o===null)throw Z(35274,{batchId:r});ne(o.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:o.userId,batchId:r}),i.push(Xs(this.serializer,o))})))})),V.waitFor(s).next((()=>i))}removeMutationBatch(e,t){return OT(e.le,this.userId,t).next((i=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),V.forEach(i,(s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return V.resolve();const i=IDBKeyRange.lowerBound((function(o){return[o]})(this.userId)),s=[];return no(e).ee({range:i},((r,o,a)=>{if(r[0]===this.userId){const l=si(r[1]);s.push(l)}else a.done()})).next((()=>{ne(s.length===0,56720,{sr:s.map((r=>r.canonicalString()))})}))}))}containsKey(e,t){return UT(e,this.userId,t)}_r(e){return BT(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:hs,lastStreamToken:""}))}}function UT(n,e,t){const i=hu(e,t.path),s=i[1],r=IDBKeyRange.lowerBound(i);let o=!1;return no(n).ee({range:r,X:!0},((a,l,c)=>{const[d,f,m]=a;d===e&&f===s&&(o=!0),c.done()})).next((()=>o))}function Xi(n){return xt(n,Bn)}function no(n){return xt(n,So)}function BT(n){return xt(n,kl)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new wr(0)}static cr(){return new wr(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u6{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const i=new wr(t.highestTargetId);return t.highestTargetId=i.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>re.fromTimestamp(new De(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,i){return this.lr(e).next((s=>(s.highestListenSequenceNumber=t,i&&(s.lastRemoteSnapshotVersion=i.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.hr(e,s))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((i=>(i.targetCount+=1,this.Tr(t,i),this.hr(e,i))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Jr(e).delete(t.targetId))).next((()=>this.lr(e))).next((i=>(ne(i.targetCount>0,8065),i.targetCount-=1,this.hr(e,i))))}removeTargets(e,t,i){let s=0;const r=[];return Jr(e).ee(((o,a)=>{const l=Ja(a);l.sequenceNumber<=t&&i.get(l.targetId)===null&&(s++,r.push(this.removeTargetData(e,l)))})).next((()=>V.waitFor(r))).next((()=>s))}forEachTarget(e,t){return Jr(e).ee(((i,s)=>{const r=Ja(s);t(r)}))}lr(e){return A0(e).get(Ou).next((t=>(ne(t!==null,2888),t)))}hr(e,t){return A0(e).put(Ou,t)}Pr(e,t){return Jr(e).put(DT(this.serializer,t))}Tr(e,t){let i=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,i=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const i=mr(t),s=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let r=null;return Jr(e).ee({range:s,index:R2},((o,a,l)=>{const c=Ja(a);rc(t,c.target)&&(r=c,l.done())})).next((()=>r))}addMatchingKeys(e,t,i){const s=[],r=ts(e);return t.forEach((o=>{const a=Jt(o.path);s.push(r.put({targetId:i,path:a})),s.push(this.referenceDelegate.addReference(e,i,o))})),V.waitFor(s)}removeMatchingKeys(e,t,i){const s=ts(e);return V.forEach(t,(r=>{const o=Jt(r.path);return V.waitFor([s.delete([i,o]),this.referenceDelegate.removeReference(e,i,r)])}))}removeMatchingKeysForTargetId(e,t){const i=ts(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return i.delete(s)}getMatchingKeysForTargetId(e,t){const i=IDBKeyRange.bound([t],[t+1],!1,!0),s=ts(e);let r=pe();return s.ee({range:i,X:!0},((o,a,l)=>{const c=si(o[1]),d=new Y(c);r=r.add(d)})).next((()=>r))}containsKey(e,t){const i=Jt(t.path),s=IDBKeyRange.bound([i],[v2(i)],!1,!0);let r=0;return ts(e).ee({index:gm,X:!0,range:s},(([o,a],l,c)=>{o!==0&&(r++,c.done())})).next((()=>r>0))}At(e,t){return Jr(e).get(t).next((i=>i?Ja(i):null))}}function Jr(n){return xt(n,Po)}function A0(n){return xt(n,cr)}function ts(n){return xt(n,Ro)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I0="LruGarbageCollector",d6=1048576;function C0([n,e],[t,i]){const s=he(n,t);return s===0?he(e,i):s}class h6{constructor(e){this.Ir=e,this.buffer=new Fe(C0),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();C0(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class zT{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){$(I0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ns(t)?$(I0,"Ignoring IndexedDB error during garbage collection: ",t):await ks(t)}await this.Vr(3e5)}))}}class f6{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return V.resolve(mn.ce);const i=new h6(t);return this.mr.forEachTarget(e,(s=>i.Ar(s.sequenceNumber))).next((()=>this.mr.pr(e,(s=>i.Ar(s))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?($("LruGarbageCollector","Garbage collection skipped; disabled"),V.resolve(E0)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?($("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),E0):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,s,r,o,a,l,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((f=>(f>this.params.maximumSequenceNumbersToCollect?($("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,o=Date.now(),this.nthSequenceNumber(e,s)))).next((f=>(i=f,a=Date.now(),this.removeTargets(e,i,t)))).next((f=>(r=f,l=Date.now(),this.removeOrphanedDocuments(e,i)))).next((f=>(c=Date.now(),Qr()<=be.DEBUG&&$("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${r} targets in `+(l-a)+`ms
	Removed ${f} documents in `+(c-l)+`ms
Total Duration: ${c-d}ms`),V.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:r,documentsRemoved:f}))))}}function qT(n,e){return new f6(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p6{constructor(e,t){this.db=e,this.garbageCollector=qT(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((i=>t.next((s=>i+s))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((i,s)=>t(s)))}addReference(e,t,i){return Gc(e,i)}removeReference(e,t,i){return Gc(e,i)}removeTargets(e,t,i){return this.db.getTargetCache().removeTargets(e,t,i)}markPotentiallyOrphaned(e,t){return Gc(e,t)}br(e,t){return(function(s,r){let o=!1;return BT(s).te((a=>UT(s,a,r).next((l=>(l&&(o=!0),V.resolve(!l)))))).next((()=>o))})(e,t)}removeOrphanedDocuments(e,t){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let r=0;return this.Sr(e,((o,a)=>{if(a<=t){const l=this.br(e,o).next((c=>{if(!c)return r++,i.getEntry(e,o).next((()=>(i.removeEntry(o,re.min()),ts(e).delete((function(f){return[0,Jt(f.path)]})(o)))))}));s.push(l)}})).next((()=>V.waitFor(s))).next((()=>i.apply(e))).next((()=>r))}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,t){return Gc(e,t)}Sr(e,t){const i=ts(e);let s,r=mn.ce;return i.ee({index:gm},(([o,a],{path:l,sequenceNumber:c})=>{o===0?(r!==mn.ce&&t(new Y(si(s)),r),r=c,s=l):r=mn.ce})).next((()=>{r!==mn.ce&&t(new Y(si(s)),r)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Gc(n,e){return ts(n).put((function(i,s){return{targetId:0,path:Jt(i.path),sequenceNumber:s}})(e,n.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{constructor(){this.changes=new Li((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,$e.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?V.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m6{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,i){return js(e).put(i)}removeEntry(e,t,i){return js(e).delete((function(r,o){const a=r.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],qu(o),a[a.length-1]]})(t,i))}updateMetadata(e,t){return this.getMetadata(e).next((i=>(i.byteSize+=t,this.Dr(e,i))))}getEntry(e,t){let i=$e.newInvalidDocument(t);return js(e).ee({index:fu,range:IDBKeyRange.only(Fa(t))},((s,r)=>{i=this.Cr(t,r)})).next((()=>i))}vr(e,t){let i={size:0,document:$e.newInvalidDocument(t)};return js(e).ee({index:fu,range:IDBKeyRange.only(Fa(t))},((s,r)=>{i={document:this.Cr(t,r),size:Gu(r)}})).next((()=>i))}getEntries(e,t){let i=yn();return this.Fr(e,t,((s,r)=>{const o=this.Cr(s,r);i=i.insert(s,o)})).next((()=>i))}Mr(e,t){let i=yn(),s=new qe(Y.comparator);return this.Fr(e,t,((r,o)=>{const a=this.Cr(r,o);i=i.insert(r,a),s=s.insert(r,Gu(o))})).next((()=>({documents:i,Or:s})))}Fr(e,t,i){if(t.isEmpty())return V.resolve();let s=new Fe(R0);t.forEach((l=>s=s.add(l)));const r=IDBKeyRange.bound(Fa(s.first()),Fa(s.last())),o=s.getIterator();let a=o.getNext();return js(e).ee({index:fu,range:r},((l,c,d)=>{const f=Y.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&R0(a,f)<0;)i(a,null),a=o.getNext();a&&a.isEqual(f)&&(i(a,c),a=o.hasNext()?o.getNext():null),a?d.j(Fa(a)):d.done()})).next((()=>{for(;a;)i(a,null),a=o.hasNext()?o.getNext():null}))}getDocumentsMatchingQuery(e,t,i,s,r){const o=t.path,a=[o.popLast().toArray(),o.lastSegment(),qu(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return js(e).J(IDBKeyRange.bound(a,l,!0)).next((c=>{r?.incrementDocumentReadCount(c.length);let d=yn();for(const f of c){const m=this.Cr(Y.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);m.isFoundDocument()&&(ac(t,m)||s.has(m.key))&&(d=d.insert(m.key,m))}return d}))}getAllFromCollectionGroup(e,t,i,s){let r=yn();const o=P0(t,i),a=P0(t,Sn.max());return js(e).ee({index:P2,range:IDBKeyRange.bound(o,a,!0)},((l,c,d)=>{const f=this.Cr(Y.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);r=r.insert(f.key,f),r.size===s&&d.done()})).next((()=>r))}newChangeBuffer(e){return new g6(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return S0(e).get(Pf).next((t=>(ne(!!t,20021),t)))}Dr(e,t){return S0(e).put(Pf,t)}Cr(e,t){if(t){const i=e6(this.serializer,t);if(!(i.isNoDocument()&&i.version.isEqual(re.min())))return i}return $e.newInvalidDocument(e)}}function GT(n){return new m6(n)}class g6 extends HT{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new Li((i=>i.toString()),((i,s)=>i.isEqual(s)))}applyChanges(e){const t=[];let i=0,s=new Fe(((r,o)=>he(r.canonicalString(),o.canonicalString())));return this.changes.forEach(((r,o)=>{const a=this.Br.get(r);if(t.push(this.Nr.removeEntry(e,r,a.readTime)),o.isValidDocument()){const l=d0(this.Nr.serializer,o);s=s.add(r.path.popLast());const c=Gu(l);i+=c-a.size,t.push(this.Nr.addEntry(e,r,l))}else if(i-=a.size,this.trackRemovals){const l=d0(this.Nr.serializer,o.convertToNoDocument(re.min()));t.push(this.Nr.addEntry(e,r,l))}})),s.forEach((r=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,r))})),t.push(this.Nr.updateMetadata(e,i)),V.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((i=>(this.Br.set(t,{size:i.size,readTime:i.document.readTime}),i.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:i,Or:s})=>(s.forEach(((r,o)=>{this.Br.set(r,{size:o,readTime:i.get(r).readTime})})),i)))}}function S0(n){return xt(n,Nl)}function js(n){return xt(n,Vu)}function Fa(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function P0(n,e){const t=e.documentKey.path.toArray();return[n,qu(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function R0(n,e){const t=n.path.toArray(),i=e.path.toArray();let s=0;for(let r=0;r<t.length-2&&r<i.length-2;++r)if(s=he(t[r],i[r]),s)return s;return s=he(t.length,i.length),s||(s=he(t[t.length-2],i[i.length-2]),s||he(t[t.length-1],i[i.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y6{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $T{constructor(e,t,i,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(i=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(i!==null&&hl(i.mutation,s,gn.empty(),De.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,pe()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=pe()){const s=ri();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,i).next((r=>{let o=Ka();return r.forEach(((a,l)=>{o=o.insert(a,l.overlayedDocument)})),o}))))}getOverlayedDocuments(e,t){const i=ri();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,pe())))}populateOverlays(e,t,i){const s=[];return i.forEach((r=>{t.has(r)||s.push(r)})),this.documentOverlayCache.getOverlays(e,s).next((r=>{r.forEach(((o,a)=>{t.set(o,a)}))}))}computeViews(e,t,i,s){let r=yn();const o=dl(),a=(function(){return dl()})();return t.forEach(((l,c)=>{const d=i.get(c.key);s.has(c.key)&&(d===void 0||d.mutation instanceof Fi)?r=r.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),hl(d.mutation,c,d.mutation.getFieldMask(),De.now())):o.set(c.key,gn.empty())})),this.recalculateAndSaveOverlays(e,r).next((l=>(l.forEach(((c,d)=>o.set(c,d))),t.forEach(((c,d)=>a.set(c,new y6(d,o.get(c)??null)))),a)))}recalculateAndSaveOverlays(e,t){const i=dl();let s=new qe(((o,a)=>o-a)),r=pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((o=>{for(const a of o)a.keys().forEach((l=>{const c=t.get(l);if(c===null)return;let d=i.get(l)||gn.empty();d=a.applyToLocalView(c,d),i.set(l,d);const f=(s.get(a.batchId)||pe()).add(l);s=s.insert(a.batchId,f)}))})).next((()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,d=l.value,f=aT();d.forEach((m=>{if(!r.has(m)){const y=pT(t.get(m),i.get(m));y!==null&&f.set(m,y),r=r.add(m)}})),o.push(this.documentOverlayCache.saveOverlays(e,c,f))}return V.waitFor(o)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,s){return(function(o){return Y.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):xm(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,s):this.getDocumentsMatchingCollectionQuery(e,t,i,s)}getNextDocuments(e,t,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,s).next((r=>{const o=s-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,s-r.size):V.resolve(ri());let a=Co,l=r;return o.next((c=>V.forEach(c,((d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),r.get(d)?V.resolve():this.remoteDocumentCache.getEntry(e,d).next((m=>{l=l.insert(d,m)}))))).next((()=>this.populateOverlays(e,c,r))).next((()=>this.computeViews(e,l,c,pe()))).next((d=>({batchId:a,changes:oT(d)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Y(t)).next((i=>{let s=Ka();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,s){const r=t.collectionGroup;let o=Ka();return this.indexManager.getCollectionParents(e,r).next((a=>V.forEach(a,(l=>{const c=(function(f,m){return new Di(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)})(t,l.child(r));return this.getDocumentsMatchingCollectionQuery(e,c,i,s).next((d=>{d.forEach(((f,m)=>{o=o.insert(f,m)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,t,i,s){let r;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((o=>(r=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,r,s)))).next((o=>{r.forEach(((l,c)=>{const d=c.getKey();o.get(d)===null&&(o=o.insert(d,$e.newInvalidDocument(d)))}));let a=Ka();return o.forEach(((l,c)=>{const d=r.get(l);d!==void 0&&hl(d.mutation,c,gn.empty(),De.now()),ac(t,c)&&(a=a.insert(l,c))})),a}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v6{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return V.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:dt(s.createTime)}})(t)),V.resolve()}getNamedQuery(e,t){return V.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(s){return{name:s.name,query:Nm(s.bundledQuery),readTime:dt(s.readTime)}})(t)),V.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _6{constructor(){this.overlays=new qe(Y.comparator),this.qr=new Map}getOverlay(e,t){return V.resolve(this.overlays.get(t))}getOverlays(e,t){const i=ri();return V.forEach(t,(s=>this.getOverlay(e,s).next((r=>{r!==null&&i.set(s,r)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((s,r)=>{this.St(e,t,r)})),V.resolve()}removeOverlaysForBatchId(e,t,i){const s=this.qr.get(i);return s!==void 0&&(s.forEach((r=>this.overlays=this.overlays.remove(r))),this.qr.delete(i)),V.resolve()}getOverlaysForCollection(e,t,i){const s=ri(),r=t.length+1,o=new Y(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!t.isPrefixOf(c.path))break;c.path.length===r&&l.largestBatchId>i&&s.set(l.getKey(),l)}return V.resolve(s)}getOverlaysForCollectionGroup(e,t,i,s){let r=new qe(((c,d)=>c-d));const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===t&&c.largestBatchId>i){let d=r.get(c.largestBatchId);d===null&&(d=ri(),r=r.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=ri(),l=r.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach(((c,d)=>a.set(c,d))),!(a.size()>=s)););return V.resolve(a)}St(e,t,i){const s=this.overlays.get(i.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(i.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new Pm(t,i));let r=this.qr.get(t);r===void 0&&(r=pe(),this.qr.set(t,r)),this.qr.set(t,r.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w6{constructor(){this.sessionToken=st.EMPTY_BYTE_STRING}getSessionToken(e){return V.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,V.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm{constructor(){this.Qr=new Fe(St.$r),this.Ur=new Fe(St.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new St(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Gr(new St(e,t))}zr(e,t){e.forEach((i=>this.removeReference(i,t)))}jr(e){const t=new Y(new Te([])),i=new St(t,e),s=new St(t,e+1),r=[];return this.Ur.forEachInRange([i,s],(o=>{this.Gr(o),r.push(o.key)})),r}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Y(new Te([])),i=new St(t,e),s=new St(t,e+1);let r=pe();return this.Ur.forEachInRange([i,s],(o=>{r=r.add(o.key)})),r}containsKey(e){const t=new St(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class St{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Y.comparator(e.key,t.key)||he(e.Yr,t.Yr)}static Kr(e,t){return he(e.Yr,t.Yr)||Y.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b6{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Fe(St.$r)}checkEmpty(e){return V.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,s){const r=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Cm(r,t,i,s);this.mutationQueue.push(o);for(const a of s)this.Zr=this.Zr.add(new St(a.key,r)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return V.resolve(o)}lookupMutationBatch(e,t){return V.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,s=this.ei(i),r=s<0?0:s;return V.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return V.resolve(this.mutationQueue.length===0?hs:this.tr-1)}getAllMutationBatches(e){return V.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new St(t,0),s=new St(t,Number.POSITIVE_INFINITY),r=[];return this.Zr.forEachInRange([i,s],(o=>{const a=this.Xr(o.Yr);r.push(a)})),V.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Fe(he);return t.forEach((s=>{const r=new St(s,0),o=new St(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([r,o],(a=>{i=i.add(a.Yr)}))})),V.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,s=i.length+1;let r=i;Y.isDocumentKey(r)||(r=r.child(""));const o=new St(new Y(r),0);let a=new Fe(he);return this.Zr.forEachWhile((l=>{const c=l.key.path;return!!i.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.Yr)),!0)}),o),V.resolve(this.ti(a))}ti(e){const t=[];return e.forEach((i=>{const s=this.Xr(i);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){ne(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return V.forEach(t.mutations,(s=>{const r=new St(s.key,t.batchId);return i=i.delete(r),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,t){const i=new St(t,0),s=this.Zr.firstAfterOrEqual(i);return V.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,V.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T6{constructor(e){this.ri=e,this.docs=(function(){return new qe(Y.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,s=this.docs.get(i),r=s?s.size:0,o=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:o}),this.size+=o-r,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return V.resolve(i?i.document.mutableCopy():$e.newInvalidDocument(t))}getEntries(e,t){let i=yn();return t.forEach((s=>{const r=this.docs.get(s);i=i.insert(s,r?r.document.mutableCopy():$e.newInvalidDocument(s))})),V.resolve(i)}getDocumentsMatchingQuery(e,t,i,s){let r=yn();const o=t.path,a=new Y(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||pm(x2(d),i)<=0||(s.has(d.key)||ac(t,d))&&(r=r.insert(d.key,d.mutableCopy()))}return V.resolve(r)}getAllFromCollectionGroup(e,t,i,s){Z(9500)}ii(e,t){return V.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new x6(this)}getSize(e){return V.resolve(this.size)}}class x6 extends HT{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,s)=>{s.isValidDocument()?t.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(i)})),V.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E6{constructor(e){this.persistence=e,this.si=new Li((t=>mr(t)),rc),this.lastRemoteSnapshotVersion=re.min(),this.highestTargetId=0,this.oi=0,this._i=new Lm,this.targetCount=0,this.ai=wr.ur()}forEachTarget(e,t){return this.si.forEach(((i,s)=>t(s))),V.resolve()}getLastRemoteSnapshotVersion(e){return V.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return V.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),V.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),V.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new wr(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,V.resolve()}updateTargetData(e,t){return this.Pr(t),V.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,V.resolve()}removeTargets(e,t,i){let s=0;const r=[];return this.si.forEach(((o,a)=>{a.sequenceNumber<=t&&i.get(a.targetId)===null&&(this.si.delete(o),r.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)})),V.waitFor(r).next((()=>s))}getTargetCount(e){return V.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return V.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),V.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const s=this.persistence.referenceDelegate,r=[];return s&&t.forEach((o=>{r.push(s.markPotentiallyOrphaned(e,o))})),V.waitFor(r)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),V.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return V.resolve(i)}containsKey(e,t){return V.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm{constructor(e,t){this.ui={},this.overlays={},this.ci=new mn(0),this.li=!1,this.li=!0,this.hi=new w6,this.referenceDelegate=e(this),this.Pi=new E6(this),this.indexManager=new l6,this.remoteDocumentCache=(function(s){return new T6(s)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new MT(t),this.Ii=new v6(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new _6,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new b6(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){$("MemoryPersistence","Starting transaction:",e);const s=new A6(this.ci.next());return this.referenceDelegate.Ei(),i(s).next((r=>this.referenceDelegate.di(s).next((()=>r)))).toPromise().then((r=>(s.raiseOnCommittedEvent(),r)))}Ai(e,t){return V.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,t))))}}class A6 extends A2{constructor(e){super(),this.currentSequenceNumber=e}}class Dd{constructor(e){this.persistence=e,this.Ri=new Lm,this.Vi=null}static mi(e){return new Dd(e)}get fi(){if(this.Vi)return this.Vi;throw Z(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),V.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),V.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),V.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((s=>this.fi.add(s.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((r=>this.fi.add(r.toString())))})).next((()=>i.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return V.forEach(this.fi,(i=>{const s=Y.fromPath(i);return this.gi(e,s).next((r=>{r||t.removeEntry(s,re.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return V.or([()=>V.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class $u{constructor(e,t){this.persistence=e,this.pi=new Li((i=>Jt(i.path)),((i,s)=>i.isEqual(s))),this.garbageCollector=qT(this,t)}static mi(e,t){return new $u(e,t)}Ei(){}di(e){return V.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((s=>i+s))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}pr(e,t){return V.forEach(this.pi,((i,s)=>this.br(e,i,s).next((r=>r?V.resolve():t(s)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const s=this.persistence.getRemoteDocumentCache(),r=s.newChangeBuffer();return s.ii(e,(o=>this.br(e,o,t).next((a=>{a||(i++,r.removeEntry(o,re.min()))})))).next((()=>r.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),V.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),V.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),V.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),V.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=mu(e.data.value)),t}br(e,t,i){return V.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.pi.get(t);return V.resolve(s!==void 0&&s>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I6{constructor(e){this.serializer=e}k(e,t,i,s){const r=new xd("createOrUpgrade",t);i<1&&s>=1&&((function(l){l.createObjectStore(sc)})(e),(function(l){l.createObjectStore(kl,{keyPath:q5}),l.createObjectStore(Bn,{keyPath:zv,autoIncrement:!0}).createIndex(ir,qv,{unique:!0}),l.createObjectStore(So)})(e),k0(e),(function(l){l.createObjectStore(Ys)})(e));let o=V.resolve();return i<3&&s>=3&&(i!==0&&((function(l){l.deleteObjectStore(Ro),l.deleteObjectStore(Po),l.deleteObjectStore(cr)})(e),k0(e)),o=o.next((()=>(function(l){const c=l.store(cr),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:re.min().toTimestamp(),targetCount:0};return c.put(Ou,d)})(r)))),i<4&&s>=4&&(i!==0&&(o=o.next((()=>(function(l,c){return c.store(Bn).J().next((f=>{l.deleteObjectStore(Bn),l.createObjectStore(Bn,{keyPath:zv,autoIncrement:!0}).createIndex(ir,qv,{unique:!0});const m=c.store(Bn),y=f.map((v=>m.put(v)));return V.waitFor(y)}))})(e,r)))),o=o.next((()=>{(function(l){l.createObjectStore(ko,{keyPath:X5})})(e)}))),i<5&&s>=5&&(o=o.next((()=>this.yi(r)))),i<6&&s>=6&&(o=o.next((()=>((function(l){l.createObjectStore(Nl)})(e),this.wi(r))))),i<7&&s>=7&&(o=o.next((()=>this.Si(r)))),i<8&&s>=8&&(o=o.next((()=>this.bi(e,r)))),i<9&&s>=9&&(o=o.next((()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)}))),i<10&&s>=10&&(o=o.next((()=>this.Di(r)))),i<11&&s>=11&&(o=o.next((()=>{(function(l){l.createObjectStore(Ed,{keyPath:Q5})})(e),(function(l){l.createObjectStore(Ad,{keyPath:Z5})})(e)}))),i<12&&s>=12&&(o=o.next((()=>{(function(l){const c=l.createObjectStore(Id,{keyPath:o4});c.createIndex(kf,a4,{unique:!1}),c.createIndex(M2,l4,{unique:!1})})(e)}))),i<13&&s>=13&&(o=o.next((()=>(function(l){const c=l.createObjectStore(Vu,{keyPath:G5});c.createIndex(fu,$5),c.createIndex(P2,j5)})(e))).next((()=>this.Ci(e,r))).next((()=>e.deleteObjectStore(Ys)))),i<14&&s>=14&&(o=o.next((()=>this.Fi(e,r)))),i<15&&s>=15&&(o=o.next((()=>(function(l){l.createObjectStore(ym,{keyPath:e4,autoIncrement:!0}).createIndex(Rf,t4,{unique:!1}),l.createObjectStore(ll,{keyPath:n4}).createIndex(k2,i4,{unique:!1}),l.createObjectStore(cl,{keyPath:s4}).createIndex(N2,r4,{unique:!1})})(e)))),i<16&&s>=16&&(o=o.next((()=>{t.objectStore(ll).clear()})).next((()=>{t.objectStore(cl).clear()}))),i<17&&s>=17&&(o=o.next((()=>{(function(l){l.createObjectStore(vm,{keyPath:c4})})(e)}))),i<18&&s>=18&&Xw()&&(o=o.next((()=>{t.objectStore(ll).clear()})).next((()=>{t.objectStore(cl).clear()}))),o}wi(e){let t=0;return e.store(Ys).ee(((i,s)=>{t+=Gu(s)})).next((()=>{const i={byteSize:t};return e.store(Nl).put(Pf,i)}))}yi(e){const t=e.store(kl),i=e.store(Bn);return t.J().next((s=>V.forEach(s,(r=>{const o=IDBKeyRange.bound([r.userId,hs],[r.userId,r.lastAcknowledgedBatchId]);return i.J(ir,o).next((a=>V.forEach(a,(l=>{ne(l.userId===r.userId,18650,"Cannot process batch from unexpected user",{batchId:l.batchId});const c=Xs(this.serializer,l);return OT(e,r.userId,c).next((()=>{}))}))))}))))}Si(e){const t=e.store(Ro),i=e.store(Ys);return e.store(cr).get(Ou).next((s=>{const r=[];return i.ee(((o,a)=>{const l=new Te(o),c=(function(f){return[0,Jt(f)]})(l);r.push(t.get(c).next((d=>d?V.resolve():(f=>t.put({targetId:0,path:Jt(f),sequenceNumber:s.highestListenSequenceNumber}))(l))))})).next((()=>V.waitFor(r)))}))}bi(e,t){e.createObjectStore(Ml,{keyPath:J5});const i=t.store(Ml),s=new Dm,r=o=>{if(s.add(o)){const a=o.lastSegment(),l=o.popLast();return i.put({collectionId:a,parent:Jt(l)})}};return t.store(Ys).ee({X:!0},((o,a)=>{const l=new Te(o);return r(l.popLast())})).next((()=>t.store(So).ee({X:!0},(([o,a,l],c)=>{const d=si(a);return r(d.popLast())}))))}Di(e){const t=e.store(Po);return t.ee(((i,s)=>{const r=Ja(s),o=DT(this.serializer,r);return t.put(o)}))}Ci(e,t){const i=t.store(Ys),s=[];return i.ee(((r,o)=>{const a=t.store(Vu),l=(function(f){return f.document?new Y(Te.fromString(f.document.name).popFirst(5)):f.noDocument?Y.fromSegments(f.noDocument.path):f.unknownDocument?Y.fromSegments(f.unknownDocument.path):Z(36783)})(o).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};s.push(a.put(c))})).next((()=>V.waitFor(s)))}Fi(e,t){const i=t.store(Bn),s=GT(this.serializer),r=new Fm(Dd.mi,this.serializer.yt);return i.J().next((o=>{const a=new Map;return o.forEach((l=>{let c=a.get(l.userId)??pe();Xs(this.serializer,l).keys().forEach((d=>c=c.add(d))),a.set(l.userId,c)})),V.forEach(a,((l,c)=>{const d=new Pt(c),f=Nd.wt(this.serializer,d),m=r.getIndexManager(d),y=Md.wt(d,this.serializer,m,r.referenceDelegate);return new $T(s,y,f,m).recalculateAndSaveOverlaysForDocumentKeys(new Nf(t,mn.ce),l).next()}))}))}}function k0(n){n.createObjectStore(Ro,{keyPath:K5}).createIndex(gm,Y5,{unique:!0}),n.createObjectStore(Po,{keyPath:"targetId"}).createIndex(R2,W5,{unique:!0}),n.createObjectStore(cr)}const Qi="IndexedDbPersistence",qh=18e5,Hh=5e3,Gh="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",jT="main";class Vm{constructor(e,t,i,s,r,o,a,l,c,d,f=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=i,this.Mi=r,this.window=o,this.document=a,this.xi=c,this.Oi=d,this.Ni=f,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=m=>Promise.resolve(),!Vm.v())throw new G(B.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new p6(this,s),this.$i=t+jT,this.serializer=new MT(l),this.Ui=new oi(this.$i,this.Ni,new I6(this.serializer)),this.hi=new n6,this.Pi=new u6(this.referenceDelegate,this.serializer),this.remoteDocumentCache=GT(this.serializer),this.Ii=new t6,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,d===!1&&ct(Qi,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new G(B.FAILED_PRECONDITION,Gh);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new mn(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>$c(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(Ns(e))return $(Qi,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return $(Qi,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return Va(e).get($r).next((t=>V.resolve(this.es(t))))}ts(e){return $c(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,qh)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const i=xt(t,ko);return i.J().next((s=>{const r=this.ss(s,qh),o=s.filter((a=>r.indexOf(a)===-1));return V.forEach(o,(a=>i.delete(a.clientId))).next((()=>o))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?V.resolve(!0):Va(e).get($r).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Hh)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new G(B.FAILED_PRECONDITION,Gh);return!1}}return!(!this.networkEnabled||!this.inForeground)||$c(e).J().next((i=>this.ss(i,Hh).find((s=>{if(this.clientId!==s.clientId){const r=!this.networkEnabled&&s.networkEnabled,o=!this.inForeground&&s.inForeground,a=this.networkEnabled===s.networkEnabled;if(r||o&&a)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&$(Qi,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[sc,ko],(e=>{const t=new Nf(e,mn.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((i=>this.rs(i.updateTimeMs,t)&&!this.us(i.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>$c(e).J().next((t=>this.ss(t,qh).map((i=>i.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return Md.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new c6(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Nd.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,i){$(Qi,"Starting transaction:",e);const s=t==="readonly"?"readonly":"readwrite",r=(function(l){return l===18?h4:l===17?V2:l===16?d4:l===15?_m:l===14?F2:l===13?L2:l===12?u4:l===11?D2:void Z(60245)})(this.Ni);let o;return this.Ui.runTransaction(e,s,r,(a=>(o=new Nf(a,this.ci?this.ci.next():mn.ce),t==="readwrite-primary"?this.Hi(o).next((l=>!!l||this.Yi(o))).next((l=>{if(!l)throw ct(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new G(B.FAILED_PRECONDITION,E2);return i(o)})).next((l=>this.Xi(o).next((()=>l)))):this.Is(o).next((()=>i(o)))))).then((a=>(o.raiseOnCommittedEvent(),a)))}Is(e){return Va(e).get($r).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Hh)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new G(B.FAILED_PRECONDITION,Gh)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Va(e).put($r,t)}static v(){return oi.v()}Zi(e){const t=Va(e);return t.get($r).next((i=>this.es(i)?($(Qi,"Releasing primary lease."),t.delete($r)):V.resolve()))}rs(e,t){const i=Date.now();return!(e<i-t)&&(!(e>i)||(ct(`Detected an update time that is in the future: ${e} > ${i}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;Jw()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{const t=this.Ki?.getItem(this._s(e))!==null;return $(Qi,`Client '${e}' ${t?"is":"is not"} zombied in LocalStorage`),t}catch(t){return ct(Qi,"Failed to get zombied client id.",t),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){ct("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Va(n){return xt(n,sc)}function $c(n){return xt(n,ko)}function Om(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um{constructor(e,t,i,s){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=s}static As(e,t){let i=pe(),s=pe();for(const r of t.docChanges)switch(r.type){case 0:i=i.add(r.doc.key);break;case 1:s=s.add(r.doc.key)}return new Um(e,t.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C6{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return Jw()?8:I2(et())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,s){const r={result:null};return this.ys(e,t).next((o=>{r.result=o})).next((()=>{if(!r.result)return this.ws(e,t,s,i).next((o=>{r.result=o}))})).next((()=>{if(r.result)return;const o=new C6;return this.Ss(e,t,o).next((a=>{if(r.result=a,this.Vs)return this.bs(e,t,o,a.size)}))})).next((()=>r.result))}bs(e,t,i,s){return i.documentReadCount<this.fs?(Qr()<=be.DEBUG&&$("QueryEngine","SDK will not create cache indexes for query:",Zr(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),V.resolve()):(Qr()<=be.DEBUG&&$("QueryEngine","Query:",Zr(t),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.gs*s?(Qr()<=be.DEBUG&&$("QueryEngine","The SDK decides to create cache indexes for query:",Zr(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ln(t))):V.resolve())}ys(e,t){if(t0(t))return V.resolve(null);let i=ln(t);return this.indexManager.getIndexType(e,i).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=zu(t,null,"F"),i=ln(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((r=>{const o=pe(...r);return this.ps.getDocuments(e,o).next((a=>this.indexManager.getMinOffset(e,i).next((l=>{const c=this.Ds(t,a);return this.Cs(t,c,o,l.readTime)?this.ys(e,zu(t,null,"F")):this.vs(e,c,t,l)}))))})))))}ws(e,t,i,s){return t0(t)||s.isEqual(re.min())?V.resolve(null):this.ps.getDocuments(e,i).next((r=>{const o=this.Ds(t,r);return this.Cs(t,o,i,s)?V.resolve(null):(Qr()<=be.DEBUG&&$("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Zr(t)),this.vs(e,o,t,T2(s,Co)).next((a=>a)))}))}Ds(e,t){let i=new Fe(sT(e));return t.forEach(((s,r)=>{ac(e,r)&&(i=i.add(r))})),i}Cs(e,t,i,s){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const r=e.limitType==="F"?t.last():t.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(s)>0)}Ss(e,t,i){return Qr()<=be.DEBUG&&$("QueryEngine","Using full collection scan to execute query:",Zr(t)),this.ps.getDocumentsMatchingQuery(e,t,Sn.min(),i)}vs(e,t,i,s){return this.ps.getDocumentsMatchingQuery(e,i,s).next((r=>(t.forEach((o=>{r=r.insert(o.key,o)})),r)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bm="LocalStore",S6=3e8;class P6{constructor(e,t,i,s){this.persistence=e,this.Fs=t,this.serializer=s,this.Ms=new qe(he),this.xs=new Li((r=>mr(r)),rc),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new $T(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function KT(n,e,t,i){return new P6(n,e,t,i)}async function YT(n,e){const t=X(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let s;return t.mutationQueue.getAllMutationBatches(i).next((r=>(s=r,t.Bs(e),t.mutationQueue.getAllMutationBatches(i)))).next((r=>{const o=[],a=[];let l=pe();for(const c of s){o.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of r){a.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return t.localDocuments.getDocuments(i,l).next((c=>({Ls:c,removedBatchIds:o,addedBatchIds:a})))}))}))}function R6(n,e){const t=X(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const s=e.batch.keys(),r=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(a,l,c,d){const f=c.batch,m=f.keys();let y=V.resolve();return m.forEach((v=>{y=y.next((()=>d.getEntry(l,v))).next((w=>{const T=c.docVersions.get(v);ne(T!==null,48541),w.version.compareTo(T)<0&&(f.applyToRemoteDocument(w,c),w.isValidDocument()&&(w.setReadTime(c.commitVersion),d.addEntry(w)))}))})),y.next((()=>a.mutationQueue.removeMutationBatch(l,f)))})(t,i,e,r).next((()=>r.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(a){let l=pe();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l})(e)))).next((()=>t.localDocuments.getDocuments(i,s)))}))}function JT(n){const e=X(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function k6(n,e){const t=X(n),i=e.snapshotVersion;let s=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(r=>{const o=t.Ns.newChangeBuffer({trackRemovals:!0});s=t.Ms;const a=[];e.targetChanges.forEach(((d,f)=>{const m=s.get(f);if(!m)return;a.push(t.Pi.removeMatchingKeys(r,d.removedDocuments,f).next((()=>t.Pi.addMatchingKeys(r,d.addedDocuments,f))));let y=m.withSequenceNumber(r.currentSequenceNumber);e.targetMismatches.get(f)!==null?y=y.withResumeToken(st.EMPTY_BYTE_STRING,re.min()).withLastLimboFreeSnapshotVersion(re.min()):d.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(d.resumeToken,i)),s=s.insert(f,y),(function(w,T,x){return w.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=S6?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0})(m,y,d)&&a.push(t.Pi.updateTargetData(r,y))}));let l=yn(),c=pe();if(e.documentUpdates.forEach((d=>{e.resolvedLimboDocuments.has(d)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(r,d))})),a.push(XT(r,o,e.documentUpdates).next((d=>{l=d.ks,c=d.qs}))),!i.isEqual(re.min())){const d=t.Pi.getLastRemoteSnapshotVersion(r).next((f=>t.Pi.setTargetsMetadata(r,r.currentSequenceNumber,i)));a.push(d)}return V.waitFor(a).next((()=>o.apply(r))).next((()=>t.localDocuments.getLocalViewOfDocuments(r,l,c))).next((()=>l))})).then((r=>(t.Ms=s,r)))}function XT(n,e,t){let i=pe(),s=pe();return t.forEach((r=>i=i.add(r))),e.getEntries(n,i).next((r=>{let o=yn();return t.forEach(((a,l)=>{const c=r.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(re.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):$(Bm,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)})),{ks:o,qs:s}}))}function N6(n,e){const t=X(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=hs),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function Oo(n,e){const t=X(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let s;return t.Pi.getTargetData(i,e).next((r=>r?(s=r,V.resolve(s)):t.Pi.allocateTargetId(i).next((o=>(s=new xi(e,o,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,s).next((()=>s)))))))})).then((i=>{const s=t.Ms.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i}))}async function Uo(n,e,t){const i=X(n),s=i.Ms.get(e),r=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",r,(o=>i.persistence.referenceDelegate.removeTarget(o,s)))}catch(o){if(!Ns(o))throw o;$(Bm,`Failed to update sequence numbers for target ${e}: ${o}`)}i.Ms=i.Ms.remove(e),i.xs.delete(s.target)}function ju(n,e,t){const i=X(n);let s=re.min(),r=pe();return i.persistence.runTransaction("Execute query","readwrite",(o=>(function(l,c,d){const f=X(l),m=f.xs.get(d);return m!==void 0?V.resolve(f.Ms.get(m)):f.Pi.getTargetData(c,d)})(i,o,ln(e)).next((a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(o,a.targetId).next((l=>{r=l}))})).next((()=>i.Fs.getDocumentsMatchingQuery(o,e,t?s:re.min(),t?r:pe()))).next((a=>(ex(i,iT(e),a),{documents:a,Qs:r})))))}function QT(n,e){const t=X(n),i=X(t.Pi),s=t.Ms.get(e);return s?Promise.resolve(s.target):t.persistence.runTransaction("Get target data","readonly",(r=>i.At(r,e).next((o=>o?o.target:null))))}function ZT(n,e){const t=X(n),i=t.Os.get(e)||re.min();return t.persistence.runTransaction("Get new document changes","readonly",(s=>t.Ns.getAllFromCollectionGroup(s,e,T2(i,Co),Number.MAX_SAFE_INTEGER))).then((s=>(ex(t,e,s),s)))}function ex(n,e,t){let i=n.Os.get(e)||re.min();t.forEach(((s,r)=>{r.readTime.compareTo(i)>0&&(i=r.readTime)})),n.Os.set(e,i)}async function M6(n,e,t,i){const s=X(n);let r=pe(),o=yn();for(const c of t){const d=e.$s(c.metadata.name);c.document&&(r=r.add(d));const f=e.Us(c);f.setReadTime(e.Ks(c.metadata.readTime)),o=o.insert(d,f)}const a=s.Ns.newChangeBuffer({trackRemovals:!0}),l=await Oo(s,(function(d){return ln(ea(Te.fromString(`__bundle__/docs/${d}`)))})(i));return s.persistence.runTransaction("Apply bundle documents","readwrite",(c=>XT(c,a,o).next((d=>(a.apply(c),d))).next((d=>s.Pi.removeMatchingKeysForTargetId(c,l.targetId).next((()=>s.Pi.addMatchingKeys(c,r,l.targetId))).next((()=>s.localDocuments.getLocalViewOfDocuments(c,d.ks,d.qs))).next((()=>d.ks))))))}async function D6(n,e,t=pe()){const i=await Oo(n,ln(Nm(e.bundledQuery))),s=X(n);return s.persistence.runTransaction("Save named query","readwrite",(r=>{const o=dt(e.readTime);if(i.snapshotVersion.compareTo(o)>=0)return s.Ii.saveNamedQuery(r,e);const a=i.withResumeToken(st.EMPTY_BYTE_STRING,o);return s.Ms=s.Ms.insert(a.targetId,a),s.Pi.updateTargetData(r,a).next((()=>s.Pi.removeMatchingKeysForTargetId(r,i.targetId))).next((()=>s.Pi.addMatchingKeys(r,t,i.targetId))).next((()=>s.Ii.saveNamedQuery(r,e)))}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tx="firestore_clients";function N0(n,e){return`${tx}_${n}_${e}`}const nx="firestore_mutations";function M0(n,e,t){let i=`${nx}_${n}_${t}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}const ix="firestore_targets";function $h(n,e){return`${ix}_${n}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xn="SharedClientState";class Wu{constructor(e,t,i,s){this.user=e,this.batchId=t,this.state=i,this.error=s}static Ws(e,t,i){const s=JSON.parse(i);let r,o=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return o&&s.error&&(o=typeof s.error.message=="string"&&typeof s.error.code=="string",o&&(r=new G(s.error.code,s.error.message))),o?new Wu(e,t,s.state,r):(ct(Xn,`Failed to parse mutation state for ID '${t}': ${i}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class fl{constructor(e,t,i){this.targetId=e,this.state=t,this.error=i}static Ws(e,t){const i=JSON.parse(t);let s,r=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return r&&i.error&&(r=typeof i.error.message=="string"&&typeof i.error.code=="string",r&&(s=new G(i.error.code,i.error.message))),r?new fl(e,i.state,s):(ct(Xn,`Failed to parse target state for ID '${e}': ${t}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ku{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ws(e,t){const i=JSON.parse(t);let s=typeof i=="object"&&i.activeTargetIds instanceof Array,r=Em();for(let o=0;s&&o<i.activeTargetIds.length;++o)s=C2(i.activeTargetIds[o]),r=r.add(i.activeTargetIds[o]);return s?new Ku(e,r):(ct(Xn,`Failed to parse client data for instance '${e}': ${t}`),null)}}class zm{constructor(e,t){this.clientId=e,this.onlineState=t}static Ws(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new zm(t.clientId,t.onlineState):(ct(Xn,`Failed to parse online state: ${e}`),null)}}class Wf{constructor(){this.activeTargetIds=Em()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class jh{constructor(e,t,i,s,r){this.window=e,this.Mi=t,this.persistenceKey=i,this.Js=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new qe(he),this.started=!1,this.Xs=[];const o=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=r,this.eo=N0(this.persistenceKey,this.Js),this.no=(function(l){return`firestore_sequence_number_${l}`})(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new Wf),this.ro=new RegExp(`^${tx}_${o}_([^_]*)$`),this.io=new RegExp(`^${nx}_${o}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${ix}_${o}_(\\d+)$`),this.oo=(function(l){return`firestore_online_state_${l}`})(this.persistenceKey),this._o=(function(l){return`firestore_bundle_loaded_v2_${l}`})(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const i of e){if(i===this.Js)continue;const s=this.getItem(N0(this.persistenceKey,i));if(s){const r=Ku.Ws(i,s);r&&(this.Zs=this.Zs.insert(r.clientId,r))}}this.ao();const t=this.storage.getItem(this.oo);if(t){const i=this.uo(t);i&&this.co(i)}for(const i of this.Xs)this.Ys(i);this.Xs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let t=!1;return this.Zs.forEach(((i,s)=>{s.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,t,i){this.ho(e,t,i),this.Po(e)}addLocalQueryTarget(e,t=!0){let i="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem($h(this.persistenceKey,e));if(s){const r=fl.Ws(e,s);r&&(i=r.state)}}return t&&this.To.zs(e),this.ao(),i}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem($h(this.persistenceKey,e))}updateQueryState(e,t,i){this.Io(e,t,i)}handleUserChange(e,t,i){t.forEach((s=>{this.Po(s)})),this.currentUser=e,i.forEach((s=>{this.addPendingMutation(s)}))}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return $(Xn,"READ",e,t),t}setItem(e,t){$(Xn,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){$(Xn,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const t=e;if(t.storageArea===this.storage){if($(Xn,"EVENT",t.key,t.newValue),t.key===this.eo)return void ct("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable((async()=>{if(this.started){if(t.key!==null){if(this.ro.test(t.key)){if(t.newValue==null){const i=this.Ro(t.key);return this.Vo(i,null)}{const i=this.mo(t.key,t.newValue);if(i)return this.Vo(i.clientId,i)}}else if(this.io.test(t.key)){if(t.newValue!==null){const i=this.fo(t.key,t.newValue);if(i)return this.po(i)}}else if(this.so.test(t.key)){if(t.newValue!==null){const i=this.yo(t.key,t.newValue);if(i)return this.wo(i)}}else if(t.key===this.oo){if(t.newValue!==null){const i=this.uo(t.newValue);if(i)return this.co(i)}}else if(t.key===this.no){const i=(function(r){let o=mn.ce;if(r!=null)try{const a=JSON.parse(r);ne(typeof a=="number",30636,{So:r}),o=a}catch(a){ct(Xn,"Failed to read sequence number from WebStorage",a)}return o})(t.newValue);i!==mn.ce&&this.sequenceNumberHandler(i)}else if(t.key===this._o){const i=this.bo(t.newValue);await Promise.all(i.map((s=>this.syncEngine.Do(s))))}}}else this.Xs.push(t)}))}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,t,i){const s=new Wu(this.currentUser,e,t,i),r=M0(this.persistenceKey,this.currentUser,e);this.setItem(r,s.Gs())}Po(e){const t=M0(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Eo(e){const t={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(t))}Io(e,t,i){const s=$h(this.persistenceKey,e),r=new fl(e,t,i);this.setItem(s,r.Gs())}Ao(e){const t=JSON.stringify(Array.from(e));this.setItem(this._o,t)}Ro(e){const t=this.ro.exec(e);return t?t[1]:null}mo(e,t){const i=this.Ro(e);return Ku.Ws(i,t)}fo(e,t){const i=this.io.exec(e),s=Number(i[1]),r=i[2]!==void 0?i[2]:null;return Wu.Ws(new Pt(r),s,t)}yo(e,t){const i=this.so.exec(e),s=Number(i[1]);return fl.Ws(s,t)}uo(e){return zm.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);$(Xn,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,t){const i=t?this.Zs.insert(e,t):this.Zs.remove(e),s=this.lo(this.Zs),r=this.lo(i),o=[],a=[];return r.forEach((l=>{s.has(l)||o.push(l)})),s.forEach((l=>{r.has(l)||a.push(l)})),this.syncEngine.Fo(o,a).then((()=>{this.Zs=i}))}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let t=Em();return e.forEach(((i,s)=>{t=t.unionWith(s.activeTargetIds)})),t}}class sx{constructor(){this.Mo=new Wf,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Wf,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L6{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D0="ConnectivityMonitor";class L0{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){$(D0,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){$(D0,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jc=null;function Kf(){return jc===null?jc=(function(){return 268435456+Math.round(2147483648*Math.random())})():jc++,"0x"+jc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wh="RestConnection",F6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class V6{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${s}`,this.Wo=this.databaseId.database===Mf?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Go(e,t,i,s,r){const o=Kf(),a=this.zo(e,t.toUriEncodedString());$(Wh,`Sending RPC '${e}' ${o}:`,a,i);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,s,r);const{host:c}=new URL(a),d=Ps(c);return this.Jo(e,a,l,i,d).then((f=>($(Wh,`Received RPC '${e}' ${o}: `,f),f)),(f=>{throw di(Wh,`RPC '${e}' ${o} failed with error: `,f,"url: ",a,"request:",i),f}))}Ho(e,t,i,s,r,o){return this.Go(e,t,i,s,r)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Zo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((s,r)=>e[r]=s)),i&&i.headers.forEach(((s,r)=>e[r]=s))}zo(e,t){const i=F6[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O6{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zt="WebChannelConnection";class U6 extends V6{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,s,r){const o=Kf();return new Promise(((a,l)=>{const c=new d2;c.setWithCredentials(!0),c.listenOnce(h2.COMPLETE,(()=>{try{switch(c.getLastErrorCode()){case uu.NO_ERROR:const f=c.getResponseJson();$(zt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),a(f);break;case uu.TIMEOUT:$(zt,`RPC '${e}' ${o} timed out`),l(new G(B.DEADLINE_EXCEEDED,"Request time out"));break;case uu.HTTP_ERROR:const m=c.getStatus();if($(zt,`RPC '${e}' ${o} failed with status:`,m,"response text:",c.getResponseText()),m>0){let y=c.getResponseJson();Array.isArray(y)&&(y=y[0]);const v=y?.error;if(v&&v.status&&v.message){const w=(function(x){const P=x.toLowerCase().replace(/_/g,"-");return Object.values(B).indexOf(P)>=0?P:B.UNKNOWN})(v.status);l(new G(w,v.message))}else l(new G(B.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new G(B.UNAVAILABLE,"Connection failed."));break;default:Z(9055,{l_:e,streamId:o,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{$(zt,`RPC '${e}' ${o} completed.`)}}));const d=JSON.stringify(s);$(zt,`RPC '${e}' ${o} sending request:`,s),c.send(t,"POST",d,i,15)}))}T_(e,t,i){const s=Kf(),r=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=m2(),a=p2(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,t,i),l.encodeInitMessageHeaders=!0;const d=r.join("");$(zt,`Creating RPC '${e}' stream ${s}: ${d}`,l);const f=o.createWebChannel(d,l);this.I_(f);let m=!1,y=!1;const v=new O6({Yo:T=>{y?$(zt,`Not sending because RPC '${e}' stream ${s} is closed:`,T):(m||($(zt,`Opening RPC '${e}' stream ${s} transport.`),f.open(),m=!0),$(zt,`RPC '${e}' stream ${s} sending:`,T),f.send(T))},Zo:()=>f.close()}),w=(T,x,P)=>{T.listen(x,(S=>{try{P(S)}catch(L){setTimeout((()=>{throw L}),0)}}))};return w(f,Wa.EventType.OPEN,(()=>{y||($(zt,`RPC '${e}' stream ${s} transport opened.`),v.o_())})),w(f,Wa.EventType.CLOSE,(()=>{y||(y=!0,$(zt,`RPC '${e}' stream ${s} transport closed`),v.a_(),this.E_(f))})),w(f,Wa.EventType.ERROR,(T=>{y||(y=!0,di(zt,`RPC '${e}' stream ${s} transport errored. Name:`,T.name,"Message:",T.message),v.a_(new G(B.UNAVAILABLE,"The operation could not be completed")))})),w(f,Wa.EventType.MESSAGE,(T=>{if(!y){const x=T.data[0];ne(!!x,16349);const P=x,S=P?.error||P[0]?.error;if(S){$(zt,`RPC '${e}' stream ${s} received error:`,S);const L=S.status;let F=(function(A){const E=mt[A];if(E!==void 0)return yT(E)})(L),U=S.message;F===void 0&&(F=B.INTERNAL,U="Unknown error status: "+L+" with message "+S.message),y=!0,v.a_(new G(F,U)),f.close()}else $(zt,`RPC '${e}' stream ${s} received:`,x),v.u_(x)}})),w(a,f2.STAT_EVENT,(T=>{T.stat===If.PROXY?$(zt,`RPC '${e}' stream ${s} detected buffering proxy`):T.stat===If.NOPROXY&&$(zt,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{v.__()}),0),v}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rx(){return typeof window<"u"?window:null}function wu(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dc(n){return new G4(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm{constructor(e,t,i=1e3,s=1.5,r=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=s,this.R_=r,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),s=Math.max(0,t-i);s>0&&$("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F0="PersistentStream";class ox{constructor(e,t,i,s,r,o,a,l){this.Mi=e,this.S_=i,this.b_=s,this.connection=r,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new qm(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===B.RESOURCE_EXHAUSTED?(ct(t.toString()),ct("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===B.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,s])=>{this.D_===t&&this.G_(i,s)}),(i=>{e((()=>{const s=new G(B.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(s)}))}))}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((s=>{i((()=>this.z_(s)))})),this.stream.onMessage((s=>{i((()=>++this.F_==1?this.J_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return $(F0,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():($(F0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class B6 extends ox{constructor(e,t,i,s,r,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,s,o),this.serializer=r}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=W4(this.serializer,e),i=(function(r){if(!("targetChange"in r))return re.min();const o=r.targetChange;return o.targetIds&&o.targetIds.length?re.min():o.readTime?dt(o.readTime):re.min()})(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=qf(this.serializer),t.addTarget=(function(r,o){let a;const l=o.target;if(a=Uu(l)?{documents:CT(r,l)}:{query:ST(r,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=bT(r,o.resumeToken);const c=Bf(r,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(re.min())>0){a.readTime=Vo(r,o.snapshotVersion.toTimestamp());const c=Bf(r,o.expectedCount);c!==null&&(a.expectedCount=c)}return a})(this.serializer,e);const i=Y4(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=qf(this.serializer),t.removeTarget=e,this.q_(t)}}class z6 extends ox{constructor(e,t,i,s,r,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,s,o),this.serializer=r}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return ne(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ne(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ne(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=K4(e.writeResults,e.commitTime),i=dt(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=qf(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>Ul(this.serializer,i)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q6{}class H6 extends q6{constructor(e,t,i,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new G(B.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([r,o])=>this.connection.Go(e,zf(t,i),s,r,o))).catch((r=>{throw r.name==="FirebaseError"?(r.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new G(B.UNKNOWN,r.toString())}))}Ho(e,t,i,s,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,a])=>this.connection.Ho(e,zf(t,i),s,o,a,r))).catch((o=>{throw o.name==="FirebaseError"?(o.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new G(B.UNKNOWN,o.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class G6{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ct(t),this.aa=!1):$("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const br="RemoteStore";class $6{constructor(e,t,i,s,r){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=r,this.Aa.Oo((o=>{i.enqueueAndForget((async()=>{Ds(this)&&($(br,"Restarting streams for network reachability change."),await(async function(l){const c=X(l);c.Ea.add(4),await ia(c),c.Ra.set("Unknown"),c.Ea.delete(4),await hc(c)})(this))}))})),this.Ra=new G6(i,s)}}async function hc(n){if(Ds(n))for(const e of n.da)await e(!0)}async function ia(n){for(const e of n.da)await e(!1)}function Ld(n,e){const t=X(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),$m(t)?Gm(t):ra(t).O_()&&Hm(t,e))}function Bo(n,e){const t=X(n),i=ra(t);t.Ia.delete(e),i.O_()&&ax(t,e),t.Ia.size===0&&(i.O_()?i.L_():Ds(t)&&t.Ra.set("Unknown"))}function Hm(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(re.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ra(n).Y_(e)}function ax(n,e){n.Va.Ue(e),ra(n).Z_(e)}function Gm(n){n.Va=new B4({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),ra(n).start(),n.Ra.ua()}function $m(n){return Ds(n)&&!ra(n).x_()&&n.Ia.size>0}function Ds(n){return X(n).Ea.size===0}function lx(n){n.Va=void 0}async function j6(n){n.Ra.set("Online")}async function W6(n){n.Ia.forEach(((e,t)=>{Hm(n,e)}))}async function K6(n,e){lx(n),$m(n)?(n.Ra.ha(e),Gm(n)):n.Ra.set("Unknown")}async function Y6(n,e,t){if(n.Ra.set("Online"),e instanceof wT&&e.state===2&&e.cause)try{await(async function(s,r){const o=r.cause;for(const a of r.targetIds)s.Ia.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.Ia.delete(a),s.Va.removeTarget(a))})(n,e)}catch(i){$(br,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Yu(n,i)}else if(e instanceof vu?n.Va.Ze(e):e instanceof _T?n.Va.st(e):n.Va.tt(e),!t.isEqual(re.min()))try{const i=await JT(n.localStore);t.compareTo(i)>=0&&await(function(r,o){const a=r.Va.Tt(o);return a.targetChanges.forEach(((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=r.Ia.get(c);d&&r.Ia.set(c,d.withResumeToken(l.resumeToken,o))}})),a.targetMismatches.forEach(((l,c)=>{const d=r.Ia.get(l);if(!d)return;r.Ia.set(l,d.withResumeToken(st.EMPTY_BYTE_STRING,d.snapshotVersion)),ax(r,l);const f=new xi(d.target,l,c,d.sequenceNumber);Hm(r,f)})),r.remoteSyncer.applyRemoteEvent(a)})(n,t)}catch(i){$(br,"Failed to raise snapshot:",i),await Yu(n,i)}}async function Yu(n,e,t){if(!Ns(e))throw e;n.Ea.add(1),await ia(n),n.Ra.set("Offline"),t||(t=()=>JT(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{$(br,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await hc(n)}))}function cx(n,e){return e().catch((t=>Yu(n,t,e)))}async function sa(n){const e=X(n),t=xs(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:hs;for(;J6(e);)try{const s=await N6(e.localStore,i);if(s===null){e.Ta.length===0&&t.L_();break}i=s.batchId,X6(e,s)}catch(s){await Yu(e,s)}ux(e)&&dx(e)}function J6(n){return Ds(n)&&n.Ta.length<10}function X6(n,e){n.Ta.push(e);const t=xs(n);t.O_()&&t.X_&&t.ea(e.mutations)}function ux(n){return Ds(n)&&!xs(n).x_()&&n.Ta.length>0}function dx(n){xs(n).start()}async function Q6(n){xs(n).ra()}async function Z6(n){const e=xs(n);for(const t of n.Ta)e.ea(t.mutations)}async function eN(n,e,t){const i=n.Ta.shift(),s=Sm.from(i,e,t);await cx(n,(()=>n.remoteSyncer.applySuccessfulWrite(s))),await sa(n)}async function tN(n,e){e&&xs(n).X_&&await(async function(i,s){if((function(o){return gT(o)&&o!==B.ABORTED})(s.code)){const r=i.Ta.shift();xs(i).B_(),await cx(i,(()=>i.remoteSyncer.rejectFailedWrite(r.batchId,s))),await sa(i)}})(n,e),ux(n)&&dx(n)}async function V0(n,e){const t=X(n);t.asyncQueue.verifyOperationInProgress(),$(br,"RemoteStore received new credentials");const i=Ds(t);t.Ea.add(3),await ia(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await hc(t)}async function Yf(n,e){const t=X(n);e?(t.Ea.delete(2),await hc(t)):e||(t.Ea.add(2),await ia(t),t.Ra.set("Unknown"))}function ra(n){return n.ma||(n.ma=(function(t,i,s){const r=X(t);return r.sa(),new B6(i,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)})(n.datastore,n.asyncQueue,{Xo:j6.bind(null,n),t_:W6.bind(null,n),r_:K6.bind(null,n),H_:Y6.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),$m(n)?Gm(n):n.Ra.set("Unknown")):(await n.ma.stop(),lx(n))}))),n.ma}function xs(n){return n.fa||(n.fa=(function(t,i,s){const r=X(t);return r.sa(),new z6(i,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:Q6.bind(null,n),r_:tN.bind(null,n),ta:Z6.bind(null,n),na:eN.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await sa(n)):(await n.fa.stop(),n.Ta.length>0&&($(br,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{constructor(e,t,i,s,r){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=s,this.removalCallback=r,this.deferred=new Ft,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,s,r){const o=Date.now()+i,a=new jm(e,t,o,s,r);return a.start(i),a}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new G(B.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function oa(n,e){if(ct("AsyncQueue",`${e}: ${n}`),Ns(n))return new G(B.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{static emptySet(e){return new po(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Y.comparator(t.key,i.key):(t,i)=>Y.comparator(t.key,i.key),this.keyedMap=Ka(),this.sortedSet=new qe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof po)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,r=i.getNext().key;if(!s.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new po;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0{constructor(){this.ga=new qe(Y.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Z(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class zo{constructor(e,t,i,s,r,o,a,l,c){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=r,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,t,i,s,r){const o=[];return t.forEach((a=>{o.push({type:0,doc:a})})),new zo(e,t,po.emptySet(t),o,i,s,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&oc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==i[s].type||!t[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class iN{constructor(){this.queries=U0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const s=X(t),r=s.queries;s.queries=U0(),r.forEach(((o,a)=>{for(const l of a.Sa)l.onError(i)}))})(this,new G(B.ABORTED,"Firestore shutting down"))}}function U0(){return new Li((n=>nT(n)),oc)}async function Wm(n,e){const t=X(n);let i=3;const s=e.query;let r=t.queries.get(s);r?!r.ba()&&e.Da()&&(i=2):(r=new nN,i=e.Da()?0:1);try{switch(i){case 0:r.wa=await t.onListen(s,!0);break;case 1:r.wa=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(o){const a=oa(o,`Initialization of query '${Zr(e.query)}' failed`);return void e.onError(a)}t.queries.set(s,r),r.Sa.push(e),e.va(t.onlineState),r.wa&&e.Fa(r.wa)&&Ym(t)}async function Km(n,e){const t=X(n),i=e.query;let s=3;const r=t.queries.get(i);if(r){const o=r.Sa.indexOf(e);o>=0&&(r.Sa.splice(o,1),r.Sa.length===0?s=e.Da()?0:1:!r.ba()&&e.Da()&&(s=2))}switch(s){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function sN(n,e){const t=X(n);let i=!1;for(const s of e){const r=s.query,o=t.queries.get(r);if(o){for(const a of o.Sa)a.Fa(s)&&(i=!0);o.wa=s}}i&&Ym(t)}function rN(n,e,t){const i=X(n),s=i.queries.get(e);if(s)for(const r of s.Sa)r.onError(t);i.queries.delete(e)}function Ym(n){n.Ca.forEach((e=>{e.next()}))}var Jf,B0;(B0=Jf||(Jf={})).Ma="default",B0.Cache="cache";class Jm{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new zo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=zo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Jf.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oN{constructor(e,t){this.Qa=e,this.byteLength=t}$a(){return"metadata"in this.Qa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z0{constructor(e){this.serializer=e}$s(e){return ai(this.serializer,e)}Us(e){return e.metadata.exists?IT(this.serializer,e.document,!1):$e.newNoDocument(this.$s(e.metadata.name),this.Ks(e.metadata.readTime))}Ks(e){return dt(e)}}class aN{constructor(e,t){this.Ua=e,this.serializer=t,this.Ka=[],this.Wa=[],this.collectionGroups=new Set,this.progress=hx(e)}get queries(){return this.Ka}get documents(){return this.Wa}Ga(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Qa.namedQuery)this.Ka.push(e.Qa.namedQuery);else if(e.Qa.documentMetadata){this.Wa.push({metadata:e.Qa.documentMetadata}),e.Qa.documentMetadata.exists||++t;const i=Te.fromString(e.Qa.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else e.Qa.document&&(this.Wa[this.Wa.length-1].document=e.Qa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,{...this.progress}):null}za(e){const t=new Map,i=new z0(this.serializer);for(const s of e)if(s.metadata.queries){const r=i.$s(s.metadata.name);for(const o of s.metadata.queries){const a=(t.get(o)||pe()).add(r);t.set(o,a)}}return t}async ja(e){const t=await M6(e,new z0(this.serializer),this.Wa,this.Ua.id),i=this.za(this.documents);for(const s of this.Ka)await D6(e,s,i.get(s.name));return this.progress.taskState="Success",{progress:this.progress,Ja:this.collectionGroups,Ha:t}}}function hx(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx{constructor(e){this.key=e}}class px{constructor(e){this.key=e}}class mx{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=pe(),this.mutatedKeys=pe(),this.eu=sT(e),this.tu=new po(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new O0,s=t?t.tu:this.tu;let r=t?t.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((d,f)=>{const m=s.get(d),y=ac(this.query,f)?f:null,v=!!m&&this.mutatedKeys.has(m.key),w=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let T=!1;m&&y?m.data.isEqual(y.data)?v!==w&&(i.track({type:3,doc:y}),T=!0):this.su(m,y)||(i.track({type:2,doc:y}),T=!0,(l&&this.eu(y,l)>0||c&&this.eu(y,c)<0)&&(a=!0)):!m&&y?(i.track({type:0,doc:y}),T=!0):m&&!y&&(i.track({type:1,doc:m}),T=!0,(l||c)&&(a=!0)),T&&(y?(o=o.add(y),r=w?r.add(d):r.delete(d)):(o=o.delete(d),r=r.delete(d)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),r=r.delete(d.key),i.track({type:1,doc:d})}return{tu:o,iu:i,Cs:a,mutatedKeys:r}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,s){const r=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort(((d,f)=>(function(y,v){const w=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Z(20277,{Rt:T})}};return w(y)-w(v)})(d.type,f.type)||this.eu(d.doc,f.doc))),this.ou(i),s=s??!1;const a=t&&!s?this._u():[],l=this.Xa.size===0&&this.current&&!s?1:0,c=l!==this.Za;return this.Za=l,o.length!==0||c?{snapshot:new zo(this.query,e.tu,r,o,e.mutatedKeys,l===0,c,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new O0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=pe(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const t=[];return e.forEach((i=>{this.Xa.has(i)||t.push(new px(i))})),this.Xa.forEach((i=>{e.has(i)||t.push(new fx(i))})),t}cu(e){this.Ya=e.Qs,this.Xa=pe();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return zo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Ls="SyncEngine";class lN{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class cN{constructor(e){this.key=e,this.hu=!1}}class uN{constructor(e,t,i,s,r,o){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=s,this.currentUser=r,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Li((a=>nT(a)),oc),this.Iu=new Map,this.Eu=new Set,this.du=new qe(Y.comparator),this.Au=new Map,this.Ru=new Lm,this.Vu={},this.mu=new Map,this.fu=wr.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function dN(n,e,t=!0){const i=Fd(n);let s;const r=i.Tu.get(e);return r?(i.sharedClientState.addLocalQueryTarget(r.targetId),s=r.view.lu()):s=await gx(i,e,t,!0),s}async function hN(n,e){const t=Fd(n);await gx(t,e,!0,!1)}async function gx(n,e,t,i){const s=await Oo(n.localStore,ln(e)),r=s.targetId,o=n.sharedClientState.addLocalQueryTarget(r,t);let a;return i&&(a=await Xm(n,e,r,o==="current",s.resumeToken)),n.isPrimaryClient&&t&&Ld(n.remoteStore,s),a}async function Xm(n,e,t,i,s){n.pu=(f,m,y)=>(async function(w,T,x,P){let S=T.view.ru(x);S.Cs&&(S=await ju(w.localStore,T.query,!1).then((({documents:C})=>T.view.ru(C,S))));const L=P&&P.targetChanges.get(T.targetId),F=P&&P.targetMismatches.get(T.targetId)!=null,U=T.view.applyChanges(S,w.isPrimaryClient,L,F);return Xf(w,T.targetId,U.au),U.snapshot})(n,f,m,y);const r=await ju(n.localStore,e,!0),o=new mx(e,r.Qs),a=o.ru(r.documents),l=uc.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",s),c=o.applyChanges(a,n.isPrimaryClient,l);Xf(n,t,c.au);const d=new lN(e,t,o);return n.Tu.set(e,d),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),c.snapshot}async function fN(n,e,t){const i=X(n),s=i.Tu.get(e),r=i.Iu.get(s.targetId);if(r.length>1)return i.Iu.set(s.targetId,r.filter((o=>!oc(o,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await Uo(i.localStore,s.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(s.targetId),t&&Bo(i.remoteStore,s.targetId),qo(i,s.targetId)})).catch(ks)):(qo(i,s.targetId),await Uo(i.localStore,s.targetId,!0))}async function pN(n,e){const t=X(n),i=t.Tu.get(e),s=t.Iu.get(i.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Bo(t.remoteStore,i.targetId))}async function mN(n,e,t){const i=tg(n);try{const s=await(function(o,a){const l=X(o),c=De.now(),d=a.reduce(((y,v)=>y.add(v.key)),pe());let f,m;return l.persistence.runTransaction("Locally write mutations","readwrite",(y=>{let v=yn(),w=pe();return l.Ns.getEntries(y,d).next((T=>{v=T,v.forEach(((x,P)=>{P.isValidDocument()||(w=w.add(x))}))})).next((()=>l.localDocuments.getOverlayedDocuments(y,v))).next((T=>{f=T;const x=[];for(const P of a){const S=V4(P,f.get(P.key).overlayedDocument);S!=null&&x.push(new Fi(P.key,S,W2(S.value.mapValue),Qe.exists(!0)))}return l.mutationQueue.addMutationBatch(y,c,x,a)})).next((T=>{m=T;const x=T.applyToLocalDocumentSet(f,w);return l.documentOverlayCache.saveOverlays(y,T.batchId,x)}))})).then((()=>({batchId:m.batchId,changes:oT(f)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),(function(o,a,l){let c=o.Vu[o.currentUser.toKey()];c||(c=new qe(he)),c=c.insert(a,l),o.Vu[o.currentUser.toKey()]=c})(i,s.batchId,t),await Vi(i,s.changes),await sa(i.remoteStore)}catch(s){const r=oa(s,"Failed to persist write");t.reject(r)}}async function yx(n,e){const t=X(n);try{const i=await k6(t.localStore,e);e.targetChanges.forEach(((s,r)=>{const o=t.Au.get(r);o&&(ne(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?ne(o.hu,14607):s.removedDocuments.size>0&&(ne(o.hu,42227),o.hu=!1))})),await Vi(t,i,e)}catch(i){await ks(i)}}function q0(n,e,t){const i=X(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const s=[];i.Tu.forEach(((r,o)=>{const a=o.view.va(e);a.snapshot&&s.push(a.snapshot)})),(function(o,a){const l=X(o);l.onlineState=a;let c=!1;l.queries.forEach(((d,f)=>{for(const m of f.Sa)m.va(a)&&(c=!0)})),c&&Ym(l)})(i.eventManager,e),s.length&&i.Pu.H_(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function gN(n,e,t){const i=X(n);i.sharedClientState.updateQueryState(e,"rejected",t);const s=i.Au.get(e),r=s&&s.key;if(r){let o=new qe(Y.comparator);o=o.insert(r,$e.newNoDocument(r,re.min()));const a=pe().add(r),l=new cc(re.min(),new Map,new qe(he),o,a);await yx(i,l),i.du=i.du.remove(r),i.Au.delete(e),eg(i)}else await Uo(i.localStore,e,!1).then((()=>qo(i,e,t))).catch(ks)}async function yN(n,e){const t=X(n),i=e.batch.batchId;try{const s=await R6(t.localStore,e);Zm(t,i,null),Qm(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Vi(t,s)}catch(s){await ks(s)}}async function vN(n,e,t){const i=X(n);try{const s=await(function(o,a){const l=X(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",(c=>{let d;return l.mutationQueue.lookupMutationBatch(c,a).next((f=>(ne(f!==null,37113),d=f.keys(),l.mutationQueue.removeMutationBatch(c,f)))).next((()=>l.mutationQueue.performConsistencyCheck(c))).next((()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,a))).next((()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d))).next((()=>l.localDocuments.getDocuments(c,d)))}))})(i.localStore,e);Zm(i,e,t),Qm(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Vi(i,s)}catch(s){await ks(s)}}async function _N(n,e){const t=X(n);Ds(t.remoteStore)||$(Ls,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=await(function(o){const a=X(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(l=>a.mutationQueue.getHighestUnacknowledgedBatchId(l)))})(t.localStore);if(i===hs)return void e.resolve();const s=t.mu.get(i)||[];s.push(e),t.mu.set(i,s)}catch(i){const s=oa(i,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}function Qm(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function Zm(n,e,t){const i=X(n);let s=i.Vu[i.currentUser.toKey()];if(s){const r=s.get(e);r&&(t?r.reject(t):r.resolve(),s=s.remove(e)),i.Vu[i.currentUser.toKey()]=s}}function qo(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Iu.get(e))n.Tu.delete(i),t&&n.Pu.yu(i,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((i=>{n.Ru.containsKey(i)||vx(n,i)}))}function vx(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Bo(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),eg(n))}function Xf(n,e,t){for(const i of t)i instanceof fx?(n.Ru.addReference(i.key,e),wN(n,i)):i instanceof px?($(Ls,"Document no longer in limbo: "+i.key),n.Ru.removeReference(i.key,e),n.Ru.containsKey(i.key)||vx(n,i.key)):Z(19791,{wu:i})}function wN(n,e){const t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Eu.has(i)||($(Ls,"New document in limbo: "+t),n.Eu.add(i),eg(n))}function eg(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Y(Te.fromString(e)),i=n.fu.next();n.Au.set(i,new cN(t)),n.du=n.du.insert(t,i),Ld(n.remoteStore,new xi(ln(ea(t.path)),i,"TargetPurposeLimboResolution",mn.ce))}}async function Vi(n,e,t){const i=X(n),s=[],r=[],o=[];i.Tu.isEmpty()||(i.Tu.forEach(((a,l)=>{o.push(i.pu(l,e,t).then((c=>{if((c||t)&&i.isPrimaryClient){const d=c?!c.fromCache:t?.targetChanges.get(l.targetId)?.current;i.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){s.push(c);const d=Um.As(l.targetId,c);r.push(d)}})))})),await Promise.all(o),i.Pu.H_(s),await(async function(l,c){const d=X(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",(f=>V.forEach(c,(m=>V.forEach(m.Es,(y=>d.persistence.referenceDelegate.addReference(f,m.targetId,y))).next((()=>V.forEach(m.ds,(y=>d.persistence.referenceDelegate.removeReference(f,m.targetId,y)))))))))}catch(f){if(!Ns(f))throw f;$(Bm,"Failed to update sequence numbers: "+f)}for(const f of c){const m=f.targetId;if(!f.fromCache){const y=d.Ms.get(m),v=y.snapshotVersion,w=y.withLastLimboFreeSnapshotVersion(v);d.Ms=d.Ms.insert(m,w)}}})(i.localStore,r))}async function bN(n,e){const t=X(n);if(!t.currentUser.isEqual(e)){$(Ls,"User change. New user:",e.toKey());const i=await YT(t.localStore,e);t.currentUser=e,(function(r,o){r.mu.forEach((a=>{a.forEach((l=>{l.reject(new G(B.CANCELLED,o))}))})),r.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Vi(t,i.Ls)}}function TN(n,e){const t=X(n),i=t.Au.get(e);if(i&&i.hu)return pe().add(i.key);{let s=pe();const r=t.Iu.get(e);if(!r)return s;for(const o of r){const a=t.Tu.get(o);s=s.unionWith(a.view.nu)}return s}}async function xN(n,e){const t=X(n),i=await ju(t.localStore,e.query,!0),s=e.view.cu(i);return t.isPrimaryClient&&Xf(t,e.targetId,s.au),s}async function EN(n,e){const t=X(n);return ZT(t.localStore,e).then((i=>Vi(t,i)))}async function AN(n,e,t,i){const s=X(n),r=await(function(a,l){const c=X(a),d=X(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",(f=>d.er(f,l).next((m=>m?c.localDocuments.getDocuments(f,m):V.resolve(null)))))})(s.localStore,e);r!==null?(t==="pending"?await sa(s.remoteStore):t==="acknowledged"||t==="rejected"?(Zm(s,e,i||null),Qm(s,e),(function(a,l){X(X(a).mutationQueue).ir(l)})(s.localStore,e)):Z(6720,"Unknown batchState",{Su:t}),await Vi(s,r)):$(Ls,"Cannot apply mutation batch with id: "+e)}async function IN(n,e){const t=X(n);if(Fd(t),tg(t),e===!0&&t.gu!==!0){const i=t.sharedClientState.getAllActiveQueryTargets(),s=await H0(t,i.toArray());t.gu=!0,await Yf(t.remoteStore,!0);for(const r of s)Ld(t.remoteStore,r)}else if(e===!1&&t.gu!==!1){const i=[];let s=Promise.resolve();t.Iu.forEach(((r,o)=>{t.sharedClientState.isLocalQueryTarget(o)?i.push(o):s=s.then((()=>(qo(t,o),Uo(t.localStore,o,!0)))),Bo(t.remoteStore,o)})),await s,await H0(t,i),(function(o){const a=X(o);a.Au.forEach(((l,c)=>{Bo(a.remoteStore,c)})),a.Ru.Jr(),a.Au=new Map,a.du=new qe(Y.comparator)})(t),t.gu=!1,await Yf(t.remoteStore,!1)}}async function H0(n,e,t){const i=X(n),s=[],r=[];for(const o of e){let a;const l=i.Iu.get(o);if(l&&l.length!==0){a=await Oo(i.localStore,ln(l[0]));for(const c of l){const d=i.Tu.get(c),f=await xN(i,d);f.snapshot&&r.push(f.snapshot)}}else{const c=await QT(i.localStore,o);a=await Oo(i.localStore,c),await Xm(i,_x(c),o,!1,a.resumeToken)}s.push(a)}return i.Pu.H_(r),s}function _x(n){return tT(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function CN(n){return(function(t){return X(X(t).persistence).Ts()})(X(n).localStore)}async function SN(n,e,t,i){const s=X(n);if(s.gu)return void $(Ls,"Ignoring unexpected query state notification.");const r=s.Iu.get(e);if(r&&r.length>0)switch(t){case"current":case"not-current":{const o=await ZT(s.localStore,iT(r[0])),a=cc.createSynthesizedRemoteEventForCurrentChange(e,t==="current",st.EMPTY_BYTE_STRING);await Vi(s,o,a);break}case"rejected":await Uo(s.localStore,e,!0),qo(s,e,i);break;default:Z(64155,t)}}async function PN(n,e,t){const i=Fd(n);if(i.gu){for(const s of e){if(i.Iu.has(s)&&i.sharedClientState.isActiveQueryTarget(s)){$(Ls,"Adding an already active target "+s);continue}const r=await QT(i.localStore,s),o=await Oo(i.localStore,r);await Xm(i,_x(r),o.targetId,!1,o.resumeToken),Ld(i.remoteStore,o)}for(const s of t)i.Iu.has(s)&&await Uo(i.localStore,s,!1).then((()=>{Bo(i.remoteStore,s),qo(i,s)})).catch(ks)}}function Fd(n){const e=X(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=yx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=TN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=gN.bind(null,e),e.Pu.H_=sN.bind(null,e.eventManager),e.Pu.yu=rN.bind(null,e.eventManager),e}function tg(n){const e=X(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=yN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=vN.bind(null,e),e}function RN(n,e,t){const i=X(n);(async function(r,o,a){try{const l=await o.getMetadata();if(await(function(y,v){const w=X(y),T=dt(v.createTime);return w.persistence.runTransaction("hasNewerBundle","readonly",(x=>w.Ii.getBundleMetadata(x,v.id))).then((x=>!!x&&x.createTime.compareTo(T)>=0))})(r.localStore,l))return await o.close(),a._completeWith((function(y){return{taskState:"Success",documentsLoaded:y.totalDocuments,bytesLoaded:y.totalBytes,totalDocuments:y.totalDocuments,totalBytes:y.totalBytes}})(l)),Promise.resolve(new Set);a._updateProgress(hx(l));const c=new aN(l,o.serializer);let d=await o.bu();for(;d;){const m=await c.Ga(d);m&&a._updateProgress(m),d=await o.bu()}const f=await c.ja(r.localStore);return await Vi(r,f.Ha,void 0),await(function(y,v){const w=X(y);return w.persistence.runTransaction("Save bundle","readwrite",(T=>w.Ii.saveBundleMetadata(T,v)))})(r.localStore,l),a._completeWith(f.progress),Promise.resolve(f.Ja)}catch(l){return di(Ls,`Loading bundle failed with ${l}`),a._failWith(l),Promise.resolve(new Set)}})(i,e,t).then((s=>{i.sharedClientState.notifyBundleLoaded(s)}))}class Bl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=dc(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return KT(this.persistence,new WT,e.initialUser,this.serializer)}Cu(e){return new Fm(Dd.mi,this.serializer)}Du(e){return new sx}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Bl.provider={build:()=>new Bl};class kN extends Bl{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){ne(this.persistence.referenceDelegate instanceof $u,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new zT(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Ht.withCacheSize(this.cacheSizeBytes):Ht.DEFAULT;return new Fm((i=>$u.mi(i,t)),this.serializer)}}class wx extends Bl{constructor(e,t,i){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=i,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await tg(this.xu.syncEngine),await sa(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return KT(this.persistence,new WT,e.initialUser,this.serializer)}Fu(e,t){const i=this.persistence.referenceDelegate.garbageCollector;return new zT(i,e.asyncQueue,t)}Mu(e,t){const i=new B5(t,this.persistence);return new U5(e.asyncQueue,i)}Cu(e){const t=Om(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?Ht.withCacheSize(this.cacheSizeBytes):Ht.DEFAULT;return new Vm(this.synchronizeTabs,t,e.clientId,i,e.asyncQueue,rx(),wu(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new sx}}class NN extends wx{constructor(e,t){super(e,t,!1),this.xu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xu.syncEngine;this.sharedClientState instanceof jh&&(this.sharedClientState.syncEngine={Co:AN.bind(null,t),vo:SN.bind(null,t),Fo:PN.bind(null,t),Ts:CN.bind(null,t),Do:EN.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ji((async i=>{await IN(this.xu.syncEngine,i),this.gcScheduler&&(i&&!this.gcScheduler.started?this.gcScheduler.start():i||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(i&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():i||this.indexBackfillerScheduler.stop())}))}Du(e){const t=rx();if(!jh.v(t))throw new G(B.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=Om(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new jh(t,e.asyncQueue,i,e.clientId,e.initialUser)}}class zl{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>q0(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=bN.bind(null,this.syncEngine),await Yf(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new iN})()}createDatastore(e){const t=dc(e.databaseInfo.databaseId),i=(function(r){return new U6(r)})(e.databaseInfo);return(function(r,o,a,l){return new H6(r,o,a,l)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,s,r,o,a){return new $6(i,s,r,o,a)})(this.localStore,this.datastore,e.asyncQueue,(t=>q0(this.syncEngine,t,0)),(function(){return L0.v()?new L0:new L6})())}createSyncEngine(e,t){return(function(s,r,o,a,l,c,d){const f=new uN(s,r,o,a,l,c);return d&&(f.gu=!0),f})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const i=X(t);$(br,"RemoteStore shutting down."),i.Ea.add(5),await ia(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}zl.provider={build:()=>new zl};function G0(n,e=10240){let t=0;return{async read(){if(t<n.byteLength){const i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ct("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{constructor(e,t){this.Bu=e,this.serializer=t,this.metadata=new Ft,this.buffer=new Uint8Array,this.Lu=(function(){return new TextDecoder("utf-8")})(),this.ku().then((i=>{i&&i.$a()?this.metadata.resolve(i.Qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(i?.Qa)}`))}),(i=>this.metadata.reject(i)))}close(){return this.Bu.cancel()}async getMetadata(){return this.metadata.promise}async bu(){return await this.getMetadata(),this.ku()}async ku(){const e=await this.qu();if(e===null)return null;const t=this.Lu.decode(e),i=Number(t);isNaN(i)&&this.Qu(`length string (${t}) is not valid number`);const s=await this.$u(i);return new oN(JSON.parse(s),e.length+i)}Uu(){return this.buffer.findIndex((e=>e===123))}async qu(){for(;this.Uu()<0&&!await this.Ku(););if(this.buffer.length===0)return null;const e=this.Uu();e<0&&this.Qu("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async $u(e){for(;this.buffer.length<e;)await this.Ku()&&this.Qu("Reached the end of bundle when more is expected.");const t=this.Lu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}Qu(e){throw this.Bu.cancel(),new Error(`Invalid bundle format: ${e}`)}async Ku(){const e=await this.Bu.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new G(B.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(s,r){const o=X(s),a={documents:r.map((f=>Ol(o.serializer,f)))},l=await o.Ho("BatchGetDocuments",o.serializer.databaseId,Te.emptyPath(),a,r.length),c=new Map;l.forEach((f=>{const m=j4(o.serializer,f);c.set(m.key.toString(),m)}));const d=[];return r.forEach((f=>{const m=c.get(f.toString());ne(!!m,55234,{key:f}),d.push(m)})),d})(this.datastore,e);return t.forEach((i=>this.recordVersion(i))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new na(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,i)=>{const s=Y.fromPath(i);this.mutations.push(new Im(s,this.precondition(s)))})),await(async function(i,s){const r=X(i),o={writes:s.map((a=>Ul(r.serializer,a)))};await r.Go("Commit",r.serializer.databaseId,Te.emptyPath(),o)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Z(50498,{Gu:e.constructor.name});t=re.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!t.isEqual(i))throw new G(B.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(re.min())?Qe.exists(!1):Qe.updateTime(t):Qe.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(re.min()))throw new G(B.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Qe.updateTime(t)}return Qe.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LN{constructor(e,t,i,s,r){this.asyncQueue=e,this.datastore=t,this.options=i,this.updateFunction=s,this.deferred=r,this.zu=i.maxAttempts,this.M_=new qm(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new DN(this.datastore),t=this.Hu(e);t&&t.then((i=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(i)})).catch((s=>{this.Yu(s)}))))})).catch((i=>{this.Yu(i)}))}))}Hu(e){try{const t=this.updateFunction(e);return!ic(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if(e?.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!gT(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Es="FirestoreClient";class FN{constructor(e,t,i,s,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=s,this.user=Pt.UNAUTHENTICATED,this.clientId=hm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=r,this.authCredentials.start(i,(async o=>{$(Es,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(i,(o=>($(Es,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ft;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=oa(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Kh(n,e){n.asyncQueue.verifyOperationInProgress(),$(Es,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async s=>{i.isEqual(s)||(await YT(e.localStore,s),i=s)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function $0(n,e){n.asyncQueue.verifyOperationInProgress();const t=await ng(n);$(Es,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>V0(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,s)=>V0(e.remoteStore,s))),n._onlineComponents=e}async function ng(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){$(Es,"Using user provided OfflineComponentProvider");try{await Kh(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===B.FAILED_PRECONDITION||s.code===B.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;di("Error using user provided cache. Falling back to memory cache: "+t),await Kh(n,new Bl)}}else $(Es,"Using default OfflineComponentProvider"),await Kh(n,new kN(void 0));return n._offlineComponents}async function Od(n){return n._onlineComponents||(n._uninitializedComponentsProvider?($(Es,"Using user provided OnlineComponentProvider"),await $0(n,n._uninitializedComponentsProvider._online)):($(Es,"Using default OnlineComponentProvider"),await $0(n,new zl))),n._onlineComponents}function bx(n){return ng(n).then((e=>e.persistence))}function ig(n){return ng(n).then((e=>e.localStore))}function Tx(n){return Od(n).then((e=>e.remoteStore))}function sg(n){return Od(n).then((e=>e.syncEngine))}function VN(n){return Od(n).then((e=>e.datastore))}async function Ho(n){const e=await Od(n),t=e.eventManager;return t.onListen=dN.bind(null,e.syncEngine),t.onUnlisten=fN.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=hN.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=pN.bind(null,e.syncEngine),t}function ON(n){return n.asyncQueue.enqueue((async()=>{const e=await bx(n),t=await Tx(n);return e.setNetworkEnabled(!0),(function(s){const r=X(s);return r.Ea.delete(0),hc(r)})(t)}))}function UN(n){return n.asyncQueue.enqueue((async()=>{const e=await bx(n),t=await Tx(n);return e.setNetworkEnabled(!1),(async function(s){const r=X(s);r.Ea.add(0),await ia(r),r.Ra.set("Offline")})(t)}))}function BN(n,e){const t=new Ft;return n.asyncQueue.enqueueAndForget((async()=>(async function(s,r,o){try{const a=await(function(c,d){const f=X(c);return f.persistence.runTransaction("read document","readonly",(m=>f.localDocuments.getDocument(m,d)))})(s,r);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new G(B.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const l=oa(a,`Failed to get document '${r} from cache`);o.reject(l)}})(await ig(n),e,t))),t.promise}function xx(n,e,t={}){const i=new Ft;return n.asyncQueue.enqueueAndForget((async()=>(function(r,o,a,l,c){const d=new Vd({next:m=>{d.Nu(),o.enqueueAndForget((()=>Km(r,f)));const y=m.docs.has(a);!y&&m.fromCache?c.reject(new G(B.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&l&&l.source==="server"?c.reject(new G(B.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(m)},error:m=>c.reject(m)}),f=new Jm(ea(a.path),d,{includeMetadataChanges:!0,qa:!0});return Wm(r,f)})(await Ho(n),n.asyncQueue,e,t,i))),i.promise}function zN(n,e){const t=new Ft;return n.asyncQueue.enqueueAndForget((async()=>(async function(s,r,o){try{const a=await ju(s,r,!0),l=new mx(r,a.Qs),c=l.ru(a.documents),d=l.applyChanges(c,!1);o.resolve(d.snapshot)}catch(a){const l=oa(a,`Failed to execute query '${r} against cache`);o.reject(l)}})(await ig(n),e,t))),t.promise}function Ex(n,e,t={}){const i=new Ft;return n.asyncQueue.enqueueAndForget((async()=>(function(r,o,a,l,c){const d=new Vd({next:m=>{d.Nu(),o.enqueueAndForget((()=>Km(r,f))),m.fromCache&&l.source==="server"?c.reject(new G(B.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(m)},error:m=>c.reject(m)}),f=new Jm(a,d,{includeMetadataChanges:!0,qa:!0});return Wm(r,f)})(await Ho(n),n.asyncQueue,e,t,i))),i.promise}function qN(n,e){const t=new Vd(e);return n.asyncQueue.enqueueAndForget((async()=>(function(s,r){X(s).Ca.add(r),r.next()})(await Ho(n),t))),()=>{t.Nu(),n.asyncQueue.enqueueAndForget((async()=>(function(s,r){X(s).Ca.delete(r)})(await Ho(n),t)))}}function HN(n,e,t,i){const s=(function(o,a){let l;return l=typeof o=="string"?vT().encode(o):o,(function(d,f){return new MN(d,f)})((function(d,f){if(d instanceof Uint8Array)return G0(d,f);if(d instanceof ArrayBuffer)return G0(new Uint8Array(d),f);if(d instanceof ReadableStream)return d.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")})(l),a)})(t,dc(e));n.asyncQueue.enqueueAndForget((async()=>{RN(await sg(n),s,i)}))}function GN(n,e){return n.asyncQueue.enqueue((async()=>(function(i,s){const r=X(i);return r.persistence.runTransaction("Get named query","readonly",(o=>r.Ii.getNamedQuery(o,s)))})(await ig(n),e)))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ax(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j0=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ix="firestore.googleapis.com",W0=!0;class K0{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new G(B.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Ix,this.ssl=W0}else this.host=e.host,this.ssl=e.ssl??W0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=VT;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<d6)throw new G(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}_2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Ax(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new G(B.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new G(B.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new G(B.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,s){return i.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class fc{constructor(e,t,i,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new K0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new G(B.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new G(B.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new K0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new C5;switch(i.type){case"firstParty":return new k5(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new G(B.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=j0.get(t);i&&($("ComponentProvider","Removing Datastore"),j0.delete(t),i.terminate())})(this),Promise.resolve()}}function $N(n,e,t,i={}){n=Ne(n,fc);const s=Ps(e),r=n._getSettings(),o={...r,emulatorOptions:n._getEmulatorOptions()},a=`${e}:${t}`;s&&(Vp(`https://${a}`),Op("Firestore",!0)),r.host!==Ix&&r.host!==a&&di("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...r,host:a,ssl:s,emulatorOptions:i};if(!ms(l,o)&&(n._setSettings(l),i.mockUserToken)){let c,d;if(typeof i.mockUserToken=="string")c=i.mockUserToken,d=Pt.MOCK_USER;else{c=jw(i.mockUserToken,n._app?.options.projectId);const f=i.mockUserToken.sub||i.mockUserToken.user_id;if(!f)throw new G(B.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new Pt(f)}n._authCredentials=new S5(new y2(c,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let un=class Cx{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Cx(this.firestore,e,this._query)}},ze=class Xa{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new fs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Xa(this.firestore,e,this._key)}toJSON(){return{type:Xa._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(nc(t,Xa._jsonSchema))return new Xa(e,i||null,new Y(Te.fromString(t.referencePath)))}};ze._jsonSchemaVersion="firestore/documentReference/1.0",ze._jsonSchema={type:_t("string",ze._jsonSchemaVersion),referencePath:_t("string")};let fs=class Sx extends un{constructor(e,t,i){super(e,t,ea(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ze(this.firestore,null,new Y(e))}withConverter(e){return new Sx(this.firestore,e,this._path)}};function Px(n,e,...t){if(n=se(n),fm("collection","path",e),n instanceof fc){const i=Te.fromString(e,...t);return Fv(i),new fs(n,null,i)}{if(!(n instanceof ze||n instanceof fs))throw new G(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Te.fromString(e,...t));return Fv(i),new fs(n.firestore,null,i)}}function jN(n,e){if(n=Ne(n,fc),fm("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new G(B.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new un(n,null,(function(i){return new Di(Te.emptyPath(),i)})(e))}function Ju(n,e,...t){if(n=se(n),arguments.length===1&&(e=hm.newId()),fm("doc","path",e),n instanceof fc){const i=Te.fromString(e,...t);return Lv(i),new ze(n,null,new Y(i))}{if(!(n instanceof ze||n instanceof fs))throw new G(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Te.fromString(e,...t));return Lv(i),new ze(n.firestore,n instanceof fs?n.converter:null,new Y(i))}}function Rx(n,e){return n=se(n),e=se(e),(n instanceof ze||n instanceof fs)&&(e instanceof ze||e instanceof fs)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function kx(n,e){return n=se(n),e=se(e),n instanceof un&&e instanceof un&&n.firestore===e.firestore&&oc(n._query,e._query)&&n.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y0="AsyncQueue";class J0{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new qm(this,"async_queue_retry"),this._c=()=>{const i=wu();i&&$(Y0,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=wu();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=wu();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Ft;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ns(e))throw e;$(Y0,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,ct("INTERNAL UNHANDLED ERROR: ",X0(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const s=jm.createAndSchedule(this,e,t,i,(r=>this.hc(r)));return this.tc.push(s),s}uc(){this.nc&&Z(47125,{Pc:X0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function X0(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qf(n){return(function(t,i){if(typeof t!="object"||t===null)return!1;const s=t;for(const r of i)if(r in s&&typeof s[r]=="function")return!0;return!1})(n,["next","error","complete"])}class WN{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ft,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,i){this._progressObserver={next:e,error:t,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KN=-1;let ht=class extends fc{constructor(e,t,i,s){super(e,t,i,s),this.type="firestore",this._queue=new J0,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new J0(e),this._firestoreClient=void 0,await e}}};function Xt(n){if(n._terminated)throw new G(B.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Nx(n),n._firestoreClient}function Nx(n){const e=n._freezeSettings(),t=(function(s,r,o,a){return new m4(s,r,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,Ax(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new FN(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(s){const r=s?._online.build();return{_offline:s?._offline.build(r),_online:r}})(n._componentsProvider))}function YN(n,e){di("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return Mx(n,zl.provider,{build:i=>new wx(i,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}async function JN(n){di("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=n._freezeSettings();Mx(n,zl.provider,{build:t=>new NN(t,e.cacheSizeBytes)})}function Mx(n,e,t){if((n=Ne(n,ht))._firestoreClient||n._terminated)throw new G(B.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new G(B.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},Nx(n)}function XN(n){if(n._initialized&&!n._terminated)throw new G(B.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Ft;return n._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await(async function(i){if(!oi.v())return Promise.resolve();const s=i+jT;await oi.delete(s)})(Om(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function QN(n){return(function(t){const i=new Ft;return t.asyncQueue.enqueueAndForget((async()=>_N(await sg(t),i))),i.promise})(Xt(n=Ne(n,ht)))}function ZN(n){return ON(Xt(n=Ne(n,ht)))}function eM(n){return UN(Xt(n=Ne(n,ht)))}function tM(n,e){const t=Xt(n=Ne(n,ht)),i=new WN;return HN(t,n._databaseId,e,i),i}function nM(n,e){return GN(Xt(n=Ne(n,ht)),e).then((t=>t?new un(n,null,t.query):null))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new $t(st.fromBase64String(e))}catch(t){throw new G(B.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new $t(st.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:$t._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(nc(e,$t._jsonSchema))return $t.fromBase64String(e.bytes)}}$t._jsonSchemaVersion="firestore/bytes/1.0",$t._jsonSchema={type:_t("string",$t._jsonSchemaVersion),bytes:_t("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let As=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new G(B.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xe(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rr=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new G(B.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new G(B.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return he(this._lat,e._lat)||he(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:qn._jsonSchemaVersion}}static fromJSON(e){if(nc(e,qn._jsonSchema))return new qn(e.latitude,e.longitude)}}qn._jsonSchemaVersion="firestore/geoPoint/1.0",qn._jsonSchema={type:_t("string",qn._jsonSchemaVersion),latitude:_t("number"),longitude:_t("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,s){if(i.length!==s.length)return!1;for(let r=0;r<i.length;++r)if(i[r]!==s[r])return!1;return!0})(this._values,e._values)}toJSON(){return{type:li._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(nc(e,li._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new li(e.vectorValues);throw new G(B.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}li._jsonSchemaVersion="firestore/vectorValue/1.0",li._jsonSchema={type:_t("string",li._jsonSchemaVersion),vectorValues:_t("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iM=/^__.*__$/;class sM{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Fi(e,this.data,this.fieldMask,t,this.fieldTransforms):new ta(e,this.data,t,this.fieldTransforms)}}class Dx{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Fi(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Lx(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Z(40011,{Ac:n})}}class Ud{constructor(e,t,i,s,r,o){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=s,r===void 0&&this.Rc(),this.fieldTransforms=r||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Ud({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){const t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Xu(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Lx(this.Ac)&&iM.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class rM{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||dc(e)}Cc(e,t,i,s=!1){return new Ud({Ac:e,methodName:t,Dc:i,path:Xe.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function kr(n){const e=n._freezeSettings(),t=dc(n._databaseId);return new rM(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Bd(n,e,t,i,s,r={}){const o=n.Cc(r.merge||r.mergeFields?2:0,e,t,s);dg("Data must be an object, but it was:",o,i);const a=Ox(i,o);let l,c;if(r.merge)l=new gn(o.fieldMask),c=o.fieldTransforms;else if(r.mergeFields){const d=[];for(const f of r.mergeFields){const m=Zf(e,f,t);if(!o.contains(m))throw new G(B.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);Bx(d,m)||d.push(m)}l=new gn(d),c=o.fieldTransforms.filter((f=>l.covers(f.field)))}else l=null,c=o.fieldTransforms;return new sM(new Lt(a),l,c)}class pc extends Rr{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof pc}}function Fx(n,e,t){return new Ud({Ac:3,Dc:e.settings.Dc,methodName:n._methodName,fc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class rg extends Rr{_toFieldTransform(e){return new lc(e.path,new Lo)}isEqual(e){return e instanceof rg}}class og extends Rr{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=Fx(this,e,!0),i=this.vc.map((r=>Nr(r,t))),s=new gr(i);return new lc(e.path,s)}isEqual(e){return e instanceof og&&ms(this.vc,e.vc)}}class ag extends Rr{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=Fx(this,e,!0),i=this.vc.map((r=>Nr(r,t))),s=new yr(i);return new lc(e.path,s)}isEqual(e){return e instanceof ag&&ms(this.vc,e.vc)}}class lg extends Rr{constructor(e,t){super(e),this.Fc=t}_toFieldTransform(e){const t=new Fo(e.serializer,cT(e.serializer,this.Fc));return new lc(e.path,t)}isEqual(e){return e instanceof lg&&this.Fc===e.Fc}}function cg(n,e,t,i){const s=n.Cc(1,e,t);dg("Data must be an object, but it was:",s,i);const r=[],o=Lt.empty();Ms(i,((l,c)=>{const d=hg(e,l,t);c=se(c);const f=s.yc(d);if(c instanceof pc)r.push(d);else{const m=Nr(c,f);m!=null&&(r.push(d),o.set(d,m))}}));const a=new gn(r);return new Dx(o,a,s.fieldTransforms)}function ug(n,e,t,i,s,r){const o=n.Cc(1,e,t),a=[Zf(e,i,t)],l=[s];if(r.length%2!=0)throw new G(B.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<r.length;m+=2)a.push(Zf(e,r[m])),l.push(r[m+1]);const c=[],d=Lt.empty();for(let m=a.length-1;m>=0;--m)if(!Bx(c,a[m])){const y=a[m];let v=l[m];v=se(v);const w=o.yc(y);if(v instanceof pc)c.push(y);else{const T=Nr(v,w);T!=null&&(c.push(y),d.set(y,T))}}const f=new gn(c);return new Dx(d,f,o.fieldTransforms)}function Vx(n,e,t,i=!1){return Nr(t,n.Cc(i?4:3,e))}function Nr(n,e){if(Ux(n=se(n)))return dg("Unsupported field value:",e,n),Ox(n,e);if(n instanceof Rr)return(function(i,s){if(!Lx(s.Ac))throw s.Sc(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${i._methodName}() is not currently supported inside arrays`);const r=i._toFieldTransform(s);r&&s.fieldTransforms.push(r)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,s){const r=[];let o=0;for(const a of i){let l=Nr(a,s.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),r.push(l),o++}return{arrayValue:{values:r}}})(n,e)}return(function(i,s){if((i=se(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return cT(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const r=De.fromDate(i);return{timestampValue:Vo(s.serializer,r)}}if(i instanceof De){const r=new De(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Vo(s.serializer,r)}}if(i instanceof qn)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof $t)return{bytesValue:bT(s.serializer,i._byteString)};if(i instanceof ze){const r=s.databaseId,o=i.firestore._databaseId;if(!o.isEqual(r))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:km(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof li)return(function(o,a){return{mapValue:{fields:{[wm]:{stringValue:bm},[No]:{arrayValue:{values:o.toArray().map((c=>{if(typeof c!="number")throw a.Sc("VectorValues must only contain numeric values.");return Am(a.serializer,c)}))}}}}}})(i,s);throw s.Sc(`Unsupported field value: ${Td(i)}`)})(n,e)}function Ox(n,e){const t={};return O2(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ms(n,((i,s)=>{const r=Nr(s,e.mc(i));r!=null&&(t[i]=r)})),{mapValue:{fields:t}}}function Ux(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof De||n instanceof qn||n instanceof $t||n instanceof ze||n instanceof Rr||n instanceof li)}function dg(n,e,t){if(!Ux(t)||!w2(t)){const i=Td(t);throw i==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+i)}}function Zf(n,e,t){if((e=se(e))instanceof As)return e._internalPath;if(typeof e=="string")return hg(n,e);throw Xu("Field path arguments must be of type string or ",n,!1,void 0,t)}const oM=new RegExp("[~\\*/\\[\\]]");function hg(n,e,t){if(e.search(oM)>=0)throw Xu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new As(...e.split("."))._internalPath}catch{throw Xu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Xu(n,e,t,i,s){const r=i&&!i.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(r||o)&&(l+=" (found",r&&(l+=` in field ${i}`),o&&(l+=` in document ${s}`),l+=")"),new G(B.INVALID_ARGUMENT,a+n+l)}function Bx(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(e,t,i,s,r){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=s,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new ze(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new aM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(zd("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class aM extends ql{data(){return super.data()}}function zd(n,e){return typeof e=="string"?hg(n,e):e instanceof As?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zx(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new G(B.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class fg{}class mc extends fg{}function Zi(n,e,...t){let i=[];e instanceof fg&&i.push(e),i=i.concat(t),(function(r){const o=r.filter((l=>l instanceof pg)).length,a=r.filter((l=>l instanceof qd)).length;if(o>1||o>0&&a>0)throw new G(B.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const s of i)n=s._apply(n);return n}class qd extends mc{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new qd(e,t,i)}_apply(e){const t=this._parse(e);return Hx(e._query,t),new un(e.firestore,e.converter,Uf(e._query,t))}_parse(e){const t=kr(e.firestore);return(function(r,o,a,l,c,d,f){let m;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new G(B.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){Z0(f,d);const v=[];for(const w of f)v.push(Q0(l,r,w));m={arrayValue:{values:v}}}else m=Q0(l,r,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||Z0(f,d),m=Vx(a,o,f,d==="in"||d==="not-in");return xe.create(c,d,m)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function lM(n,e,t){const i=e,s=zd("where",n);return qd._create(s,i,t)}class pg extends fg{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new pg(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:Le.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(s,r){let o=s;const a=r.getFlattenedFilters();for(const l of a)Hx(o,l),o=Uf(o,l)})(e._query,t),new un(e.firestore,e.converter,Uf(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class mg extends mc{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new mg(e,t)}_apply(e){const t=(function(s,r,o){if(s.startAt!==null)throw new G(B.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new G(B.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Vl(r,o)})(e._query,this._field,this._direction);return new un(e.firestore,e.converter,(function(s,r){const o=s.explicitOrderBy.concat([r]);return new Di(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)})(e._query,t))}}function cM(n,e="asc"){const t=e,i=zd("orderBy",n);return mg._create(i,t)}class Hd extends mc{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new Hd(e,t,i)}_apply(e){return new un(e.firestore,e.converter,zu(e._query,this._limit,this._limitType))}}function uM(n){return b2("limit",n),Hd._create("limit",n,"F")}function dM(n){return b2("limitToLast",n),Hd._create("limitToLast",n,"L")}class Gd extends mc{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new Gd(e,t,i)}_apply(e){const t=qx(e,this.type,this._docOrFields,this._inclusive);return new un(e.firestore,e.converter,(function(s,r){return new Di(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,r,s.endAt)})(e._query,t))}}function hM(...n){return Gd._create("startAt",n,!0)}function fM(...n){return Gd._create("startAfter",n,!1)}class $d extends mc{constructor(e,t,i){super(),this.type=e,this._docOrFields=t,this._inclusive=i}static _create(e,t,i){return new $d(e,t,i)}_apply(e){const t=qx(e,this.type,this._docOrFields,this._inclusive);return new un(e.firestore,e.converter,(function(s,r){return new Di(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,r)})(e._query,t))}}function pM(...n){return $d._create("endBefore",n,!1)}function mM(...n){return $d._create("endAt",n,!0)}function qx(n,e,t,i){if(t[0]=se(t[0]),t[0]instanceof ql)return(function(r,o,a,l,c){if(!l)throw new G(B.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const d=[];for(const f of fo(r))if(f.field.isKeyField())d.push(pr(o,l.key));else{const m=l.data.field(f.field);if(Cd(m))throw new G(B.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(m===null){const y=f.field.canonicalString();throw new G(B.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}d.push(m)}return new Ts(d,c)})(n._query,n.firestore._databaseId,e,t[0]._document,i);{const s=kr(n.firestore);return(function(o,a,l,c,d,f){const m=o.explicitOrderBy;if(d.length>m.length)throw new G(B.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const y=[];for(let v=0;v<d.length;v++){const w=d[v];if(m[v].field.isKeyField()){if(typeof w!="string")throw new G(B.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof w}`);if(!xm(o)&&w.indexOf("/")!==-1)throw new G(B.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${w}' contains a slash.`);const T=o.path.child(Te.fromString(w));if(!Y.isDocumentKey(T))throw new G(B.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${T}' is not because it contains an odd number of segments.`);const x=new Y(T);y.push(pr(a,x))}else{const T=Vx(l,c,w);y.push(T)}}return new Ts(y,f)})(n._query,n.firestore._databaseId,s,e,t,i)}}function Q0(n,e,t){if(typeof(t=se(t))=="string"){if(t==="")throw new G(B.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!xm(e)&&t.indexOf("/")!==-1)throw new G(B.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(Te.fromString(t));if(!Y.isDocumentKey(i))throw new G(B.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return pr(n,new Y(i))}if(t instanceof ze)return pr(n,t._key);throw new G(B.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Td(t)}.`)}function Z0(n,e){if(!Array.isArray(n)||n.length===0)throw new G(B.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Hx(n,e){const t=(function(s,r){for(const o of s)for(const a of o.getFlattenedFilters())if(r.indexOf(a.op)>=0)return a.op;return null})(n.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new G(B.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new G(B.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class gg{convertValue(e,t="none"){switch(ws(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Je(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ri(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Z(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Ms(e,((s,r)=>{i[s]=this.convertValue(r,t)})),i}convertVectorValue(e){const t=e.fields?.[No].arrayValue?.values?.map((i=>Je(i.doubleValue)));return new li(t)}convertGeoPoint(e){return new qn(Je(e.latitude),Je(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Sd(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Dl(e));default:return null}}convertTimestamp(e){const t=Pi(e);return new De(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Te.fromString(e);ne(NT(i),9688,{name:e});const s=new _s(i.get(1),i.get(3)),r=new Y(i.popFirst(5));return s.isEqual(t)||ct(`Document ${r} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jd(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class gM extends gg{constructor(e){super(),this.firestore=e}convertBytes(e){return new $t(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ze(this.firestore,null,t)}}class sr{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let Mn=class Gx extends ql{constructor(e,t,i,s,r,o){super(e,t,i,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=r}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new pl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(zd("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new G(B.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Gx._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};Mn._jsonSchemaVersion="firestore/documentSnapshot/1.0",Mn._jsonSchema={type:_t("string",Mn._jsonSchemaVersion),bundleSource:_t("string","DocumentSnapshot"),bundleName:_t("string"),bundle:_t("string")};let pl=class extends Mn{data(e={}){return super.data(e)}},Hn=class $x{constructor(e,t,i,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new sr(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new pl(this._firestore,this._userDataWriter,i.key,i,new sr(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new G(B.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,r){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map((a=>{const l=new pl(s._firestore,s._userDataWriter,a.doc.key,a.doc,new sr(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}}))}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((a=>r||a.type!==3)).map((a=>{const l=new pl(s._firestore,s._userDataWriter,a.doc.key,a.doc,new sr(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,d=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:yM(a.type),doc:l,oldIndex:c,newIndex:d}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new G(B.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=$x._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=hm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],s=[];return this.docs.forEach((r=>{r._document!==null&&(t.push(r._document),i.push(this._userDataWriter.convertObjectMap(r._document.data.value.mapValue.fields,"previous")),s.push(r.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function yM(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Z(61501,{type:n})}}function jx(n,e){return n instanceof Mn&&e instanceof Mn?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Hn&&e instanceof Hn&&n._firestore===e._firestore&&kx(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vM(n){n=Ne(n,ze);const e=Ne(n.firestore,ht);return xx(Xt(e),n._key).then((t=>yg(e,n,t)))}Hn._jsonSchemaVersion="firestore/querySnapshot/1.0",Hn._jsonSchema={type:_t("string",Hn._jsonSchemaVersion),bundleSource:_t("string","QuerySnapshot"),bundleName:_t("string"),bundle:_t("string")};class Mr extends gg{constructor(e){super(),this.firestore=e}convertBytes(e){return new $t(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ze(this.firestore,null,t)}}function _M(n){n=Ne(n,ze);const e=Ne(n.firestore,ht),t=Xt(e),i=new Mr(e);return BN(t,n._key).then((s=>new Mn(e,i,n._key,s,new sr(s!==null&&s.hasLocalMutations,!0),n.converter)))}function wM(n){n=Ne(n,ze);const e=Ne(n.firestore,ht);return xx(Xt(e),n._key,{source:"server"}).then((t=>yg(e,n,t)))}function bM(n){n=Ne(n,un);const e=Ne(n.firestore,ht),t=Xt(e),i=new Mr(e);return zx(n._query),Ex(t,n._query).then((s=>new Hn(e,i,n,s)))}function TM(n){n=Ne(n,un);const e=Ne(n.firestore,ht),t=Xt(e),i=new Mr(e);return zN(t,n._query).then((s=>new Hn(e,i,n,s)))}function xM(n){n=Ne(n,un);const e=Ne(n.firestore,ht),t=Xt(e),i=new Mr(e);return Ex(t,n._query,{source:"server"}).then((s=>new Hn(e,i,n,s)))}function e_(n,e,t){n=Ne(n,ze);const i=Ne(n.firestore,ht),s=jd(n.converter,e,t);return gc(i,[Bd(kr(i),"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,Qe.none())])}function t_(n,e,t,...i){n=Ne(n,ze);const s=Ne(n.firestore,ht),r=kr(s);let o;return o=typeof(e=se(e))=="string"||e instanceof As?ug(r,"updateDoc",n._key,e,t,i):cg(r,"updateDoc",n._key,e),gc(s,[o.toMutation(n._key,Qe.exists(!0))])}function EM(n){return gc(Ne(n.firestore,ht),[new na(n._key,Qe.none())])}function AM(n,e){const t=Ne(n.firestore,ht),i=Ju(n),s=jd(n.converter,e);return gc(t,[Bd(kr(n.firestore),"addDoc",i._key,s,n.converter!==null,{}).toMutation(i._key,Qe.exists(!1))]).then((()=>i))}function Wx(n,...e){n=se(n);let t={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||Qf(e[i])||(t=e[i++]);const s={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(Qf(e[i])){const l=e[i];e[i]=l.next?.bind(l),e[i+1]=l.error?.bind(l),e[i+2]=l.complete?.bind(l)}let r,o,a;if(n instanceof ze)o=Ne(n.firestore,ht),a=ea(n._key.path),r={next:l=>{e[i]&&e[i](yg(o,n,l))},error:e[i+1],complete:e[i+2]};else{const l=Ne(n,un);o=Ne(l.firestore,ht),a=l._query;const c=new Mr(o);r={next:d=>{e[i]&&e[i](new Hn(o,c,l,d))},error:e[i+1],complete:e[i+2]},zx(n._query)}return(function(c,d,f,m){const y=new Vd(m),v=new Jm(d,y,f);return c.asyncQueue.enqueueAndForget((async()=>Wm(await Ho(c),v))),()=>{y.Nu(),c.asyncQueue.enqueueAndForget((async()=>Km(await Ho(c),v)))}})(Xt(o),a,s,r)}function IM(n,e){return qN(Xt(n=Ne(n,ht)),Qf(e)?e:{next:e})}function gc(n,e){return(function(i,s){const r=new Ft;return i.asyncQueue.enqueueAndForget((async()=>mN(await sg(i),s,r))),r.promise})(Xt(n),e)}function yg(n,e,t){const i=t.docs.get(e._key),s=new Mr(n);return new Mn(n,s,e._key,i,new sr(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CM={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let SM=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=kr(e)}set(e,t,i){this._verifyNotCommitted();const s=os(e,this._firestore),r=jd(s.converter,t,i),o=Bd(this._dataReader,"WriteBatch.set",s._key,r,s.converter!==null,i);return this._mutations.push(o.toMutation(s._key,Qe.none())),this}update(e,t,i,...s){this._verifyNotCommitted();const r=os(e,this._firestore);let o;return o=typeof(t=se(t))=="string"||t instanceof As?ug(this._dataReader,"WriteBatch.update",r._key,t,i,s):cg(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(o.toMutation(r._key,Qe.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=os(e,this._firestore);return this._mutations=this._mutations.concat(new na(t._key,Qe.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new G(B.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function os(n,e){if((n=se(n)).firestore!==e)throw new G(B.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PM{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=kr(e)}get(e){const t=os(e,this._firestore),i=new gM(this._firestore);return this._transaction.lookup([t._key]).then((s=>{if(!s||s.length!==1)return Z(24041);const r=s[0];if(r.isFoundDocument())return new ql(this._firestore,i,r.key,r,t.converter);if(r.isNoDocument())return new ql(this._firestore,i,t._key,null,t.converter);throw Z(18433,{doc:r})}))}set(e,t,i){const s=os(e,this._firestore),r=jd(s.converter,t,i),o=Bd(this._dataReader,"Transaction.set",s._key,r,s.converter!==null,i);return this._transaction.set(s._key,o),this}update(e,t,i,...s){const r=os(e,this._firestore);let o;return o=typeof(t=se(t))=="string"||t instanceof As?ug(this._dataReader,"Transaction.update",r._key,t,i,s):cg(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,o),this}delete(e){const t=os(e,this._firestore);return this._transaction.delete(t._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let RM=class extends PM{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=os(e,this._firestore),i=new Mr(this._firestore);return super.get(e).then((s=>new Mn(this._firestore,i,t._key,s._document,new sr(!1,!1),t.converter)))}};function kM(n,e,t){n=Ne(n,ht);const i={...CM,...t};return(function(r){if(r.maxAttempts<1)throw new G(B.INVALID_ARGUMENT,"Max attempts must be at least 1")})(i),(function(r,o,a){const l=new Ft;return r.asyncQueue.enqueueAndForget((async()=>{const c=await VN(r);new LN(r.asyncQueue,c,a,o,l).ju()})),l.promise})(Xt(n),(s=>e(new RM(n,s))),i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NM(){return new pc("deleteField")}function MM(){return new rg("serverTimestamp")}function DM(...n){return new og("arrayUnion",n)}function LM(...n){return new ag("arrayRemove",n)}function FM(n){return new lg("increment",n)}(function(e,t=!0){(function(s){Zo=s})(ki),Ci(new Ln("firestore",((i,{instanceIdentifier:s,options:r})=>{const o=i.getProvider("app").getImmediate(),a=new ht(new P5(i.getProvider("auth-internal")),new N5(o,i.getProvider("app-check-internal")),(function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new G(B.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _s(c.options.projectId,d)})(o,s),o);return r={useFetchStreams:t,...r},a._setSettings(r),a}),"PUBLIC").setMultipleInstances(!0)),Cn(kv,Nv,e),Cn(kv,Nv,"esm2020")})();const VM="@firebase/firestore-compat",OM="0.4.1";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vg(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new G("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n_(){if(typeof Uint8Array>"u")throw new G("unimplemented","Uint8Arrays are not available in this environment.")}function i_(){if(!f4())throw new G("unimplemented","Blobs are unavailable in Firestore in this environment.")}let Kx=class ep{constructor(e){this._delegate=e}static fromBase64String(e){return i_(),new ep($t.fromBase64String(e))}static fromUint8Array(e){return n_(),new ep($t.fromUint8Array(e))}toBase64(){return i_(),this._delegate.toBase64()}toUint8Array(){return n_(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tp(n){return UM(n,["next","error","complete"])}function UM(n,e){if(typeof n!="object"||n===null)return!1;const t=n;for(const i of e)if(i in t&&typeof t[i]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BM{enableIndexedDbPersistence(e,t){return YN(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return JN(e._delegate)}clearIndexedDbPersistence(e){return XN(e._delegate)}}class Yx{constructor(e,t,i){this._delegate=t,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},e instanceof _s||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&di("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e={...t,...e},delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,i={}){$N(this._delegate,e,t,i)}enableNetwork(){return ZN(this._delegate)}disableNetwork(){return eM(this._delegate)}enablePersistence(e){let t=!1,i=!1;return e&&(t=!!e.synchronizeTabs,i=!!e.experimentalForceOwningTab,_2("synchronizeTabs",t,"experimentalForceOwningTab",i)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return QN(this._delegate)}onSnapshotsInSync(e){return IM(this._delegate,e)}get app(){if(!this._appCompat)throw new G("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Go(this,Px(this._delegate,e))}catch(t){throw rn(t,"collection()","Firestore.collection()")}}doc(e){try{return new kn(this,Ju(this._delegate,e))}catch(t){throw rn(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new sn(this,jN(this._delegate,e))}catch(t){throw rn(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return kM(this._delegate,t=>e(new Jx(this,t)))}batch(){return Xt(this._delegate),new Xx(new SM(this._delegate,e=>gc(this._delegate,e)))}loadBundle(e){return tM(this._delegate,e)}namedQuery(e){return nM(this._delegate,e).then(t=>t?new sn(this,t):null)}}class Wd extends gg{constructor(e){super(),this.firestore=e}convertBytes(e){return new Kx(new $t(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return kn.forKey(t,this.firestore,null)}}function zM(n){A5(n)}class Jx{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Wd(e)}get(e){const t=rr(e);return this._delegate.get(t).then(i=>new Hl(this._firestore,new Mn(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,t.converter)))}set(e,t,i){const s=rr(e);return i?(vg("Transaction.set",i),this._delegate.set(s,t,i)):this._delegate.set(s,t),this}update(e,t,i,...s){const r=rr(e);return arguments.length===2?this._delegate.update(r,t):this._delegate.update(r,t,i,...s),this}delete(e){const t=rr(e);return this._delegate.delete(t),this}}class Xx{constructor(e){this._delegate=e}set(e,t,i){const s=rr(e);return i?(vg("WriteBatch.set",i),this._delegate.set(s,t,i)):this._delegate.set(s,t),this}update(e,t,i,...s){const r=rr(e);return arguments.length===2?this._delegate.update(r,t):this._delegate.update(r,t,i,...s),this}delete(e){const t=rr(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Tr{constructor(e,t,i){this._firestore=e,this._userDataWriter=t,this._delegate=i}fromFirestore(e,t){const i=new pl(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Gl(this._firestore,i),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const i=Tr.INSTANCES;let s=i.get(e);s||(s=new WeakMap,i.set(e,s));let r=s.get(t);return r||(r=new Tr(e,new Wd(e),t),s.set(t,r)),r}}Tr.INSTANCES=new WeakMap;class kn{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Wd(e)}static forPath(e,t,i){if(e.length%2!==0)throw new G("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new kn(t,new ze(t._delegate,i,new Y(e)))}static forKey(e,t,i){return new kn(t,new ze(t._delegate,i,e))}get id(){return this._delegate.id}get parent(){return new Go(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Go(this.firestore,Px(this._delegate,e))}catch(t){throw rn(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=se(e),e instanceof ze?Rx(this._delegate,e):!1}set(e,t){t=vg("DocumentReference.set",t);try{return t?e_(this._delegate,e,t):e_(this._delegate,e)}catch(i){throw rn(i,"setDoc()","DocumentReference.set()")}}update(e,t,...i){try{return arguments.length===1?t_(this._delegate,e):t_(this._delegate,e,t,...i)}catch(s){throw rn(s,"updateDoc()","DocumentReference.update()")}}delete(){return EM(this._delegate)}onSnapshot(...e){const t=Qx(e),i=Zx(e,s=>new Hl(this.firestore,new Mn(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)));return Wx(this._delegate,t,i)}get(e){let t;return e?.source==="cache"?t=_M(this._delegate):e?.source==="server"?t=wM(this._delegate):t=vM(this._delegate),t.then(i=>new Hl(this.firestore,new Mn(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(e){return new kn(this.firestore,e?this._delegate.withConverter(Tr.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function rn(n,e,t){return n.message=n.message.replace(e,t),n}function Qx(n){for(const e of n)if(typeof e=="object"&&!tp(e))return e;return{}}function Zx(n,e){let t;return tp(n[0])?t=n[0]:tp(n[1])?t=n[1]:typeof n[0]=="function"?t={next:n[0],error:n[1],complete:n[2]}:t={next:n[1],error:n[2],complete:n[3]},{next:i=>{t.next&&t.next(e(i))},error:t.error?.bind(t),complete:t.complete?.bind(t)}}class Hl{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new kn(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return jx(this._delegate,e._delegate)}}class Gl extends Hl{data(e){const t=this._delegate.data(e);return this._delegate._converter||I5(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}}class sn{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Wd(e)}where(e,t,i){try{return new sn(this.firestore,Zi(this._delegate,lM(e,t,i)))}catch(s){throw rn(s,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new sn(this.firestore,Zi(this._delegate,cM(e,t)))}catch(i){throw rn(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new sn(this.firestore,Zi(this._delegate,uM(e)))}catch(t){throw rn(t,"limit()","Query.limit()")}}limitToLast(e){try{return new sn(this.firestore,Zi(this._delegate,dM(e)))}catch(t){throw rn(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new sn(this.firestore,Zi(this._delegate,hM(...e)))}catch(t){throw rn(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new sn(this.firestore,Zi(this._delegate,fM(...e)))}catch(t){throw rn(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new sn(this.firestore,Zi(this._delegate,pM(...e)))}catch(t){throw rn(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new sn(this.firestore,Zi(this._delegate,mM(...e)))}catch(t){throw rn(t,"endAt()","Query.endAt()")}}isEqual(e){return kx(this._delegate,e._delegate)}get(e){let t;return e?.source==="cache"?t=TM(this._delegate):e?.source==="server"?t=xM(this._delegate):t=bM(this._delegate),t.then(i=>new np(this.firestore,new Hn(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...e){const t=Qx(e),i=Zx(e,s=>new np(this.firestore,new Hn(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)));return Wx(this._delegate,t,i)}withConverter(e){return new sn(this.firestore,e?this._delegate.withConverter(Tr.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class qM{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Gl(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class np{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new sn(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Gl(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new qM(this._firestore,t))}forEach(e,t){this._delegate.forEach(i=>{e.call(t,new Gl(this._firestore,i))})}isEqual(e){return jx(this._delegate,e._delegate)}}class Go extends sn{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new kn(this.firestore,e):null}doc(e){try{return e===void 0?new kn(this.firestore,Ju(this._delegate)):new kn(this.firestore,Ju(this._delegate,e))}catch(t){throw rn(t,"doc()","CollectionReference.doc()")}}add(e){return AM(this._delegate,e).then(t=>new kn(this.firestore,t))}isEqual(e){return Rx(this._delegate,e._delegate)}withConverter(e){return new Go(this.firestore,e?this._delegate.withConverter(Tr.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function rr(n){return Ne(n,ze)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(...e){this._delegate=new As(...e)}static documentId(){return new _g(Xe.keyField().canonicalString())}isEqual(e){return e=se(e),e instanceof As?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{static serverTimestamp(){const e=MM();return e._methodName="FieldValue.serverTimestamp",new er(e)}static delete(){const e=NM();return e._methodName="FieldValue.delete",new er(e)}static arrayUnion(...e){const t=DM(...e);return t._methodName="FieldValue.arrayUnion",new er(t)}static arrayRemove(...e){const t=LM(...e);return t._methodName="FieldValue.arrayRemove",new er(t)}static increment(e){const t=FM(e);return t._methodName="FieldValue.increment",new er(t)}constructor(e){this._delegate=e}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HM={Firestore:Yx,GeoPoint:qn,Timestamp:De,Blob:Kx,Transaction:Jx,WriteBatch:Xx,DocumentReference:kn,DocumentSnapshot:Hl,Query:sn,QueryDocumentSnapshot:Gl,QuerySnapshot:np,CollectionReference:Go,FieldPath:_g,FieldValue:er,setLogLevel:zM,CACHE_SIZE_UNLIMITED:KN};function GM(n,e){n.INTERNAL.registerComponent(new Ln("firestore-compat",t=>{const i=t.getProvider("app-compat").getImmediate(),s=t.getProvider("firestore").getImmediate();return e(i,s)},"PUBLIC").setServiceProps({...HM}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $M(n){GM(n,(e,t)=>new Yx(e,t,new BM)),n.registerVersion(VM,OM)}$M(an);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eE="firebasestorage.googleapis.com",tE="storageBucket",jM=120*1e3,WM=600*1e3,KM=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt extends Yt{constructor(e,t,i=0){super(Yh(e),`Firebase Storage: ${t} (${Yh(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,nt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Yh(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var We;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(We||(We={}));function Yh(n){return"storage/"+n}function wg(){const n="An unknown error occurred, please check the error payload for server response.";return new nt(We.UNKNOWN,n)}function YM(n){return new nt(We.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function JM(n){return new nt(We.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function XM(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new nt(We.UNAUTHENTICATED,n)}function QM(){return new nt(We.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function ZM(n){return new nt(We.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function nE(){return new nt(We.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function iE(){return new nt(We.CANCELED,"User canceled the upload/download.")}function eD(n){return new nt(We.INVALID_URL,"Invalid URL '"+n+"'.")}function tD(n){return new nt(We.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function nD(){return new nt(We.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+tE+"' property when initializing the app?")}function sE(){return new nt(We.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function iD(){return new nt(We.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function sD(){return new nt(We.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function rD(n){return new nt(We.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function mo(n){return new nt(We.INVALID_ARGUMENT,n)}function rE(){return new nt(We.APP_DELETED,"The Firebase app was deleted.")}function oE(n){return new nt(We.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ml(n,e){return new nt(We.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Oa(n){throw new nt(We.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=Wt.makeFromUrl(e,t)}catch{return new Wt(e,"")}if(i.path==="")return i;throw tD(e)}static makeFromUrl(e,t){let i=null;const s="([A-Za-z0-9.\\-_]+)";function r(L){L.path.charAt(L.path.length-1)==="/"&&(L.path_=L.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function c(L){L.path_=decodeURIComponent(L.path)}const d="v[A-Za-z0-9_]+",f=t.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",y=new RegExp(`^https?://${f}/${d}/b/${s}/o${m}`,"i"),v={bucket:1,path:3},w=t===eE?"(?:storage.googleapis.com|storage.cloud.google.com)":t,T="([^?#]*)",x=new RegExp(`^https?://${w}/${s}/${T}`,"i"),S=[{regex:a,indices:l,postModify:r},{regex:y,indices:v,postModify:c},{regex:x,indices:{bucket:1,path:2},postModify:c}];for(let L=0;L<S.length;L++){const F=S[L],U=F.regex.exec(e);if(U){const C=U[F.indices.bucket];let A=U[F.indices.path];A||(A=""),i=new Wt(C,A),F.postModify(i);break}}if(i==null)throw eD(e);return i}}class oD{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aD(n,e,t){let i=1,s=null,r=null,o=!1,a=0;function l(){return a===2}let c=!1;function d(...T){c||(c=!0,e.apply(null,T))}function f(T){s=setTimeout(()=>{s=null,n(y,l())},T)}function m(){r&&clearTimeout(r)}function y(T,...x){if(c){m();return}if(T){m(),d.call(null,T,...x);return}if(l()||o){m(),d.call(null,T,...x);return}i<64&&(i*=2);let S;a===1?(a=2,S=0):S=(i+Math.random())*1e3,f(S)}let v=!1;function w(T){v||(v=!0,m(),!c&&(s!==null?(T||(a=2),clearTimeout(s),f(0)):T||(a=1)))}return f(0),r=setTimeout(()=>{o=!0,w(!0)},t),w}function lD(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cD(n){return n!==void 0}function uD(n){return typeof n=="function"}function dD(n){return typeof n=="object"&&!Array.isArray(n)}function Kd(n){return typeof n=="string"||n instanceof String}function s_(n){return bg()&&n instanceof Blob}function bg(){return typeof Blob<"u"}function ip(n,e,t,i){if(i<e)throw mo(`Invalid value for '${n}'. Expected ${e} or greater.`);if(i>t)throw mo(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fs(n,e,t){let i=e;return t==null&&(i=`https://${e}`),`${t}://${i}/v0${n}`}function aE(n){const e=encodeURIComponent;let t="?";for(const i in n)if(n.hasOwnProperty(i)){const s=e(i)+"="+e(n[i]);t=t+s+"&"}return t=t.slice(0,-1),t}var ur;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(ur||(ur={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lE(n,e){const t=n>=500&&n<600,s=[408,429].indexOf(n)!==-1,r=e.indexOf(n)!==-1;return t||s||r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hD{constructor(e,t,i,s,r,o,a,l,c,d,f,m=!0,y=!1){this.url_=e,this.method_=t,this.headers_=i,this.body_=s,this.successCodes_=r,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=d,this.connectionFactory_=f,this.retry=m,this.isUsingEmulator=y,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((v,w)=>{this.resolve_=v,this.reject_=w,this.start_()})}start_(){const e=(i,s)=>{if(s){i(!1,new Wc(!1,null,!0));return}const r=this.connectionFactory_();this.pendingConnection_=r;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&r.addUploadProgressListener(o),r.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&r.removeUploadProgressListener(o),this.pendingConnection_=null;const a=r.getErrorCode()===ur.NO_ERROR,l=r.getStatus();if(!a||lE(l,this.additionalRetryCodes_)&&this.retry){const d=r.getErrorCode()===ur.ABORT;i(!1,new Wc(!1,null,d));return}const c=this.successCodes_.indexOf(l)!==-1;i(!0,new Wc(c,r))})},t=(i,s)=>{const r=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());cD(l)?r(l):r()}catch(l){o(l)}else if(a!==null){const l=wg();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){const l=this.appDelete_?rE():iE();o(l)}else{const l=nE();o(l)}};this.canceled_?t(!1,new Wc(!1,null,!0)):this.backoffId_=aD(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&lD(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Wc{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function fD(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function pD(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function mD(n,e){e&&(n["X-Firebase-GMPID"]=e)}function gD(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function yD(n,e,t,i,s,r,o=!0,a=!1){const l=aE(n.urlParams),c=n.url+l,d=Object.assign({},n.headers);return mD(d,e),fD(d,t),pD(d,r),gD(d,i),new hD(c,n.method,d,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,s,o,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vD(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function _D(...n){const e=vD();if(e!==void 0){const t=new e;for(let i=0;i<n.length;i++)t.append(n[i]);return t.getBlob()}else{if(bg())return new Blob(n);throw new nt(We.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function wD(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bD(n){if(typeof atob>"u")throw rD("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Jh{constructor(e,t){this.data=e,this.contentType=t||null}}function cE(n,e){switch(n){case Nn.RAW:return new Jh(uE(e));case Nn.BASE64:case Nn.BASE64URL:return new Jh(dE(n,e));case Nn.DATA_URL:return new Jh(xD(e),ED(e))}throw wg()}function uE(n){const e=[];for(let t=0;t<n.length;t++){let i=n.charCodeAt(t);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const r=i,o=n.charCodeAt(++t);i=65536|(r&1023)<<10|o&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function TD(n){let e;try{e=decodeURIComponent(n)}catch{throw ml(Nn.DATA_URL,"Malformed data URL.")}return uE(e)}function dE(n,e){switch(n){case Nn.BASE64:{const s=e.indexOf("-")!==-1,r=e.indexOf("_")!==-1;if(s||r)throw ml(n,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Nn.BASE64URL:{const s=e.indexOf("+")!==-1,r=e.indexOf("/")!==-1;if(s||r)throw ml(n,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=bD(e)}catch(s){throw s.message.includes("polyfill")?s:ml(n,"Invalid character found")}const i=new Uint8Array(t.length);for(let s=0;s<t.length;s++)i[s]=t.charCodeAt(s);return i}class hE{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw ml(Nn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=t[1]||null;i!=null&&(this.base64=AD(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function xD(n){const e=new hE(n);return e.base64?dE(Nn.BASE64,e.rest):TD(e.rest)}function ED(n){return new hE(n).contentType}function AD(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(e,t){let i=0,s="";s_(e)?(this.data_=e,i=e.size,s=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,t){if(s_(this.data_)){const i=this.data_,s=wD(i,e,t);return s===null?null:new bi(s)}else{const i=new Uint8Array(this.data_.buffer,e,t-e);return new bi(i,!0)}}static getBlob(...e){if(bg()){const t=e.map(i=>i instanceof bi?i.data_:i);return new bi(_D.apply(null,t))}else{const t=e.map(o=>Kd(o)?cE(Nn.RAW,o).data:o.data_);let i=0;t.forEach(o=>{i+=o.byteLength});const s=new Uint8Array(i);let r=0;return t.forEach(o=>{for(let a=0;a<o.length;a++)s[r++]=o[a]}),new bi(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tg(n){let e;try{e=JSON.parse(n)}catch{return null}return dD(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ID(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function CD(n,e){const t=e.split("/").filter(i=>i.length>0).join("/");return n.length===0?t:n+"/"+t}function fE(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SD(n,e){return e}class Zt{constructor(e,t,i,s){this.server=e,this.local=t||e,this.writable=!!i,this.xform=s||SD}}let Kc=null;function PD(n){return!Kd(n)||n.length<2?n:fE(n)}function Yd(){if(Kc)return Kc;const n=[];n.push(new Zt("bucket")),n.push(new Zt("generation")),n.push(new Zt("metageneration")),n.push(new Zt("name","fullPath",!0));function e(r,o){return PD(o)}const t=new Zt("name");t.xform=e,n.push(t);function i(r,o){return o!==void 0?Number(o):o}const s=new Zt("size");return s.xform=i,n.push(s),n.push(new Zt("timeCreated")),n.push(new Zt("updated")),n.push(new Zt("md5Hash",null,!0)),n.push(new Zt("cacheControl",null,!0)),n.push(new Zt("contentDisposition",null,!0)),n.push(new Zt("contentEncoding",null,!0)),n.push(new Zt("contentLanguage",null,!0)),n.push(new Zt("contentType",null,!0)),n.push(new Zt("metadata","customMetadata",!0)),Kc=n,Kc}function RD(n,e){function t(){const i=n.bucket,s=n.fullPath,r=new Wt(i,s);return e._makeStorageReference(r)}Object.defineProperty(n,"ref",{get:t})}function kD(n,e,t){const i={};i.type="file";const s=t.length;for(let r=0;r<s;r++){const o=t[r];i[o.local]=o.xform(i,e[o.server])}return RD(i,n),i}function pE(n,e,t){const i=Tg(e);return i===null?null:kD(n,i,t)}function ND(n,e,t,i){const s=Tg(e);if(s===null||!Kd(s.downloadTokens))return null;const r=s.downloadTokens;if(r.length===0)return null;const o=encodeURIComponent;return r.split(",").map(c=>{const d=n.bucket,f=n.fullPath,m="/b/"+o(d)+"/o/"+o(f),y=Fs(m,t,i),v=aE({alt:"media",token:c});return y+v})[0]}function xg(n,e){const t={},i=e.length;for(let s=0;s<i;s++){const r=e[s];r.writable&&(t[r.server]=n[r.local])}return JSON.stringify(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r_="prefixes",o_="items";function MD(n,e,t){const i={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[r_])for(const s of t[r_]){const r=s.replace(/\/$/,""),o=n._makeStorageReference(new Wt(e,r));i.prefixes.push(o)}if(t[o_])for(const s of t[o_]){const r=n._makeStorageReference(new Wt(e,s.name));i.items.push(r)}return i}function DD(n,e,t){const i=Tg(t);return i===null?null:MD(n,e,i)}class Oi{constructor(e,t,i,s){this.url=e,this.method=t,this.handler=i,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ci(n){if(!n)throw wg()}function Jd(n,e){function t(i,s){const r=pE(n,s,e);return ci(r!==null),r}return t}function LD(n,e){function t(i,s){const r=DD(n,e,s);return ci(r!==null),r}return t}function FD(n,e){function t(i,s){const r=pE(n,s,e);return ci(r!==null),ND(r,s,n.host,n._protocol)}return t}function aa(n){function e(t,i){let s;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?s=QM():s=XM():t.getStatus()===402?s=JM(n.bucket):t.getStatus()===403?s=ZM(n.path):s=i,s.status=t.getStatus(),s.serverResponse=i.serverResponse,s}return e}function Xd(n){const e=aa(n);function t(i,s){let r=e(i,s);return i.getStatus()===404&&(r=YM(n.path)),r.serverResponse=s.serverResponse,r}return t}function mE(n,e,t){const i=e.fullServerUrl(),s=Fs(i,n.host,n._protocol),r="GET",o=n.maxOperationRetryTime,a=new Oi(s,r,Jd(n,t),o);return a.errorHandler=Xd(e),a}function VD(n,e,t,i,s){const r={};e.isRoot?r.prefix="":r.prefix=e.path+"/",t.length>0&&(r.delimiter=t),i&&(r.pageToken=i),s&&(r.maxResults=s);const o=e.bucketOnlyServerUrl(),a=Fs(o,n.host,n._protocol),l="GET",c=n.maxOperationRetryTime,d=new Oi(a,l,LD(n,e.bucket),c);return d.urlParams=r,d.errorHandler=aa(e),d}function OD(n,e,t){const i=e.fullServerUrl(),s=Fs(i,n.host,n._protocol),r="GET",o=n.maxOperationRetryTime,a=new Oi(s,r,FD(n,t),o);return a.errorHandler=Xd(e),a}function UD(n,e,t,i){const s=e.fullServerUrl(),r=Fs(s,n.host,n._protocol),o="PATCH",a=xg(t,i),l={"Content-Type":"application/json; charset=utf-8"},c=n.maxOperationRetryTime,d=new Oi(r,o,Jd(n,i),c);return d.headers=l,d.body=a,d.errorHandler=Xd(e),d}function BD(n,e){const t=e.fullServerUrl(),i=Fs(t,n.host,n._protocol),s="DELETE",r=n.maxOperationRetryTime;function o(l,c){}const a=new Oi(i,s,o,r);return a.successCodes=[200,204],a.errorHandler=Xd(e),a}function zD(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function gE(n,e,t){const i=Object.assign({},t);return i.fullPath=n.path,i.size=e.size(),i.contentType||(i.contentType=zD(null,e)),i}function qD(n,e,t,i,s){const r=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let S="";for(let L=0;L<2;L++)S=S+Math.random().toString().slice(2);return S}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=gE(e,i,s),d=xg(c,t),f="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,m=`\r
--`+l+"--",y=bi.getBlob(f,i,m);if(y===null)throw sE();const v={name:c.fullPath},w=Fs(r,n.host,n._protocol),T="POST",x=n.maxUploadRetryTime,P=new Oi(w,T,Jd(n,t),x);return P.urlParams=v,P.headers=o,P.body=y.uploadData(),P.errorHandler=aa(e),P}class Qu{constructor(e,t,i,s){this.current=e,this.total=t,this.finalized=!!i,this.metadata=s||null}}function Eg(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{ci(!1)}return ci(!!t&&(e||["active"]).indexOf(t)!==-1),t}function HD(n,e,t,i,s){const r=e.bucketOnlyServerUrl(),o=gE(e,i,s),a={name:o.fullPath},l=Fs(r,n.host,n._protocol),c="POST",d={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},f=xg(o,t),m=n.maxUploadRetryTime;function y(w){Eg(w);let T;try{T=w.getResponseHeader("X-Goog-Upload-URL")}catch{ci(!1)}return ci(Kd(T)),T}const v=new Oi(l,c,y,m);return v.urlParams=a,v.headers=d,v.body=f,v.errorHandler=aa(e),v}function GD(n,e,t,i){const s={"X-Goog-Upload-Command":"query"};function r(c){const d=Eg(c,["active","final"]);let f=null;try{f=c.getResponseHeader("X-Goog-Upload-Size-Received")}catch{ci(!1)}f||ci(!1);const m=Number(f);return ci(!isNaN(m)),new Qu(m,i.size(),d==="final")}const o="POST",a=n.maxUploadRetryTime,l=new Oi(t,o,r,a);return l.headers=s,l.errorHandler=aa(e),l}const a_=256*1024;function $D(n,e,t,i,s,r,o,a){const l=new Qu(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=i.size()),i.size()!==l.total)throw iD();const c=l.total-l.current;let d=c;s>0&&(d=Math.min(d,s));const f=l.current,m=f+d;let y="";d===0?y="finalize":c===d?y="upload, finalize":y="upload";const v={"X-Goog-Upload-Command":y,"X-Goog-Upload-Offset":`${l.current}`},w=i.slice(f,m);if(w===null)throw sE();function T(L,F){const U=Eg(L,["active","final"]),C=l.current+d,A=i.size();let E;return U==="final"?E=Jd(e,r)(L,F):E=null,new Qu(C,A,U==="final",E)}const x="POST",P=e.maxUploadRetryTime,S=new Oi(t,x,T,P);return S.headers=v,S.body=w.uploadData(),S.progressCallback=a||null,S.errorHandler=aa(n),S}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jD={STATE_CHANGED:"state_changed"},on={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Xh(n){switch(n){case"running":case"pausing":case"canceling":return on.RUNNING;case"paused":return on.PAUSED;case"success":return on.SUCCESS;case"canceled":return on.CANCELED;case"error":return on.ERROR;default:return on.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WD{constructor(e,t,i){if(uD(e)||t!=null||i!=null)this.next=e,this.error=t??void 0,this.complete=i??void 0;else{const r=e;this.next=r.next,this.error=r.error,this.complete=r.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xr(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class KD{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ur.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ur.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ur.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,i,s,r){if(this.sent_)throw Oa("cannot .send() more than once");if(Ps(e)&&i&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),r!==void 0)for(const o in r)r.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,r[o].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Oa("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Oa("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Oa("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Oa("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class YD extends KD{initXhr(){this.xhr_.responseType="text"}}function ni(){return new YD}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yE{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,t,i=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=i,this._mappings=Yd(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=s=>{if(this._request=void 0,this._chunkMultiplier=1,s._codeEquals(We.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const r=this.isExponentialBackoffExpired();if(lE(s.status,[]))if(r)s=nE();else{this.sleepTime=Math.max(this.sleepTime*2,KM),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=s,this._transition("error")}},this._metadataErrorHandler=s=>{this._request=void 0,s._codeEquals(We.CANCELED)?this.completeTransitions_():(this._error=s,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((s,r)=>{this._resolve=s,this._reject=r,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,i])=>{switch(this._state){case"running":e(t,i);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,t)=>{const i=HD(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(i,ni,e,t);this._request=s,s.getPromise().then(r=>{this._request=void 0,this._uploadUrl=r,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,i)=>{const s=GD(this._ref.storage,this._ref._location,e,this._blob),r=this._ref.storage._makeRequest(s,ni,t,i);this._request=r,r.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=a_*this._chunkMultiplier,t=new Qu(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken((s,r)=>{let o;try{o=$D(this._ref._location,this._ref.storage,i,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(l){this._error=l,this._transition("error");return}const a=this._ref.storage._makeRequest(o,ni,s,r,!1);this._request=a,a.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){a_*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const i=mE(this._ref.storage,this._ref._location,this._mappings),s=this._ref.storage._makeRequest(i,ni,e,t);this._request=s,s.getPromise().then(r=>{this._request=void 0,this._metadata=r,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const i=qD(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(i,ni,e,t);this._request=s,s.getPromise().then(r=>{this._request=void 0,this._metadata=r,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t=this._state==="paused";this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=iE(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=Xh(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,i,s){const r=new WD(t||void 0,i||void 0,s||void 0);return this._addObserver(r),()=>{this._removeObserver(r)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);t!==-1&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(Xh(this._state)){case on.SUCCESS:Xr(this._resolve.bind(null,this.snapshot))();break;case on.CANCELED:case on.ERROR:const t=this._reject;Xr(t.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Xh(this._state)){case on.RUNNING:case on.PAUSED:e.next&&Xr(e.next.bind(e,this.snapshot))();break;case on.SUCCESS:e.complete&&Xr(e.complete.bind(e))();break;case on.CANCELED:case on.ERROR:e.error&&Xr(e.error.bind(e,this._error))();break;default:e.error&&Xr(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(e,t){this._service=e,t instanceof Wt?this._location=t:this._location=Wt.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new xr(e,t)}get root(){const e=new Wt(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return fE(this._location.path)}get storage(){return this._service}get parent(){const e=ID(this._location.path);if(e===null)return null;const t=new Wt(this._location.bucket,e);return new xr(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw oE(e)}}function JD(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new yE(n,new bi(e),t)}function XD(n){const e={prefixes:[],items:[]};return vE(n,e).then(()=>e)}async function vE(n,e,t){const s=await _E(n,{pageToken:t});e.prefixes.push(...s.prefixes),e.items.push(...s.items),s.nextPageToken!=null&&await vE(n,e,s.nextPageToken)}function _E(n,e){e!=null&&typeof e.maxResults=="number"&&ip("options.maxResults",1,1e3,e.maxResults);const t=e||{},i=VD(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(i,ni)}function QD(n){n._throwIfRoot("getMetadata");const e=mE(n.storage,n._location,Yd());return n.storage.makeRequestWithTokens(e,ni)}function ZD(n,e){n._throwIfRoot("updateMetadata");const t=UD(n.storage,n._location,e,Yd());return n.storage.makeRequestWithTokens(t,ni)}function e8(n){n._throwIfRoot("getDownloadURL");const e=OD(n.storage,n._location,Yd());return n.storage.makeRequestWithTokens(e,ni).then(t=>{if(t===null)throw sD();return t})}function t8(n){n._throwIfRoot("deleteObject");const e=BD(n.storage,n._location);return n.storage.makeRequestWithTokens(e,ni)}function wE(n,e){const t=CD(n._location.path,e),i=new Wt(n._location.bucket,t);return new xr(n.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n8(n){return/^[A-Za-z]+:\/\//.test(n)}function i8(n,e){return new xr(n,e)}function bE(n,e){if(n instanceof Ag){const t=n;if(t._bucket==null)throw nD();const i=new xr(t,t._bucket);return e!=null?bE(i,e):i}else return e!==void 0?wE(n,e):n}function s8(n,e){if(e&&n8(e)){if(n instanceof Ag)return i8(n,e);throw mo("To use ref(service, url), the first argument must be a Storage instance.")}else return bE(n,e)}function l_(n,e){const t=e?.[tE];return t==null?null:Wt.makeFromBucketSpec(t,n)}function r8(n,e,t,i={}){n.host=`${e}:${t}`;const s=Ps(e);s&&(Vp(`https://${n.host}/b`),Op("Storage",!0)),n._isUsingEmulator=!0,n._protocol=s?"https":"http";const{mockUserToken:r}=i;r&&(n._overrideAuthToken=typeof r=="string"?r:jw(r,n.app.options.projectId))}class Ag{constructor(e,t,i,s,r,o=!1){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=s,this._firebaseVersion=r,this._isUsingEmulator=o,this._bucket=null,this._host=eE,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=jM,this._maxUploadRetryTime=WM,this._requests=new Set,s!=null?this._bucket=Wt.makeFromBucketSpec(s,this._host):this._bucket=l_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Wt.makeFromBucketSpec(this._url,e):this._bucket=l_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){ip("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){ip("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(je(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new xr(this,e)}_makeRequest(e,t,i,s,r=!0){if(this._deleted)return new oD(rE());{const o=yD(e,this._appId,i,s,t,this._firebaseVersion,r,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,t){const[i,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,i,s).getPromise()}}const c_="@firebase/storage",u_="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o8="storage";function a8(n,e,t){return n=se(n),JD(n,e,t)}function l8(n){return n=se(n),QD(n)}function c8(n,e){return n=se(n),ZD(n,e)}function u8(n,e){return n=se(n),_E(n,e)}function d8(n){return n=se(n),XD(n)}function h8(n){return n=se(n),e8(n)}function f8(n){return n=se(n),t8(n)}function d_(n,e){return n=se(n),s8(n,e)}function p8(n,e){return wE(n,e)}function m8(n,e,t,i={}){r8(n,e,t,i)}function g8(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),s=n.getProvider("app-check-internal");return new Ag(t,i,s,e,ki)}function y8(){Ci(new Ln(o8,g8,"PUBLIC").setMultipleInstances(!0)),Cn(c_,u_,""),Cn(c_,u_,"esm2020")}y8();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(e,t,i){this._delegate=e,this.task=t,this.ref=i}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h_{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Yc(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(i=>{if(e)return e(new Yc(i,this,this._ref))},t)}on(e,t,i,s){let r;return t&&(typeof t=="function"?r=o=>t(new Yc(o,this,this._ref)):r={next:t.next?o=>t.next(new Yc(o,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,r,i||void 0,s||void 0)}}class f_{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new Ai(e,this._service))}get items(){return this._delegate.items.map(e=>new Ai(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=p8(this._delegate,e);return new Ai(t,this.storage)}get root(){return new Ai(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return e==null?null:new Ai(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new h_(a8(this._delegate,e,t),this)}putString(e,t=Nn.RAW,i){this._throwIfRoot("putString");const s=cE(t,e),r={...i};return r.contentType==null&&s.contentType!=null&&(r.contentType=s.contentType),new h_(new yE(this._delegate,new bi(s.data,!0),r),this)}listAll(){return d8(this._delegate).then(e=>new f_(e,this.storage))}list(e){return u8(this._delegate,e||void 0).then(t=>new f_(t,this.storage))}getMetadata(){return l8(this._delegate)}updateMetadata(e){return c8(this._delegate,e)}getDownloadURL(){return h8(this._delegate)}delete(){return this._throwIfRoot("delete"),f8(this._delegate)}_throwIfRoot(e){if(this._delegate._location.path==="")throw oE(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(p_(e))throw mo("ref() expected a child path but got a URL, use refFromURL instead.");return new Ai(d_(this._delegate,e),this)}refFromURL(e){if(!p_(e))throw mo("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Wt.makeFromUrl(e,this._delegate.host)}catch{throw mo("refFromUrl() expected a valid full URL but got an invalid one.")}return new Ai(d_(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,i={}){m8(this._delegate,e,t,i)}}function p_(n){return/^[A-Za-z]+:\/\//.test(n)}const v8="@firebase/storage-compat",_8="0.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w8="storage-compat";function b8(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),i=n.getProvider("storage").getImmediate({identifier:e});return new TE(t,i)}function T8(n){const e={TaskState:on,TaskEvent:jD,StringFormat:Nn,Storage:TE,Reference:Ai};n.INTERNAL.registerComponent(new Ln(w8,b8,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion(v8,_8)}T8(an);const x8={apiKey:"AIzaSyB7SH4xr3K0zDAeNL5Ri5KX2KHsag7aKkI",authDomain:"i-lovepdfly.firebaseapp.com",projectId:"i-lovepdfly",storageBucket:"i-lovepdfly.appspot.com",messagingSenderId:"415789226795",appId:"1:415789226795:web:778d189b2aafed0b7b436e",measurementId:"G-D5553YDTM8"};an.initializeApp(x8);const On=an.auth(),en=an.firestore(),E8=an.storage(),xE=()=>g.jsx("div",{id:"preloader",className:"fixed inset-0 z-[100] flex items-center justify-center bg-creamy dark:bg-soft-dark",children:g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-64 h-16 sm:w-96 sm:h-24",zoomAndPan:"magnify",viewBox:"0 0 300 74.999997",preserveAspectRatio:"xMidYMid meet",version:"1.2",children:g.jsxs("g",{children:[g.jsx("path",{id:"preloader-heart",fill:"#B90B06",d:"M 75.253906 5.78125 C 71.476562 8.320312 66.628906 12.535156 64.957031 14.765625 C 64.480469 15.40625 63.945312 15.921875 63.757812 15.921875 C 63.574219 15.921875 62.828125 15.175781 62.128906 14.269531 C 59.363281 10.777344 55.792969 7.804688 52.882812 6.625 C 49.164062 5.117188 44.234375 5.140625 40.621094 6.710938 C 35.832031 8.753906 31.890625 13.546875 30.382812 19.101562 C 29.90625 20.898438 29.847656 21.457031 29.847656 24.90625 C 29.847656 28.394531 29.886719 28.890625 30.402344 30.710938 C 32.035156 36.65625 34.46875 39.816406 43.140625 47.234375 C 48.9375 52.210938 52.839844 55.886719 56.183594 59.523438 C 59.484375 63.136719 62.683594 66.855469 63.964844 68.589844 C 65.472656 70.613281 66.277344 71.378906 66.894531 71.378906 C 67.617188 71.378906 67.988281 71.027344 69.558594 68.917969 C 73.769531 63.300781 81.363281 55.183594 88.136719 49.070312 C 90.117188 47.292969 94.492188 43.433594 97.835938 40.519531 C 104.171875 35.003906 104.628906 34.488281 104.648438 32.960938 C 104.648438 31.640625 103.964844 30.667969 101.222656 28.003906 C 99.757812 26.578125 93.976562 20.917969 88.382812 15.40625 C 82.789062 9.890625 78 5.285156 77.753906 5.140625 C 77.03125 4.726562 76.679688 4.808594 75.253906 5.78125 Z M 89.394531 21.207031 C 98.621094 30.316406 100.890625 32.652344 100.707031 32.878906 C 100.355469 33.3125 77.917969 33.3125 77.484375 32.878906 C 77.238281 32.628906 77.195312 30.8125 77.195312 21.332031 C 77.195312 15.15625 77.257812 10.035156 77.339844 9.972656 C 77.402344 9.890625 77.546875 9.828125 77.648438 9.828125 C 77.753906 9.828125 83.035156 14.949219 89.394531 21.207031 Z"}),g.jsxs("g",{id:"preloader-text",children:[g.jsx("path",{id:"preloader-i",d:"M 12.960938 9.558594 L 7.222656 9.621094 L 7.222656 58.59375 L 13.003906 58.550781 L 18.78125 58.53125 L 18.78125 33.972656 C 18.78125 20.464844 18.761719 9.433594 18.742188 9.457031 C 18.699219 9.496094 16.101562 9.539062 12.960938 9.558594 Z"}),g.jsx("path",{id:"preloader-p",d:"M 114.347656 34.695312 L 114.347656 58.367188 L 125.496094 58.367188 L 125.496094 43.144531 L 128.757812 43.019531 C 134.121094 42.792969 137.15625 42.132812 140.253906 40.539062 C 144.875 38.144531 147.582031 33.0625 147.582031 26.785156 C 147.582031 19.554688 144.402344 14.886719 137.921875 12.511719 C 134.722656 11.355469 133.667969 11.253906 123.597656 11.128906 L 114.347656 11.027344 Z M 131.644531 21.289062 C 133.359375 21.703125 134.347656 22.21875 135.257812 23.234375 C 136.25 24.328125 136.578125 25.03125 136.828125 26.496094 C 137.28125 29.304688 135.960938 31.496094 133.195312 32.546875 C 132.203125 32.941406 131.417969 33.042969 128.632812 33.148438 L 125.269531 33.269531 L 125.328125 28.828125 C 125.351562 26.394531 125.414062 23.625 125.453125 22.675781 L 125.535156 20.980469 L 127.929688 20.980469 C 129.332031 20.980469 130.882812 21.125 131.644531 21.289062 Z"}),g.jsx("path",{id:"preloader-d",d:"M 151.480469 27.117188 C 151.460938 35.957031 151.417969 46.59375 151.398438 50.765625 L 151.335938 58.367188 L 159.859375 58.367188 C 168.882812 58.367188 171.480469 58.179688 174.867188 57.332031 C 182.566406 55.351562 188.054688 49.648438 190.015625 41.53125 C 190.925781 37.710938 191.007812 32.402344 190.203125 28.539062 C 188.613281 20.898438 184.03125 15.382812 177.117188 12.800781 C 173.277344 11.355469 170.324219 11.066406 159.40625 11.066406 L 151.5 11.066406 Z M 170.59375 21.785156 C 173.09375 22.449219 174.332031 23.148438 175.980469 24.78125 C 178.726562 27.527344 179.945312 31 179.71875 35.542969 C 179.46875 40.828125 177.15625 44.796875 173.175781 46.757812 C 170.902344 47.894531 169.230469 48.222656 165.496094 48.367188 L 162.441406 48.472656 L 162.441406 34.945312 C 162.441406 22.242188 162.460938 21.414062 162.8125 21.3125 C 163 21.25 164.464844 21.25 166.054688 21.269531 C 168.179688 21.332031 169.375 21.457031 170.59375 21.785156 Z"}),g.jsx("path",{id:"preloader-f",d:"M 195.878906 21.972656 C 195.878906 27.984375 195.816406 38.621094 195.734375 45.621094 L 195.609375 58.367188 L 206.964844 58.367188 L 206.859375 49.320312 L 206.757812 40.292969 L 214.230469 40.355469 L 221.679688 40.394531 L 221.679688 30.070312 L 206.796875 30.070312 L 206.820312 25.628906 L 206.839844 21.167969 L 214.992188 21.3125 L 223.125 21.457031 L 223.125 11.066406 L 195.878906 11.066406 Z"}),g.jsx("path",{id:"preloader-l",d:"M 228.285156 34.820312 L 228.285156 58.367188 L 256.253906 58.367188 L 256.273438 53.410156 L 256.273438 48.453125 L 239.429688 48.453125 L 239.429688 11.273438 L 228.285156 11.273438 Z"}),g.jsx("path",{id:"preloader-y",d:"M 251.277344 11.933594 C 251.546875 12.429688 253.527344 15.984375 255.695312 19.84375 C 261.125 29.59375 265.789062 37.835938 266.492188 38.972656 L 267.089844 39.921875 L 267.089844 58.367188 L 277.820312 58.367188 L 277.820312 39.941406 L 282.136719 32.074219 C 289.875 17.882812 292.207031 13.667969 292.953125 12.410156 L 293.675781 11.171875 L 287.667969 11.109375 C 284.363281 11.085938 281.597656 11.128906 281.515625 11.210938 C 281.433594 11.316406 280.15625 13.875 278.6875 16.953125 C 277.222656 20.011719 275.242188 24.101562 274.3125 26.042969 L 272.621094 29.550781 L 272.167969 28.972656 C 271.941406 28.683594 269.835938 24.511719 267.5 19.742188 L 263.292969 11.066406 L 250.761719 11.066406 Z"})]})]})})}),EE=M.createContext(void 0),A8=({children:n})=>{const[e,t]=M.useState(null),[i,s]=M.useState(!0);M.useEffect(()=>{const N=On.onAuthStateChanged(async R=>{try{if(R){const q=en.collection("users").doc(R.uid),te=await q.get();if(te.exists){const W=te.data();t({...W,twoFactorEnabled:W.twoFactorEnabled||!1})}else{const W={uid:R.uid,username:R.displayName||R.email?.split("@")[0]||"Anonymous",profileImage:R.photoURL||void 0,isPremium:!1,creationDate:R.metadata.creationTime||new Date().toISOString(),apiPlan:"free",firstName:"",lastName:"",country:"",twoFactorEnabled:!1};await q.set(W),t(W)}}else t(null)}catch(q){console.error("Auth state change error:",q),t(null)}finally{s(!1)}});return()=>N()},[]);const k={user:e,loading:i,logout:async()=>{sessionStorage.removeItem("isAdminAuthenticated"),await On.signOut()},updateProfileImage:async N=>{if(!e)throw new Error("No user is signed in.");const te=await(await E8.ref(`profile_images/${e.uid}/${N.name}`).put(N)).ref.getDownloadURL(),W=On.currentUser;W&&await W.updateProfile({photoURL:te}),await en.collection("users").doc(e.uid).update({profileImage:te}),t(Ee=>Ee?{...Ee,profileImage:te}:null)},updateUserProfile:async N=>{if(!e)throw new Error("No user is signed in.");await en.collection("users").doc(e.uid).update(N),t(q=>q?{...q,...N}:null)},getAllUsers:async()=>(await en.collection("users").get()).docs.map(q=>q.data()),updateUserPremiumStatus:async(N,R)=>{await en.collection("users").doc(N).update({isPremium:R})},updateUserApiPlan:async(N,R)=>{await en.collection("users").doc(N).update({apiPlan:R})},deleteUser:async N=>{await en.collection("users").doc(N).delete()},deleteCurrentUser:async()=>{const N=On.currentUser;if(!N)throw new Error("No user is currently signed in to delete.");await en.collection("users").doc(N.uid).delete(),await N.delete()},loginOrSignupWithGoogle:async()=>{const N=new an.auth.GoogleAuthProvider;await On.signInWithPopup(N)},loginOrSignupWithGithub:async()=>{const N=new an.auth.GithubAuthProvider;await On.signInWithPopup(N)},loginOrSignupWithFacebook:async()=>{const N=new an.auth.FacebookAuthProvider;await On.signInWithPopup(N)},signInWithEmail:async(N,R)=>{await On.signInWithEmailAndPassword(N,R)},signUpWithEmail:async(N,R)=>{await On.createUserWithEmailAndPassword(N,R)},generateApiKey:async()=>{if(!e)throw new Error("You must be logged in.");const N=crypto.getRandomValues(new Uint8Array(32)),R="sk_live_"+btoa(String.fromCharCode(...N)).replace(/[^A-Za-z0-9]/g,"").substring(0,40);return await en.collection("users").doc(e.uid).update({apiKey:R}),t(te=>te?{...te,apiKey:R}:null),R},getApiUsage:async()=>{if(!e)throw new Error("You must be logged in.");const N=e.apiPlan||"free",R={free:100,developer:1e3,business:1e4};return{count:Math.floor(Math.random()*R[N]),limit:R[N],resetsIn:"23h 59m"}},changePassword:async(N,R)=>{const q=On.currentUser;if(!q||!q.email)throw new Error("No user is signed in or user does not have an email address.");const te=an.auth.EmailAuthProvider.credential(q.email,N);await q.reauthenticateWithCredential(te),await q.updatePassword(R)},updateTwoFactorStatus:async N=>{if(!e)throw new Error("No user is signed in.");await en.collection("users").doc(e.uid).update({twoFactorEnabled:N}),t(q=>q?{...q,twoFactorEnabled:N}:null)},updateBusinessDetails:async N=>{if(!e)throw new Error("No user is signed in.");await en.collection("users").doc(e.uid).update({businessDetails:N}),t(q=>q?{...q,businessDetails:N}:null)},submitProblemReport:async N=>{const R={...N,timestamp:an.firestore.FieldValue.serverTimestamp(),status:"New",userId:e?.uid,userName:e?.username};await en.collection("reports").add(R)},getProblemReports:async()=>(await en.collection("reports").orderBy("timestamp","desc").get()).docs.map(q=>({id:q.id,...q.data()})),updateReportStatus:async(N,R)=>{await en.collection("reports").doc(N).update({status:R})},deleteProblemReport:async N=>{await en.collection("reports").doc(N).delete()},auth:On};return g.jsx(EE.Provider,{value:k,children:i?g.jsx(xE,{}):n})},Dr=()=>{const n=M.useContext(EE);if(n===void 0)throw new Error("useAuth must be used within an AuthProvider");return n},AE=M.createContext(void 0),I8=[{code:"zh-CN",name:"中文 (简体)"},{code:"zh-TW",name:"中文 (繁體)"},{code:"el",name:"Ελληνικά"},{code:"en",name:"English"},{code:"es",name:"Español"},{code:"fr",name:"Français"},{code:"hi",name:"हिन्दी"},{code:"it",name:"Italiano"},{code:"ja",name:"日本語"},{code:"ko",name:"한국어"},{code:"ms",name:"Bahasa Melayu"},{code:"ne",name:"नेपाली"},{code:"pl",name:"Polski"},{code:"pt",name:"Português"},{code:"sv",name:"Svenska"},{code:"th",name:"ภาษาไทย"},{code:"tr",name:"Türkçe"},{code:"vi",name:"Tiếng Việt"}],C8=({children:n})=>{const[e,t]=M.useState(()=>localStorage.getItem("locale")||"en"),[i,s]=M.useState({}),[r,o]=M.useState(!0);M.useEffect(()=>{(async()=>{o(!0);try{const f=await fetch(`/locales/${e}.json`);if(!f.ok)throw new Error(`Could not load ${e}.json`);const m=await f.json();s(m),document.documentElement.dir=["ar"].includes(e)?"rtl":"ltr",document.documentElement.lang=e}catch(f){if(console.error("Failed to load translations:",f),e!=="en"){const y=await(await fetch("/locales/en.json")).json();s(y),document.documentElement.dir="ltr",document.documentElement.lang="en"}}finally{o(!1)}})()},[e]);const a=d=>{localStorage.setItem("locale",d),t(d)},l=M.useCallback((d,f)=>{if(!d)return"";const m=d.split(".");let y=i;for(const v of m)if(y=y?.[v],y===void 0)return console.warn(`Translation key not found: ${d}`),d;return typeof y=="string"&&f&&Object.keys(f).forEach(v=>{const w=new RegExp(`{${v}}`,"g");y=y.replace(w,String(f[v]))}),y||d},[i]),c={locale:e,setLocale:a,t:l};return r?null:g.jsx(AE.Provider,{value:c,children:n})},IE=()=>{const n=M.useContext(AE);if(n===void 0)throw new Error("useI18n must be used within an I18nProvider");return n},S8=({className:n})=>g.jsxs("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 50 50",children:[g.jsxs("g",{fill:"#EE6C4D",fillRule:"evenodd",children:[g.jsx("path",{d:"M5.488.363h21.75c1.78 0 2.43.184 3.082.535a3.66 3.66 0 0 1 1.512 1.512c.348.652.535 1.297.535 3.082v21.746c0 1.78-.187 2.43-.535 3.082a3.66 3.66 0 0 1-1.512 1.512c-.652.348-1.3.535-3.082-.535H5.488c-1.78 0-2.43-.187-3.082-.535A3.66 3.66 0 0 1 .895 30.32c-.348-.652-.535-1.3-.535-3.082V5.488c0-1.78.188-2.43.535-3.082A3.7 3.7 0 0 1 2.406.895c.652-.348 1.3-.53 3.082-.53z"}),g.jsx("path",{d:"M44.563 49.69H22.816c-1.78 0-2.43-.184-3.082-.535a3.6 3.6 0 0 1-1.512-1.512c-.348-.652-.535-1.297-.535-3.082V22.816c0-1.78.184-2.43.535-3.082a3.6 3.6 0 0 1 1.512-1.512c.652-.348 1.3-.535 3.082-.535h21.746c1.785 0 2.43.188 3.082.535.645.34 1.172.867 1.512 1.512.352.652.535 1.3.535 3.082v21.746c0 1.785-.184 2.43-.535 3.082a3.6 3.6 0 0 1-1.512 1.512c-.652.352-1.297.535-3.082.535z"})]}),g.jsx("path",{fill:"#FFF",d:"M17.906 10.965a.87.87 0 0 0-.875.86v3.8L9.84 8.523a.886.886 0 0 0-1.238 0 .85.85 0 0 0-.254.605.86.86 0 0 0 .254.6l7.195 7.098h-3.875c-.484 0-.875.387-.875.86s.4.86.875.86h5.984a.9.9 0 0 0 .332-.066.86.86 0 0 0 .473-.465.8.8 0 0 0 .066-.328v-5.87a.86.86 0 0 0-.87-.86zm14.418 28.008c.48 0 .87-.383.87-.86v-3.797l7.195 7.098a.88.88 0 0 0 1.234 0 .85.85 0 0 0 .258-.605c0-.23-.094-.45-.258-.605l-7.2-7.102h3.875c.484 0 .875-.383.875-.86s-.4-.855-.875-.855h-5.984a.9.9 0 0 0-.336.066.9.9 0 0 0-.473.46.9.9 0 0 0-.066.328v5.87c0 .477.4.86.875.86zm-10.1-10.1c-.355.352-.93.352-1.285 0s-.355-.934 0-1.3a.91.91 0 0 1 1.285 0 .927.927 0 0 1 0 1.3m3.374-3.357a.91.91 0 0 1-1.285 0 .91.91 0 0 1 0-1.285.914.914 0 0 1 1.285 0 .91.91 0 0 1 0 1.285m3.36-3.364a.91.91 0 0 1-1.285 0 .91.91 0 0 1 0-1.285.91.91 0 0 1 1.285 0 .91.91 0 0 1 0 1.285"})]}),P8=({className:n})=>g.jsxs("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 50 50",children:[g.jsxs("g",{fill:"#EE6C4D",fillRule:"evenodd",children:[g.jsx("path",{d:"M5.488.363h21.75c1.78 0 2.43.184 3.082.535a3.66 3.66 0 0 1 1.512 1.512c.348.652.535 1.297.535 3.082v21.746c0 1.78-.187 2.43-.535 3.082a3.66 3.66 0 0 1-1.512 1.512c-.652.348-1.3.535-3.082-.535H5.488c-1.78 0-2.43-.187-3.082-.535A3.66 3.66 0 0 1 .895 30.32c-.348-.652-.535-1.3-.535-3.082V5.488c0-1.78.188-2.43.535-3.082A3.7 3.7 0 0 1 2.406.895c.652-.348 1.3-.53 3.082-.53z"}),g.jsx("path",{d:"M44.563 49.69H22.816c-1.78 0-2.43-.184-3.082-.535a3.6 3.6 0 0 1-1.512-1.512c-.348-.652-.535-1.297-.535-3.082V22.816c0-1.78.184-2.43.535-3.082a3.6 3.6 0 0 1 1.512-1.512c.652-.348 1.3-.535 3.082-.535h21.746c1.785 0 2.43.188 3.082.535.645.34 1.172.867 1.512 1.512.352.652.535 1.3.535 3.082v21.746c0 1.785-.184 2.43-.535 3.082a3.6 3.6 0 0 1-1.512 1.512c-.652.352-1.297.535-3.082.535z"})]}),g.jsx("path",{fill:"#FFF",d:"M9.22 15.87a.87.87 0 0 0 .875-.86v-3.8l7.195 7.102a.88.88 0 0 0 1.234 0 .85.85 0 0 0 0-1.215L11.328 10h3.875c.484 0 .875-.387.875-.86s-.4-.86-.875-.86H9.22a.9.9 0 0 0-.332.066.86.86 0 0 0-.539.793v5.875c0 .473.4.86.87.86zm31.793 18.2a.865.865 0 0 0-.875.855v3.8L32.94 31.63a.88.88 0 0 0-1.234 0 .84.84 0 0 0-.258.605.85.85 0 0 0 .258.605l7.2 7.1H35.02c-.48 0-.87.387-.87.86a.86.86 0 0 0 .871.855H41a.88.88 0 0 0 .805-.527.9.9 0 0 0 .066-.328v-5.883a.87.87 0 0 0-.87-.855zm-18.78-5.187c-.355.352-.93.352-1.285 0s-.355-.934 0-1.3a.91.91 0 0 1 1.285 0 .927.927 0 0 1 0 1.3m3.365-3.367a.91.91 0 0 1-1.285 0 .91.91 0 0 1 0-1.285.914.914 0 0 1 1.285 0 .91.91 0 0 1 0 1.285m3.36-3.364a.91.91 0 0 1-1.285 0 .91.91 0 0 1 0-1.285.91.91 0 0 1 1.285 0 .91.91 0 0 1 0 1.285m0 0"})]}),m_=({className:n})=>g.jsxs("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 50 50",children:[g.jsx("path",{fill:"#8FBC5D",fillRule:"evenodd",d:"M31.523 28h14.953c1.223 0 1.668.13 2.117.367.44.234.805.598 1.04 1.04.242.45.367.895.367 2.117v14.953c0 1.223-.13 1.668-.367 2.117-.234.44-.598-.805-1.04 1.04-.45.242-.895-.367-2.117-.367H31.523c-1.223 0-1.668-.13-2.117-.367a2.52 2.52 0 0 1-1.04-1.04c-.242-.45-.367-.895-.367-2.117V31.523c0-1.223.13-1.668.367-2.117.234-.44.598-.805 1.04-1.04.45-.242.895-.367 2.117-.367zm0-28h14.953c1.223 0 1.668.13 2.117.367.44.234.805.598 1.04 1.04.242.45.367.895.367 2.117v14.953c0 1.223-.13 1.668-.367 2.117-.234.44-.598-.805-1.04 1.04-.45.242-.895-.367-2.117-.367H31.523c-1.223 0-1.668-.13-2.117-.367a2.52 2.52 0 0 1-1.04-1.04c-.242-.45-.367-.895-.367-2.117V3.523c0-1.223.13-1.668.367-2.117.234-.44.598-.805 1.04-1.04C29.855.125 30.3 0 31.523 0m-28 28h14.953c1.223 0 1.668.13 2.117.367.44.234.805.598 1.04 1.04.242.45.367.895.367 2.117v14.953c0 1.223-.13 1.668-.367 2.117-.234.44-.598-.805-1.04 1.04-.45.242-.895-.367-2.117-.367H3.523c-1.223 0-1.668-.13-2.117-.367a2.52 2.52 0 0 1-1.04-1.04C.125 48.145 0 47.7 0 46.477V31.523c0-1.223.13-1.668.367-2.117.234-.44.598-.805 1.04-1.04.45-.242.895-.367 2.117-.367zm0-28h14.953c1.223 0 1.668.13 2.117.367.44.234.805.598 1.04 1.04.242.45.367.895.367 2.117v14.953c0 1.223-.13 1.668-.367 2.117-.234.44-.598-.805-1.04 1.04-.45.242-.895-.367-2.117-.367H3.523c-1.223 0-1.668-.13-2.117-.367a2.52 2.52 0 0 1-1.04-1.04C.125 20.145 0 19.7 0 18.477V3.523C0 2.3.13 1.852.367 1.406A2.56 2.56 0 0 1 1.406.367C1.855.13 2.3 0 3.523 0m0 0"}),g.jsx("path",{fill:"#FFF",d:"M35 41.8c0 .48.398.867.883.867a.88.88 0 0 0 .883-.867v-3.844l5.145 5.05a.89.89 0 0 0 1.246 0 .85.85 0 0 0 .262-.613c0-.23-.094-.45-.262-.613l-5.14-5.047h3.914a.88.88 0 0 0 .883-.867.874.874 0 0 0-.883-.867h-6.05a.875.875 0 0 0-.817.536.8.8 0 0 0-.066.328zm7.3-26.387c.48 0 .867-.398.867-.883a.88.88 0 0 0-.867-.883h-3.844l5.05-5.14a.9.9 0 0 0 0-1.25.86.86 0 0 0-1.227 0l-5.047 5.148V8.492a.876.876 0 0 0-.867-.883.87.87 0 0 0-.867.879v6.05c0 .113.023.23.066.336a.86.86 0 0 0 .47.477.8.8 0 0 0 .332.07H42.3zM8.46 35c-.48 0-.867.398-.867.883s.387.883.867.883h3.844L7.254 41.9a.893.893 0 0 0 0 1.25.86.86 0 0 0 .613.258c.23 0 .45-.094.613-.258l5.047-5.145v3.914c0 .488.387.883.867.883s.867-.402.867-.883v-6.05a.875.875 0 0 0-.536-.813.8.8 0 0 0-.332-.07H8.46zm6.074-27.406a.874.874 0 0 0-.883.867v3.844l-5.145-5.05a.9.9 0 0 0-1.25 0A.86.86 0 0 0 7 7.867c0 .23.094.45.258.613l5.145 5.047H8.488c-.488 0-.883.387-.883.867s.402.867.883.867h6.05a.9.9 0 0 0 .336-.066c.215-.1.39-.258.477-.47.05-.102.07-.22.07-.332V8.46a.874.874 0 0 0-.883-.867zm0 0"})]}),g_=({className:n})=>g.jsxs("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 50 50",children:[g.jsx("path",{fill:"#5F83C6",fillRule:"evenodd",d:"M17.676 34.344h9.55c2.477 0 3.375-.258 4.28-.742a5.04 5.04 0 0 0 2.098-2.102c.484-.902.742-1.8.742-4.277v-9.547H44.82c1.8 0 2.453.188 3.113.54s1.176.87 1.527 1.527.54 1.31.54 3.113V44.82c0 1.8-.187 2.453-.54 3.113a3.7 3.7 0 0 1-1.527 1.527c-.66.352-1.312.54-3.113.54H22.855c-1.8 0-2.453-.187-3.113-.54s-1.172-.87-1.527-1.527-.54-1.312-.54-3.113zm0 0"}),g.jsx("path",{fill:"#FFF",d:"M43.94 37.137c0-.477-.395-.863-.883-.863s-.883.387-.883.863v3.844l-5.145-5.047a.893.893 0 0 0-1.25 0 .85.85 0 0 0-.258.609.86.86 0 0 0 .258.613l5.145 5.05H37.01c-.488 0-.883.387-.883.867s.395.867.883.867h6.05a.9.9 0 0 0 .336-.07.87.87 0 0 0 .477-.465.8.8 0 0 0 .066-.332l.004-5.934zm0 0"}),g.jsx("path",{fill:"#DCE5FA",fillRule:"evenodd",d:"M27.145 32.324H5.18c-1.8 0-2.453-.187-3.113-.543S.89 30.914.54 30.254 0 28.95 0 27.145V5.18c0-1.8.188-2.453.54-3.113A3.7 3.7 0 0 1 2.066.539C2.727.188 3.38 0 5.18 0h21.965c1.8 0 2.453.188 3.113.54s1.172.87 1.527 1.527.54 1.313.54 3.113v21.965c0 1.8-.187 2.453-.54 3.113s-.87 1.176-1.527 1.527-1.312.54-3.113.54zm0 0"}),g.jsx("path",{fill:"#295795",d:"M20.844 8.61h2.96l-2.94 14.64H17.77l-1.777-9.035-1.824 9.035h-3.203L8.04 8.61h3.164l1.508 9.363L14.65 8.61h3.004l.04.203 1.688 9.1zm0 0"})]}),y_=({className:n})=>g.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm-2 14h-2v-2h2v2zm0-4h-2V9h2v3z"})}),v_=({className:n})=>g.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm-2 14h-4v-2h4v2zm0-4h-4v-2h4v2zm0-4h-4V6h4v2z"})}),R8=({className:n})=>g.jsxs("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",fill:"none",fillRule:"evenodd",viewBox:"0 0 100 100",children:[g.jsx("path",{fill:"#ab6993",d:"M16.024 0h67.95c5.572 0 7.593.58 9.63 1.67s3.636 2.688 4.725 4.725 1.67 4.058 1.67 9.63v67.95c0 5.572-.58 7.593-1.67 9.63s-2.688 3.636-4.725 4.725-4.058 1.67-9.63 1.67h-67.95c-5.572 0-7.593-.58-9.63-1.67S2.76 95.642 1.67 93.605 0 89.548 0 83.976v-67.95c0-5.572.58-7.593 1.67-9.63S4.358 2.76 6.395 1.67 10.452 0 16.024 0"}),g.jsx("path",{fill:"#fff",d:"m57.98 39.967 5.413 4.398a.51.51 0 0 1-.092.847l-6.234 3.142a1.4 1.4 0 0 1-.388.124l-.136.016a1.44 1.44 0 0 1-1.031-.31 1.34 1.34 0 0 1-.48-1.336l.037-.134 2.108-6.5a.51.51 0 0 1 .803-.238zm15.55-20.523a4.33 4.33 0 0 1 5.728-.648l.182.136 1.06.88a4.14 4.14 0 0 1 1.486 2.821 4.12 4.12 0 0 1-.82 2.849l-.148.184-14.9 17.566c-.36.425-.995.48-1.423.125l-5.915-4.9a1.007 1.007 0 0 1-.133-1.43z"}),g.jsx("g",{stroke:"#eadae4",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3.046",children:g.jsx("path",{d:"M48.012 62.483h-7.356m7.356-24.49h-7.356M44.232 39.695l.004 21.566"})}),g.jsx("path",{fill:"#fff",fillRule:"nonzero",d:"M24 22.985c-.523 0-.954.396-1.01.905l-.006.11v52c0 .523.396.954.905 1.01l.11.006h52c.523 0 .954-.396 1.01-.905l.006-.11V42.302a1.016 1.016 0 0 0-2.025-.11l-.006.11v32.682h-49.97v-49.97h34.7c.523 0 .954-.396 1.01-.905l.006-.11c0-.523-.396-.954-.905-1.01l-.11-.006H24z"}),g.jsxs("g",{fill:"#eadae4",children:[g.jsx("rect",{width:"12",height:"12",x:"18",y:"18",rx:"6"}),g.jsx("rect",{width:"12",height:"12",x:"18",y:"70",rx:"6"}),g.jsx("rect",{width:"12",height:"12",x:"70",y:"70",rx:"6"})]})]}),__=({className:n})=>g.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M14 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V8l-6-6zm-1.25 10.5H11v1h1.75c.41 0 .75-.34.75-.75s-.34-.75-.75-.75zm-1-2.25H11v1h1.75c.41 0 .75-.34.75-.75s-.34-.75-.75-.75zm-2 4.5h-.75v1.5h-1.5v-1.5H8v-4.5h3v4.5z"})}),w_=({className:n})=>g.jsxs("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 50 50",children:[g.jsx("path",{fill:"#FBEFA8",fillRule:"evenodd",d:"M17.676 34.344h9.55c2.477 0 3.375-.258 4.28-.742a5.04 5.04 0 0 0 2.098-2.102c.484-.902.742-1.8.742-4.277v-9.547H44.82c1.8 0 2.453.188 3.113.54s1.176.87 1.527 1.527.54 1.31.54 3.113V44.82c0 1.8-.187 2.453-.54 3.113a3.7 3.7 0 0 1-1.527 1.527c-.66.352-1.312.54-3.113.54H22.855c-1.8 0-2.453-.187-3.113-.54s-1.172-.87-1.527-1.527-.54-1.312-.54-3.113zm0 0"}),g.jsx("path",{fill:"#B7A001",d:"M43.94 37.137c0-.477-.395-.863-.883-.863s-.883.387-.883.863v3.844l-5.145-5.047a.893.893 0 0 0-1.25 0 .85.85 0 0 0-.258.609.86.86 0 0 0 .258.613l5.145 5.05H37.01c-.488 0-.883.387-.883.867s.395.867.883.867h6.05a.9.9 0 0 0 .336-.07.87.87 0 0 0 .477-.465.8.8 0 0 0 .066-.332l.004-5.934zm0 0"}),g.jsxs("g",{fillRule:"evenodd",children:[g.jsx("path",{fill:"#D6BF2D",d:"M5.184 0h21.988c1.8 0 2.453.188 3.113.54.652.344 1.184.88 1.527 1.53.352.656.54 1.313.54 3.113v21.984c0 1.805-.187 2.457-.54 3.117a3.67 3.67 0 0 1-1.527 1.527c-.66.352-1.312.54-3.113.54H5.184c-1.8 0-2.457-.187-3.113-.54a3.67 3.67 0 0 1-1.527-1.527C.188 29.625 0 28.973 0 27.168V5.184c0-1.8.188-2.457.54-3.113.344-.652.88-1.184 1.53-1.53S3.383 0 5.184 0m0 0"}),g.jsx("path",{fill:"#FFF",d:"M10.28 12.945v4.688c0 1.66-.926 2.66-2.707 2.66C5.406 20.293 5 18.852 5 18.07c0-.668.31-1.098.86-1.098.648 0 .813.504.813 1.05 0 .516.242.89.88.89.594 0 .926-.44.926-1.3V12.95c0-.54.352-.898.902-.898s.902.36.902.898zm1.672 6.402v-6.102c0-.8.418-1.055 1.055-1.055h2.762c1.516 0 2.738.75 2.738 2.508 0 1.44-1 2.508-2.75 2.508h-2v2.152c0 .54-.355.902-.902.902s-.902-.363-.902-.902zm1.805-5.773v2.242h1.68c.727 0 1.266-.437 1.266-1.12 0-.793-.56-1.12-1.45-1.12zm13.285 3.1v2.984a.595.595 0 0 1-.613.602c-.52 0-.66-.32-.773-1.023-.516.648-1.23 1.066-2.352 1.066-2.793 0-3.863-1.926-3.863-4.145 0-2.676 1.672-4.148 4.125-4.148 2.004 0 3.07 1.2 3.07 1.902 0 .63-.46.793-.848.793-.89 0-.56-1.242-2.32-1.242-1.242 0-2.223.813-2.223 2.816 0 1.56.77 2.637 2.246 2.637.957 0 1.793-.648 1.88-1.617H24.2c-.383 0-.812-.14-.812-.69 0-.44.254-.69.703-.69h2.223c.527 0 .738.262.738.758zm0 0"})]})]}),b_=({className:n})=>g.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:g.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})}),T_=({className:n})=>g.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M4 8h4V4H4v4zm6 12h4v-4h-4v4zm-6 0h4v-4H4v4zm0-6h4v-4H4v4zm6 0h4v-4h-4v4zm6-10v4h4V4h-4zm-6 4h4V4h-4v4zm6 6h4v-4h-4v4zm0 6h4v-4h-4v4z"})}),k8=({className:n})=>g.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 16.5V9.75m0 0l-3.75 3.75M12 9.75l3.75 3.75M17.25 21H6.75c-1.035 0-1.875-.84-1.875-1.875V15.75c0-1.035.84-1.875 1.875-1.875h10.5c1.035 0 1.875.84 1.875 1.875v3.375c0 1.035-.84 1.875-1.875-1.875z"})}),CW=({className:n})=>g.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"})}),N8=({className:n})=>g.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M14.06 9.02l.92.92L5.92 19H5v-.92l9.06-9.06M17.66 3c-.25 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29zm-3.6 3.19L3 17.25V21h3.75L17.81 9.94l-3.75-3.75z"})}),x_=({className:n})=>g.jsxs("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 50 50",children:[g.jsx("path",{fill:"#AB6993",fillRule:"evenodd",d:"M8.012 0h33.977c2.785 0 3.797.29 4.816.836a5.66 5.66 0 0 1 2.36 2.363c.547 1.016.836 2.027.836 4.813v33.977c0 2.785-.29 3.797-.836 4.816a5.67 5.67 0 0 1-2.36 2.36c-1.02.547-2.03.836-4.816.836H8.012c-2.785 0-3.797-.29-4.816-.836a5.67 5.67 0 0 1-2.36-2.36C.29 45.785 0 44.773 0 41.988V8.012c0-2.785.29-3.797.836-4.816A5.64 5.64 0 0 1 3.2.836C4.215.29 5.227 0 8.012 0m0 0"}),g.jsx("path",{fill:"#FFF",d:"M22.7 22.523c0 .863-1.094 3.023-2.11 4.668a.68.68 0 0 0-.078.523.64.64 0 0 0 .61.47h7.75a.63.63 0 0 0 .566-.352.65.65 0 0 0-.055-.672c-1.445-1.97-2.1-3.398-2.1-4.633s.645-2.66 2.094-4.637a5.5 5.5 0 0 0 1.012-3.195c0-3.02-2.422-5.477-5.398-5.477s-5.398 2.45-5.398 5.473a5.5 5.5 0 0 0 1.02 3.203c1.44 1.97 2.086 3.398 2.086 4.63zm14.02 6.55H13.266a.64.64 0 0 0-.633.645v6.465c0 .352.285.645.633.645H36.72a.64.64 0 0 0 .633-.645V29.72a.643.643 0 0 0-.633-.645zm-3.582 8.7H16.863a.64.64 0 0 0-.633.645v.727c0 .352.285.645.633.645h16.273a.64.64 0 0 0 .633-.645v-.727a.643.643 0 0 0-.633-.645zm0 0"})]}),M8=({className:n})=>g.jsxs("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",fillRule:"evenodd",viewBox:"0 0 50 50",children:[g.jsx("path",{fill:"#AB6993",d:"M8.012 0h33.976c2.786 0 3.796.3 4.815.835a5.7 5.7 0 0 1 2.363 2.363c.545 1.02.835 2.03.835 4.815v33.976c0 2.786-.3 3.796-.835 4.815a5.7 5.7 0 0 1-2.363 2.363c-1.02.545-2.03.835-4.815.835H8.012c-2.786 0-3.796-.3-4.815-.835a5.7 5.7 0 0 1-2.363-2.363C.3 45.784 0 44.774 0 41.988V8.012c0-2.786.3-3.796.835-4.815A5.7 5.7 0 0 1 3.197.835C4.216.3 5.226 0 8.012 0"}),g.jsxs("g",{fill:"#FFF",children:[g.jsx("path",{fillRule:"nonzero",d:"M23.366 13.26a1.25 1.25 0 1 1 .318 2.48c-5.352.686-9.434 5.212-9.434 10.638 0 4.407 2.692 8.285 6.726 9.926a1.25 1.25 0 0 1-.942 2.316c-4.963-2.02-8.284-6.804-8.284-12.242 0-6.697 5.03-12.273 11.616-13.118m14.778 11.437a1.25 1.25 0 1 1-2.475.354 11.6 11.6 0 0 0-.905-3.163 1.25 1.25 0 1 1 2.278-1.03 14 14 0 0 1 1.102 3.84zM26.71 39.493a1.25 1.25 0 0 1-.354-2.475c1.1-.157 2.125-.445 3.09-.872a1.25 1.25 0 0 1 1.013 2.286 14 14 0 0 1-3.748 1.06zm8.792-4.998a1.25 1.25 0 1 1-2-1.5q1.078-1.434 1.627-2.866a1.25 1.25 0 1 1 2.335.893C37 32.206 36.35 33.36 35.5 34.495z"}),g.jsx("path",{d:"M24.282 21a.786.786 0 0 1-.78-.78V9.28c0-.427.354-.78.78-.78.208 0 .403.085.55.232l5.47 5.47c.146.146.232.342.232.55s-.085.403-.232.55l-5.47 5.47a.78.78 0 0 1-.55.232z"})]})]}),D8=({className:n})=>g.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M8 10h1.5v1.5H8V10zm5.5 5H15v-1.5h-1.5V15zM20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zM9.5 15H8v-1.5h1.5V15zm0-3H8V9h1.5v3zm3.5 3H12V9h1.5v6zm3.5-3h-1.5v-1.5H18V9h-3v6h1.5v-1.5H18v-3z"})}),L8=({className:n})=>g.jsxs("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",fillRule:"evenodd",viewBox:"0 0 100 100",children:[g.jsx("path",{fill:"#4a7aab",d:"M16.024 0h67.95c5.572 0 7.593.58 9.63 1.67s3.636 2.688 4.725 4.725 1.67 4.058 1.67 9.63v67.95c0 5.572-.58 7.593-1.67 9.63s-2.688 3.636-4.725 4.725-4.058 1.67-9.63 1.67h-67.95c-5.572 0-7.593-.58-9.63-1.67S2.76 95.642 1.67 93.605 0 89.548 0 83.976v-67.95c0-5.572.58-7.593 1.67-9.63S4.358 2.76 6.395 1.67 10.452 0 16.024 0"}),g.jsx("path",{fill:"#fff",fillRule:"nonzero",d:"M70.607 44.156h-30.35l.033-10.502c.18-2.232 1.377-4.486 3.2-6.03 1.898-1.603 4.092-2.37 6.652-2.344a12 12 0 0 1 .91.043c4.586.37 8.4 4.088 8.68 8.466.03.43.014.8-.005 1.636l-.05 2.586a2.64 2.64 0 0 0 2.602 2.678c1.482-.012 2.657-1.145 2.678-2.602l.048-2.54c.023-.992.034-1.492-.004-2.1-.447-6.933-6.39-12.815-13.527-13.4a20 20 0 0 0-1.28-.06h-.183c-3.77 0-7.11 1.208-9.933 3.593-2.873 2.432-4.763 6.035-5.053 9.633-.02.225-.074.925-.05 10.93h-5.582c-.77 0-1.393.625-1.393 1.393v29.525c0 .77.625 1.393 1.393 1.393h41.214c.77 0 1.393-.625 1.393-1.393V45.55c0-.77-.623-1.393-1.393-1.393zM53.415 68.06h-6.83l1.043-8.468c-1.006-.707-1.66-1.85-1.66-3.14 0-2.145 1.805-3.884 4.033-3.884s4.033 1.74 4.033 3.884c0 1.3-.653 2.434-1.66 3.14l1.042 8.468z"})]}),F8=({className:n})=>g.jsxs("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100",children:[g.jsx("path",{fill:"#4A7AAB",d:"M16.024 0h67.95c5.572 0 7.593.58 9.63 1.67s3.636 2.688 4.725 4.725 1.67 4.058 1.67 9.63v67.95c0 5.572-.58 7.593-1.67 9.63s-2.688 3.636-4.725 4.725-4.058 1.67-9.63 1.67h-67.95c-5.572 0-7.593-.58-9.63-1.67S2.76 95.642 1.67 93.605 0 89.548 0 83.976v-67.95c0-5.572.58-7.593 1.67-9.63S4.358 2.76 6.395 1.67 10.452 0 16.024 0"}),g.jsxs("g",{fill:"#fff",children:[g.jsx("path",{d:"M49.485 21.715a2.5 2.5 0 0 1 2.031 0l21.5 9.556a2.5 2.5 0 0 1 1.485 2.285V47.89c0 14.445-10 27.82-23.407 31.095a2.5 2.5 0 0 1-1.186 0C36.5 75.708 26.5 62.334 26.5 47.89V33.556a2.5 2.5 0 0 1 1.485-2.285zM31.5 35.18v12.71c0 11.97 8.165 23.116 19 26.084 10.835-2.968 19-14.113 19-26.084V35.18l-19-8.444z"}),g.jsx("path",{d:"M53.89 58.493h-7.713l1.178-9.56c-1.136-.798-1.874-2.088-1.874-3.546 0-2.422 2.038-4.386 4.553-4.386s4.553 1.964 4.553 4.386c0 1.457-.738 2.748-1.874 3.546l1.176 9.56z"})]})]}),V8=({className:n})=>g.jsxs("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 100 100",children:[g.jsxs("defs",{children:[g.jsx("path",{id:"a",d:"m22 28.172 9.074 9.146c.67.675 1.755.675 2.424 0a1.74 1.74 0 0 0 0-2.444L23.212 24.506a1.704 1.704 0 0 0-2.424 0L10.502 34.874a1.74 1.74 0 0 0 0 2.444c.67.675 1.755.675 2.424 0z"}),g.jsx("path",{id:"b",d:"m22 71.668 9.074-9.146a1.704 1.704 0 0 1 2.424 0 1.74 1.74 0 0 1 0 2.444L23.212 75.334a1.704 1.704 0 0 1-2.424 0L10.502 64.966a1.74 1.74 0 0 1 0-2.444 1.704 1.704 0 0 1 2.424 0z"})]}),g.jsx("path",{fill:"#f5c5b3",d:"M63.05 56h29.9c2.452 0 3.34.255 4.237.735s1.6 1.183 2.08 2.08S100 60.6 100 63.05v29.9c0 2.452-.255 3.34-.735 4.237s-1.183 1.6-2.08 2.08S95.4 100 92.95 100h-29.9c-2.452 0-3.34-.255-4.237-.735s-1.6-1.183-2.08-2.08S56 95.4 56 92.95v-29.9c0-2.452.255-3.34.735-4.237s1.183-1.6 2.08-2.08S60.6 56 63.05 56"}),g.jsx("path",{fill:"#ee6c4d",d:"M7.05 0h29.9c2.452 0 3.34.255 4.237.735s1.6 1.183 2.08 2.08S44 4.6 44 7.05v85.9c0 2.452-.255 3.34-.735 4.237s-1.183 1.6-2.08 2.08S39.4 100 36.95 100H7.05c-2.452 0-3.34-.255-4.237-.735s-1.6-1.183-2.08-2.08S0 95.4 0 92.95V7.05C0 4.6.255 3.7.735 2.814s1.183-1.6 2.08-2.08S4.6 0 7.05 0"}),g.jsx("path",{fill:"#f5c5b3",d:"M63.05 0h29.9c2.452 0 3.34.255 4.237.735s1.6 1.183 2.08 2.08S100 4.6 100 7.05v29.9c0 2.452-.255 3.34-.735 4.237s-1.183 1.6-2.08 2.08S95.4 44 92.95 44h-29.9c-2.452 0-3.34-.255-4.237-.735s-1.6-1.183-2.08-2.08S56 39.4 56 36.95V7.05c0-2.452.255-3.34.735-4.237s1.183-1.6 2.08-2.08S60.6 0 63.05 0"}),g.jsx("path",{fill:"#b63c23",d:"m70.394 27.743 5.227-13.536c.345-.893.986-1.206 1.972-1.206h.96c.912 0 1.726.217 2.17 1.448l4.88 13.295c.148.386.394 1.086.394 1.52 0 .965-.863 1.737-1.898 1.737-.888 0-1.53-.314-1.824-1.086L81.24 27.02h-6.508l-1.06 2.895c-.27.772-.838 1.086-1.8 1.086-1.1 0-1.874-.676-1.874-1.737 0-.434.247-1.134.394-1.52zm9.96-3.475-2.293-6.973h-.05l-2.4 6.973h4.733zM71 83.733V71.267c0-1.724.884-2.267 2.233-2.267h5.07c2.8 0 6.116.638 6.116 4.392a3.62 3.62 0 0 1-2.349 3.447v.047c1.767.472 2.93 1.747 2.93 4.085 0 3.565-2.86 5.03-6.163 5.03h-5.605C71.884 86 71 85.457 71 83.733m3.814-5.3v4.58h3.2c1.488 0 3.163-.307 3.163-2.267 0-2.054-1.767-2.314-3.628-2.314h-2.744zm0-6.6v4.156h3.14c1.8 0 2.65-.732 2.65-2.078 0-1.63-1.35-2.078-2.767-2.078z"}),g.jsxs("g",{fill:"#fff",children:[g.jsx("use",{xlinkHref:"#a"}),g.jsx("use",{xlinkHref:"#b"}),g.jsx("ellipse",{cx:"22",cy:"49.92",rx:"5.143",ry:"5.184"})]})]}),O8=({className:n})=>g.jsxs("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",fillRule:"evenodd",viewBox:"0 0 100 100",children:[g.jsx("path",{fill:"#c0cfe1",d:"M64.706 31.342H45.6c-4.957 0-6.755.516-8.567 1.485s-3.235 2.392-4.204 4.204-1.485 3.6-1.485 8.567v19.107H10.37c-3.605 0-4.913-.375-6.23-1.08a7.35 7.35 0 0 1-3.057-3.057C.375 59.25 0 57.943 0 54.337V10.37c0-3.605.375-4.913 1.08-6.23a7.35 7.35 0 0 1 3.058-3.06C5.456.375 6.763 0 10.37 0h43.97c3.605 0 4.913.375 6.23 1.08a7.35 7.35 0 0 1 3.057 3.057c.705 1.318 1.08 2.625 1.08 6.23V31.34z"}),g.jsx("path",{fill:"#204160",fillRule:"nonzero",d:"M27.94 14.624a1.696 1.696 0 1 0-3.394 0v7.525l-9.887-9.887a1.697 1.697 0 1 0-2.4 2.4l9.887 9.887h-7.523a1.697 1.697 0 1 0 0 3.394h11.62a1.7 1.7 0 0 0 .647-.131 1.69 1.69 0 0 0 1.047-1.564V14.624z"}),g.jsx("path",{fill:"#4A7AAB",d:"M45.663 35.294h43.97c3.605 0 4.913.375 6.23 1.08a7.35 7.35 0 0 1 3.057 3.057c.705 1.318 1.08 2.625 1.08 6.23v43.97c0 3.605-.375 4.913-1.08 6.23a7.35 7.35 0 0 1-3.057 3.057c-1.318.705-2.625 1.08-6.23 1.08h-43.97c-3.605 0-4.913-.375-6.23-1.08a7.35 7.35 0 0 1-3.057-3.057c-.705-1.318-1.08-2.625-1.08-6.23v-43.97c0-3.605.375-4.913 1.08-6.23a7.35 7.35 0 0 1 3.057-3.057c1.318-.705 2.625-1.08 6.23-1.08"}),g.jsx("path",{fill:"#fff",d:"m49.288 78.12 8.604-22.644c.216-.576.576-1.476 1.98-1.476.828 0 1.872.684 1.872 1.836 0 .396-.144.792-.288 1.188l-8.604 22.644c-.216.576-.576 1.476-1.98 1.476-.828 0-1.872-.684-1.872-1.836 0-.396.144-.792.288-1.188m14.415-1.98 7.632-20.196c.504-1.332 1.44-1.8 2.88-1.8h1.404c1.332 0 2.52.324 3.168 2.16l7.128 19.836c.216.576.576 1.62.576 2.268 0 1.44-1.26 2.592-2.772 2.592-1.296 0-2.232-.468-2.664-1.62l-1.512-4.32H70.04l-1.548 4.32c-.396 1.152-1.224 1.62-2.628 1.62-1.62 0-2.736-1.008-2.736-2.592 0-.648.36-1.692.576-2.268zm14.544-5.184L74.9 60.552h-.072l-3.492 10.404h6.912z"})]}),U8=({className:n})=>g.jsxs("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",fillRule:"evenodd",viewBox:"0 0 50 50",children:[g.jsx("path",{fill:"#8FBC5D",d:"M8.012 0h33.977c2.785 0 3.797.29 4.816.836a5.66 5.66 0 0 1 2.36 2.363c.547 1.016.836 2.027.836 4.813v33.977c0 2.785-.29 3.797-.836 4.816a5.67 5.67 0 0 1-2.36 2.36c-1.02.547-2.03.836-4.816.836H8.012c-2.785 0-3.797-.29-4.816-.836a5.67 5.67 0 0 1-2.36-2.36C.29 45.785 0 44.773 0 41.988V8.012c0-2.785.29-3.797.836-4.816A5.64 5.64 0 0 1 3.2.836C4.215.29 5.227 0 8.012 0m0 0"}),g.jsx("path",{fill:"#FFF",d:"M20.816 27.363a.5.5 0 0 1 .18.39c0 .12-.04.234-.113.324l-6.563 7.906a.51.51 0 0 1-.715.063.52.52 0 0 1-.18-.391.53.53 0 0 1 .117-.328l6.56-7.902a.5.5 0 0 1 .71-.063zm2.13 1.793a.51.51 0 0 1 .066.715l-6.562 7.906a.5.5 0 0 1-.344.18.5.5 0 0 1-.367-.117.52.52 0 0 1-.18-.391c0-.12.04-.234.117-.328l6.56-7.902a.505.505 0 0 1 .714-.063zm-10.816 5.31a2.764 2.764 0 0 0 .344 3.86l1.238 1.043a2.72 2.72 0 0 0 3.836-.352l6.953-8.367L19.988 25zm21.13-18.527a4.4 4.4 0 0 1 1.32-1.062l.313-.16c.387-.203.723-.473.996-.8l1.04-1.25c.137-.164.078-.44-.13-.613l-1.69-1.418c-.21-.176-.488-.184-.625-.02l-1.04 1.25a3.3 3.3 0 0 0-.609 1.125l-.102.336a4.3 4.3 0 0 1-.805 1.492L26.5 21.32l1.29 1.18zm3.082 21.637a1.81 1.81 0 0 1-1.305.484 1.8 1.8 0 0 1-1.262-.578 1.824 1.824 0 0 1 .094-2.574 1.8 1.8 0 0 1 1.301-.484 1.8 1.8 0 0 1 1.266.578 1.83 1.83 0 0 1-.094 2.574M24.1 20.996c-.906-.848-1.36-2.1-1.156-3.316a6.05 6.05 0 0 0-1.527-5.094 6 6 0 0 0-4.852-1.906.376.376 0 0 0-.246.63l2.742 2.965a1.46 1.46 0 0 1-.074 2.051l-2.492 2.324c-.28.262-.656.402-1.04.387a1.44 1.44 0 0 1-1.008-.461l-2.734-2.953a.37.37 0 0 0-.387-.102.37.37 0 0 0-.262.305c-.25 1.773.273 3.648 1.6 5.035a6.01 6.01 0 0 0 4.836 1.852 3.75 3.75 0 0 1 3.215 1.398L32.5 38.828c1.38 1.484 3.7 1.566 5.18.19s1.563-3.72.19-5.2zm0 0"})]}),B8=({className:n})=>g.jsxs("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",fillRule:"evenodd",viewBox:"0 0 50 50",children:[g.jsx("path",{fill:"#AB6993",d:"M31.523 28h14.953c1.223 0 1.668.13 2.117.367.44.234.805.598 1.04 1.04.242.45.367.895.367 2.117v14.953c0 1.223-.13 1.668-.367 2.117-.234.44-.598-.805-1.04 1.04-.45.242-.895-.367-2.117-.367H31.523c-1.223 0-1.668-.13-2.117-.367a2.52 2.52 0 0 1-1.04-1.04c-.242-.45-.367-.895-.367-2.117V31.523c0-1.223.13-1.668.367-2.117.234-.44.598-.805 1.04-1.04.45-.242.895-.367 2.117-.367zm0-28h14.953c1.223 0 1.668.13 2.117.367.44.234.805.598 1.04 1.04.242.45.367.895.367 2.117v14.953c0 1.223-.13 1.668-.367 2.117-.234.44-.598-.805-1.04 1.04-.45.242-.895-.367-2.117-.367H31.523c-1.223 0-1.668-.13-2.117-.367a2.52 2.52 0 0 1-1.04-1.04c-.242-.45-.367-.895-.367-2.117V3.523c0-1.223.13-1.668.367-2.117.234-.44.598-.805 1.04-1.04C29.855.125 30.3 0 31.523 0m-28 28h14.953c1.223 0 1.668.13 2.117.367.44.234.805.598 1.04 1.04.242.45.367.895.367 2.117v14.953c0 1.223-.13 1.668-.367 2.117-.234.44-.598-.805-1.04 1.04-.45.242-.895-.367-2.117-.367H3.523c-1.223 0-1.668-.13-2.117-.367a2.52 2.52 0 0 1-1.04-1.04C.125 48.145 0 47.7 0 46.477V31.523c0-1.223.13-1.668.367-2.117.234-.44.598-.805 1.04-1.04.45-.242.895-.367 2.117-.367zm0-28h14.953c1.223 0 1.668.13 2.117.367.44.234.805.598 1.04 1.04.242.45.367.895.367 2.117v14.953c0 1.223-.13 1.668-.367 2.117-.234.44-.598-.805-1.04 1.04-.45.242-.895-.367-2.117-.367H3.523c-1.223 0-1.668-.13-2.117-.367a2.52 2.52 0 0 1-1.04-1.04C.125 20.145 0 19.7 0 18.477V3.523C0 2.3.13 1.852.367 1.406A2.56 2.56 0 0 1 1.406.367C1.855.13 2.3 0 3.523 0m0 0"}),g.jsx("path",{fill:"#FFF",d:"M10.34 14.27V9.33H8.664c-.43 0-.664-.156-.664-.687 0-.484.262-.613.938-.742l.48-.105C10.86 7.48 10.457 6 11.566 6c.418 0 .754.184.754.883v7.387c0 .676-.258 1.14-.988 1.14s-.988-.465-.988-1.14zm27.31-.668h3.902c.492 0 .855.234.855.816s-.363.82-.96.82H36.57c-.754 0-1.066-.508-1.066-.96 0-.926.82-1.953 2.445-2.977 1.81-1.145 2.43-1.38 2.43-2.434 0-.848-.648-1.313-1.363-1.313-.832 0-1.39.34-1.676 1.38-.133.48-.3.727-.82.727-.535 0-.95-.22-.95-.87 0-1.586 1.56-2.8 3.47-2.8 2.082 0 3.316 1.367 3.316 2.563 0 1.73-.793 2.398-2.172 3.184-1.47.832-2.363 1.367-2.535 1.86zM7.5 41.664a.88.88 0 0 1 .922-.91c1.156 0 .535 1.598 2.328 1.598.977 0 1.5-.598 1.5-1.402 0-.625-.273-1.082-1.172-1.172-.363-.04-1.078-.102-1.078-.703 0-.676.39-.816 1.133-.855.648-.04.988-.418.988-1.016 0-.777-.613-1.145-1.3-1.145-1.574 0-1.21 1.484-2.234 1.484-.445 0-.87-.2-.87-.78 0-1.586 1.883-2.262 3.145-2.262 2.25 0 3.082 1.262 3.082 2.523 0 .832-.38 1.43-1.102 1.82.977.27 1.39 1.05 1.39 2.027 0 2.055-1.586 3.04-3.508 3.04-2.445 0-3.21-1.52-3.21-2.246zm31.75-1.484v-3.367h-.023l-2.512 3.367zm0 2.824v-1.34h-3.262c-.676 0-.988-.48-.988-.898 0-.336.078-.547.246-.766l4.004-5.137c.2-.258.48-.363.852-.363.703 0 .973.38.973.938v4.75h.652c.44 0 .727.31.727.738s-.285.742-.727.742h-.652v1.34c0 .547-.23.9-.9.9s-.906-.363-.906-.9zm0 0"})]}),z8=({className:n})=>g.jsxs("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 50 50",children:[g.jsx("path",{fill:"#EE6C4D",d:"M8 0h34c2.783 0 3.826.26 4.783.87a5.118 5.118 0 0 1 2.347 2.347c.522 1.044.87 2 .87 4.783v34c0 2.783-.26 3.826-.87 4.783a5.118 5.118 0 0 1-2.347 2.347c-1.044.522-2 .87-4.783.87H8c-2.783 0-3.826-.26-4.783-.87-.956-.608-1.826-1.304-2.347-2.347C.348 45.739 0 44.783 0 42V8c0-2.783.26-3.826.87-4.783A5.119 5.119 0 0 1 3.217.87C4.174.26 5.217 0 8 0Z"}),g.jsx("mask",{id:"a",fill:"#fff",children:g.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M31.066 36.563H18.934c-.914 0-1.655-.77-1.655-1.72V15.157c0-.949.741-1.719 1.655-1.719h7.941v4.073a2 2 0 0 0 2 2h3.845v15.334c0 .949-.74 1.718-1.654 1.718ZM18.934 38.28h12.132c1.828 0 3.309-1.539 3.309-3.437V19.549c0-.912-.349-1.786-.97-2.431l-4.169-4.392a3.247 3.247 0 0 0-2.34-1.007h-7.962c-1.828 0-3.309 1.539-3.309 3.437v19.688c0 1.898 1.481 3.437 3.309 3.437Z"})}),g.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M31.066 36.563H18.934c-.914 0-1.655-.77-1.655-1.72V15.157c0-.949.741-1.719 1.655-1.719h7.941v4.073a2 2 0 0 0 2 2h3.845v15.334c0 .949-.74 1.718-1.654 1.718ZM18.934 38.28h12.132c1.828 0 3.309-1.539 3.309-3.437V19.549c0-.912-.349-1.786-.97-2.431l-4.169-4.392a3.247 3.247 0 0 0-2.34-1.007h-7.962c-1.828 0-3.309 1.539-3.309 3.437v19.688c0 1.898 1.481 3.437 3.309 3.437Z",fill:"#FBE8E2"}),g.jsx("path",{d:"M26.875 13.438h2v-2h-2v2Zm5.845 6.072 2-.044-.043-1.956H32.72v2Zm.686-2.392-1.45 1.377.009.01 1.44-1.387Zm-4.17-4.392 1.45-1.378-.009-.01-1.44 1.388ZM18.934 38.563h12.132v-4H18.934v4Zm-3.655-3.72c0 1.982 1.565 3.72 3.655 3.72v-4c.12 0 .217.053.27.11.053.053.075.118.075.17h-4Zm0-19.687v19.688h4V15.156h-4Zm3.655-3.719c-2.09 0-3.655 1.738-3.655 3.72h4a.254.254 0 0 1-.074.17.382.382 0 0 1-.271.11v-4Zm7.941 0h-7.941v4h7.941v-4Zm-2 2v4.073h4v-4.073h-4Zm0 4.073a4 4 0 0 0 4 4v-4h-4Zm4 4h3.845v-4h-3.845v4Zm5.846-1.961-.001-.083-4 .087v-.004h4Zm0 15.295V19.549h-4v15.295h4Zm-3.655 3.718c2.09 0 3.655-1.737 3.655-3.718h-4c0-.053.022-.117.074-.172a.382.382 0 0 1 .271-.11v4Zm0-2.28H18.934v4h12.132v-4Zm1.309-1.438c0 .866-.657 1.437-1.309 1.437v4c3.003 0 5.309-2.507 5.309-5.437h-4Zm0-15.295v15.295h4V19.549h-4Zm-.41-1.044c.254.264.41.638.41 1.044h4a5.506 5.506 0 0 0-1.528-3.818l-2.882 2.774Zm-4.18-4.402 4.17 4.392 2.901-2.754-4.17-4.392-2.9 2.753Zm-.889-.384c.322 0 .647.132.9.394l2.881-2.774a5.247 5.247 0 0 0-3.78-1.62v4Zm-7.962 0h7.962v-4h-7.962v4Zm-1.309 1.437c0-.866.657-1.437 1.309-1.437v-4c-3.003 0-5.309 2.507 5.309 5.437h4Zm0 19.688V15.156h-4v19.688h4Zm1.309 1.437c-.652 0-1.309-.57-1.309-1.437h-4c0 2.93 2.306 5.437 5.309 5.437v-4Z",fill:"#FBE8E2",mask:"url(#a)"}),g.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M42.188 10.93v3.684c0 .561-.45 1.011-1.011 1.011-.561 0-1.011-.45-1.011-1.01v-3.686c0-.58-.515-1.095-1.095-1.095h-3.685c-.561 0-1.011-.45-1.011-1.01 0-.562.45-1.011 1.01-1.011h3.686c1.701 0 3.117 1.415 3.117 3.116ZM7.813 39.07v-3.684c0-.561.45-1.011 1.01-1.011.561 0 1.011.45 1.011 1.01v3.686c0 .58.515 1.095 1.095 1.095h3.685c.561 0 1.011.45 1.011 1.01 0 .561-.45 1.011-1.01 1.011h-3.686c-1.701 0-3.117-1.415-3.117-3.116ZM10.93 7.813h3.684c.561 0 1.011.45 1.011 1.01 0 .561-.45 1.011-1.01 1.011h-3.686c-.58 0-1.095.515-1.095 1.095v3.685c0 .561-.45 1.011-1.01 1.011-.562 0-1.011-.45-1.011-1.01v-3.686c0-1.701 1.415-3.117 3.116-3.117ZM39.07 42.188h-3.684c-.561 0-1.011-.45-1.011-1.011 0-.561.45-1.011 1.01-1.011h3.686c.58 0 1.095-.515 1.095-1.095v-3.685c0 .561.45-1.011 1.01-1.011.561 0 1.011.45 1.011 1.01v3.686c0 1.701-1.415 3.117-3.116 3.117Z",fill:"#fff"}),g.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.219 28.594c0-.431.35-.781.781-.781h10.435a.781.781 0 1 1 0 1.563H20a.781.781 0 0 1-.781-.782ZM19.219 32.072c0-.431.35-.781.781-.781h10.435a.781.781 0 0 1 0 1.562H20a.781.781 0 0 1-.781-.78Z",fill:"#FBE8E2"}),g.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.375 24.61c0-.648.525-1.172 1.172-1.172h28.906a1.172 1.172 0 0 1 0 2.343H10.547a1.172 1.172 0 0 1-1.172-1.172Z",fill:"#fff"}),g.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.28 24.609a2.266 2.266 0 0 1 2.266-2.266h28.907a2.266 2.266 0 1 1 0 4.532H10.546a2.266 2.266 0 0 1-2.265-2.266Zm2.266-1.172a1.172 1.172 0 0 0 0 2.344h28.907a1.172 1.172 0 0 0 0-2.344H10.546Z",fill:"#EE6C4D"})]}),E_=({className:n})=>g.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M20 2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-8.5 14H10v-3.5h1.5v3.5zm3.5 0h-1.5v-3.5H15v3.5zm3.5 0h-1.5V9H17v7zM4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6z"})}),q8=({className:n})=>g.jsxs("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 50 50",children:[g.jsx("path",{fill:"#4A7AAB",fillRule:"evenodd",d:"M7.692.917h32.616c2.675 0 3.645.279 4.623.802a5.45 5.45 0 0 1 2.268 2.268c.523.978.801 1.948.801 4.622v32.617c0 2.674-.279 3.644-.801 4.622a5.45 5.45 0 0 1-2.268 2.268c-.978.523-1.948.801-4.623.801H7.692c-2.675 0-3.645-.278-4.623-.8a5.45 5.45 0 0 1-2.268-2.269C.278 44.87 0 43.9 0 41.226V8.609c0-2.674.278-3.644.801-4.622A5.45 5.45 0 0 1 3.07 1.719c.978-.523 1.948-.802 4.623-.802Z",clipRule:"evenodd"}),g.jsx("path",{fill:"#BCD1E6",fillRule:"evenodd",d:"M21 13.418H10a.5.5 0 0 0-.5.5v22a.5.5 0 0 0 .5.5h11a.5.5 0 0 0 .5-.5v-22a.5.5 0 0 0-.5-.5m-11-1.5a2 2 0 0 0-2 2v22a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2v-22a2 2 0 0 0-2-2z",clipRule:"evenodd"}),g.jsx("path",{fill:"#E8EDF3",fillRule:"evenodd",d:"M27 36.417h11a.5.5 0 0 0 .5-.5v-22a.5.5 0 0 0-.5-.5H27a.5.5 0 0 0-.5.5v22a.5.5 0 0 0 .5.5m11 1.5a2 2 0 0 0 2-2v-22a2 2 0 0 0-2-2H27a2 2 0 0 0-2 2v22a2 2 0 0 0 2 2z",clipRule:"evenodd"}),g.jsx("path",{fill:"#E8EDF3",d:"M29 26.918a1 1 0 0 1 1-1h5a1 1 0 0 1 1 1v5a1 1 0 0 1-1 1h-5a1 1 0 0 1-1-1z"}),g.jsx("rect",{width:"7",height:"2",x:"29",y:"16.918",fill:"#E8EDF3",rx:"1"}),g.jsx("rect",{width:"7",height:"2",x:"29",y:"20.918",fill:"#E8EDF3",rx:"1"}),g.jsx("rect",{width:"7",height:"2",x:"12",y:"30.918",fill:"#BCD1E6",rx:"1"}),g.jsx("rect",{width:"7",height:"2",x:"12",y:"26.918",fill:"#BCD1E6",rx:"1"}),g.jsx("path",{fill:"#BCD1E6",d:"M12 17.918a1 1 0 0 1 1-1h5a1 1 0 0 1 1 1v5a1 1 0 0 1-1 1h-5a1 1 0 0 1-1-1z"})]}),H8=({className:n})=>g.jsxs("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 50 50",children:[g.jsx("path",{fill:"#4A7AAB",d:"M7.692.917h32.616c2.675 0 3.645.279 4.623.802a5.45 5.45 0 0 1 2.268 2.268c.523.978.801 1.948.801 4.622v32.617c0 2.674-.279 3.644-.801 4.622a5.45 5.45 0 0 1-2.268 2.268c-.978.523-1.948.801-4.623.801H7.692c-2.675 0-3.645-.278-4.623-.8a5.45 5.45 0 0 1-2.268-2.269C.278 44.87 0 43.9 0 41.226V8.609c0-2.674.278-3.644.801-4.622A5.45 5.45 0 0 1 3.07 1.719c.978-.523 1.948-.802 4.623-.802Z"}),g.jsx("path",{fill:"#E8EDF3",fillRule:"evenodd",d:"M11.5 10.918a1.5 1.5 0 0 1 1.5-1.5h22a1.5 1.5 0 0 1 0 3H13a1.5 1.5 0 0 1-1.5-1.5",clipRule:"evenodd"}),g.jsx("path",{fill:"#fff",d:"M12 18.102a2 2 0 0 1 2-2h20a2 2 0 0 1 2 2v7.615a2 2 0 0 1-2 2H14a2 2 0 0 1-2-2z"}),g.jsx("path",{fill:"#4A7AAB",fillRule:"evenodd",d:"M21.284 18.875a.97.97 0 0 1 1.37 0l4.845 4.84a.967.967 0 0 1 0 1.369.97.97 0 0 1-1.37 0l-4.845-4.84a.967.967 0 0 1 0-1.369",clipRule:"evenodd"}),g.jsx("path",{fill:"#4A7AAB",fillRule:"evenodd",d:"M27.5 18.875a.97.97 0 0 0-1.371 0l-4.845 4.84a.967.967 0 0 0 0 1.369.97.97 0 0 0 1.37 0l4.845-4.84a.967.967 0 0 0 0-1.369Z",clipRule:"evenodd"}),g.jsx("path",{fill:"#E8EDF3",fillRule:"evenodd",d:"M11.5 32.917a1.5 1.5 0 0 1 1.5-1.5h21a1.5 1.5 0 0 1 0 3H13a1.5 1.5 0 0 1-1.5-1.5m0 6a1.5 1.5 0 0 1 1.5-1.5h11a1.5 1.5 0 0 1 0 3H13a1.5 1.5 0 0 1-1.5-1.5",clipRule:"evenodd"})]}),A_=({className:n})=>g.jsxs("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 48 48",children:[g.jsx("path",{fill:"#AB6993",d:"M7.68 0h32.64c2.671 0 3.673.25 4.591.835a4.9 4.9 0 0 1 2.254 2.254C47.666 4.09 48 5.009 48 7.68v32.64c0 2.671-.25 3.673-.835 4.591a4.9 4.9 0 0 1-2.254 2.254c-1.001.501-1.92.835-4.591.835H7.68c-2.671 0-3.673-.25-4.591-.835-.919-.584-1.753-1.252-2.254-2.254C.334 43.91 0 42.991 0 40.32V7.68c0-2.671.25-3.673.835-4.591A4.9 4.9 0 0 1 3.089.835C4.007.25 5.009 0 7.68 0"}),g.jsx("path",{stroke:"#fff",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M20.8 14.4h7.68c1.792 0 2.688 0 3.373.349a3.2 3.2 0 0 1 1.398 1.398c.349.685.349 1.58.349 3.373v7.68M8 14.4h6.4m19.2 19.2V40m6.4-6.4H19.52c-1.792 0-2.688 0-3.373-.349a3.2 3.2 0 0 1-1.398-1.398c-.349-.685-.349-1.58-.349-3.373V8"}),g.jsx("path",{stroke:"#F2E7EF",strokeLinecap:"round",strokeWidth:"2",d:"M19.5 20h5m-5 4h9m-9 4h9"})]}),G8=({className:n})=>g.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-6.364-.386l1.591-1.591M3 12h2.25m.386-6.364l1.591 1.591M12 12a4.5 4.5 0 000 9 4.5 4.5 0 000-9z"})}),$8=({className:n})=>g.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 009.002-5.998z"})}),j8=({className:n})=>g.jsxs("svg",{className:n,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[g.jsx("path",{d:"M16.75,13.96C17,14.23 17,14.89 16.74,15.82C16.45,16.82 15.3,17.5 15.06,17.56C14.82,17.62 12.06,18.5 9.38,15.89C6.7,13.28 5.8,10.5 5.86,10.26C5.92,10.02 6.53,8.73 7.3,7.96C7.58,7.68 7.82,7.67 8,7.67C8.18,7.67 8.35,7.67 8.5,7.67C8.65,7.67 8.79,7.72 8.95,8.03C9.11,8.34 9.53,9.45 9.59,9.58C9.65,9.71 9.7,9.81 9.62,9.97C9.54,10.13 9.42,10.23 9.27,10.39C9.12,10.54 9,10.68 8.86,10.82C8.72,10.96 8.59,11.11 8.75,11.39C8.91,11.67 9.43,12.24 10.15,13.12C11.11,14.03 11.9,14.34 12.2,14.45C12.5,14.56 12.68,14.53 12.85,14.35C13.02,14.17 13.33,13.78 13.53,13.51C13.73,13.24 13.95,13.2 14.15,13.26C14.35,13.32 15.45,13.85 15.7,13.96C15.95,14.07 16.11,14.11 16.19,14.2C16.27,14.29 16.5,14.53 16.75,13.96Z",fillRule:"evenodd",clipRule:"evenodd"}),g.jsx("path",{d:"M12,2C6.48,2 2,6.48 2,12C2,14.08 2.59,16.03 3.61,17.69L2,22L6.45,20.44C7.99,21.41 9.8,22 12,22C17.52,22 22,17.52 22,12C22,6.48 17.52,2 12,2ZM12,20C10.04,20 8.18,19.43 6.64,18.4L6.28,18.18L4.07,18.84L4.75,16.68L4.5,16.32C3.58,14.83 3,13.04 3,12C3,7.03 7.03,3 12,3C16.97,3 21,7.03 21,12C21,16.97 16.97,20 12,20Z",fillRule:"evenodd",clipRule:"evenodd"})]}),W8=({className:n})=>g.jsx("svg",{className:n,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:g.jsx("path",{d:"M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.879V14.89h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33v6.989C18.343 21.128 22 16.991 22 12z"})}),K8=({className:n})=>g.jsx("svg",{className:n,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:g.jsx("path",{d:"M21.582,6.186c-0.23-0.86-0.908-1.538-1.768-1.768C18.267,4,12,4,12,4S5.733,4,4.186,4.418 c-0.86,0.23-1.538,0.908-1.768,1.768C2,7.733,2,12,2,12s0,4.267,0.418,5.814c0.23,0.86,0.908,1.538,1.768,1.768 C5.733,20,12,20,12,20s6.267,0,7.814-0.418c0.861-0.23,1.538-0.908,1.768-1.768C22,16.267,22,12,22,12S22,7.733,21.582,6.186z M10,15.464V8.536L16,12L10,15.464z"})}),SW=({className:n})=>g.jsx("svg",{className:n,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:g.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 2C6.477 2 2 6.477 2 12c0 4.418 2.865 8.166 6.839 9.489.5.092.682-.217.682-.482 0-.237-.009-.868-.014-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.031-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.378.203 2.397.1 2.65.64.7 1.03 1.595 1.03 2.688 0 3.848-2.338 4.695-4.566 4.942.359.308.678.92.678 1.852 0 1.336-.012 2.415-.012 2.741 0 .268.18.578.688.48A10.001 10.001 0 0022 12c0-5.523-4.477-10-10-10z"})}),PW=({className:n})=>g.jsx("svg",{className:n,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:g.jsx("path",{d:"M19 3a2 2 0 012 2v14a2 2 0 01-2 2H5a2 2 0 01-2-2V5a2 2 0 012-2h14zm-11 6H5v10h3V9zM6.5 6.732a1.732 1.732 0 100-3.464 1.732 1.732 0 000 3.464zM18 19h-3v-4.74c0-1.42-.6-1.927-1.421-1.927-.927 0-1.25.734-1.455 1.313-.075.207-.095.49-.095.772V19h-3V9h3v1.322c.49-.781 1.2-1.322 2.754-1.322C17.388 9 18 10.59 18 13.236V19z"})}),RW=({className:n})=>g.jsx("svg",{className:n,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:g.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})}),es=({className:n})=>g.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})}),Y8=({className:n})=>g.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M2.01 21L23 12 2.01 3 2 10l15 2-15 2 .01 7z"})}),J8=({className:n})=>g.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"})}),X8=({className:n})=>g.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"})}),Q8=({className:n})=>g.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.49 6-3.31 6-6.72h-1.7z"})}),Z8=({className:n})=>g.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 4c1.93 0 3.5 1.57 3.5 3.5S13.93 13 12 13s-3.5-1.57-3.5-3.5S10.07 6 12 6zm0 13c-2.67 0-8 1.34-8 4v1h16v-1c0-2.66-5.33-4-8-4z"})}),eL=({className:n})=>g.jsxs("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:[g.jsx("circle",{cx:"12",cy:"12",r:"3.2"}),g.jsx("path",{d:"M9 2L7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2H9zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z"})]}),tL=({className:n})=>g.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M12.65 10C11.83 7.67 9.61 6 7 6c-3.31 0-6 2.69-6 6s2.69 6 6 6c2.61 0 4.83-1.67 5.65-4H17v4h4v-4h2v-4H12.65zM7 14c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"})}),nL=({className:n})=>g.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"})}),CE=({className:n})=>g.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"})}),SE=({className:n})=>g.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"})}),PE=({className:n})=>g.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L8 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1h-2v-2h2c.55 0 1-.45 1-1V8h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"})}),sp=({className:n})=>g.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"})}),kW=({className:n})=>g.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.539 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.196-1.539-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})}),NW=({className:n})=>g.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M18 6h-2c0-2.21-1.79-4-4-4S8 3.79 8 6H6c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm-6-2c1.1 0 2 .9 2 2h-4c0-1.1.9-2 2-2zm6 16H6V8h2v2c0 .55.45 1 1 1s1-.45 1-1V8h4v2c0 .55.45 1 1 1s1-.45 1-1V8h2v12z"})}),iL=({className:n})=>g.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z"})}),sL=({className:n})=>g.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9.21 15.5l1.41-1.41L12 15.5l1.38-1.38L14.79 15.5H19v-5l-3.5-4.5-2.5 3.01L9.17 6H5v9.5h4.21z"})}),rL=({className:n})=>g.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-4 14h-2v-2h2v2zm0-4h-2v-2h2v2zm0-4h-2V7h2v2zm-4 8H7v-2h2v2zm0-4H7v-2h2v2zm0-4H7V7h2v2z"})}),oL=({className:n})=>g.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M20 2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM9.5 11.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5-1.5-.67-1.5-1.5.67-1.5 1.5-1.5zm3.5 0c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5-1.5-.67-1.5-1.5.67-1.5 1.5-1.5zm3.5 0c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5-1.5-.67-1.5-1.5.67-1.5 1.5-1.5zM4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6z"})}),aL=({className:n})=>g.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M20 2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM9.5 15.5v-1.5H8v-1.5h1.5V11h1.5v1.5h1.5v1.5h-1.5v1.5H9.5zm6.5-1.5h-3v-4.5h3v4.5zM4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6z"})}),RE=({className:n})=>g.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"})}),Qd=({className:n})=>g.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M21 5c-1.11-.35-2.33-.5-3.5-.5-1.95 0-4.05.4-5.5 1.5-1.45-1.1-3.55-1.5-5.5-1.5-1.17 0-2.39.15-3.5.5v14c1.11.35 2.33.5 3.5.5 1.95 0 4.05-.4 5.5-1.5 1.45 1.1 3.55 1.5 5.5 1.5 1.17 0 2.39-.15 3.5-.5V5zm-5.5 8.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"})}),kE=({className:n})=>g.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M19 20H5V6h14v14zM5 4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2H5zm2 4h10v2H7V8zm0 4h10v2H7v-2zm0 4h5v2H7v-2z"})}),lL=({className:n})=>g.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-9 4c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm6 12H6v-1c0-2 4-3.1 6-3.1s6 1.1 6 3.1v1z"})}),cL=({className:n})=>g.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M20 6h-8l-2-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm-2 6h-2v2h2v2h-2v2h-2v-2h2v-2h-2v-2h2v-2h-2V8h2v2h2v2z"})}),I_=({className:n})=>g.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M15 3h6v6h-2V5h-4V3zM9 21H3v-6h2v4h4v2zM21 15v6h-6v-2h4v-4h2zM3 9V3h6v2H5v4H3z"})}),uL=({className:n})=>g.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M20 6h-4V4c0-1.11-.89-2-2-2h-4c-1.11 0-2 .89-2 2v2H4c-1.11 0-2 .89-2 2v11c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zM10 4h4v2h-4V4zm10 15H4V8h16v11z"})}),MW=({className:n})=>g.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M20.5 11H19V7c0-1.1-.9-2-2-2h-4V3.5c0-.83-.67-1.5-1.5-1.5S10 2.67 10 3.5V5H6c-1.1 0-2 .9-2 2v4H2.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5H4v4c0 1.1.9 2 2 2h4v1.5c0 .83.67 1.5 1.5 1.5s1.5-.67 1.5-1.5V19h4c1.1 0 2-.9 2-2v-4h1.5c.83 0 1.5-.67 1.5-1.5s-.67-1.5-1.5-1.5z"})}),NE=({className:n})=>g.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M1 21h12v2H1zM5.24 8.07l2.83-2.83 14.14 14.14-2.83 2.83zM12.32 1l5.66 5.66-2.83 2.83-5.66-5.66z"})}),Jc=({className:n})=>g.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})}),dL=({className:n})=>g.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M5 13.18v4L12 21l7-3.82v-4L12 17l-7-3.82zM12 3L1 9l11 6 9-4.91V17h2V9L12 3z"})}),go=({className:n})=>g.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:g.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),DW=({className:n})=>g.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),LW=({className:n})=>g.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-.96.73-1.66 2.2-1.66 1.51 0 2.15.68 2.22 1.55H15c-.07-1.44-1.12-2.43-3-2.43-1.96 0-3.43 1.1-3.43 2.73 0 1.45 1.1 2.38 3.19 2.88 2.1.51 2.83 1.25 2.83 2.31 0 1.05-.8 1.8-2.34 1.8-1.74 0-2.52-.84-2.6-1.8H9.3c.1 1.76 1.52 2.8 3.7 2.8 2.1 0 3.62-1.03 3.62-2.73 0-1.45-1.1-2.38-3.19-2.88z"})}),FW=({className:n})=>g.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M21.94,10.51a1,1,0,0,0-1,.1,8.06,8.06,0,0,1-1.3,1,1,1,0,0,0-.43,1,8.06,8.06,0,0,1-.43,1.52,1,1,0,1,0,1.88.68,10.33,10.33,0,0,0,.43-1.6,10.22,10.22,0,0,0,1.29-1.2,1,1,0,0,0-.44-1.5ZM12.29,18.52a1,1,0,0,0-1.08-.2,8.43,8.43,0,0,1-1.53.54,1,1,0,0,0-.54,1,8.2,8.2,0,0,1-.09,1.6,1,1,0,0,0,1,1,1,1,0,0,0,1-.89,10,10,0,0,0,.09-1.87,10.15,10.15,0,0,0,1.58-.61A1,1,0,0,0,12.29,18.52ZM19.7,5.32a1,1,0,0,0-1.17.48,8.22,8.22,0,0,1-1.2,1.28,1,1,0,0,0-.2,1.08,8.22,8.22,0,0,1-.61,1.58,1,1,0,1,0,1.83.78,10,10,0,0,0,.7-1.8,10.3,10.3,0,0,0,1.11-1.42A1,1,0,0,0,19.7,5.32ZM12,2A10,10,0,1,0,22,12,10,10,0,0,0,12,2Zm5.5,13.91a1,1,0,0,0-1.12-.55,8.3,8.3,0,0,1-1.6.09,1,1,0,0,0-1,.54,8.3,8.3,0,0,1-1.28,1.2,1,1,0,1,0,1.42,1.42,10.15,10.15,0,0,0,1.42-1.11A10.33,10.33,0,0,0,17.91,16,1,1,0,0,0,17.5,15.91ZM9.49,4.41a1,1,0,0,0-1.12.55,8.3,8.3,0,0,1-1.6-.09,1,1,0,0,0-1-.54,8.3,8.3,0,0,1-1.28-1.2,1,1,0,0,0-1.42,1.42A10.15,10.15,0,0,0,4.18,6,10.33,10.33,0,0,0,6,7.41,1,1,0,0,0,7.5,6.59ZM5.5,9.41a1,1,0,0,0-1.12.55,8.3,8.3,0,0,1-1.6-.09,1,1,0,0,0-1,.54,8.3,8.3,0,0,1-1.28,1.2,1,1,0,1,0,1.42,1.42A10.15,10.15,0,0,0,3.18,12,10.33,10.33,0,0,0,5,13.41,1,1,0,0,0,6.5,12.59Z"})}),VW=({className:n})=>g.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M12 2C9.25 2 7 4.25 7 7c0 1.1.9 2 2 2h6c1.1 0 2-.9 2-2 0-2.75-2.25-5-5-5zm-3.5 8C6.02 10 4 12.02 4 14.5S6.02 19 8.5 19H9v2c0 .55.45 1 1 1h4c.55 0 1-.45 1-1v-2h.5c2.48 0 4.5-2.02 4.5-4.5S17.98 10 15.5 10h-7z"})}),OW=({className:n})=>g.jsxs("svg",{className:n,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[g.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),g.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),g.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l3.66-2.84z",fill:"#FBBC05"}),g.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),UW=({className:n})=>g.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"})}),BW=({className:n})=>g.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"})}),zW=({className:n})=>g.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm16-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-3 10H9v-2h8v2zm-4-4H9V6h4v4z"})}),qW=({className:n})=>g.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M12 7V3H2v18h20V7H12zM6 19H4v-2h2v2zm0-4H4v-2h2v2zm0-4H4V9h2v2zm0-4H4V5h2v2zm4 12H8v-2h2v2zm0-4H8v-2h2v2zm0-4H8V9h2v2zm0-4H8V5h2v2zm10 12h-8v-2h2v-2h-2v-2h2v-2h-2V9h8v10zm-2-8h-2v2h2v-2zm0 4h-2v2h2v-2z"})}),HW=({className:n})=>g.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M22 11V3h-7v3H9V3H2v8h7V8h2v10h4v3h7v-8h-7v3h-2V8h2v3z"})}),GW=({className:n})=>g.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M16 6l2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6h-6z"})}),$W=({className:n})=>g.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92s2.92-1.31 2.92-2.92-1.31-2.92-2.92-2.92z"})}),jW=({className:n})=>g.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M19 8H5c-1.66 0-3 1.34-3 3v6h4v4h12v-4h4v-6c0-1.66-1.34-3-3-3zM16 19H8v-5h8v5zm3-7c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zM18 3H6v4h12V3z"})}),WW=({className:n})=>g.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M15.6 10.79c.97-1.07 1.5-2.5 1.5-4.04 0-3.87-3.13-7-7-7H6v18h5.78c3.54 0 6.22-2.79 6.22-6.21 0-2.34-1.21-4.33-3-5.46zM10 5.5h2.78c1.38 0 2.5 1.12 2.5 2.5s-1.12 2.5-2.5 2.5H10V5.5zm3.18 11H10v-5h3.18c1.38 0 2.5 1.12 2.5 2.5s-1.12 2.5-2.5 2.5z"})}),KW=({className:n})=>g.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M10 4v3h2.21l-3.42 8H6v3h8v-3h-2.21l3.42-8H18V4h-8z"})}),YW=({className:n})=>g.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M12 17c3.31 0 6-2.69 6-6V3h-2.5v8c0 1.93-1.57 3.5-3.5 3.5S8.5 12.93 8.5 11V3H6v8c0 3.31 2.69 6 6 6zm-7 2v2h14v-2H5z"})}),JW=({className:n})=>g.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M17 1H7c-1.1 0-2 .9-2 2v18c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V3c0-1.1-.9-2-2-2zm0 18H7V5h10v14zM8 6h8v2H8V6zm0 3h8v2H8V9z"})}),XW=({className:n})=>g.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M21 2H3c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h7v2H8v2h8v-2h-2v-2h7c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H3V4h18v12zM6 6h12v2H6V6zm0 3h12v2H6V9z"})}),QW=({className:n})=>g.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M22 3H2v18h20V3zM12 19H4v-2h8v2zm6 0h-4v-2h4v2zm2-4H4v-2h16v2zm0-4H4V9h16v2zm0-4H4V5h16v2z"})}),ZW=({className:n})=>g.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:g.jsx("path",{fillRule:"evenodd",d:"M3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"})}),eK=({className:n})=>g.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"})}),tK=({className:n})=>g.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5zm0 12c-.83 0-1.5.68-1.5 1.5s.68 1.5 1.5 1.5 1.5-.68 1.5-1.5-.67-1.5-1.5-1.5zM7 19h14v-2H7v2zm0-6h14v-2H7v2zm0-8v2h14V5H7z"})}),nK=({className:n})=>g.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M3 11h8V3H3v8zm2-6h4v4H5V5zM3 21h8v-8H3v8zm2-6h4v4H5v-4zM13 3v8h8V3h-8zm6 6h-4V5h4v4zM13 21h8v-8h-8v8zm2-6h4v4h-4v-4z"})}),iK=({className:n})=>g.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M21.41 11.58l-9-9C12.05 2.22 11.55 2 11 2H4c-1.1 0-2 .9-2 2v7c0 .55.22 1.05.59 1.42l9 9c.36.36.86.58 1.41.58.55 0 1.05-.22 1.41-.59l7-7c.37-.36.59-.86.59-1.41s-.23-1.06-.59-1.42zM5.5 7C4.67 7 4 6.33 4 5.5S4.67 4 5.5 4 7 4.67 7 5.5 6.33 7 5.5 7z"})}),sK=({className:n})=>g.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z"})}),hL=({className:n})=>g.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M8 11h2.55v2.55H8zM13.45 11h2.55v2.55h-2.55zM8 5.45h2.55v2.55H8zM13.45 5.45h2.55v2.55h-2.55zM22 2H2v20h20V2zm-4 16H6v-4h12v4zm0-6H6V8h12v4z"})}),ME=({className:n})=>g.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"})}),fL=({className:n})=>g.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M19.43 12.98c.04-.32.07-.64.07-.98s-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.3-.61-.22l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65C14.46 2.18 14.25 2 14 2h-4c-.25 0-.46.18-.49.42l-.38 2.65c-.61.25-1.17.59-1.69.98l-2.49-1c-.23-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64l2.11 1.65c-.04.32-.07.65-.07.98s.03.66.07.98l-2.11 1.65c-.19.15-.24.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65c.03.24.24.42.49.42h4c.25 0 .46-.18.49-.42l.38-2.65c.61-.25 1.17-.59 1.69.98l2.49 1c.23.09.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.65zM12 15.5c-1.93 0-3.5-1.57-3.5-3.5s1.57-3.5 3.5-3.5 3.5 1.57 3.5 3.5-1.57 3.5-3.5 3.5z"})}),rK=({className:n})=>g.jsxs("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:[g.jsx("path",{d:"M0 0h24v24H0z",fill:"none"}),g.jsx("path",{d:"M6 20.25l-6-10.5h7l6 10.5z",fill:"#0066da"}),g.jsx("path",{d:"M12 20.25l6-10.5h7l-6 10.5z",fill:"#ffde00"}),g.jsx("path",{d:"M25 9.75l-6-10.5h-7l6 10.5z",fill:"#00aa47"})]}),oK=({className:n})=>g.jsxs("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:[g.jsx("path",{d:"M0 0h24v24H0z",fill:"none"}),g.jsx("path",{d:"M3.75 6L9 2.25 14.25 6 9 9.75zm0 12L9 14.25 14.25 18 9 21.75zm16.5-12L15 2.25 9.75 6 15 9.75zm-5.25 3L9 8.25 3.75 12 9 15.75z"})]}),aK=({className:n})=>g.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})}),DE=({className:n})=>g.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"})}),pL=({className:n})=>g.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M21 2H3c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h7v2H8v2h8v-2h-2v-2h7c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H3V4h18v12z"})}),lK=({className:n})=>g.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"})}),mL=({className:n})=>g.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"})}),gL=({className:n})=>g.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1s3.1 1.39 3.1 3.1v2z"})}),yL=({className:n})=>g.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"})}),Xc=({className:n})=>g.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor",children:g.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})}),cK=({className:n})=>g.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor",children:g.jsx("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"})}),vL=({className:n})=>g.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M5 9.2h3V19H5zM10.6 5h2.8v14h-2.8zm5.6 8H19v6h-2.8z"})}),uK=({className:n})=>g.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M9 16h6v-6h4l-8-8-8 8h4v6zm-4 2h14v2H5v-2z"})}),dK=({className:n})=>g.jsxs("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[g.jsx("circle",{cx:"6",cy:"6",r:"3"}),g.jsx("circle",{cx:"18",cy:"18",r:"3"}),g.jsx("path",{d:"M6 9v6a3 3 0 0 0 3 3h6"})]}),hK=({className:n})=>g.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M15.5 1h-8C6.12 1 5 2.12 5 3.5v17C5 21.88 6.12 23 7.5 23h8c1.38 0 2.5-1.12 2.5-2.5v-17C18 2.12 16.88 1 15.5 1zm-4 21c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm4.5-4H7V4h9v14z"})}),fK=({className:n})=>g.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M16 1H8C6.34 1 5 2.34 5 4v16c0 1.66 1.34 3 3 3h8c1.66 0 3-1.34 3-3V4c0-1.66-1.34-1-3-1zm-4 21c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm4.5-4H7V4h10v14zM9.5 5.5h-1v1h1v-1zm1.5 0h1v1h-1v-1z"})}),pK=({className:n})=>g.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M20 2H4C2.9 2 2 2.9 2 4v11c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM4 15V4h16v11H4zM12 18H2v2h20v-2h-10z"})}),mK=({className:n})=>g.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M3 3h8.5v8.5H3zm9.5 0v8.5H21V3zM3 12.5h8.5V21H3zm9.5 0V21H21v-8.5z"})}),gK=({className:n})=>g.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",children:g.jsx("path",{d:"M12 4l-6 6h12l-6-6zm0 16l6-6H6l6 6z"})}),yK=({className:n})=>g.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",children:g.jsx("path",{d:"M14 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V8l-6-6zm-1 12h-2v2H9v-2H7v-2h2V9h2v2h2v2z"})});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let _L,wL;function bL(){return{geminiUrl:_L,vertexUrl:wL}}function TL(n,e,t,i){var s,r;if(!n?.baseUrl){const o=bL();return e?(s=o.vertexUrl)!==null&&s!==void 0?s:t:(r=o.geminiUrl)!==null&&r!==void 0?r:i}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Lr{}function ie(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(i,s)=>{if(Object.prototype.hasOwnProperty.call(e,s)){const r=e[s];return r!=null?String(r):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function h(n,e,t){for(let r=0;r<e.length-1;r++){const o=e[r];if(o.endsWith("[]")){const a=o.slice(0,-2);if(!(a in n))if(Array.isArray(t))n[a]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${o}`);if(Array.isArray(n[a])){const l=n[a];if(Array.isArray(t))for(let c=0;c<l.length;c++){const d=l[c];h(d,e.slice(r+1),t[c])}else for(const c of l)h(c,e.slice(r+1),t)}return}else if(o.endsWith("[0]")){const a=o.slice(0,-3);a in n||(n[a]=[{}]);const l=n[a];h(l[0],e.slice(r+1),t);return}(!n[o]||typeof n[o]!="object")&&(n[o]={}),n=n[o]}const i=e[e.length-1],s=n[i];if(s!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===s)return;if(typeof s=="object"&&typeof t=="object"&&s!==null&&t!==null)Object.assign(s,t);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else n[i]=t}function u(n,e){try{if(e.length===1&&e[0]==="_self")return n;for(let t=0;t<e.length;t++){if(typeof n!="object"||n===null)return;const i=e[t];if(i.endsWith("[]")){const s=i.slice(0,-2);if(s in n){const r=n[s];return Array.isArray(r)?r.map(o=>u(o,e.slice(t+1))):void 0}else return}else n=n[i]}return n}catch(t){if(t instanceof TypeError)return;throw t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rp(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var C_;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(C_||(C_={}));var S_;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(S_||(S_={}));var as;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(as||(as={}));var P_;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(P_||(P_={}));var R_;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(R_||(R_={}));var k_;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(k_||(k_={}));var N_;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(N_||(N_={}));var M_;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(M_||(M_={}));var D_;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(D_||(D_={}));var L_;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(L_||(L_={}));var F_;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(F_||(F_={}));var V_;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(V_||(V_={}));var O_;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(O_||(O_={}));var U_;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY"})(U_||(U_={}));var B_;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(B_||(B_={}));var Zu;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(Zu||(Zu={}));var z_;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(z_||(z_={}));var op;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(op||(op={}));var q_;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(q_||(q_={}));var H_;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(H_||(H_={}));var G_;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(G_||(G_={}));var $_;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})($_||($_={}));var j_;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(j_||(j_={}));var W_;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(W_||(W_={}));var K_;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE"})(K_||(K_={}));var Y_;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(Y_||(Y_={}));var J_;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(J_||(J_={}));var X_;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(X_||(X_={}));var Q_;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Q_||(Q_={}));var Z_;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Z_||(Z_={}));var e1;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(e1||(e1={}));var t1;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(t1||(t1={}));var n1;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(n1||(n1={}));var i1;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(i1||(i1={}));var s1;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(s1||(s1={}));var r1;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(r1||(r1={}));var o1;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(o1||(o1={}));var a1;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(a1||(a1={}));var l1;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(l1||(l1={}));var c1;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(c1||(c1={}));var u1;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(u1||(u1={}));var d1;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(d1||(d1={}));var h1;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(h1||(h1={}));var f1;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(f1||(f1={}));var oo;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(oo||(oo={}));class ap{constructor(e){const t={};for(const i of e.headers.entries())t[i[0]]=i[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class Ua{get text(){var e,t,i,s,r,o,a,l;if(((s=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let c="",d=!1;const f=[];for(const m of(l=(a=(o=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(const[y,v]of Object.entries(m))y!=="text"&&y!=="thought"&&(v!==null||v!==void 0)&&f.push(y);if(typeof m.text=="string"){if(typeof m.thought=="boolean"&&m.thought)continue;d=!0,c+=m.text}}return f.length>0&&console.warn(`there are non-text parts ${f} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),d?c:void 0}get data(){var e,t,i,s,r,o,a,l;if(((s=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let c="";const d=[];for(const f of(l=(a=(o=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(const[m,y]of Object.entries(f))m!=="inlineData"&&(y!==null||y!==void 0)&&d.push(m);f.inlineData&&typeof f.inlineData.data=="string"&&(c+=atob(f.inlineData.data))}return d.length>0&&console.warn(`there are non-data parts ${d} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),c.length>0?btoa(c):void 0}get functionCalls(){var e,t,i,s,r,o,a,l;if(((s=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const c=(l=(a=(o=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(d=>d.functionCall).map(d=>d.functionCall).filter(d=>d!==void 0);if(c?.length!==0)return c}get executableCode(){var e,t,i,s,r,o,a,l,c;if(((s=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const d=(l=(a=(o=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(f=>f.executableCode).map(f=>f.executableCode).filter(f=>f!==void 0);if(d?.length!==0)return(c=d?.[0])===null||c===void 0?void 0:c.code}get codeExecutionResult(){var e,t,i,s,r,o,a,l,c;if(((s=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const d=(l=(a=(o=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(f=>f.codeExecutionResult).map(f=>f.codeExecutionResult).filter(f=>f!==void 0);if(d?.length!==0)return(c=d?.[0])===null||c===void 0?void 0:c.output}}class p1{}class m1{}class xL{}class EL{}class AL{}class IL{}class g1{}class y1{}class v1{}class CL{}class _1{}class w1{}class b1{}class T1{}class SL{}class PL{}class RL{}class x1{}class kL{get text(){var e,t,i;let s="",r=!1;const o=[];for(const a of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[l,c]of Object.entries(a))l!=="text"&&l!=="thought"&&c!==null&&o.push(l);if(typeof a.text=="string"){if(typeof a.thought=="boolean"&&a.thought)continue;r=!0,s+=a.text}}return o.length>0&&console.warn(`there are non-text parts ${o} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),r?s:void 0}get data(){var e,t,i;let s="";const r=[];for(const o of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[a,l]of Object.entries(o))a!=="inlineData"&&l!==null&&r.push(a);o.inlineData&&typeof o.inlineData.data=="string"&&(s+=atob(o.inlineData.data))}return r.length>0&&console.warn(`there are non-data parts ${r} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}}class ed{_fromAPIResponse({apiResponse:e,isVertexAI:t}){const i=new ed;if(i.name=e.name,i.metadata=e.metadata,i.done=e.done,i.error=e.error,t){const s=e.response;if(s){const r=new _1,o=s.videos;r.generatedVideos=o?.map(a=>({video:{uri:a.gcsUri,videoBytes:a.bytesBase64Encoded?rp(a.bytesBase64Encoded):void 0,mimeType:a.mimeType}})),r.raiMediaFilteredCount=s.raiMediaFilteredCount,r.raiMediaFilteredReasons=s.raiMediaFilteredReasons,i.response=r}}else{const s=e.response;if(s){const r=new _1,o=s.generateVideoResponse,a=o?.generatedSamples;r.generatedVideos=a?.map(l=>{const c=l.video;return{video:{uri:c?.uri,videoBytes:c?.encodedVideo?rp(c?.encodedVideo):void 0,mimeType:l.encoding}}}),r.raiMediaFilteredCount=o?.raiMediaFilteredCount,r.raiMediaFilteredReasons=o?.raiMediaFilteredReasons,i.response=r}}return i}}class NL{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Me(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function LE(n,e){const t=Me(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function FE(n){return Array.isArray(n)?n.map(e=>td(e)):[td(n)]}function td(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function VE(n){const e=td(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function OE(n){const e=td(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function E1(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function UE(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>E1(e)):[E1(n)]}function lp(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function A1(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function I1(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function Kt(n){if(n==null)throw new Error("ContentUnion is required");return lp(n)?n:{role:"user",parts:UE(n)}}function BE(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const i=Kt(t);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(n.isVertexAI()){const t=Kt(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>Kt(t)):[Kt(e)]}function Dn(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(A1(n)||I1(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Kt(n)]}const e=[],t=[],i=lp(n[0]);for(const s of n){const r=lp(s);if(r!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(r)e.push(s);else{if(A1(s)||I1(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(s)}}return i||e.push({role:"user",parts:UE(t)}),e}function ML(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(i=>i!=="null");if(t.length===1)e.type=Object.values(as).includes(t[0].toUpperCase())?t[0].toUpperCase():as.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of t)e.anyOf.push({type:Object.values(as).includes(i.toUpperCase())?i.toUpperCase():as.TYPE_UNSPECIFIED})}}function yo(n){const e={},t=["items"],i=["anyOf"],s=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const r=n.anyOf;r!=null&&r.length==2&&(r[0].type==="null"?(e.nullable=!0,n=r[1]):r[1].type==="null"&&(e.nullable=!0,n=r[0])),n.type instanceof Array&&ML(n.type,e);for(const[o,a]of Object.entries(n))if(a!=null)if(o=="type"){if(a==="null")throw new Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;e.type=Object.values(as).includes(a.toUpperCase())?a.toUpperCase():as.TYPE_UNSPECIFIED}else if(t.includes(o))e[o]=yo(a);else if(i.includes(o)){const l=[];for(const c of a){if(c.type=="null"){e.nullable=!0;continue}l.push(yo(c))}e[o]=l}else if(s.includes(o)){const l={};for(const[c,d]of Object.entries(a))l[c]=yo(d);e[o]=l}else{if(o==="additionalProperties")continue;e[o]=a}return e}function Ig(n){return yo(n)}function Cg(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function Sg(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function la(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=yo(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=yo(e.response));return n}function ca(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function DL(n,e,t,i=1){const s=!e.startsWith(`${t}/`)&&e.split("/").length===i;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:s?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:s?`${t}/${e}`:e}function Ui(n,e){if(typeof e!="string")throw new Error("name must be a string");return DL(n,e,"cachedContents")}function zE(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function Fr(n){return rp(n)}function LL(n){return n!=null&&typeof n=="object"&&"name"in n}function FL(n){return n!=null&&typeof n=="object"&&"video"in n}function VL(n){return n!=null&&typeof n=="object"&&"uri"in n}function qE(n){var e;let t;if(LL(n)&&(t=n.name),!(VL(n)&&(t=n.uri,t===void 0))&&!(FL(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const s=t.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${t}`);t=s[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function HE(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function GE(n){for(const e of["models","tunedModels","publisherModels"])if(OL(n,e))return n[e];return[]}function OL(n,e){return n!==null&&typeof n=="object"&&e in n}function UL(n,e={}){const t=n,i={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function BL(n,e={}){const t=[],i=new Set;for(const s of n){const r=s.name;if(i.has(r))throw new Error(`Duplicate function name ${r} found in MCP tools. Please ensure function names are unique.`);i.add(r);const o=UL(s,e);o.functionDeclarations&&t.push(...o.functionDeclarations)}return{functionDeclarations:t}}function $E(n,e){if(typeof e!="string"&&!Array.isArray(e)){if(n&&n.isVertexAI()){if(e.gcsUri&&e.bigqueryUri)throw new Error("Only one of `gcsUri` or `bigqueryUri` can be set.");if(!e.gcsUri&&!e.bigqueryUri)throw new Error("One of `gcsUri` or `bigqueryUri` must be set.")}else{if(e.inlinedRequests&&e.fileName)throw new Error("Only one of `inlinedRequests` or `fileName` can be set.");if(!e.inlinedRequests&&!e.fileName)throw new Error("One of `inlinedRequests` or `fileName` must be set.")}return e}else{if(Array.isArray(e))return{inlinedRequests:e};if(typeof e=="string"){if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:[e]};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};if(e.startsWith("files/"))return{fileName:e}}}throw new Error(`Unsupported source: ${e}`)}function zL(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function ua(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function jE(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function qL(n){const e={},t=u(n,["fps"]);t!=null&&h(e,["fps"],t);const i=u(n,["endOffset"]);i!=null&&h(e,["endOffset"],i);const s=u(n,["startOffset"]);return s!=null&&h(e,["startOffset"],s),e}function HL(n){const e={};if(u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=u(n,["data"]);t!=null&&h(e,["data"],t);const i=u(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function GL(n){const e={};if(u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=u(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const i=u(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function $L(n){const e={},t=u(n,["videoMetadata"]);t!=null&&h(e,["videoMetadata"],qL(t));const i=u(n,["thought"]);i!=null&&h(e,["thought"],i);const s=u(n,["inlineData"]);s!=null&&h(e,["inlineData"],HL(s));const r=u(n,["fileData"]);r!=null&&h(e,["fileData"],GL(r));const o=u(n,["thoughtSignature"]);o!=null&&h(e,["thoughtSignature"],o);const a=u(n,["codeExecutionResult"]);a!=null&&h(e,["codeExecutionResult"],a);const l=u(n,["executableCode"]);l!=null&&h(e,["executableCode"],l);const c=u(n,["functionCall"]);c!=null&&h(e,["functionCall"],c);const d=u(n,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const f=u(n,["text"]);return f!=null&&h(e,["text"],f),e}function WE(n){const e={},t=u(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>$L(r))),h(e,["parts"],s)}const i=u(n,["role"]);return i!=null&&h(e,["role"],i),e}function jL(n){const e={},t=u(n,["anyOf"]);t!=null&&h(e,["anyOf"],t);const i=u(n,["default"]);i!=null&&h(e,["default"],i);const s=u(n,["description"]);s!=null&&h(e,["description"],s);const r=u(n,["enum"]);r!=null&&h(e,["enum"],r);const o=u(n,["example"]);o!=null&&h(e,["example"],o);const a=u(n,["format"]);a!=null&&h(e,["format"],a);const l=u(n,["items"]);l!=null&&h(e,["items"],l);const c=u(n,["maxItems"]);c!=null&&h(e,["maxItems"],c);const d=u(n,["maxLength"]);d!=null&&h(e,["maxLength"],d);const f=u(n,["maxProperties"]);f!=null&&h(e,["maxProperties"],f);const m=u(n,["maximum"]);m!=null&&h(e,["maximum"],m);const y=u(n,["minItems"]);y!=null&&h(e,["minItems"],y);const v=u(n,["minLength"]);v!=null&&h(e,["minLength"],v);const w=u(n,["minProperties"]);w!=null&&h(e,["minProperties"],w);const T=u(n,["minimum"]);T!=null&&h(e,["minimum"],T);const x=u(n,["nullable"]);x!=null&&h(e,["nullable"],x);const P=u(n,["pattern"]);P!=null&&h(e,["pattern"],P);const S=u(n,["properties"]);S!=null&&h(e,["properties"],S);const L=u(n,["propertyOrdering"]);L!=null&&h(e,["propertyOrdering"],L);const F=u(n,["required"]);F!=null&&h(e,["required"],F);const U=u(n,["title"]);U!=null&&h(e,["title"],U);const C=u(n,["type"]);return C!=null&&h(e,["type"],C),e}function WL(n){const e={};if(u(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const t=u(n,["category"]);t!=null&&h(e,["category"],t);const i=u(n,["threshold"]);return i!=null&&h(e,["threshold"],i),e}function KL(n){const e={},t=u(n,["behavior"]);t!=null&&h(e,["behavior"],t);const i=u(n,["description"]);i!=null&&h(e,["description"],i);const s=u(n,["name"]);s!=null&&h(e,["name"],s);const r=u(n,["parameters"]);r!=null&&h(e,["parameters"],r);const o=u(n,["parametersJsonSchema"]);o!=null&&h(e,["parametersJsonSchema"],o);const a=u(n,["response"]);a!=null&&h(e,["response"],a);const l=u(n,["responseJsonSchema"]);return l!=null&&h(e,["responseJsonSchema"],l),e}function YL(n){const e={},t=u(n,["startTime"]);t!=null&&h(e,["startTime"],t);const i=u(n,["endTime"]);return i!=null&&h(e,["endTime"],i),e}function JL(n){const e={},t=u(n,["timeRangeFilter"]);if(t!=null&&h(e,["timeRangeFilter"],YL(t)),u(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function XL(n){const e={},t=u(n,["mode"]);t!=null&&h(e,["mode"],t);const i=u(n,["dynamicThreshold"]);return i!=null&&h(e,["dynamicThreshold"],i),e}function QL(n){const e={},t=u(n,["dynamicRetrievalConfig"]);return t!=null&&h(e,["dynamicRetrievalConfig"],XL(t)),e}function ZL(){return{}}function e7(n){const e={},t=u(n,["environment"]);return t!=null&&h(e,["environment"],t),e}function t7(n){const e={},t=u(n,["functionDeclarations"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>KL(c))),h(e,["functionDeclarations"],l)}if(u(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=u(n,["googleSearch"]);i!=null&&h(e,["googleSearch"],JL(i));const s=u(n,["googleSearchRetrieval"]);if(s!=null&&h(e,["googleSearchRetrieval"],QL(s)),u(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(u(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");u(n,["urlContext"])!=null&&h(e,["urlContext"],ZL());const o=u(n,["computerUse"]);o!=null&&h(e,["computerUse"],e7(o));const a=u(n,["codeExecution"]);return a!=null&&h(e,["codeExecution"],a),e}function n7(n){const e={},t=u(n,["mode"]);t!=null&&h(e,["mode"],t);const i=u(n,["allowedFunctionNames"]);return i!=null&&h(e,["allowedFunctionNames"],i),e}function i7(n){const e={},t=u(n,["latitude"]);t!=null&&h(e,["latitude"],t);const i=u(n,["longitude"]);return i!=null&&h(e,["longitude"],i),e}function s7(n){const e={},t=u(n,["latLng"]);t!=null&&h(e,["latLng"],i7(t));const i=u(n,["languageCode"]);return i!=null&&h(e,["languageCode"],i),e}function r7(n){const e={},t=u(n,["functionCallingConfig"]);t!=null&&h(e,["functionCallingConfig"],n7(t));const i=u(n,["retrievalConfig"]);return i!=null&&h(e,["retrievalConfig"],s7(i)),e}function o7(n){const e={},t=u(n,["voiceName"]);return t!=null&&h(e,["voiceName"],t),e}function KE(n){const e={},t=u(n,["prebuiltVoiceConfig"]);return t!=null&&h(e,["prebuiltVoiceConfig"],o7(t)),e}function a7(n){const e={},t=u(n,["speaker"]);t!=null&&h(e,["speaker"],t);const i=u(n,["voiceConfig"]);return i!=null&&h(e,["voiceConfig"],KE(i)),e}function l7(n){const e={},t=u(n,["speakerVoiceConfigs"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>a7(s))),h(e,["speakerVoiceConfigs"],i)}return e}function c7(n){const e={},t=u(n,["voiceConfig"]);t!=null&&h(e,["voiceConfig"],KE(t));const i=u(n,["multiSpeakerVoiceConfig"]);i!=null&&h(e,["multiSpeakerVoiceConfig"],l7(i));const s=u(n,["languageCode"]);return s!=null&&h(e,["languageCode"],s),e}function u7(n){const e={},t=u(n,["includeThoughts"]);t!=null&&h(e,["includeThoughts"],t);const i=u(n,["thinkingBudget"]);return i!=null&&h(e,["thinkingBudget"],i),e}function d7(n,e,t){const i={},s=u(e,["systemInstruction"]);t!==void 0&&s!=null&&h(t,["systemInstruction"],WE(Kt(s)));const r=u(e,["temperature"]);r!=null&&h(i,["temperature"],r);const o=u(e,["topP"]);o!=null&&h(i,["topP"],o);const a=u(e,["topK"]);a!=null&&h(i,["topK"],a);const l=u(e,["candidateCount"]);l!=null&&h(i,["candidateCount"],l);const c=u(e,["maxOutputTokens"]);c!=null&&h(i,["maxOutputTokens"],c);const d=u(e,["stopSequences"]);d!=null&&h(i,["stopSequences"],d);const f=u(e,["responseLogprobs"]);f!=null&&h(i,["responseLogprobs"],f);const m=u(e,["logprobs"]);m!=null&&h(i,["logprobs"],m);const y=u(e,["presencePenalty"]);y!=null&&h(i,["presencePenalty"],y);const v=u(e,["frequencyPenalty"]);v!=null&&h(i,["frequencyPenalty"],v);const w=u(e,["seed"]);w!=null&&h(i,["seed"],w);const T=u(e,["responseMimeType"]);T!=null&&h(i,["responseMimeType"],T);const x=u(e,["responseSchema"]);x!=null&&h(i,["responseSchema"],jL(Ig(x)));const P=u(e,["responseJsonSchema"]);if(P!=null&&h(i,["responseJsonSchema"],P),u(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(u(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const S=u(e,["safetySettings"]);if(t!==void 0&&S!=null){let k=S;Array.isArray(k)&&(k=k.map(N=>WL(N))),h(t,["safetySettings"],k)}const L=u(e,["tools"]);if(t!==void 0&&L!=null){let k=ca(L);Array.isArray(k)&&(k=k.map(N=>t7(la(N)))),h(t,["tools"],k)}const F=u(e,["toolConfig"]);if(t!==void 0&&F!=null&&h(t,["toolConfig"],r7(F)),u(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const U=u(e,["cachedContent"]);t!==void 0&&U!=null&&h(t,["cachedContent"],Ui(n,U));const C=u(e,["responseModalities"]);C!=null&&h(i,["responseModalities"],C);const A=u(e,["mediaResolution"]);A!=null&&h(i,["mediaResolution"],A);const E=u(e,["speechConfig"]);if(E!=null&&h(i,["speechConfig"],c7(Cg(E))),u(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const D=u(e,["thinkingConfig"]);return D!=null&&h(i,["thinkingConfig"],u7(D)),i}function h7(n,e){const t={},i=u(e,["model"]);i!=null&&h(t,["request","model"],Me(n,i));const s=u(e,["contents"]);if(s!=null){let o=Dn(s);Array.isArray(o)&&(o=o.map(a=>WE(a))),h(t,["request","contents"],o)}const r=u(e,["config"]);return r!=null&&h(t,["request","generationConfig"],d7(n,r,t)),t}function f7(n,e){const t={};if(u(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(u(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(u(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=u(e,["fileName"]);i!=null&&h(t,["fileName"],i);const s=u(e,["inlinedRequests"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(o=>h7(n,o))),h(t,["requests","requests"],r)}return t}function p7(n,e){const t={},i=u(n,["displayName"]);if(e!==void 0&&i!=null&&h(e,["batch","displayName"],i),u(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function C1(n,e){const t={},i=u(e,["model"]);i!=null&&h(t,["_url","model"],Me(n,i));const s=u(e,["src"]);s!=null&&h(t,["batch","inputConfig"],f7(n,$E(n,s)));const r=u(e,["config"]);return r!=null&&h(t,["config"],p7(r,t)),t}function m7(n,e){const t={},i=u(e,["name"]);i!=null&&h(t,["_url","name"],ua(n,i));const s=u(e,["config"]);return s!=null&&h(t,["config"],s),t}function g7(n,e){const t={},i=u(e,["name"]);i!=null&&h(t,["_url","name"],ua(n,i));const s=u(e,["config"]);return s!=null&&h(t,["config"],s),t}function y7(n,e){const t={},i=u(n,["pageSize"]);e!==void 0&&i!=null&&h(e,["_query","pageSize"],i);const s=u(n,["pageToken"]);if(e!==void 0&&s!=null&&h(e,["_query","pageToken"],s),u(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function v7(n){const e={},t=u(n,["config"]);return t!=null&&h(e,["config"],y7(t,e)),e}function _7(n,e){const t={},i=u(e,["name"]);i!=null&&h(t,["_url","name"],ua(n,i));const s=u(e,["config"]);return s!=null&&h(t,["config"],s),t}function w7(n){const e={},t=u(n,["format"]);t!=null&&h(e,["instancesFormat"],t);const i=u(n,["gcsUri"]);i!=null&&h(e,["gcsSource","uris"],i);const s=u(n,["bigqueryUri"]);if(s!=null&&h(e,["bigquerySource","inputUri"],s),u(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(u(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function b7(n){const e={},t=u(n,["format"]);t!=null&&h(e,["predictionsFormat"],t);const i=u(n,["gcsUri"]);i!=null&&h(e,["gcsDestination","outputUriPrefix"],i);const s=u(n,["bigqueryUri"]);if(s!=null&&h(e,["bigqueryDestination","outputUri"],s),u(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(u(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");return e}function T7(n,e){const t={},i=u(n,["displayName"]);e!==void 0&&i!=null&&h(e,["displayName"],i);const s=u(n,["dest"]);return e!==void 0&&s!=null&&h(e,["outputConfig"],b7(zL(s))),t}function x7(n,e){const t={},i=u(e,["model"]);i!=null&&h(t,["model"],Me(n,i));const s=u(e,["src"]);s!=null&&h(t,["inputConfig"],w7($E(n,s)));const r=u(e,["config"]);return r!=null&&h(t,["config"],T7(r,t)),t}function E7(n,e){const t={},i=u(e,["name"]);i!=null&&h(t,["_url","name"],ua(n,i));const s=u(e,["config"]);return s!=null&&h(t,["config"],s),t}function A7(n,e){const t={},i=u(e,["name"]);i!=null&&h(t,["_url","name"],ua(n,i));const s=u(e,["config"]);return s!=null&&h(t,["config"],s),t}function I7(n,e){const t={},i=u(n,["pageSize"]);e!==void 0&&i!=null&&h(e,["_query","pageSize"],i);const s=u(n,["pageToken"]);e!==void 0&&s!=null&&h(e,["_query","pageToken"],s);const r=u(n,["filter"]);return e!==void 0&&r!=null&&h(e,["_query","filter"],r),t}function C7(n){const e={},t=u(n,["config"]);return t!=null&&h(e,["config"],I7(t,e)),e}function S7(n,e){const t={},i=u(e,["name"]);i!=null&&h(t,["_url","name"],ua(n,i));const s=u(e,["config"]);return s!=null&&h(t,["config"],s),t}function P7(n){const e={},t=u(n,["fps"]);t!=null&&h(e,["fps"],t);const i=u(n,["endOffset"]);i!=null&&h(e,["endOffset"],i);const s=u(n,["startOffset"]);return s!=null&&h(e,["startOffset"],s),e}function R7(n){const e={},t=u(n,["data"]);t!=null&&h(e,["data"],t);const i=u(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function k7(n){const e={},t=u(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const i=u(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function N7(n){const e={},t=u(n,["videoMetadata"]);t!=null&&h(e,["videoMetadata"],P7(t));const i=u(n,["thought"]);i!=null&&h(e,["thought"],i);const s=u(n,["inlineData"]);s!=null&&h(e,["inlineData"],R7(s));const r=u(n,["fileData"]);r!=null&&h(e,["fileData"],k7(r));const o=u(n,["thoughtSignature"]);o!=null&&h(e,["thoughtSignature"],o);const a=u(n,["codeExecutionResult"]);a!=null&&h(e,["codeExecutionResult"],a);const l=u(n,["executableCode"]);l!=null&&h(e,["executableCode"],l);const c=u(n,["functionCall"]);c!=null&&h(e,["functionCall"],c);const d=u(n,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const f=u(n,["text"]);return f!=null&&h(e,["text"],f),e}function M7(n){const e={},t=u(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>N7(r))),h(e,["parts"],s)}const i=u(n,["role"]);return i!=null&&h(e,["role"],i),e}function D7(n){const e={},t=u(n,["citationSources"]);return t!=null&&h(e,["citations"],t),e}function L7(n){const e={},t=u(n,["retrievedUrl"]);t!=null&&h(e,["retrievedUrl"],t);const i=u(n,["urlRetrievalStatus"]);return i!=null&&h(e,["urlRetrievalStatus"],i),e}function F7(n){const e={},t=u(n,["urlMetadata"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>L7(s))),h(e,["urlMetadata"],i)}return e}function V7(n){const e={},t=u(n,["content"]);t!=null&&h(e,["content"],M7(t));const i=u(n,["citationMetadata"]);i!=null&&h(e,["citationMetadata"],D7(i));const s=u(n,["tokenCount"]);s!=null&&h(e,["tokenCount"],s);const r=u(n,["finishReason"]);r!=null&&h(e,["finishReason"],r);const o=u(n,["urlContextMetadata"]);o!=null&&h(e,["urlContextMetadata"],F7(o));const a=u(n,["avgLogprobs"]);a!=null&&h(e,["avgLogprobs"],a);const l=u(n,["groundingMetadata"]);l!=null&&h(e,["groundingMetadata"],l);const c=u(n,["index"]);c!=null&&h(e,["index"],c);const d=u(n,["logprobsResult"]);d!=null&&h(e,["logprobsResult"],d);const f=u(n,["safetyRatings"]);return f!=null&&h(e,["safetyRatings"],f),e}function O7(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=u(n,["candidates"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>V7(c))),h(e,["candidates"],l)}const s=u(n,["modelVersion"]);s!=null&&h(e,["modelVersion"],s);const r=u(n,["promptFeedback"]);r!=null&&h(e,["promptFeedback"],r);const o=u(n,["responseId"]);o!=null&&h(e,["responseId"],o);const a=u(n,["usageMetadata"]);return a!=null&&h(e,["usageMetadata"],a),e}function YE(n){const e={},t=u(n,["details"]);t!=null&&h(e,["details"],t);const i=u(n,["code"]);i!=null&&h(e,["code"],i);const s=u(n,["message"]);return s!=null&&h(e,["message"],s),e}function U7(n){const e={},t=u(n,["response"]);t!=null&&h(e,["response"],O7(t));const i=u(n,["error"]);return i!=null&&h(e,["error"],YE(i)),e}function B7(n){const e={},t=u(n,["responsesFile"]);t!=null&&h(e,["fileName"],t);const i=u(n,["inlinedResponses","inlinedResponses"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(r=>U7(r))),h(e,["inlinedResponses"],s)}return e}function bu(n){const e={},t=u(n,["name"]);t!=null&&h(e,["name"],t);const i=u(n,["metadata","displayName"]);i!=null&&h(e,["displayName"],i);const s=u(n,["metadata","state"]);s!=null&&h(e,["state"],jE(s));const r=u(n,["metadata","createTime"]);r!=null&&h(e,["createTime"],r);const o=u(n,["metadata","endTime"]);o!=null&&h(e,["endTime"],o);const a=u(n,["metadata","updateTime"]);a!=null&&h(e,["updateTime"],a);const l=u(n,["metadata","model"]);l!=null&&h(e,["model"],l);const c=u(n,["metadata","output"]);return c!=null&&h(e,["dest"],B7(c)),e}function z7(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=u(n,["nextPageToken"]);i!=null&&h(e,["nextPageToken"],i);const s=u(n,["operations"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(o=>bu(o))),h(e,["batchJobs"],r)}return e}function q7(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=u(n,["name"]);i!=null&&h(e,["name"],i);const s=u(n,["done"]);s!=null&&h(e,["done"],s);const r=u(n,["error"]);return r!=null&&h(e,["error"],YE(r)),e}function JE(n){const e={},t=u(n,["details"]);t!=null&&h(e,["details"],t);const i=u(n,["code"]);i!=null&&h(e,["code"],i);const s=u(n,["message"]);return s!=null&&h(e,["message"],s),e}function H7(n){const e={},t=u(n,["instancesFormat"]);t!=null&&h(e,["format"],t);const i=u(n,["gcsSource","uris"]);i!=null&&h(e,["gcsUri"],i);const s=u(n,["bigquerySource","inputUri"]);return s!=null&&h(e,["bigqueryUri"],s),e}function G7(n){const e={},t=u(n,["predictionsFormat"]);t!=null&&h(e,["format"],t);const i=u(n,["gcsDestination","outputUriPrefix"]);i!=null&&h(e,["gcsUri"],i);const s=u(n,["bigqueryDestination","outputUri"]);return s!=null&&h(e,["bigqueryUri"],s),e}function cp(n){const e={},t=u(n,["name"]);t!=null&&h(e,["name"],t);const i=u(n,["displayName"]);i!=null&&h(e,["displayName"],i);const s=u(n,["state"]);s!=null&&h(e,["state"],jE(s));const r=u(n,["error"]);r!=null&&h(e,["error"],JE(r));const o=u(n,["createTime"]);o!=null&&h(e,["createTime"],o);const a=u(n,["startTime"]);a!=null&&h(e,["startTime"],a);const l=u(n,["endTime"]);l!=null&&h(e,["endTime"],l);const c=u(n,["updateTime"]);c!=null&&h(e,["updateTime"],c);const d=u(n,["model"]);d!=null&&h(e,["model"],d);const f=u(n,["inputConfig"]);f!=null&&h(e,["src"],H7(f));const m=u(n,["outputConfig"]);return m!=null&&h(e,["dest"],G7(m)),e}function $7(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=u(n,["nextPageToken"]);i!=null&&h(e,["nextPageToken"],i);const s=u(n,["batchPredictionJobs"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(o=>cp(o))),h(e,["batchJobs"],r)}return e}function j7(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=u(n,["name"]);i!=null&&h(e,["name"],i);const s=u(n,["done"]);s!=null&&h(e,["done"],s);const r=u(n,["error"]);return r!=null&&h(e,["error"],JE(r)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Er;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(Er||(Er={}));class yc{constructor(e,t,i,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,i,s)}init(e,t,i){var s,r;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t?.sdkHttpResponse,this.idxInternal=0;let o={config:{}};!i||Object.keys(i).length===0?o={config:{}}:typeof i=="object"?o=Object.assign({},i):o=i,o.config&&(o.config.pageToken=t.nextPageToken),this.paramsInternal=o,this.pageInternalSize=(r=(s=o.config)===null||s===void 0?void 0:s.pageSize)!==null&&r!==void 0?r:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class W7 extends Lr{constructor(e){super(),this.apiClient=e,this.create=async t=>{var i,s;if(this.apiClient.isVertexAI()){const o=Date.now().toString();if(Array.isArray(t.src))throw new Error("InlinedRequest[] is not supported in Vertex AI. Please use Google Cloud Storage URI or BigQuery URI instead.");if(t.config=t.config||{},t.config.displayName===void 0&&(t.config.displayName="genaiBatchJob_${timestampStr}"),t.config.dest===void 0&&typeof t.src=="string")if(t.src.startsWith("gs://")&&t.src.endsWith(".jsonl"))t.config.dest=`${t.src.slice(0,-6)}/dest`;else if(t.src.startsWith("bq://"))t.config.dest=`${t.src}_dest_${o}`;else throw new Error("Unsupported source:"+t.src)}else if(Array.isArray(t.src)||typeof t.src!="string"&&t.src.inlinedRequests){let r="",o={};const a=C1(this.apiClient,t);r=ie("{model}:batchGenerateContent",a._url),o=a._query;const d=a.batch.inputConfig.requests,f=d.requests,m=[];for(const v of f){const w=v;if(w.systemInstruction){const T=w.systemInstruction;delete w.systemInstruction;const x=w.request;x.systemInstruction=T,w.request=x}m.push(w)}return d.requests=m,delete a.config,delete a._url,delete a._query,this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(i=t.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=t.config)===null||s===void 0?void 0:s.abortSignal}).then(v=>v.json()).then(v=>bu(v))}return await this.createInternal(t)},this.list=async(t={})=>new yc(Er.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(t),t)}async createInternal(e){var t,i,s,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=x7(this.apiClient,e);return a=ie("batchPredictionJobs",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>cp(d))}else{const c=C1(this.apiClient,e);return a=ie("{model}:batchGenerateContent",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>bu(d))}}async get(e){var t,i,s,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=E7(this.apiClient,e);return a=ie("batchPredictionJobs/{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>cp(d))}else{const c=m7(this.apiClient,e);return a=ie("batches/{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>bu(d))}}async cancel(e){var t,i,s,r;let o="",a={};if(this.apiClient.isVertexAI()){const l=A7(this.apiClient,e);o=ie("batchPredictionJobs/{name}:cancel",l._url),a=l._query,delete l.config,delete l._url,delete l._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const l=g7(this.apiClient,e);o=ie("batches/{name}:cancel",l._url),a=l._query,delete l.config,delete l._url,delete l._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var t,i,s,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=C7(e);return a=ie("batchPredictionJobs",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const f=$7(d),m=new x1;return Object.assign(m,f),m})}else{const c=v7(e);return a=ie("batches",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const f=z7(d),m=new x1;return Object.assign(m,f),m})}}async delete(e){var t,i,s,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=S7(this.apiClient,e);return a=ie("batchPredictionJobs/{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>j7(d))}else{const c=_7(this.apiClient,e);return a=ie("batches/{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>q7(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function K7(n){const e={},t=u(n,["fps"]);t!=null&&h(e,["fps"],t);const i=u(n,["endOffset"]);i!=null&&h(e,["endOffset"],i);const s=u(n,["startOffset"]);return s!=null&&h(e,["startOffset"],s),e}function Y7(n){const e={};if(u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=u(n,["data"]);t!=null&&h(e,["data"],t);const i=u(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function J7(n){const e={};if(u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=u(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const i=u(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function X7(n){const e={},t=u(n,["videoMetadata"]);t!=null&&h(e,["videoMetadata"],K7(t));const i=u(n,["thought"]);i!=null&&h(e,["thought"],i);const s=u(n,["inlineData"]);s!=null&&h(e,["inlineData"],Y7(s));const r=u(n,["fileData"]);r!=null&&h(e,["fileData"],J7(r));const o=u(n,["thoughtSignature"]);o!=null&&h(e,["thoughtSignature"],o);const a=u(n,["codeExecutionResult"]);a!=null&&h(e,["codeExecutionResult"],a);const l=u(n,["executableCode"]);l!=null&&h(e,["executableCode"],l);const c=u(n,["functionCall"]);c!=null&&h(e,["functionCall"],c);const d=u(n,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const f=u(n,["text"]);return f!=null&&h(e,["text"],f),e}function S1(n){const e={},t=u(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>X7(r))),h(e,["parts"],s)}const i=u(n,["role"]);return i!=null&&h(e,["role"],i),e}function Q7(n){const e={},t=u(n,["behavior"]);t!=null&&h(e,["behavior"],t);const i=u(n,["description"]);i!=null&&h(e,["description"],i);const s=u(n,["name"]);s!=null&&h(e,["name"],s);const r=u(n,["parameters"]);r!=null&&h(e,["parameters"],r);const o=u(n,["parametersJsonSchema"]);o!=null&&h(e,["parametersJsonSchema"],o);const a=u(n,["response"]);a!=null&&h(e,["response"],a);const l=u(n,["responseJsonSchema"]);return l!=null&&h(e,["responseJsonSchema"],l),e}function Z7(n){const e={},t=u(n,["startTime"]);t!=null&&h(e,["startTime"],t);const i=u(n,["endTime"]);return i!=null&&h(e,["endTime"],i),e}function eF(n){const e={},t=u(n,["timeRangeFilter"]);if(t!=null&&h(e,["timeRangeFilter"],Z7(t)),u(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function tF(n){const e={},t=u(n,["mode"]);t!=null&&h(e,["mode"],t);const i=u(n,["dynamicThreshold"]);return i!=null&&h(e,["dynamicThreshold"],i),e}function nF(n){const e={},t=u(n,["dynamicRetrievalConfig"]);return t!=null&&h(e,["dynamicRetrievalConfig"],tF(t)),e}function iF(){return{}}function sF(n){const e={},t=u(n,["environment"]);return t!=null&&h(e,["environment"],t),e}function rF(n){const e={},t=u(n,["functionDeclarations"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>Q7(c))),h(e,["functionDeclarations"],l)}if(u(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=u(n,["googleSearch"]);i!=null&&h(e,["googleSearch"],eF(i));const s=u(n,["googleSearchRetrieval"]);if(s!=null&&h(e,["googleSearchRetrieval"],nF(s)),u(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(u(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");u(n,["urlContext"])!=null&&h(e,["urlContext"],iF());const o=u(n,["computerUse"]);o!=null&&h(e,["computerUse"],sF(o));const a=u(n,["codeExecution"]);return a!=null&&h(e,["codeExecution"],a),e}function oF(n){const e={},t=u(n,["mode"]);t!=null&&h(e,["mode"],t);const i=u(n,["allowedFunctionNames"]);return i!=null&&h(e,["allowedFunctionNames"],i),e}function aF(n){const e={},t=u(n,["latitude"]);t!=null&&h(e,["latitude"],t);const i=u(n,["longitude"]);return i!=null&&h(e,["longitude"],i),e}function lF(n){const e={},t=u(n,["latLng"]);t!=null&&h(e,["latLng"],aF(t));const i=u(n,["languageCode"]);return i!=null&&h(e,["languageCode"],i),e}function cF(n){const e={},t=u(n,["functionCallingConfig"]);t!=null&&h(e,["functionCallingConfig"],oF(t));const i=u(n,["retrievalConfig"]);return i!=null&&h(e,["retrievalConfig"],lF(i)),e}function uF(n,e){const t={},i=u(n,["ttl"]);e!==void 0&&i!=null&&h(e,["ttl"],i);const s=u(n,["expireTime"]);e!==void 0&&s!=null&&h(e,["expireTime"],s);const r=u(n,["displayName"]);e!==void 0&&r!=null&&h(e,["displayName"],r);const o=u(n,["contents"]);if(e!==void 0&&o!=null){let d=Dn(o);Array.isArray(d)&&(d=d.map(f=>S1(f))),h(e,["contents"],d)}const a=u(n,["systemInstruction"]);e!==void 0&&a!=null&&h(e,["systemInstruction"],S1(Kt(a)));const l=u(n,["tools"]);if(e!==void 0&&l!=null){let d=l;Array.isArray(d)&&(d=d.map(f=>rF(f))),h(e,["tools"],d)}const c=u(n,["toolConfig"]);if(e!==void 0&&c!=null&&h(e,["toolConfig"],cF(c)),u(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function dF(n,e){const t={},i=u(e,["model"]);i!=null&&h(t,["model"],LE(n,i));const s=u(e,["config"]);return s!=null&&h(t,["config"],uF(s,t)),t}function hF(n,e){const t={},i=u(e,["name"]);i!=null&&h(t,["_url","name"],Ui(n,i));const s=u(e,["config"]);return s!=null&&h(t,["config"],s),t}function fF(n,e){const t={},i=u(e,["name"]);i!=null&&h(t,["_url","name"],Ui(n,i));const s=u(e,["config"]);return s!=null&&h(t,["config"],s),t}function pF(n,e){const t={},i=u(n,["ttl"]);e!==void 0&&i!=null&&h(e,["ttl"],i);const s=u(n,["expireTime"]);return e!==void 0&&s!=null&&h(e,["expireTime"],s),t}function mF(n,e){const t={},i=u(e,["name"]);i!=null&&h(t,["_url","name"],Ui(n,i));const s=u(e,["config"]);return s!=null&&h(t,["config"],pF(s,t)),t}function gF(n,e){const t={},i=u(n,["pageSize"]);e!==void 0&&i!=null&&h(e,["_query","pageSize"],i);const s=u(n,["pageToken"]);return e!==void 0&&s!=null&&h(e,["_query","pageToken"],s),t}function yF(n){const e={},t=u(n,["config"]);return t!=null&&h(e,["config"],gF(t,e)),e}function vF(n){const e={},t=u(n,["fps"]);t!=null&&h(e,["fps"],t);const i=u(n,["endOffset"]);i!=null&&h(e,["endOffset"],i);const s=u(n,["startOffset"]);return s!=null&&h(e,["startOffset"],s),e}function _F(n){const e={},t=u(n,["displayName"]);t!=null&&h(e,["displayName"],t);const i=u(n,["data"]);i!=null&&h(e,["data"],i);const s=u(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function wF(n){const e={},t=u(n,["displayName"]);t!=null&&h(e,["displayName"],t);const i=u(n,["fileUri"]);i!=null&&h(e,["fileUri"],i);const s=u(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function bF(n){const e={},t=u(n,["videoMetadata"]);t!=null&&h(e,["videoMetadata"],vF(t));const i=u(n,["thought"]);i!=null&&h(e,["thought"],i);const s=u(n,["inlineData"]);s!=null&&h(e,["inlineData"],_F(s));const r=u(n,["fileData"]);r!=null&&h(e,["fileData"],wF(r));const o=u(n,["thoughtSignature"]);o!=null&&h(e,["thoughtSignature"],o);const a=u(n,["codeExecutionResult"]);a!=null&&h(e,["codeExecutionResult"],a);const l=u(n,["executableCode"]);l!=null&&h(e,["executableCode"],l);const c=u(n,["functionCall"]);c!=null&&h(e,["functionCall"],c);const d=u(n,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const f=u(n,["text"]);return f!=null&&h(e,["text"],f),e}function P1(n){const e={},t=u(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>bF(r))),h(e,["parts"],s)}const i=u(n,["role"]);return i!=null&&h(e,["role"],i),e}function TF(n){const e={};if(u(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=u(n,["description"]);t!=null&&h(e,["description"],t);const i=u(n,["name"]);i!=null&&h(e,["name"],i);const s=u(n,["parameters"]);s!=null&&h(e,["parameters"],s);const r=u(n,["parametersJsonSchema"]);r!=null&&h(e,["parametersJsonSchema"],r);const o=u(n,["response"]);o!=null&&h(e,["response"],o);const a=u(n,["responseJsonSchema"]);return a!=null&&h(e,["responseJsonSchema"],a),e}function xF(n){const e={},t=u(n,["startTime"]);t!=null&&h(e,["startTime"],t);const i=u(n,["endTime"]);return i!=null&&h(e,["endTime"],i),e}function EF(n){const e={},t=u(n,["timeRangeFilter"]);t!=null&&h(e,["timeRangeFilter"],xF(t));const i=u(n,["excludeDomains"]);return i!=null&&h(e,["excludeDomains"],i),e}function AF(n){const e={},t=u(n,["mode"]);t!=null&&h(e,["mode"],t);const i=u(n,["dynamicThreshold"]);return i!=null&&h(e,["dynamicThreshold"],i),e}function IF(n){const e={},t=u(n,["dynamicRetrievalConfig"]);return t!=null&&h(e,["dynamicRetrievalConfig"],AF(t)),e}function CF(n){const e={},t=u(n,["excludeDomains"]);return t!=null&&h(e,["excludeDomains"],t),e}function SF(n){const e={},t=u(n,["apiKeyString"]);return t!=null&&h(e,["apiKeyString"],t),e}function PF(n){const e={},t=u(n,["apiKeyConfig"]);t!=null&&h(e,["apiKeyConfig"],SF(t));const i=u(n,["authType"]);i!=null&&h(e,["authType"],i);const s=u(n,["googleServiceAccountConfig"]);s!=null&&h(e,["googleServiceAccountConfig"],s);const r=u(n,["httpBasicAuthConfig"]);r!=null&&h(e,["httpBasicAuthConfig"],r);const o=u(n,["oauthConfig"]);o!=null&&h(e,["oauthConfig"],o);const a=u(n,["oidcConfig"]);return a!=null&&h(e,["oidcConfig"],a),e}function RF(n){const e={},t=u(n,["authConfig"]);return t!=null&&h(e,["authConfig"],PF(t)),e}function kF(){return{}}function NF(n){const e={},t=u(n,["environment"]);return t!=null&&h(e,["environment"],t),e}function MF(n){const e={},t=u(n,["functionDeclarations"]);if(t!=null){let f=t;Array.isArray(f)&&(f=f.map(m=>TF(m))),h(e,["functionDeclarations"],f)}const i=u(n,["retrieval"]);i!=null&&h(e,["retrieval"],i);const s=u(n,["googleSearch"]);s!=null&&h(e,["googleSearch"],EF(s));const r=u(n,["googleSearchRetrieval"]);r!=null&&h(e,["googleSearchRetrieval"],IF(r));const o=u(n,["enterpriseWebSearch"]);o!=null&&h(e,["enterpriseWebSearch"],CF(o));const a=u(n,["googleMaps"]);a!=null&&h(e,["googleMaps"],RF(a)),u(n,["urlContext"])!=null&&h(e,["urlContext"],kF());const c=u(n,["computerUse"]);c!=null&&h(e,["computerUse"],NF(c));const d=u(n,["codeExecution"]);return d!=null&&h(e,["codeExecution"],d),e}function DF(n){const e={},t=u(n,["mode"]);t!=null&&h(e,["mode"],t);const i=u(n,["allowedFunctionNames"]);return i!=null&&h(e,["allowedFunctionNames"],i),e}function LF(n){const e={},t=u(n,["latitude"]);t!=null&&h(e,["latitude"],t);const i=u(n,["longitude"]);return i!=null&&h(e,["longitude"],i),e}function FF(n){const e={},t=u(n,["latLng"]);t!=null&&h(e,["latLng"],LF(t));const i=u(n,["languageCode"]);return i!=null&&h(e,["languageCode"],i),e}function VF(n){const e={},t=u(n,["functionCallingConfig"]);t!=null&&h(e,["functionCallingConfig"],DF(t));const i=u(n,["retrievalConfig"]);return i!=null&&h(e,["retrievalConfig"],FF(i)),e}function OF(n,e){const t={},i=u(n,["ttl"]);e!==void 0&&i!=null&&h(e,["ttl"],i);const s=u(n,["expireTime"]);e!==void 0&&s!=null&&h(e,["expireTime"],s);const r=u(n,["displayName"]);e!==void 0&&r!=null&&h(e,["displayName"],r);const o=u(n,["contents"]);if(e!==void 0&&o!=null){let f=Dn(o);Array.isArray(f)&&(f=f.map(m=>P1(m))),h(e,["contents"],f)}const a=u(n,["systemInstruction"]);e!==void 0&&a!=null&&h(e,["systemInstruction"],P1(Kt(a)));const l=u(n,["tools"]);if(e!==void 0&&l!=null){let f=l;Array.isArray(f)&&(f=f.map(m=>MF(m))),h(e,["tools"],f)}const c=u(n,["toolConfig"]);e!==void 0&&c!=null&&h(e,["toolConfig"],VF(c));const d=u(n,["kmsKeyName"]);return e!==void 0&&d!=null&&h(e,["encryption_spec","kmsKeyName"],d),t}function UF(n,e){const t={},i=u(e,["model"]);i!=null&&h(t,["model"],LE(n,i));const s=u(e,["config"]);return s!=null&&h(t,["config"],OF(s,t)),t}function BF(n,e){const t={},i=u(e,["name"]);i!=null&&h(t,["_url","name"],Ui(n,i));const s=u(e,["config"]);return s!=null&&h(t,["config"],s),t}function zF(n,e){const t={},i=u(e,["name"]);i!=null&&h(t,["_url","name"],Ui(n,i));const s=u(e,["config"]);return s!=null&&h(t,["config"],s),t}function qF(n,e){const t={},i=u(n,["ttl"]);e!==void 0&&i!=null&&h(e,["ttl"],i);const s=u(n,["expireTime"]);return e!==void 0&&s!=null&&h(e,["expireTime"],s),t}function HF(n,e){const t={},i=u(e,["name"]);i!=null&&h(t,["_url","name"],Ui(n,i));const s=u(e,["config"]);return s!=null&&h(t,["config"],qF(s,t)),t}function GF(n,e){const t={},i=u(n,["pageSize"]);e!==void 0&&i!=null&&h(e,["_query","pageSize"],i);const s=u(n,["pageToken"]);return e!==void 0&&s!=null&&h(e,["_query","pageToken"],s),t}function $F(n){const e={},t=u(n,["config"]);return t!=null&&h(e,["config"],GF(t,e)),e}function Tu(n){const e={},t=u(n,["name"]);t!=null&&h(e,["name"],t);const i=u(n,["displayName"]);i!=null&&h(e,["displayName"],i);const s=u(n,["model"]);s!=null&&h(e,["model"],s);const r=u(n,["createTime"]);r!=null&&h(e,["createTime"],r);const o=u(n,["updateTime"]);o!=null&&h(e,["updateTime"],o);const a=u(n,["expireTime"]);a!=null&&h(e,["expireTime"],a);const l=u(n,["usageMetadata"]);return l!=null&&h(e,["usageMetadata"],l),e}function jF(){return{}}function WF(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=u(n,["nextPageToken"]);i!=null&&h(e,["nextPageToken"],i);const s=u(n,["cachedContents"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(o=>Tu(o))),h(e,["cachedContents"],r)}return e}function xu(n){const e={},t=u(n,["name"]);t!=null&&h(e,["name"],t);const i=u(n,["displayName"]);i!=null&&h(e,["displayName"],i);const s=u(n,["model"]);s!=null&&h(e,["model"],s);const r=u(n,["createTime"]);r!=null&&h(e,["createTime"],r);const o=u(n,["updateTime"]);o!=null&&h(e,["updateTime"],o);const a=u(n,["expireTime"]);a!=null&&h(e,["expireTime"],a);const l=u(n,["usageMetadata"]);return l!=null&&h(e,["usageMetadata"],l),e}function KF(){return{}}function YF(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=u(n,["nextPageToken"]);i!=null&&h(e,["nextPageToken"],i);const s=u(n,["cachedContents"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(o=>xu(o))),h(e,["cachedContents"],r)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class JF extends Lr{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new yc(Er.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(t),t)}async create(e){var t,i,s,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=UF(this.apiClient,e);return a=ie("cachedContents",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>xu(d))}else{const c=dF(this.apiClient,e);return a=ie("cachedContents",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>Tu(d))}}async get(e){var t,i,s,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=BF(this.apiClient,e);return a=ie("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>xu(d))}else{const c=hF(this.apiClient,e);return a=ie("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>Tu(d))}}async delete(e){var t,i,s,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=zF(this.apiClient,e);return a=ie("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(()=>{const d=KF(),f=new b1;return Object.assign(f,d),f})}else{const c=fF(this.apiClient,e);return a=ie("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(()=>{const d=jF(),f=new b1;return Object.assign(f,d),f})}}async update(e){var t,i,s,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=HF(this.apiClient,e);return a=ie("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>xu(d))}else{const c=mF(this.apiClient,e);return a=ie("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>Tu(d))}}async listInternal(e){var t,i,s,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=$F(e);return a=ie("cachedContents",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const f=YF(d),m=new T1;return Object.assign(m,f),m})}else{const c=yF(e);return a=ie("cachedContents",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const f=WF(d),m=new T1;return Object.assign(m,f),m})}}}function R1(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ge(n){return this instanceof Ge?(this.v=n,this):new Ge(n)}function vo(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),s,r=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),s[Symbol.asyncIterator]=function(){return this},s;function o(y){return function(v){return Promise.resolve(v).then(y,f)}}function a(y,v){i[y]&&(s[y]=function(w){return new Promise(function(T,x){r.push([y,w,T,x])>1||l(y,w)})},v&&(s[y]=v(s[y])))}function l(y,v){try{c(i[y](v))}catch(w){m(r[0][3],w)}}function c(y){y.value instanceof Ge?Promise.resolve(y.value.v).then(d,f):m(r[0][2],y)}function d(y){l("next",y)}function f(y){l("throw",y)}function m(y,v){y(v),r.shift(),r.length&&l(r[0][0],r[0][1])}}function gl(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof R1=="function"?R1(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(r){t[r]=n[r]&&function(o){return new Promise(function(a,l){o=n[r](o),s(a,l,o.done,o.value)})}}function s(r,o,a,l){Promise.resolve(l).then(function(c){r({value:c,done:a})},o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function XF(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:XE(t)}function XE(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function QF(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function k1(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let i=0;for(;i<t;)if(n[i].role==="user")e.push(n[i]),i++;else{const s=[];let r=!0;for(;i<t&&n[i].role==="model";)s.push(n[i]),r&&!XE(n[i])&&(r=!1),i++;r?e.push(...s):e.pop()}return e}class ZF{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new e9(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class e9{constructor(e,t,i,s={},r=[]){this.apiClient=e,this.modelsModule=t,this.model=i,this.config=s,this.history=r,this.sendPromise=Promise.resolve(),QF(r)}async sendMessage(e){var t;await this.sendPromise;const i=Kt(e.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var r,o,a;const l=await s,c=(o=(r=l.candidates)===null||r===void 0?void 0:r[0])===null||o===void 0?void 0:o.content,d=l.automaticFunctionCallingHistory,f=this.getHistory(!0).length;let m=[];d!=null&&(m=(a=d.slice(f))!==null&&a!==void 0?a:[]);const y=c?[c]:[];this.recordHistory(i,y,m)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),s}async sendMessageStream(e){var t;await this.sendPromise;const i=Kt(e.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const r=await s;return this.processStreamResponse(r,i)}getHistory(e=!1){const t=e?k1(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){var i,s;return vo(this,arguments,function*(){var o,a,l,c;const d=[];try{for(var f=!0,m=gl(e),y;y=yield Ge(m.next()),o=y.done,!o;f=!0){c=y.value,f=!1;const v=c;if(XF(v)){const w=(s=(i=v.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content;w!==void 0&&d.push(w)}yield yield Ge(v)}}catch(v){a={error:v}}finally{try{!f&&!o&&(l=m.return)&&(yield Ge(l.call(m)))}finally{if(a)throw a.error}}this.recordHistory(t,d)})}recordHistory(e,t,i){let s=[];t.length>0&&t.every(r=>r.role!==void 0)?s=t:s.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...k1(i)):this.history.push(e),this.history.push(...s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Zd extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Zd.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function t9(n,e){const t={},i=u(n,["pageSize"]);e!==void 0&&i!=null&&h(e,["_query","pageSize"],i);const s=u(n,["pageToken"]);return e!==void 0&&s!=null&&h(e,["_query","pageToken"],s),t}function n9(n){const e={},t=u(n,["config"]);return t!=null&&h(e,["config"],t9(t,e)),e}function i9(n){const e={},t=u(n,["details"]);t!=null&&h(e,["details"],t);const i=u(n,["message"]);i!=null&&h(e,["message"],i);const s=u(n,["code"]);return s!=null&&h(e,["code"],s),e}function s9(n){const e={},t=u(n,["name"]);t!=null&&h(e,["name"],t);const i=u(n,["displayName"]);i!=null&&h(e,["displayName"],i);const s=u(n,["mimeType"]);s!=null&&h(e,["mimeType"],s);const r=u(n,["sizeBytes"]);r!=null&&h(e,["sizeBytes"],r);const o=u(n,["createTime"]);o!=null&&h(e,["createTime"],o);const a=u(n,["expirationTime"]);a!=null&&h(e,["expirationTime"],a);const l=u(n,["updateTime"]);l!=null&&h(e,["updateTime"],l);const c=u(n,["sha256Hash"]);c!=null&&h(e,["sha256Hash"],c);const d=u(n,["uri"]);d!=null&&h(e,["uri"],d);const f=u(n,["downloadUri"]);f!=null&&h(e,["downloadUri"],f);const m=u(n,["state"]);m!=null&&h(e,["state"],m);const y=u(n,["source"]);y!=null&&h(e,["source"],y);const v=u(n,["videoMetadata"]);v!=null&&h(e,["videoMetadata"],v);const w=u(n,["error"]);return w!=null&&h(e,["error"],i9(w)),e}function r9(n){const e={},t=u(n,["file"]);t!=null&&h(e,["file"],s9(t));const i=u(n,["config"]);return i!=null&&h(e,["config"],i),e}function o9(n){const e={},t=u(n,["name"]);t!=null&&h(e,["_url","file"],qE(t));const i=u(n,["config"]);return i!=null&&h(e,["config"],i),e}function a9(n){const e={},t=u(n,["name"]);t!=null&&h(e,["_url","file"],qE(t));const i=u(n,["config"]);return i!=null&&h(e,["config"],i),e}function l9(n){const e={},t=u(n,["details"]);t!=null&&h(e,["details"],t);const i=u(n,["message"]);i!=null&&h(e,["message"],i);const s=u(n,["code"]);return s!=null&&h(e,["code"],s),e}function up(n){const e={},t=u(n,["name"]);t!=null&&h(e,["name"],t);const i=u(n,["displayName"]);i!=null&&h(e,["displayName"],i);const s=u(n,["mimeType"]);s!=null&&h(e,["mimeType"],s);const r=u(n,["sizeBytes"]);r!=null&&h(e,["sizeBytes"],r);const o=u(n,["createTime"]);o!=null&&h(e,["createTime"],o);const a=u(n,["expirationTime"]);a!=null&&h(e,["expirationTime"],a);const l=u(n,["updateTime"]);l!=null&&h(e,["updateTime"],l);const c=u(n,["sha256Hash"]);c!=null&&h(e,["sha256Hash"],c);const d=u(n,["uri"]);d!=null&&h(e,["uri"],d);const f=u(n,["downloadUri"]);f!=null&&h(e,["downloadUri"],f);const m=u(n,["state"]);m!=null&&h(e,["state"],m);const y=u(n,["source"]);y!=null&&h(e,["source"],y);const v=u(n,["videoMetadata"]);v!=null&&h(e,["videoMetadata"],v);const w=u(n,["error"]);return w!=null&&h(e,["error"],l9(w)),e}function c9(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=u(n,["nextPageToken"]);i!=null&&h(e,["nextPageToken"],i);const s=u(n,["files"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(o=>up(o))),h(e,["files"],r)}return e}function u9(n){const e={},t=u(n,["sdkHttpResponse"]);return t!=null&&h(e,["sdkHttpResponse"],t),e}function d9(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class h9 extends Lr{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new yc(Er.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>up(t))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,i;let s,r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=n9(e);return r=ie("files",a._url),o=a._query,delete a.config,delete a._url,delete a._query,s=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(c=>{const d=c;return d.sdkHttpResponse={headers:l.headers},d})),s.then(l=>{const c=c9(l),d=new SL;return Object.assign(d,c),d})}}async createInternal(e){var t,i;let s,r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=r9(e);return r=ie("upload/v1beta/files",a._url),o=a._query,delete a.config,delete a._url,delete a._query,s=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),s.then(l=>{const c=u9(l),d=new PL;return Object.assign(d,c),d})}}async get(e){var t,i;let s,r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=o9(e);return r=ie("files/{file}",a._url),o=a._query,delete a.config,delete a._url,delete a._query,s=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),s.then(l=>up(l))}}async delete(e){var t,i;let s,r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=a9(e);return r=ie("files/{file}",a._url),o=a._query,delete a.config,delete a._url,delete a._query,s=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),s.then(()=>{const l=d9(),c=new RL;return Object.assign(c,l),c})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function f9(n){const e={},t=u(n,["voiceName"]);return t!=null&&h(e,["voiceName"],t),e}function QE(n){const e={},t=u(n,["prebuiltVoiceConfig"]);return t!=null&&h(e,["prebuiltVoiceConfig"],f9(t)),e}function p9(n){const e={},t=u(n,["speaker"]);t!=null&&h(e,["speaker"],t);const i=u(n,["voiceConfig"]);return i!=null&&h(e,["voiceConfig"],QE(i)),e}function m9(n){const e={},t=u(n,["speakerVoiceConfigs"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>p9(s))),h(e,["speakerVoiceConfigs"],i)}return e}function g9(n){const e={},t=u(n,["voiceConfig"]);t!=null&&h(e,["voiceConfig"],QE(t));const i=u(n,["multiSpeakerVoiceConfig"]);i!=null&&h(e,["multiSpeakerVoiceConfig"],m9(i));const s=u(n,["languageCode"]);return s!=null&&h(e,["languageCode"],s),e}function y9(n){const e={},t=u(n,["fps"]);t!=null&&h(e,["fps"],t);const i=u(n,["endOffset"]);i!=null&&h(e,["endOffset"],i);const s=u(n,["startOffset"]);return s!=null&&h(e,["startOffset"],s),e}function v9(n){const e={};if(u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=u(n,["data"]);t!=null&&h(e,["data"],t);const i=u(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function _9(n){const e={};if(u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=u(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const i=u(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function w9(n){const e={},t=u(n,["videoMetadata"]);t!=null&&h(e,["videoMetadata"],y9(t));const i=u(n,["thought"]);i!=null&&h(e,["thought"],i);const s=u(n,["inlineData"]);s!=null&&h(e,["inlineData"],v9(s));const r=u(n,["fileData"]);r!=null&&h(e,["fileData"],_9(r));const o=u(n,["thoughtSignature"]);o!=null&&h(e,["thoughtSignature"],o);const a=u(n,["codeExecutionResult"]);a!=null&&h(e,["codeExecutionResult"],a);const l=u(n,["executableCode"]);l!=null&&h(e,["executableCode"],l);const c=u(n,["functionCall"]);c!=null&&h(e,["functionCall"],c);const d=u(n,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const f=u(n,["text"]);return f!=null&&h(e,["text"],f),e}function b9(n){const e={},t=u(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>w9(r))),h(e,["parts"],s)}const i=u(n,["role"]);return i!=null&&h(e,["role"],i),e}function T9(n){const e={},t=u(n,["behavior"]);t!=null&&h(e,["behavior"],t);const i=u(n,["description"]);i!=null&&h(e,["description"],i);const s=u(n,["name"]);s!=null&&h(e,["name"],s);const r=u(n,["parameters"]);r!=null&&h(e,["parameters"],r);const o=u(n,["parametersJsonSchema"]);o!=null&&h(e,["parametersJsonSchema"],o);const a=u(n,["response"]);a!=null&&h(e,["response"],a);const l=u(n,["responseJsonSchema"]);return l!=null&&h(e,["responseJsonSchema"],l),e}function x9(n){const e={},t=u(n,["startTime"]);t!=null&&h(e,["startTime"],t);const i=u(n,["endTime"]);return i!=null&&h(e,["endTime"],i),e}function E9(n){const e={},t=u(n,["timeRangeFilter"]);if(t!=null&&h(e,["timeRangeFilter"],x9(t)),u(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function A9(n){const e={},t=u(n,["mode"]);t!=null&&h(e,["mode"],t);const i=u(n,["dynamicThreshold"]);return i!=null&&h(e,["dynamicThreshold"],i),e}function I9(n){const e={},t=u(n,["dynamicRetrievalConfig"]);return t!=null&&h(e,["dynamicRetrievalConfig"],A9(t)),e}function C9(){return{}}function S9(n){const e={},t=u(n,["environment"]);return t!=null&&h(e,["environment"],t),e}function P9(n){const e={},t=u(n,["functionDeclarations"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>T9(c))),h(e,["functionDeclarations"],l)}if(u(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=u(n,["googleSearch"]);i!=null&&h(e,["googleSearch"],E9(i));const s=u(n,["googleSearchRetrieval"]);if(s!=null&&h(e,["googleSearchRetrieval"],I9(s)),u(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(u(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");u(n,["urlContext"])!=null&&h(e,["urlContext"],C9());const o=u(n,["computerUse"]);o!=null&&h(e,["computerUse"],S9(o));const a=u(n,["codeExecution"]);return a!=null&&h(e,["codeExecution"],a),e}function R9(n){const e={},t=u(n,["handle"]);if(t!=null&&h(e,["handle"],t),u(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function N1(){return{}}function k9(n){const e={},t=u(n,["disabled"]);t!=null&&h(e,["disabled"],t);const i=u(n,["startOfSpeechSensitivity"]);i!=null&&h(e,["startOfSpeechSensitivity"],i);const s=u(n,["endOfSpeechSensitivity"]);s!=null&&h(e,["endOfSpeechSensitivity"],s);const r=u(n,["prefixPaddingMs"]);r!=null&&h(e,["prefixPaddingMs"],r);const o=u(n,["silenceDurationMs"]);return o!=null&&h(e,["silenceDurationMs"],o),e}function N9(n){const e={},t=u(n,["automaticActivityDetection"]);t!=null&&h(e,["automaticActivityDetection"],k9(t));const i=u(n,["activityHandling"]);i!=null&&h(e,["activityHandling"],i);const s=u(n,["turnCoverage"]);return s!=null&&h(e,["turnCoverage"],s),e}function M9(n){const e={},t=u(n,["targetTokens"]);return t!=null&&h(e,["targetTokens"],t),e}function D9(n){const e={},t=u(n,["triggerTokens"]);t!=null&&h(e,["triggerTokens"],t);const i=u(n,["slidingWindow"]);return i!=null&&h(e,["slidingWindow"],M9(i)),e}function L9(n){const e={},t=u(n,["proactiveAudio"]);return t!=null&&h(e,["proactiveAudio"],t),e}function F9(n,e){const t={},i=u(n,["generationConfig"]);e!==void 0&&i!=null&&h(e,["setup","generationConfig"],i);const s=u(n,["responseModalities"]);e!==void 0&&s!=null&&h(e,["setup","generationConfig","responseModalities"],s);const r=u(n,["temperature"]);e!==void 0&&r!=null&&h(e,["setup","generationConfig","temperature"],r);const o=u(n,["topP"]);e!==void 0&&o!=null&&h(e,["setup","generationConfig","topP"],o);const a=u(n,["topK"]);e!==void 0&&a!=null&&h(e,["setup","generationConfig","topK"],a);const l=u(n,["maxOutputTokens"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","maxOutputTokens"],l);const c=u(n,["mediaResolution"]);e!==void 0&&c!=null&&h(e,["setup","generationConfig","mediaResolution"],c);const d=u(n,["seed"]);e!==void 0&&d!=null&&h(e,["setup","generationConfig","seed"],d);const f=u(n,["speechConfig"]);e!==void 0&&f!=null&&h(e,["setup","generationConfig","speechConfig"],g9(Sg(f)));const m=u(n,["enableAffectiveDialog"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],m);const y=u(n,["systemInstruction"]);e!==void 0&&y!=null&&h(e,["setup","systemInstruction"],b9(Kt(y)));const v=u(n,["tools"]);if(e!==void 0&&v!=null){let F=ca(v);Array.isArray(F)&&(F=F.map(U=>P9(la(U)))),h(e,["setup","tools"],F)}const w=u(n,["sessionResumption"]);e!==void 0&&w!=null&&h(e,["setup","sessionResumption"],R9(w));const T=u(n,["inputAudioTranscription"]);e!==void 0&&T!=null&&h(e,["setup","inputAudioTranscription"],N1());const x=u(n,["outputAudioTranscription"]);e!==void 0&&x!=null&&h(e,["setup","outputAudioTranscription"],N1());const P=u(n,["realtimeInputConfig"]);e!==void 0&&P!=null&&h(e,["setup","realtimeInputConfig"],N9(P));const S=u(n,["contextWindowCompression"]);e!==void 0&&S!=null&&h(e,["setup","contextWindowCompression"],D9(S));const L=u(n,["proactivity"]);return e!==void 0&&L!=null&&h(e,["setup","proactivity"],L9(L)),t}function V9(n,e){const t={},i=u(e,["model"]);i!=null&&h(t,["setup","model"],Me(n,i));const s=u(e,["config"]);return s!=null&&h(t,["config"],F9(s,t)),t}function O9(){return{}}function U9(){return{}}function B9(n){const e={},t=u(n,["media"]);t!=null&&h(e,["mediaChunks"],FE(t));const i=u(n,["audio"]);i!=null&&h(e,["audio"],OE(i));const s=u(n,["audioStreamEnd"]);s!=null&&h(e,["audioStreamEnd"],s);const r=u(n,["video"]);r!=null&&h(e,["video"],VE(r));const o=u(n,["text"]);return o!=null&&h(e,["text"],o),u(n,["activityStart"])!=null&&h(e,["activityStart"],O9()),u(n,["activityEnd"])!=null&&h(e,["activityEnd"],U9()),e}function ZE(n){const e={},t=u(n,["text"]);t!=null&&h(e,["text"],t);const i=u(n,["weight"]);return i!=null&&h(e,["weight"],i),e}function z9(n){const e={},t=u(n,["weightedPrompts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>ZE(s))),h(e,["weightedPrompts"],i)}return e}function eA(n){const e={},t=u(n,["temperature"]);t!=null&&h(e,["temperature"],t);const i=u(n,["topK"]);i!=null&&h(e,["topK"],i);const s=u(n,["seed"]);s!=null&&h(e,["seed"],s);const r=u(n,["guidance"]);r!=null&&h(e,["guidance"],r);const o=u(n,["bpm"]);o!=null&&h(e,["bpm"],o);const a=u(n,["density"]);a!=null&&h(e,["density"],a);const l=u(n,["brightness"]);l!=null&&h(e,["brightness"],l);const c=u(n,["scale"]);c!=null&&h(e,["scale"],c);const d=u(n,["muteBass"]);d!=null&&h(e,["muteBass"],d);const f=u(n,["muteDrums"]);f!=null&&h(e,["muteDrums"],f);const m=u(n,["onlyBassAndDrums"]);m!=null&&h(e,["onlyBassAndDrums"],m);const y=u(n,["musicGenerationMode"]);return y!=null&&h(e,["musicGenerationMode"],y),e}function q9(n){const e={},t=u(n,["musicGenerationConfig"]);return t!=null&&h(e,["musicGenerationConfig"],eA(t)),e}function tA(n){const e={},t=u(n,["model"]);return t!=null&&h(e,["model"],t),e}function nA(n){const e={},t=u(n,["weightedPrompts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>ZE(s))),h(e,["weightedPrompts"],i)}return e}function dp(n){const e={},t=u(n,["setup"]);t!=null&&h(e,["setup"],tA(t));const i=u(n,["clientContent"]);i!=null&&h(e,["clientContent"],nA(i));const s=u(n,["musicGenerationConfig"]);s!=null&&h(e,["musicGenerationConfig"],eA(s));const r=u(n,["playbackControl"]);return r!=null&&h(e,["playbackControl"],r),e}function H9(n){const e={},t=u(n,["voiceName"]);return t!=null&&h(e,["voiceName"],t),e}function G9(n){const e={},t=u(n,["prebuiltVoiceConfig"]);return t!=null&&h(e,["prebuiltVoiceConfig"],H9(t)),e}function $9(n){const e={},t=u(n,["voiceConfig"]);if(t!=null&&h(e,["voiceConfig"],G9(t)),u(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const i=u(n,["languageCode"]);return i!=null&&h(e,["languageCode"],i),e}function j9(n){const e={},t=u(n,["fps"]);t!=null&&h(e,["fps"],t);const i=u(n,["endOffset"]);i!=null&&h(e,["endOffset"],i);const s=u(n,["startOffset"]);return s!=null&&h(e,["startOffset"],s),e}function W9(n){const e={},t=u(n,["displayName"]);t!=null&&h(e,["displayName"],t);const i=u(n,["data"]);i!=null&&h(e,["data"],i);const s=u(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function K9(n){const e={},t=u(n,["displayName"]);t!=null&&h(e,["displayName"],t);const i=u(n,["fileUri"]);i!=null&&h(e,["fileUri"],i);const s=u(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function Y9(n){const e={},t=u(n,["videoMetadata"]);t!=null&&h(e,["videoMetadata"],j9(t));const i=u(n,["thought"]);i!=null&&h(e,["thought"],i);const s=u(n,["inlineData"]);s!=null&&h(e,["inlineData"],W9(s));const r=u(n,["fileData"]);r!=null&&h(e,["fileData"],K9(r));const o=u(n,["thoughtSignature"]);o!=null&&h(e,["thoughtSignature"],o);const a=u(n,["codeExecutionResult"]);a!=null&&h(e,["codeExecutionResult"],a);const l=u(n,["executableCode"]);l!=null&&h(e,["executableCode"],l);const c=u(n,["functionCall"]);c!=null&&h(e,["functionCall"],c);const d=u(n,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const f=u(n,["text"]);return f!=null&&h(e,["text"],f),e}function J9(n){const e={},t=u(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>Y9(r))),h(e,["parts"],s)}const i=u(n,["role"]);return i!=null&&h(e,["role"],i),e}function X9(n){const e={};if(u(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=u(n,["description"]);t!=null&&h(e,["description"],t);const i=u(n,["name"]);i!=null&&h(e,["name"],i);const s=u(n,["parameters"]);s!=null&&h(e,["parameters"],s);const r=u(n,["parametersJsonSchema"]);r!=null&&h(e,["parametersJsonSchema"],r);const o=u(n,["response"]);o!=null&&h(e,["response"],o);const a=u(n,["responseJsonSchema"]);return a!=null&&h(e,["responseJsonSchema"],a),e}function Q9(n){const e={},t=u(n,["startTime"]);t!=null&&h(e,["startTime"],t);const i=u(n,["endTime"]);return i!=null&&h(e,["endTime"],i),e}function Z9(n){const e={},t=u(n,["timeRangeFilter"]);t!=null&&h(e,["timeRangeFilter"],Q9(t));const i=u(n,["excludeDomains"]);return i!=null&&h(e,["excludeDomains"],i),e}function eV(n){const e={},t=u(n,["mode"]);t!=null&&h(e,["mode"],t);const i=u(n,["dynamicThreshold"]);return i!=null&&h(e,["dynamicThreshold"],i),e}function tV(n){const e={},t=u(n,["dynamicRetrievalConfig"]);return t!=null&&h(e,["dynamicRetrievalConfig"],eV(t)),e}function nV(n){const e={},t=u(n,["excludeDomains"]);return t!=null&&h(e,["excludeDomains"],t),e}function iV(n){const e={},t=u(n,["apiKeyString"]);return t!=null&&h(e,["apiKeyString"],t),e}function sV(n){const e={},t=u(n,["apiKeyConfig"]);t!=null&&h(e,["apiKeyConfig"],iV(t));const i=u(n,["authType"]);i!=null&&h(e,["authType"],i);const s=u(n,["googleServiceAccountConfig"]);s!=null&&h(e,["googleServiceAccountConfig"],s);const r=u(n,["httpBasicAuthConfig"]);r!=null&&h(e,["httpBasicAuthConfig"],r);const o=u(n,["oauthConfig"]);o!=null&&h(e,["oauthConfig"],o);const a=u(n,["oidcConfig"]);return a!=null&&h(e,["oidcConfig"],a),e}function rV(n){const e={},t=u(n,["authConfig"]);return t!=null&&h(e,["authConfig"],sV(t)),e}function oV(){return{}}function aV(n){const e={},t=u(n,["environment"]);return t!=null&&h(e,["environment"],t),e}function lV(n){const e={},t=u(n,["functionDeclarations"]);if(t!=null){let f=t;Array.isArray(f)&&(f=f.map(m=>X9(m))),h(e,["functionDeclarations"],f)}const i=u(n,["retrieval"]);i!=null&&h(e,["retrieval"],i);const s=u(n,["googleSearch"]);s!=null&&h(e,["googleSearch"],Z9(s));const r=u(n,["googleSearchRetrieval"]);r!=null&&h(e,["googleSearchRetrieval"],tV(r));const o=u(n,["enterpriseWebSearch"]);o!=null&&h(e,["enterpriseWebSearch"],nV(o));const a=u(n,["googleMaps"]);a!=null&&h(e,["googleMaps"],rV(a)),u(n,["urlContext"])!=null&&h(e,["urlContext"],oV());const c=u(n,["computerUse"]);c!=null&&h(e,["computerUse"],aV(c));const d=u(n,["codeExecution"]);return d!=null&&h(e,["codeExecution"],d),e}function cV(n){const e={},t=u(n,["handle"]);t!=null&&h(e,["handle"],t);const i=u(n,["transparent"]);return i!=null&&h(e,["transparent"],i),e}function M1(){return{}}function uV(n){const e={},t=u(n,["disabled"]);t!=null&&h(e,["disabled"],t);const i=u(n,["startOfSpeechSensitivity"]);i!=null&&h(e,["startOfSpeechSensitivity"],i);const s=u(n,["endOfSpeechSensitivity"]);s!=null&&h(e,["endOfSpeechSensitivity"],s);const r=u(n,["prefixPaddingMs"]);r!=null&&h(e,["prefixPaddingMs"],r);const o=u(n,["silenceDurationMs"]);return o!=null&&h(e,["silenceDurationMs"],o),e}function dV(n){const e={},t=u(n,["automaticActivityDetection"]);t!=null&&h(e,["automaticActivityDetection"],uV(t));const i=u(n,["activityHandling"]);i!=null&&h(e,["activityHandling"],i);const s=u(n,["turnCoverage"]);return s!=null&&h(e,["turnCoverage"],s),e}function hV(n){const e={},t=u(n,["targetTokens"]);return t!=null&&h(e,["targetTokens"],t),e}function fV(n){const e={},t=u(n,["triggerTokens"]);t!=null&&h(e,["triggerTokens"],t);const i=u(n,["slidingWindow"]);return i!=null&&h(e,["slidingWindow"],hV(i)),e}function pV(n){const e={},t=u(n,["proactiveAudio"]);return t!=null&&h(e,["proactiveAudio"],t),e}function mV(n,e){const t={},i=u(n,["generationConfig"]);e!==void 0&&i!=null&&h(e,["setup","generationConfig"],i);const s=u(n,["responseModalities"]);e!==void 0&&s!=null&&h(e,["setup","generationConfig","responseModalities"],s);const r=u(n,["temperature"]);e!==void 0&&r!=null&&h(e,["setup","generationConfig","temperature"],r);const o=u(n,["topP"]);e!==void 0&&o!=null&&h(e,["setup","generationConfig","topP"],o);const a=u(n,["topK"]);e!==void 0&&a!=null&&h(e,["setup","generationConfig","topK"],a);const l=u(n,["maxOutputTokens"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","maxOutputTokens"],l);const c=u(n,["mediaResolution"]);e!==void 0&&c!=null&&h(e,["setup","generationConfig","mediaResolution"],c);const d=u(n,["seed"]);e!==void 0&&d!=null&&h(e,["setup","generationConfig","seed"],d);const f=u(n,["speechConfig"]);e!==void 0&&f!=null&&h(e,["setup","generationConfig","speechConfig"],$9(Sg(f)));const m=u(n,["enableAffectiveDialog"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],m);const y=u(n,["systemInstruction"]);e!==void 0&&y!=null&&h(e,["setup","systemInstruction"],J9(Kt(y)));const v=u(n,["tools"]);if(e!==void 0&&v!=null){let F=ca(v);Array.isArray(F)&&(F=F.map(U=>lV(la(U)))),h(e,["setup","tools"],F)}const w=u(n,["sessionResumption"]);e!==void 0&&w!=null&&h(e,["setup","sessionResumption"],cV(w));const T=u(n,["inputAudioTranscription"]);e!==void 0&&T!=null&&h(e,["setup","inputAudioTranscription"],M1());const x=u(n,["outputAudioTranscription"]);e!==void 0&&x!=null&&h(e,["setup","outputAudioTranscription"],M1());const P=u(n,["realtimeInputConfig"]);e!==void 0&&P!=null&&h(e,["setup","realtimeInputConfig"],dV(P));const S=u(n,["contextWindowCompression"]);e!==void 0&&S!=null&&h(e,["setup","contextWindowCompression"],fV(S));const L=u(n,["proactivity"]);return e!==void 0&&L!=null&&h(e,["setup","proactivity"],pV(L)),t}function gV(n,e){const t={},i=u(e,["model"]);i!=null&&h(t,["setup","model"],Me(n,i));const s=u(e,["config"]);return s!=null&&h(t,["config"],mV(s,t)),t}function yV(){return{}}function vV(){return{}}function _V(n){const e={},t=u(n,["media"]);t!=null&&h(e,["mediaChunks"],FE(t));const i=u(n,["audio"]);i!=null&&h(e,["audio"],OE(i));const s=u(n,["audioStreamEnd"]);s!=null&&h(e,["audioStreamEnd"],s);const r=u(n,["video"]);r!=null&&h(e,["video"],VE(r));const o=u(n,["text"]);return o!=null&&h(e,["text"],o),u(n,["activityStart"])!=null&&h(e,["activityStart"],yV()),u(n,["activityEnd"])!=null&&h(e,["activityEnd"],vV()),e}function wV(){return{}}function bV(n){const e={},t=u(n,["fps"]);t!=null&&h(e,["fps"],t);const i=u(n,["endOffset"]);i!=null&&h(e,["endOffset"],i);const s=u(n,["startOffset"]);return s!=null&&h(e,["startOffset"],s),e}function TV(n){const e={},t=u(n,["data"]);t!=null&&h(e,["data"],t);const i=u(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function xV(n){const e={},t=u(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const i=u(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function EV(n){const e={},t=u(n,["videoMetadata"]);t!=null&&h(e,["videoMetadata"],bV(t));const i=u(n,["thought"]);i!=null&&h(e,["thought"],i);const s=u(n,["inlineData"]);s!=null&&h(e,["inlineData"],TV(s));const r=u(n,["fileData"]);r!=null&&h(e,["fileData"],xV(r));const o=u(n,["thoughtSignature"]);o!=null&&h(e,["thoughtSignature"],o);const a=u(n,["codeExecutionResult"]);a!=null&&h(e,["codeExecutionResult"],a);const l=u(n,["executableCode"]);l!=null&&h(e,["executableCode"],l);const c=u(n,["functionCall"]);c!=null&&h(e,["functionCall"],c);const d=u(n,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const f=u(n,["text"]);return f!=null&&h(e,["text"],f),e}function AV(n){const e={},t=u(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>EV(r))),h(e,["parts"],s)}const i=u(n,["role"]);return i!=null&&h(e,["role"],i),e}function D1(n){const e={},t=u(n,["text"]);t!=null&&h(e,["text"],t);const i=u(n,["finished"]);return i!=null&&h(e,["finished"],i),e}function IV(n){const e={},t=u(n,["retrievedUrl"]);t!=null&&h(e,["retrievedUrl"],t);const i=u(n,["urlRetrievalStatus"]);return i!=null&&h(e,["urlRetrievalStatus"],i),e}function CV(n){const e={},t=u(n,["urlMetadata"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>IV(s))),h(e,["urlMetadata"],i)}return e}function SV(n){const e={},t=u(n,["modelTurn"]);t!=null&&h(e,["modelTurn"],AV(t));const i=u(n,["turnComplete"]);i!=null&&h(e,["turnComplete"],i);const s=u(n,["interrupted"]);s!=null&&h(e,["interrupted"],s);const r=u(n,["groundingMetadata"]);r!=null&&h(e,["groundingMetadata"],r);const o=u(n,["generationComplete"]);o!=null&&h(e,["generationComplete"],o);const a=u(n,["inputTranscription"]);a!=null&&h(e,["inputTranscription"],D1(a));const l=u(n,["outputTranscription"]);l!=null&&h(e,["outputTranscription"],D1(l));const c=u(n,["urlContextMetadata"]);return c!=null&&h(e,["urlContextMetadata"],CV(c)),e}function PV(n){const e={},t=u(n,["id"]);t!=null&&h(e,["id"],t);const i=u(n,["args"]);i!=null&&h(e,["args"],i);const s=u(n,["name"]);return s!=null&&h(e,["name"],s),e}function RV(n){const e={},t=u(n,["functionCalls"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>PV(s))),h(e,["functionCalls"],i)}return e}function kV(n){const e={},t=u(n,["ids"]);return t!=null&&h(e,["ids"],t),e}function Qc(n){const e={},t=u(n,["modality"]);t!=null&&h(e,["modality"],t);const i=u(n,["tokenCount"]);return i!=null&&h(e,["tokenCount"],i),e}function NV(n){const e={},t=u(n,["promptTokenCount"]);t!=null&&h(e,["promptTokenCount"],t);const i=u(n,["cachedContentTokenCount"]);i!=null&&h(e,["cachedContentTokenCount"],i);const s=u(n,["responseTokenCount"]);s!=null&&h(e,["responseTokenCount"],s);const r=u(n,["toolUsePromptTokenCount"]);r!=null&&h(e,["toolUsePromptTokenCount"],r);const o=u(n,["thoughtsTokenCount"]);o!=null&&h(e,["thoughtsTokenCount"],o);const a=u(n,["totalTokenCount"]);a!=null&&h(e,["totalTokenCount"],a);const l=u(n,["promptTokensDetails"]);if(l!=null){let m=l;Array.isArray(m)&&(m=m.map(y=>Qc(y))),h(e,["promptTokensDetails"],m)}const c=u(n,["cacheTokensDetails"]);if(c!=null){let m=c;Array.isArray(m)&&(m=m.map(y=>Qc(y))),h(e,["cacheTokensDetails"],m)}const d=u(n,["responseTokensDetails"]);if(d!=null){let m=d;Array.isArray(m)&&(m=m.map(y=>Qc(y))),h(e,["responseTokensDetails"],m)}const f=u(n,["toolUsePromptTokensDetails"]);if(f!=null){let m=f;Array.isArray(m)&&(m=m.map(y=>Qc(y))),h(e,["toolUsePromptTokensDetails"],m)}return e}function MV(n){const e={},t=u(n,["timeLeft"]);return t!=null&&h(e,["timeLeft"],t),e}function DV(n){const e={},t=u(n,["newHandle"]);t!=null&&h(e,["newHandle"],t);const i=u(n,["resumable"]);i!=null&&h(e,["resumable"],i);const s=u(n,["lastConsumedClientMessageIndex"]);return s!=null&&h(e,["lastConsumedClientMessageIndex"],s),e}function LV(n){const e={};u(n,["setupComplete"])!=null&&h(e,["setupComplete"],wV());const i=u(n,["serverContent"]);i!=null&&h(e,["serverContent"],SV(i));const s=u(n,["toolCall"]);s!=null&&h(e,["toolCall"],RV(s));const r=u(n,["toolCallCancellation"]);r!=null&&h(e,["toolCallCancellation"],kV(r));const o=u(n,["usageMetadata"]);o!=null&&h(e,["usageMetadata"],NV(o));const a=u(n,["goAway"]);a!=null&&h(e,["goAway"],MV(a));const l=u(n,["sessionResumptionUpdate"]);return l!=null&&h(e,["sessionResumptionUpdate"],DV(l)),e}function FV(){return{}}function VV(n){const e={},t=u(n,["text"]);t!=null&&h(e,["text"],t);const i=u(n,["weight"]);return i!=null&&h(e,["weight"],i),e}function OV(n){const e={},t=u(n,["weightedPrompts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>VV(s))),h(e,["weightedPrompts"],i)}return e}function UV(n){const e={},t=u(n,["temperature"]);t!=null&&h(e,["temperature"],t);const i=u(n,["topK"]);i!=null&&h(e,["topK"],i);const s=u(n,["seed"]);s!=null&&h(e,["seed"],s);const r=u(n,["guidance"]);r!=null&&h(e,["guidance"],r);const o=u(n,["bpm"]);o!=null&&h(e,["bpm"],o);const a=u(n,["density"]);a!=null&&h(e,["density"],a);const l=u(n,["brightness"]);l!=null&&h(e,["brightness"],l);const c=u(n,["scale"]);c!=null&&h(e,["scale"],c);const d=u(n,["muteBass"]);d!=null&&h(e,["muteBass"],d);const f=u(n,["muteDrums"]);f!=null&&h(e,["muteDrums"],f);const m=u(n,["onlyBassAndDrums"]);m!=null&&h(e,["onlyBassAndDrums"],m);const y=u(n,["musicGenerationMode"]);return y!=null&&h(e,["musicGenerationMode"],y),e}function BV(n){const e={},t=u(n,["clientContent"]);t!=null&&h(e,["clientContent"],OV(t));const i=u(n,["musicGenerationConfig"]);return i!=null&&h(e,["musicGenerationConfig"],UV(i)),e}function zV(n){const e={},t=u(n,["data"]);t!=null&&h(e,["data"],t);const i=u(n,["mimeType"]);i!=null&&h(e,["mimeType"],i);const s=u(n,["sourceMetadata"]);return s!=null&&h(e,["sourceMetadata"],BV(s)),e}function qV(n){const e={},t=u(n,["audioChunks"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>zV(s))),h(e,["audioChunks"],i)}return e}function HV(n){const e={},t=u(n,["text"]);t!=null&&h(e,["text"],t);const i=u(n,["filteredReason"]);return i!=null&&h(e,["filteredReason"],i),e}function GV(n){const e={};u(n,["setupComplete"])!=null&&h(e,["setupComplete"],FV());const i=u(n,["serverContent"]);i!=null&&h(e,["serverContent"],qV(i));const s=u(n,["filteredPrompt"]);return s!=null&&h(e,["filteredPrompt"],HV(s)),e}function $V(n){const e={},t=u(n,["sessionId"]);return t!=null&&h(e,["sessionId"],t),e}function jV(n){const e={},t=u(n,["fps"]);t!=null&&h(e,["fps"],t);const i=u(n,["endOffset"]);i!=null&&h(e,["endOffset"],i);const s=u(n,["startOffset"]);return s!=null&&h(e,["startOffset"],s),e}function WV(n){const e={},t=u(n,["displayName"]);t!=null&&h(e,["displayName"],t);const i=u(n,["data"]);i!=null&&h(e,["data"],i);const s=u(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function KV(n){const e={},t=u(n,["displayName"]);t!=null&&h(e,["displayName"],t);const i=u(n,["fileUri"]);i!=null&&h(e,["fileUri"],i);const s=u(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function YV(n){const e={},t=u(n,["videoMetadata"]);t!=null&&h(e,["videoMetadata"],jV(t));const i=u(n,["thought"]);i!=null&&h(e,["thought"],i);const s=u(n,["inlineData"]);s!=null&&h(e,["inlineData"],WV(s));const r=u(n,["fileData"]);r!=null&&h(e,["fileData"],KV(r));const o=u(n,["thoughtSignature"]);o!=null&&h(e,["thoughtSignature"],o);const a=u(n,["codeExecutionResult"]);a!=null&&h(e,["codeExecutionResult"],a);const l=u(n,["executableCode"]);l!=null&&h(e,["executableCode"],l);const c=u(n,["functionCall"]);c!=null&&h(e,["functionCall"],c);const d=u(n,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const f=u(n,["text"]);return f!=null&&h(e,["text"],f),e}function JV(n){const e={},t=u(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>YV(r))),h(e,["parts"],s)}const i=u(n,["role"]);return i!=null&&h(e,["role"],i),e}function L1(n){const e={},t=u(n,["text"]);t!=null&&h(e,["text"],t);const i=u(n,["finished"]);return i!=null&&h(e,["finished"],i),e}function XV(n){const e={},t=u(n,["modelTurn"]);t!=null&&h(e,["modelTurn"],JV(t));const i=u(n,["turnComplete"]);i!=null&&h(e,["turnComplete"],i);const s=u(n,["interrupted"]);s!=null&&h(e,["interrupted"],s);const r=u(n,["groundingMetadata"]);r!=null&&h(e,["groundingMetadata"],r);const o=u(n,["generationComplete"]);o!=null&&h(e,["generationComplete"],o);const a=u(n,["inputTranscription"]);a!=null&&h(e,["inputTranscription"],L1(a));const l=u(n,["outputTranscription"]);return l!=null&&h(e,["outputTranscription"],L1(l)),e}function QV(n){const e={},t=u(n,["args"]);t!=null&&h(e,["args"],t);const i=u(n,["name"]);return i!=null&&h(e,["name"],i),e}function ZV(n){const e={},t=u(n,["functionCalls"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>QV(s))),h(e,["functionCalls"],i)}return e}function eO(n){const e={},t=u(n,["ids"]);return t!=null&&h(e,["ids"],t),e}function Zc(n){const e={},t=u(n,["modality"]);t!=null&&h(e,["modality"],t);const i=u(n,["tokenCount"]);return i!=null&&h(e,["tokenCount"],i),e}function tO(n){const e={},t=u(n,["promptTokenCount"]);t!=null&&h(e,["promptTokenCount"],t);const i=u(n,["cachedContentTokenCount"]);i!=null&&h(e,["cachedContentTokenCount"],i);const s=u(n,["candidatesTokenCount"]);s!=null&&h(e,["responseTokenCount"],s);const r=u(n,["toolUsePromptTokenCount"]);r!=null&&h(e,["toolUsePromptTokenCount"],r);const o=u(n,["thoughtsTokenCount"]);o!=null&&h(e,["thoughtsTokenCount"],o);const a=u(n,["totalTokenCount"]);a!=null&&h(e,["totalTokenCount"],a);const l=u(n,["promptTokensDetails"]);if(l!=null){let y=l;Array.isArray(y)&&(y=y.map(v=>Zc(v))),h(e,["promptTokensDetails"],y)}const c=u(n,["cacheTokensDetails"]);if(c!=null){let y=c;Array.isArray(y)&&(y=y.map(v=>Zc(v))),h(e,["cacheTokensDetails"],y)}const d=u(n,["candidatesTokensDetails"]);if(d!=null){let y=d;Array.isArray(y)&&(y=y.map(v=>Zc(v))),h(e,["responseTokensDetails"],y)}const f=u(n,["toolUsePromptTokensDetails"]);if(f!=null){let y=f;Array.isArray(y)&&(y=y.map(v=>Zc(v))),h(e,["toolUsePromptTokensDetails"],y)}const m=u(n,["trafficType"]);return m!=null&&h(e,["trafficType"],m),e}function nO(n){const e={},t=u(n,["timeLeft"]);return t!=null&&h(e,["timeLeft"],t),e}function iO(n){const e={},t=u(n,["newHandle"]);t!=null&&h(e,["newHandle"],t);const i=u(n,["resumable"]);i!=null&&h(e,["resumable"],i);const s=u(n,["lastConsumedClientMessageIndex"]);return s!=null&&h(e,["lastConsumedClientMessageIndex"],s),e}function sO(n){const e={},t=u(n,["setupComplete"]);t!=null&&h(e,["setupComplete"],$V(t));const i=u(n,["serverContent"]);i!=null&&h(e,["serverContent"],XV(i));const s=u(n,["toolCall"]);s!=null&&h(e,["toolCall"],ZV(s));const r=u(n,["toolCallCancellation"]);r!=null&&h(e,["toolCallCancellation"],eO(r));const o=u(n,["usageMetadata"]);o!=null&&h(e,["usageMetadata"],tO(o));const a=u(n,["goAway"]);a!=null&&h(e,["goAway"],nO(a));const l=u(n,["sessionResumptionUpdate"]);return l!=null&&h(e,["sessionResumptionUpdate"],iO(l)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rO(n){const e={},t=u(n,["fps"]);t!=null&&h(e,["fps"],t);const i=u(n,["endOffset"]);i!=null&&h(e,["endOffset"],i);const s=u(n,["startOffset"]);return s!=null&&h(e,["startOffset"],s),e}function oO(n){const e={};if(u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=u(n,["data"]);t!=null&&h(e,["data"],t);const i=u(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function aO(n){const e={};if(u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=u(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const i=u(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function lO(n){const e={},t=u(n,["videoMetadata"]);t!=null&&h(e,["videoMetadata"],rO(t));const i=u(n,["thought"]);i!=null&&h(e,["thought"],i);const s=u(n,["inlineData"]);s!=null&&h(e,["inlineData"],oO(s));const r=u(n,["fileData"]);r!=null&&h(e,["fileData"],aO(r));const o=u(n,["thoughtSignature"]);o!=null&&h(e,["thoughtSignature"],o);const a=u(n,["codeExecutionResult"]);a!=null&&h(e,["codeExecutionResult"],a);const l=u(n,["executableCode"]);l!=null&&h(e,["executableCode"],l);const c=u(n,["functionCall"]);c!=null&&h(e,["functionCall"],c);const d=u(n,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const f=u(n,["text"]);return f!=null&&h(e,["text"],f),e}function eh(n){const e={},t=u(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>lO(r))),h(e,["parts"],s)}const i=u(n,["role"]);return i!=null&&h(e,["role"],i),e}function cO(n){const e={},t=u(n,["anyOf"]);t!=null&&h(e,["anyOf"],t);const i=u(n,["default"]);i!=null&&h(e,["default"],i);const s=u(n,["description"]);s!=null&&h(e,["description"],s);const r=u(n,["enum"]);r!=null&&h(e,["enum"],r);const o=u(n,["example"]);o!=null&&h(e,["example"],o);const a=u(n,["format"]);a!=null&&h(e,["format"],a);const l=u(n,["items"]);l!=null&&h(e,["items"],l);const c=u(n,["maxItems"]);c!=null&&h(e,["maxItems"],c);const d=u(n,["maxLength"]);d!=null&&h(e,["maxLength"],d);const f=u(n,["maxProperties"]);f!=null&&h(e,["maxProperties"],f);const m=u(n,["maximum"]);m!=null&&h(e,["maximum"],m);const y=u(n,["minItems"]);y!=null&&h(e,["minItems"],y);const v=u(n,["minLength"]);v!=null&&h(e,["minLength"],v);const w=u(n,["minProperties"]);w!=null&&h(e,["minProperties"],w);const T=u(n,["minimum"]);T!=null&&h(e,["minimum"],T);const x=u(n,["nullable"]);x!=null&&h(e,["nullable"],x);const P=u(n,["pattern"]);P!=null&&h(e,["pattern"],P);const S=u(n,["properties"]);S!=null&&h(e,["properties"],S);const L=u(n,["propertyOrdering"]);L!=null&&h(e,["propertyOrdering"],L);const F=u(n,["required"]);F!=null&&h(e,["required"],F);const U=u(n,["title"]);U!=null&&h(e,["title"],U);const C=u(n,["type"]);return C!=null&&h(e,["type"],C),e}function uO(n){const e={};if(u(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const t=u(n,["category"]);t!=null&&h(e,["category"],t);const i=u(n,["threshold"]);return i!=null&&h(e,["threshold"],i),e}function dO(n){const e={},t=u(n,["behavior"]);t!=null&&h(e,["behavior"],t);const i=u(n,["description"]);i!=null&&h(e,["description"],i);const s=u(n,["name"]);s!=null&&h(e,["name"],s);const r=u(n,["parameters"]);r!=null&&h(e,["parameters"],r);const o=u(n,["parametersJsonSchema"]);o!=null&&h(e,["parametersJsonSchema"],o);const a=u(n,["response"]);a!=null&&h(e,["response"],a);const l=u(n,["responseJsonSchema"]);return l!=null&&h(e,["responseJsonSchema"],l),e}function hO(n){const e={},t=u(n,["startTime"]);t!=null&&h(e,["startTime"],t);const i=u(n,["endTime"]);return i!=null&&h(e,["endTime"],i),e}function fO(n){const e={},t=u(n,["timeRangeFilter"]);if(t!=null&&h(e,["timeRangeFilter"],hO(t)),u(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function pO(n){const e={},t=u(n,["mode"]);t!=null&&h(e,["mode"],t);const i=u(n,["dynamicThreshold"]);return i!=null&&h(e,["dynamicThreshold"],i),e}function mO(n){const e={},t=u(n,["dynamicRetrievalConfig"]);return t!=null&&h(e,["dynamicRetrievalConfig"],pO(t)),e}function gO(){return{}}function yO(n){const e={},t=u(n,["environment"]);return t!=null&&h(e,["environment"],t),e}function vO(n){const e={},t=u(n,["functionDeclarations"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>dO(c))),h(e,["functionDeclarations"],l)}if(u(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=u(n,["googleSearch"]);i!=null&&h(e,["googleSearch"],fO(i));const s=u(n,["googleSearchRetrieval"]);if(s!=null&&h(e,["googleSearchRetrieval"],mO(s)),u(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(u(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");u(n,["urlContext"])!=null&&h(e,["urlContext"],gO());const o=u(n,["computerUse"]);o!=null&&h(e,["computerUse"],yO(o));const a=u(n,["codeExecution"]);return a!=null&&h(e,["codeExecution"],a),e}function _O(n){const e={},t=u(n,["mode"]);t!=null&&h(e,["mode"],t);const i=u(n,["allowedFunctionNames"]);return i!=null&&h(e,["allowedFunctionNames"],i),e}function wO(n){const e={},t=u(n,["latitude"]);t!=null&&h(e,["latitude"],t);const i=u(n,["longitude"]);return i!=null&&h(e,["longitude"],i),e}function bO(n){const e={},t=u(n,["latLng"]);t!=null&&h(e,["latLng"],wO(t));const i=u(n,["languageCode"]);return i!=null&&h(e,["languageCode"],i),e}function TO(n){const e={},t=u(n,["functionCallingConfig"]);t!=null&&h(e,["functionCallingConfig"],_O(t));const i=u(n,["retrievalConfig"]);return i!=null&&h(e,["retrievalConfig"],bO(i)),e}function xO(n){const e={},t=u(n,["voiceName"]);return t!=null&&h(e,["voiceName"],t),e}function iA(n){const e={},t=u(n,["prebuiltVoiceConfig"]);return t!=null&&h(e,["prebuiltVoiceConfig"],xO(t)),e}function EO(n){const e={},t=u(n,["speaker"]);t!=null&&h(e,["speaker"],t);const i=u(n,["voiceConfig"]);return i!=null&&h(e,["voiceConfig"],iA(i)),e}function AO(n){const e={},t=u(n,["speakerVoiceConfigs"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>EO(s))),h(e,["speakerVoiceConfigs"],i)}return e}function IO(n){const e={},t=u(n,["voiceConfig"]);t!=null&&h(e,["voiceConfig"],iA(t));const i=u(n,["multiSpeakerVoiceConfig"]);i!=null&&h(e,["multiSpeakerVoiceConfig"],AO(i));const s=u(n,["languageCode"]);return s!=null&&h(e,["languageCode"],s),e}function CO(n){const e={},t=u(n,["includeThoughts"]);t!=null&&h(e,["includeThoughts"],t);const i=u(n,["thinkingBudget"]);return i!=null&&h(e,["thinkingBudget"],i),e}function SO(n,e,t){const i={},s=u(e,["systemInstruction"]);t!==void 0&&s!=null&&h(t,["systemInstruction"],eh(Kt(s)));const r=u(e,["temperature"]);r!=null&&h(i,["temperature"],r);const o=u(e,["topP"]);o!=null&&h(i,["topP"],o);const a=u(e,["topK"]);a!=null&&h(i,["topK"],a);const l=u(e,["candidateCount"]);l!=null&&h(i,["candidateCount"],l);const c=u(e,["maxOutputTokens"]);c!=null&&h(i,["maxOutputTokens"],c);const d=u(e,["stopSequences"]);d!=null&&h(i,["stopSequences"],d);const f=u(e,["responseLogprobs"]);f!=null&&h(i,["responseLogprobs"],f);const m=u(e,["logprobs"]);m!=null&&h(i,["logprobs"],m);const y=u(e,["presencePenalty"]);y!=null&&h(i,["presencePenalty"],y);const v=u(e,["frequencyPenalty"]);v!=null&&h(i,["frequencyPenalty"],v);const w=u(e,["seed"]);w!=null&&h(i,["seed"],w);const T=u(e,["responseMimeType"]);T!=null&&h(i,["responseMimeType"],T);const x=u(e,["responseSchema"]);x!=null&&h(i,["responseSchema"],cO(Ig(x)));const P=u(e,["responseJsonSchema"]);if(P!=null&&h(i,["responseJsonSchema"],P),u(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(u(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const S=u(e,["safetySettings"]);if(t!==void 0&&S!=null){let k=S;Array.isArray(k)&&(k=k.map(N=>uO(N))),h(t,["safetySettings"],k)}const L=u(e,["tools"]);if(t!==void 0&&L!=null){let k=ca(L);Array.isArray(k)&&(k=k.map(N=>vO(la(N)))),h(t,["tools"],k)}const F=u(e,["toolConfig"]);if(t!==void 0&&F!=null&&h(t,["toolConfig"],TO(F)),u(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const U=u(e,["cachedContent"]);t!==void 0&&U!=null&&h(t,["cachedContent"],Ui(n,U));const C=u(e,["responseModalities"]);C!=null&&h(i,["responseModalities"],C);const A=u(e,["mediaResolution"]);A!=null&&h(i,["mediaResolution"],A);const E=u(e,["speechConfig"]);if(E!=null&&h(i,["speechConfig"],IO(Cg(E))),u(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const D=u(e,["thinkingConfig"]);return D!=null&&h(i,["thinkingConfig"],CO(D)),i}function F1(n,e){const t={},i=u(e,["model"]);i!=null&&h(t,["_url","model"],Me(n,i));const s=u(e,["contents"]);if(s!=null){let o=Dn(s);Array.isArray(o)&&(o=o.map(a=>eh(a))),h(t,["contents"],o)}const r=u(e,["config"]);return r!=null&&h(t,["generationConfig"],SO(n,r,t)),t}function PO(n,e){const t={},i=u(n,["taskType"]);e!==void 0&&i!=null&&h(e,["requests[]","taskType"],i);const s=u(n,["title"]);e!==void 0&&s!=null&&h(e,["requests[]","title"],s);const r=u(n,["outputDimensionality"]);if(e!==void 0&&r!=null&&h(e,["requests[]","outputDimensionality"],r),u(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(u(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function RO(n,e){const t={},i=u(e,["model"]);i!=null&&h(t,["_url","model"],Me(n,i));const s=u(e,["contents"]);s!=null&&h(t,["requests[]","content"],BE(n,s));const r=u(e,["config"]);r!=null&&h(t,["config"],PO(r,t));const o=u(e,["model"]);return o!==void 0&&h(t,["requests[]","model"],Me(n,o)),t}function kO(n,e){const t={};if(u(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(u(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=u(n,["numberOfImages"]);e!==void 0&&i!=null&&h(e,["parameters","sampleCount"],i);const s=u(n,["aspectRatio"]);e!==void 0&&s!=null&&h(e,["parameters","aspectRatio"],s);const r=u(n,["guidanceScale"]);if(e!==void 0&&r!=null&&h(e,["parameters","guidanceScale"],r),u(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=u(n,["safetyFilterLevel"]);e!==void 0&&o!=null&&h(e,["parameters","safetySetting"],o);const a=u(n,["personGeneration"]);e!==void 0&&a!=null&&h(e,["parameters","personGeneration"],a);const l=u(n,["includeSafetyAttributes"]);e!==void 0&&l!=null&&h(e,["parameters","includeSafetyAttributes"],l);const c=u(n,["includeRaiReason"]);e!==void 0&&c!=null&&h(e,["parameters","includeRaiReason"],c);const d=u(n,["language"]);e!==void 0&&d!=null&&h(e,["parameters","language"],d);const f=u(n,["outputMimeType"]);e!==void 0&&f!=null&&h(e,["parameters","outputOptions","mimeType"],f);const m=u(n,["outputCompressionQuality"]);if(e!==void 0&&m!=null&&h(e,["parameters","outputOptions","compressionQuality"],m),u(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");const y=u(n,["imageSize"]);if(e!==void 0&&y!=null&&h(e,["parameters","sampleImageSize"],y),u(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function NO(n,e){const t={},i=u(e,["model"]);i!=null&&h(t,["_url","model"],Me(n,i));const s=u(e,["prompt"]);s!=null&&h(t,["instances[0]","prompt"],s);const r=u(e,["config"]);return r!=null&&h(t,["config"],kO(r,t)),t}function MO(n,e){const t={},i=u(e,["model"]);i!=null&&h(t,["_url","name"],Me(n,i));const s=u(e,["config"]);return s!=null&&h(t,["config"],s),t}function DO(n,e,t){const i={},s=u(e,["pageSize"]);t!==void 0&&s!=null&&h(t,["_query","pageSize"],s);const r=u(e,["pageToken"]);t!==void 0&&r!=null&&h(t,["_query","pageToken"],r);const o=u(e,["filter"]);t!==void 0&&o!=null&&h(t,["_query","filter"],o);const a=u(e,["queryBase"]);return t!==void 0&&a!=null&&h(t,["_url","models_url"],HE(n,a)),i}function LO(n,e){const t={},i=u(e,["config"]);return i!=null&&h(t,["config"],DO(n,i,t)),t}function FO(n,e){const t={},i=u(n,["displayName"]);e!==void 0&&i!=null&&h(e,["displayName"],i);const s=u(n,["description"]);e!==void 0&&s!=null&&h(e,["description"],s);const r=u(n,["defaultCheckpointId"]);return e!==void 0&&r!=null&&h(e,["defaultCheckpointId"],r),t}function VO(n,e){const t={},i=u(e,["model"]);i!=null&&h(t,["_url","name"],Me(n,i));const s=u(e,["config"]);return s!=null&&h(t,["config"],FO(s,t)),t}function OO(n,e){const t={},i=u(e,["model"]);i!=null&&h(t,["_url","name"],Me(n,i));const s=u(e,["config"]);return s!=null&&h(t,["config"],s),t}function UO(n){const e={};if(u(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(u(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(u(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function BO(n,e){const t={},i=u(e,["model"]);i!=null&&h(t,["_url","model"],Me(n,i));const s=u(e,["contents"]);if(s!=null){let o=Dn(s);Array.isArray(o)&&(o=o.map(a=>eh(a))),h(t,["contents"],o)}const r=u(e,["config"]);return r!=null&&h(t,["config"],UO(r)),t}function zO(n){const e={};if(u(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=u(n,["imageBytes"]);t!=null&&h(e,["bytesBase64Encoded"],Fr(t));const i=u(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function qO(n,e){const t={},i=u(n,["numberOfVideos"]);if(e!==void 0&&i!=null&&h(e,["parameters","sampleCount"],i),u(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(u(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const s=u(n,["durationSeconds"]);if(e!==void 0&&s!=null&&h(e,["parameters","durationSeconds"],s),u(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const r=u(n,["aspectRatio"]);if(e!==void 0&&r!=null&&h(e,["parameters","aspectRatio"],r),u(n,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const o=u(n,["personGeneration"]);if(e!==void 0&&o!=null&&h(e,["parameters","personGeneration"],o),u(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const a=u(n,["negativePrompt"]);e!==void 0&&a!=null&&h(e,["parameters","negativePrompt"],a);const l=u(n,["enhancePrompt"]);if(e!==void 0&&l!=null&&h(e,["parameters","enhancePrompt"],l),u(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(u(n,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");if(u(n,["referenceImages"])!==void 0)throw new Error("referenceImages parameter is not supported in Gemini API.");if(u(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function HO(n,e){const t={},i=u(e,["model"]);i!=null&&h(t,["_url","model"],Me(n,i));const s=u(e,["prompt"]);s!=null&&h(t,["instances[0]","prompt"],s);const r=u(e,["image"]);if(r!=null&&h(t,["instances[0]","image"],zO(r)),u(e,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const o=u(e,["config"]);return o!=null&&h(t,["config"],qO(o,t)),t}function GO(n){const e={},t=u(n,["fps"]);t!=null&&h(e,["fps"],t);const i=u(n,["endOffset"]);i!=null&&h(e,["endOffset"],i);const s=u(n,["startOffset"]);return s!=null&&h(e,["startOffset"],s),e}function $O(n){const e={},t=u(n,["displayName"]);t!=null&&h(e,["displayName"],t);const i=u(n,["data"]);i!=null&&h(e,["data"],i);const s=u(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function jO(n){const e={},t=u(n,["displayName"]);t!=null&&h(e,["displayName"],t);const i=u(n,["fileUri"]);i!=null&&h(e,["fileUri"],i);const s=u(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function WO(n){const e={},t=u(n,["videoMetadata"]);t!=null&&h(e,["videoMetadata"],GO(t));const i=u(n,["thought"]);i!=null&&h(e,["thought"],i);const s=u(n,["inlineData"]);s!=null&&h(e,["inlineData"],$O(s));const r=u(n,["fileData"]);r!=null&&h(e,["fileData"],jO(r));const o=u(n,["thoughtSignature"]);o!=null&&h(e,["thoughtSignature"],o);const a=u(n,["codeExecutionResult"]);a!=null&&h(e,["codeExecutionResult"],a);const l=u(n,["executableCode"]);l!=null&&h(e,["executableCode"],l);const c=u(n,["functionCall"]);c!=null&&h(e,["functionCall"],c);const d=u(n,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const f=u(n,["text"]);return f!=null&&h(e,["text"],f),e}function da(n){const e={},t=u(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>WO(r))),h(e,["parts"],s)}const i=u(n,["role"]);return i!=null&&h(e,["role"],i),e}function KO(n){const e={},t=u(n,["anyOf"]);t!=null&&h(e,["anyOf"],t);const i=u(n,["default"]);i!=null&&h(e,["default"],i);const s=u(n,["description"]);s!=null&&h(e,["description"],s);const r=u(n,["enum"]);r!=null&&h(e,["enum"],r);const o=u(n,["example"]);o!=null&&h(e,["example"],o);const a=u(n,["format"]);a!=null&&h(e,["format"],a);const l=u(n,["items"]);l!=null&&h(e,["items"],l);const c=u(n,["maxItems"]);c!=null&&h(e,["maxItems"],c);const d=u(n,["maxLength"]);d!=null&&h(e,["maxLength"],d);const f=u(n,["maxProperties"]);f!=null&&h(e,["maxProperties"],f);const m=u(n,["maximum"]);m!=null&&h(e,["maximum"],m);const y=u(n,["minItems"]);y!=null&&h(e,["minItems"],y);const v=u(n,["minLength"]);v!=null&&h(e,["minLength"],v);const w=u(n,["minProperties"]);w!=null&&h(e,["minProperties"],w);const T=u(n,["minimum"]);T!=null&&h(e,["minimum"],T);const x=u(n,["nullable"]);x!=null&&h(e,["nullable"],x);const P=u(n,["pattern"]);P!=null&&h(e,["pattern"],P);const S=u(n,["properties"]);S!=null&&h(e,["properties"],S);const L=u(n,["propertyOrdering"]);L!=null&&h(e,["propertyOrdering"],L);const F=u(n,["required"]);F!=null&&h(e,["required"],F);const U=u(n,["title"]);U!=null&&h(e,["title"],U);const C=u(n,["type"]);return C!=null&&h(e,["type"],C),e}function YO(n){const e={},t=u(n,["featureSelectionPreference"]);return t!=null&&h(e,["featureSelectionPreference"],t),e}function JO(n){const e={},t=u(n,["method"]);t!=null&&h(e,["method"],t);const i=u(n,["category"]);i!=null&&h(e,["category"],i);const s=u(n,["threshold"]);return s!=null&&h(e,["threshold"],s),e}function XO(n){const e={};if(u(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=u(n,["description"]);t!=null&&h(e,["description"],t);const i=u(n,["name"]);i!=null&&h(e,["name"],i);const s=u(n,["parameters"]);s!=null&&h(e,["parameters"],s);const r=u(n,["parametersJsonSchema"]);r!=null&&h(e,["parametersJsonSchema"],r);const o=u(n,["response"]);o!=null&&h(e,["response"],o);const a=u(n,["responseJsonSchema"]);return a!=null&&h(e,["responseJsonSchema"],a),e}function QO(n){const e={},t=u(n,["startTime"]);t!=null&&h(e,["startTime"],t);const i=u(n,["endTime"]);return i!=null&&h(e,["endTime"],i),e}function ZO(n){const e={},t=u(n,["timeRangeFilter"]);t!=null&&h(e,["timeRangeFilter"],QO(t));const i=u(n,["excludeDomains"]);return i!=null&&h(e,["excludeDomains"],i),e}function eU(n){const e={},t=u(n,["mode"]);t!=null&&h(e,["mode"],t);const i=u(n,["dynamicThreshold"]);return i!=null&&h(e,["dynamicThreshold"],i),e}function tU(n){const e={},t=u(n,["dynamicRetrievalConfig"]);return t!=null&&h(e,["dynamicRetrievalConfig"],eU(t)),e}function nU(n){const e={},t=u(n,["excludeDomains"]);return t!=null&&h(e,["excludeDomains"],t),e}function iU(n){const e={},t=u(n,["apiKeyString"]);return t!=null&&h(e,["apiKeyString"],t),e}function sU(n){const e={},t=u(n,["apiKeyConfig"]);t!=null&&h(e,["apiKeyConfig"],iU(t));const i=u(n,["authType"]);i!=null&&h(e,["authType"],i);const s=u(n,["googleServiceAccountConfig"]);s!=null&&h(e,["googleServiceAccountConfig"],s);const r=u(n,["httpBasicAuthConfig"]);r!=null&&h(e,["httpBasicAuthConfig"],r);const o=u(n,["oauthConfig"]);o!=null&&h(e,["oauthConfig"],o);const a=u(n,["oidcConfig"]);return a!=null&&h(e,["oidcConfig"],a),e}function rU(n){const e={},t=u(n,["authConfig"]);return t!=null&&h(e,["authConfig"],sU(t)),e}function oU(){return{}}function aU(n){const e={},t=u(n,["environment"]);return t!=null&&h(e,["environment"],t),e}function sA(n){const e={},t=u(n,["functionDeclarations"]);if(t!=null){let f=t;Array.isArray(f)&&(f=f.map(m=>XO(m))),h(e,["functionDeclarations"],f)}const i=u(n,["retrieval"]);i!=null&&h(e,["retrieval"],i);const s=u(n,["googleSearch"]);s!=null&&h(e,["googleSearch"],ZO(s));const r=u(n,["googleSearchRetrieval"]);r!=null&&h(e,["googleSearchRetrieval"],tU(r));const o=u(n,["enterpriseWebSearch"]);o!=null&&h(e,["enterpriseWebSearch"],nU(o));const a=u(n,["googleMaps"]);a!=null&&h(e,["googleMaps"],rU(a)),u(n,["urlContext"])!=null&&h(e,["urlContext"],oU());const c=u(n,["computerUse"]);c!=null&&h(e,["computerUse"],aU(c));const d=u(n,["codeExecution"]);return d!=null&&h(e,["codeExecution"],d),e}function lU(n){const e={},t=u(n,["mode"]);t!=null&&h(e,["mode"],t);const i=u(n,["allowedFunctionNames"]);return i!=null&&h(e,["allowedFunctionNames"],i),e}function cU(n){const e={},t=u(n,["latitude"]);t!=null&&h(e,["latitude"],t);const i=u(n,["longitude"]);return i!=null&&h(e,["longitude"],i),e}function uU(n){const e={},t=u(n,["latLng"]);t!=null&&h(e,["latLng"],cU(t));const i=u(n,["languageCode"]);return i!=null&&h(e,["languageCode"],i),e}function dU(n){const e={},t=u(n,["functionCallingConfig"]);t!=null&&h(e,["functionCallingConfig"],lU(t));const i=u(n,["retrievalConfig"]);return i!=null&&h(e,["retrievalConfig"],uU(i)),e}function hU(n){const e={},t=u(n,["voiceName"]);return t!=null&&h(e,["voiceName"],t),e}function fU(n){const e={},t=u(n,["prebuiltVoiceConfig"]);return t!=null&&h(e,["prebuiltVoiceConfig"],hU(t)),e}function pU(n){const e={},t=u(n,["voiceConfig"]);if(t!=null&&h(e,["voiceConfig"],fU(t)),u(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const i=u(n,["languageCode"]);return i!=null&&h(e,["languageCode"],i),e}function mU(n){const e={},t=u(n,["includeThoughts"]);t!=null&&h(e,["includeThoughts"],t);const i=u(n,["thinkingBudget"]);return i!=null&&h(e,["thinkingBudget"],i),e}function gU(n,e,t){const i={},s=u(e,["systemInstruction"]);t!==void 0&&s!=null&&h(t,["systemInstruction"],da(Kt(s)));const r=u(e,["temperature"]);r!=null&&h(i,["temperature"],r);const o=u(e,["topP"]);o!=null&&h(i,["topP"],o);const a=u(e,["topK"]);a!=null&&h(i,["topK"],a);const l=u(e,["candidateCount"]);l!=null&&h(i,["candidateCount"],l);const c=u(e,["maxOutputTokens"]);c!=null&&h(i,["maxOutputTokens"],c);const d=u(e,["stopSequences"]);d!=null&&h(i,["stopSequences"],d);const f=u(e,["responseLogprobs"]);f!=null&&h(i,["responseLogprobs"],f);const m=u(e,["logprobs"]);m!=null&&h(i,["logprobs"],m);const y=u(e,["presencePenalty"]);y!=null&&h(i,["presencePenalty"],y);const v=u(e,["frequencyPenalty"]);v!=null&&h(i,["frequencyPenalty"],v);const w=u(e,["seed"]);w!=null&&h(i,["seed"],w);const T=u(e,["responseMimeType"]);T!=null&&h(i,["responseMimeType"],T);const x=u(e,["responseSchema"]);x!=null&&h(i,["responseSchema"],KO(Ig(x)));const P=u(e,["responseJsonSchema"]);P!=null&&h(i,["responseJsonSchema"],P);const S=u(e,["routingConfig"]);S!=null&&h(i,["routingConfig"],S);const L=u(e,["modelSelectionConfig"]);L!=null&&h(i,["modelConfig"],YO(L));const F=u(e,["safetySettings"]);if(t!==void 0&&F!=null){let te=F;Array.isArray(te)&&(te=te.map(W=>JO(W))),h(t,["safetySettings"],te)}const U=u(e,["tools"]);if(t!==void 0&&U!=null){let te=ca(U);Array.isArray(te)&&(te=te.map(W=>sA(la(W)))),h(t,["tools"],te)}const C=u(e,["toolConfig"]);t!==void 0&&C!=null&&h(t,["toolConfig"],dU(C));const A=u(e,["labels"]);t!==void 0&&A!=null&&h(t,["labels"],A);const E=u(e,["cachedContent"]);t!==void 0&&E!=null&&h(t,["cachedContent"],Ui(n,E));const D=u(e,["responseModalities"]);D!=null&&h(i,["responseModalities"],D);const k=u(e,["mediaResolution"]);k!=null&&h(i,["mediaResolution"],k);const N=u(e,["speechConfig"]);N!=null&&h(i,["speechConfig"],pU(Cg(N)));const R=u(e,["audioTimestamp"]);R!=null&&h(i,["audioTimestamp"],R);const q=u(e,["thinkingConfig"]);return q!=null&&h(i,["thinkingConfig"],mU(q)),i}function V1(n,e){const t={},i=u(e,["model"]);i!=null&&h(t,["_url","model"],Me(n,i));const s=u(e,["contents"]);if(s!=null){let o=Dn(s);Array.isArray(o)&&(o=o.map(a=>da(a))),h(t,["contents"],o)}const r=u(e,["config"]);return r!=null&&h(t,["generationConfig"],gU(n,r,t)),t}function yU(n,e){const t={},i=u(n,["taskType"]);e!==void 0&&i!=null&&h(e,["instances[]","task_type"],i);const s=u(n,["title"]);e!==void 0&&s!=null&&h(e,["instances[]","title"],s);const r=u(n,["outputDimensionality"]);e!==void 0&&r!=null&&h(e,["parameters","outputDimensionality"],r);const o=u(n,["mimeType"]);e!==void 0&&o!=null&&h(e,["instances[]","mimeType"],o);const a=u(n,["autoTruncate"]);return e!==void 0&&a!=null&&h(e,["parameters","autoTruncate"],a),t}function vU(n,e){const t={},i=u(e,["model"]);i!=null&&h(t,["_url","model"],Me(n,i));const s=u(e,["contents"]);s!=null&&h(t,["instances[]","content"],BE(n,s));const r=u(e,["config"]);return r!=null&&h(t,["config"],yU(r,t)),t}function _U(n,e){const t={},i=u(n,["outputGcsUri"]);e!==void 0&&i!=null&&h(e,["parameters","storageUri"],i);const s=u(n,["negativePrompt"]);e!==void 0&&s!=null&&h(e,["parameters","negativePrompt"],s);const r=u(n,["numberOfImages"]);e!==void 0&&r!=null&&h(e,["parameters","sampleCount"],r);const o=u(n,["aspectRatio"]);e!==void 0&&o!=null&&h(e,["parameters","aspectRatio"],o);const a=u(n,["guidanceScale"]);e!==void 0&&a!=null&&h(e,["parameters","guidanceScale"],a);const l=u(n,["seed"]);e!==void 0&&l!=null&&h(e,["parameters","seed"],l);const c=u(n,["safetyFilterLevel"]);e!==void 0&&c!=null&&h(e,["parameters","safetySetting"],c);const d=u(n,["personGeneration"]);e!==void 0&&d!=null&&h(e,["parameters","personGeneration"],d);const f=u(n,["includeSafetyAttributes"]);e!==void 0&&f!=null&&h(e,["parameters","includeSafetyAttributes"],f);const m=u(n,["includeRaiReason"]);e!==void 0&&m!=null&&h(e,["parameters","includeRaiReason"],m);const y=u(n,["language"]);e!==void 0&&y!=null&&h(e,["parameters","language"],y);const v=u(n,["outputMimeType"]);e!==void 0&&v!=null&&h(e,["parameters","outputOptions","mimeType"],v);const w=u(n,["outputCompressionQuality"]);e!==void 0&&w!=null&&h(e,["parameters","outputOptions","compressionQuality"],w);const T=u(n,["addWatermark"]);e!==void 0&&T!=null&&h(e,["parameters","addWatermark"],T);const x=u(n,["imageSize"]);e!==void 0&&x!=null&&h(e,["parameters","sampleImageSize"],x);const P=u(n,["enhancePrompt"]);return e!==void 0&&P!=null&&h(e,["parameters","enhancePrompt"],P),t}function wU(n,e){const t={},i=u(e,["model"]);i!=null&&h(t,["_url","model"],Me(n,i));const s=u(e,["prompt"]);s!=null&&h(t,["instances[0]","prompt"],s);const r=u(e,["config"]);return r!=null&&h(t,["config"],_U(r,t)),t}function Bi(n){const e={},t=u(n,["gcsUri"]);t!=null&&h(e,["gcsUri"],t);const i=u(n,["imageBytes"]);i!=null&&h(e,["bytesBase64Encoded"],Fr(i));const s=u(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function bU(n){const e={},t=u(n,["maskMode"]);t!=null&&h(e,["maskMode"],t);const i=u(n,["segmentationClasses"]);i!=null&&h(e,["maskClasses"],i);const s=u(n,["maskDilation"]);return s!=null&&h(e,["dilation"],s),e}function TU(n){const e={},t=u(n,["controlType"]);t!=null&&h(e,["controlType"],t);const i=u(n,["enableControlImageComputation"]);return i!=null&&h(e,["computeControl"],i),e}function xU(n){const e={},t=u(n,["styleDescription"]);return t!=null&&h(e,["styleDescription"],t),e}function EU(n){const e={},t=u(n,["subjectType"]);t!=null&&h(e,["subjectType"],t);const i=u(n,["subjectDescription"]);return i!=null&&h(e,["subjectDescription"],i),e}function AU(n){const e={},t=u(n,["referenceImage"]);t!=null&&h(e,["referenceImage"],Bi(t));const i=u(n,["referenceId"]);i!=null&&h(e,["referenceId"],i);const s=u(n,["referenceType"]);s!=null&&h(e,["referenceType"],s);const r=u(n,["maskImageConfig"]);r!=null&&h(e,["maskImageConfig"],bU(r));const o=u(n,["controlImageConfig"]);o!=null&&h(e,["controlImageConfig"],TU(o));const a=u(n,["styleImageConfig"]);a!=null&&h(e,["styleImageConfig"],xU(a));const l=u(n,["subjectImageConfig"]);return l!=null&&h(e,["subjectImageConfig"],EU(l)),e}function IU(n,e){const t={},i=u(n,["outputGcsUri"]);e!==void 0&&i!=null&&h(e,["parameters","storageUri"],i);const s=u(n,["negativePrompt"]);e!==void 0&&s!=null&&h(e,["parameters","negativePrompt"],s);const r=u(n,["numberOfImages"]);e!==void 0&&r!=null&&h(e,["parameters","sampleCount"],r);const o=u(n,["aspectRatio"]);e!==void 0&&o!=null&&h(e,["parameters","aspectRatio"],o);const a=u(n,["guidanceScale"]);e!==void 0&&a!=null&&h(e,["parameters","guidanceScale"],a);const l=u(n,["seed"]);e!==void 0&&l!=null&&h(e,["parameters","seed"],l);const c=u(n,["safetyFilterLevel"]);e!==void 0&&c!=null&&h(e,["parameters","safetySetting"],c);const d=u(n,["personGeneration"]);e!==void 0&&d!=null&&h(e,["parameters","personGeneration"],d);const f=u(n,["includeSafetyAttributes"]);e!==void 0&&f!=null&&h(e,["parameters","includeSafetyAttributes"],f);const m=u(n,["includeRaiReason"]);e!==void 0&&m!=null&&h(e,["parameters","includeRaiReason"],m);const y=u(n,["language"]);e!==void 0&&y!=null&&h(e,["parameters","language"],y);const v=u(n,["outputMimeType"]);e!==void 0&&v!=null&&h(e,["parameters","outputOptions","mimeType"],v);const w=u(n,["outputCompressionQuality"]);e!==void 0&&w!=null&&h(e,["parameters","outputOptions","compressionQuality"],w);const T=u(n,["addWatermark"]);e!==void 0&&T!=null&&h(e,["parameters","addWatermark"],T);const x=u(n,["editMode"]);e!==void 0&&x!=null&&h(e,["parameters","editMode"],x);const P=u(n,["baseSteps"]);return e!==void 0&&P!=null&&h(e,["parameters","editConfig","baseSteps"],P),t}function CU(n,e){const t={},i=u(e,["model"]);i!=null&&h(t,["_url","model"],Me(n,i));const s=u(e,["prompt"]);s!=null&&h(t,["instances[0]","prompt"],s);const r=u(e,["referenceImages"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>AU(l))),h(t,["instances[0]","referenceImages"],a)}const o=u(e,["config"]);return o!=null&&h(t,["config"],IU(o,t)),t}function SU(n,e){const t={},i=u(n,["includeRaiReason"]);e!==void 0&&i!=null&&h(e,["parameters","includeRaiReason"],i);const s=u(n,["outputMimeType"]);e!==void 0&&s!=null&&h(e,["parameters","outputOptions","mimeType"],s);const r=u(n,["outputCompressionQuality"]);e!==void 0&&r!=null&&h(e,["parameters","outputOptions","compressionQuality"],r);const o=u(n,["enhanceInputImage"]);e!==void 0&&o!=null&&h(e,["parameters","upscaleConfig","enhanceInputImage"],o);const a=u(n,["imagePreservationFactor"]);e!==void 0&&a!=null&&h(e,["parameters","upscaleConfig","imagePreservationFactor"],a);const l=u(n,["numberOfImages"]);e!==void 0&&l!=null&&h(e,["parameters","sampleCount"],l);const c=u(n,["mode"]);return e!==void 0&&c!=null&&h(e,["parameters","mode"],c),t}function PU(n,e){const t={},i=u(e,["model"]);i!=null&&h(t,["_url","model"],Me(n,i));const s=u(e,["image"]);s!=null&&h(t,["instances[0]","image"],Bi(s));const r=u(e,["upscaleFactor"]);r!=null&&h(t,["parameters","upscaleConfig","upscaleFactor"],r);const o=u(e,["config"]);return o!=null&&h(t,["config"],SU(o,t)),t}function RU(n){const e={},t=u(n,["productImage"]);return t!=null&&h(e,["image"],Bi(t)),e}function kU(n,e){const t={},i=u(n,["prompt"]);e!==void 0&&i!=null&&h(e,["instances[0]","prompt"],i);const s=u(n,["personImage"]);e!==void 0&&s!=null&&h(e,["instances[0]","personImage","image"],Bi(s));const r=u(n,["productImages"]);if(e!==void 0&&r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>RU(a))),h(e,["instances[0]","productImages"],o)}return t}function NU(n,e){const t={},i=u(n,["numberOfImages"]);e!==void 0&&i!=null&&h(e,["parameters","sampleCount"],i);const s=u(n,["baseSteps"]);e!==void 0&&s!=null&&h(e,["parameters","editConfig","baseSteps"],s);const r=u(n,["outputGcsUri"]);e!==void 0&&r!=null&&h(e,["parameters","storageUri"],r);const o=u(n,["seed"]);e!==void 0&&o!=null&&h(e,["parameters","seed"],o);const a=u(n,["safetyFilterLevel"]);e!==void 0&&a!=null&&h(e,["parameters","safetySetting"],a);const l=u(n,["personGeneration"]);e!==void 0&&l!=null&&h(e,["parameters","personGeneration"],l);const c=u(n,["outputMimeType"]);e!==void 0&&c!=null&&h(e,["parameters","outputOptions","mimeType"],c);const d=u(n,["outputCompressionQuality"]);e!==void 0&&d!=null&&h(e,["parameters","outputOptions","compressionQuality"],d);const f=u(n,["enhancePrompt"]);return e!==void 0&&f!=null&&h(e,["parameters","enhancePrompt"],f),t}function MU(n,e){const t={},i=u(e,["model"]);i!=null&&h(t,["_url","model"],Me(n,i));const s=u(e,["source"]);s!=null&&h(t,["config"],kU(s,t));const r=u(e,["config"]);return r!=null&&h(t,["config"],NU(r,t)),t}function DU(n){const e={},t=u(n,["image"]);return t!=null&&h(e,["image"],Bi(t)),e}function LU(n,e){const t={},i=u(n,["prompt"]);e!==void 0&&i!=null&&h(e,["instances[0]","prompt"],i);const s=u(n,["image"]);e!==void 0&&s!=null&&h(e,["instances[0]","image"],Bi(s));const r=u(n,["scribbleImage"]);return e!==void 0&&r!=null&&h(e,["instances[0]","scribble"],DU(r)),t}function FU(n,e){const t={},i=u(n,["mode"]);e!==void 0&&i!=null&&h(e,["parameters","mode"],i);const s=u(n,["maxPredictions"]);e!==void 0&&s!=null&&h(e,["parameters","maxPredictions"],s);const r=u(n,["confidenceThreshold"]);e!==void 0&&r!=null&&h(e,["parameters","confidenceThreshold"],r);const o=u(n,["maskDilation"]);e!==void 0&&o!=null&&h(e,["parameters","maskDilation"],o);const a=u(n,["binaryColorThreshold"]);return e!==void 0&&a!=null&&h(e,["parameters","binaryColorThreshold"],a),t}function VU(n,e){const t={},i=u(e,["model"]);i!=null&&h(t,["_url","model"],Me(n,i));const s=u(e,["source"]);s!=null&&h(t,["config"],LU(s,t));const r=u(e,["config"]);return r!=null&&h(t,["config"],FU(r,t)),t}function OU(n,e){const t={},i=u(e,["model"]);i!=null&&h(t,["_url","name"],Me(n,i));const s=u(e,["config"]);return s!=null&&h(t,["config"],s),t}function UU(n,e,t){const i={},s=u(e,["pageSize"]);t!==void 0&&s!=null&&h(t,["_query","pageSize"],s);const r=u(e,["pageToken"]);t!==void 0&&r!=null&&h(t,["_query","pageToken"],r);const o=u(e,["filter"]);t!==void 0&&o!=null&&h(t,["_query","filter"],o);const a=u(e,["queryBase"]);return t!==void 0&&a!=null&&h(t,["_url","models_url"],HE(n,a)),i}function BU(n,e){const t={},i=u(e,["config"]);return i!=null&&h(t,["config"],UU(n,i,t)),t}function zU(n,e){const t={},i=u(n,["displayName"]);e!==void 0&&i!=null&&h(e,["displayName"],i);const s=u(n,["description"]);e!==void 0&&s!=null&&h(e,["description"],s);const r=u(n,["defaultCheckpointId"]);return e!==void 0&&r!=null&&h(e,["defaultCheckpointId"],r),t}function qU(n,e){const t={},i=u(e,["model"]);i!=null&&h(t,["_url","model"],Me(n,i));const s=u(e,["config"]);return s!=null&&h(t,["config"],zU(s,t)),t}function HU(n,e){const t={},i=u(e,["model"]);i!=null&&h(t,["_url","name"],Me(n,i));const s=u(e,["config"]);return s!=null&&h(t,["config"],s),t}function GU(n,e){const t={},i=u(n,["systemInstruction"]);e!==void 0&&i!=null&&h(e,["systemInstruction"],da(Kt(i)));const s=u(n,["tools"]);if(e!==void 0&&s!=null){let o=s;Array.isArray(o)&&(o=o.map(a=>sA(a))),h(e,["tools"],o)}const r=u(n,["generationConfig"]);return e!==void 0&&r!=null&&h(e,["generationConfig"],r),t}function $U(n,e){const t={},i=u(e,["model"]);i!=null&&h(t,["_url","model"],Me(n,i));const s=u(e,["contents"]);if(s!=null){let o=Dn(s);Array.isArray(o)&&(o=o.map(a=>da(a))),h(t,["contents"],o)}const r=u(e,["config"]);return r!=null&&h(t,["config"],GU(r,t)),t}function jU(n,e){const t={},i=u(e,["model"]);i!=null&&h(t,["_url","model"],Me(n,i));const s=u(e,["contents"]);if(s!=null){let o=Dn(s);Array.isArray(o)&&(o=o.map(a=>da(a))),h(t,["contents"],o)}const r=u(e,["config"]);return r!=null&&h(t,["config"],r),t}function WU(n){const e={},t=u(n,["uri"]);t!=null&&h(e,["gcsUri"],t);const i=u(n,["videoBytes"]);i!=null&&h(e,["bytesBase64Encoded"],Fr(i));const s=u(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function KU(n){const e={},t=u(n,["image"]);t!=null&&h(e,["image"],Bi(t));const i=u(n,["referenceType"]);return i!=null&&h(e,["referenceType"],i),e}function YU(n,e){const t={},i=u(n,["numberOfVideos"]);e!==void 0&&i!=null&&h(e,["parameters","sampleCount"],i);const s=u(n,["outputGcsUri"]);e!==void 0&&s!=null&&h(e,["parameters","storageUri"],s);const r=u(n,["fps"]);e!==void 0&&r!=null&&h(e,["parameters","fps"],r);const o=u(n,["durationSeconds"]);e!==void 0&&o!=null&&h(e,["parameters","durationSeconds"],o);const a=u(n,["seed"]);e!==void 0&&a!=null&&h(e,["parameters","seed"],a);const l=u(n,["aspectRatio"]);e!==void 0&&l!=null&&h(e,["parameters","aspectRatio"],l);const c=u(n,["resolution"]);e!==void 0&&c!=null&&h(e,["parameters","resolution"],c);const d=u(n,["personGeneration"]);e!==void 0&&d!=null&&h(e,["parameters","personGeneration"],d);const f=u(n,["pubsubTopic"]);e!==void 0&&f!=null&&h(e,["parameters","pubsubTopic"],f);const m=u(n,["negativePrompt"]);e!==void 0&&m!=null&&h(e,["parameters","negativePrompt"],m);const y=u(n,["enhancePrompt"]);e!==void 0&&y!=null&&h(e,["parameters","enhancePrompt"],y);const v=u(n,["generateAudio"]);e!==void 0&&v!=null&&h(e,["parameters","generateAudio"],v);const w=u(n,["lastFrame"]);e!==void 0&&w!=null&&h(e,["instances[0]","lastFrame"],Bi(w));const T=u(n,["referenceImages"]);if(e!==void 0&&T!=null){let P=T;Array.isArray(P)&&(P=P.map(S=>KU(S))),h(e,["instances[0]","referenceImages"],P)}const x=u(n,["compressionQuality"]);return e!==void 0&&x!=null&&h(e,["parameters","compressionQuality"],x),t}function JU(n,e){const t={},i=u(e,["model"]);i!=null&&h(t,["_url","model"],Me(n,i));const s=u(e,["prompt"]);s!=null&&h(t,["instances[0]","prompt"],s);const r=u(e,["image"]);r!=null&&h(t,["instances[0]","image"],Bi(r));const o=u(e,["video"]);o!=null&&h(t,["instances[0]","video"],WU(o));const a=u(e,["config"]);return a!=null&&h(t,["config"],YU(a,t)),t}function XU(n){const e={},t=u(n,["fps"]);t!=null&&h(e,["fps"],t);const i=u(n,["endOffset"]);i!=null&&h(e,["endOffset"],i);const s=u(n,["startOffset"]);return s!=null&&h(e,["startOffset"],s),e}function QU(n){const e={},t=u(n,["data"]);t!=null&&h(e,["data"],t);const i=u(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function ZU(n){const e={},t=u(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const i=u(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function eB(n){const e={},t=u(n,["videoMetadata"]);t!=null&&h(e,["videoMetadata"],XU(t));const i=u(n,["thought"]);i!=null&&h(e,["thought"],i);const s=u(n,["inlineData"]);s!=null&&h(e,["inlineData"],QU(s));const r=u(n,["fileData"]);r!=null&&h(e,["fileData"],ZU(r));const o=u(n,["thoughtSignature"]);o!=null&&h(e,["thoughtSignature"],o);const a=u(n,["codeExecutionResult"]);a!=null&&h(e,["codeExecutionResult"],a);const l=u(n,["executableCode"]);l!=null&&h(e,["executableCode"],l);const c=u(n,["functionCall"]);c!=null&&h(e,["functionCall"],c);const d=u(n,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const f=u(n,["text"]);return f!=null&&h(e,["text"],f),e}function tB(n){const e={},t=u(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>eB(r))),h(e,["parts"],s)}const i=u(n,["role"]);return i!=null&&h(e,["role"],i),e}function nB(n){const e={},t=u(n,["citationSources"]);return t!=null&&h(e,["citations"],t),e}function iB(n){const e={},t=u(n,["retrievedUrl"]);t!=null&&h(e,["retrievedUrl"],t);const i=u(n,["urlRetrievalStatus"]);return i!=null&&h(e,["urlRetrievalStatus"],i),e}function sB(n){const e={},t=u(n,["urlMetadata"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>iB(s))),h(e,["urlMetadata"],i)}return e}function rB(n){const e={},t=u(n,["content"]);t!=null&&h(e,["content"],tB(t));const i=u(n,["citationMetadata"]);i!=null&&h(e,["citationMetadata"],nB(i));const s=u(n,["tokenCount"]);s!=null&&h(e,["tokenCount"],s);const r=u(n,["finishReason"]);r!=null&&h(e,["finishReason"],r);const o=u(n,["urlContextMetadata"]);o!=null&&h(e,["urlContextMetadata"],sB(o));const a=u(n,["avgLogprobs"]);a!=null&&h(e,["avgLogprobs"],a);const l=u(n,["groundingMetadata"]);l!=null&&h(e,["groundingMetadata"],l);const c=u(n,["index"]);c!=null&&h(e,["index"],c);const d=u(n,["logprobsResult"]);d!=null&&h(e,["logprobsResult"],d);const f=u(n,["safetyRatings"]);return f!=null&&h(e,["safetyRatings"],f),e}function O1(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=u(n,["candidates"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>rB(c))),h(e,["candidates"],l)}const s=u(n,["modelVersion"]);s!=null&&h(e,["modelVersion"],s);const r=u(n,["promptFeedback"]);r!=null&&h(e,["promptFeedback"],r);const o=u(n,["responseId"]);o!=null&&h(e,["responseId"],o);const a=u(n,["usageMetadata"]);return a!=null&&h(e,["usageMetadata"],a),e}function oB(n){const e={},t=u(n,["values"]);return t!=null&&h(e,["values"],t),e}function aB(){return{}}function lB(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=u(n,["embeddings"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>oB(o))),h(e,["embeddings"],r)}return u(n,["metadata"])!=null&&h(e,["metadata"],aB()),e}function cB(n){const e={},t=u(n,["bytesBase64Encoded"]);t!=null&&h(e,["imageBytes"],Fr(t));const i=u(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function rA(n){const e={},t=u(n,["safetyAttributes","categories"]);t!=null&&h(e,["categories"],t);const i=u(n,["safetyAttributes","scores"]);i!=null&&h(e,["scores"],i);const s=u(n,["contentType"]);return s!=null&&h(e,["contentType"],s),e}function uB(n){const e={},t=u(n,["_self"]);t!=null&&h(e,["image"],cB(t));const i=u(n,["raiFilteredReason"]);i!=null&&h(e,["raiFilteredReason"],i);const s=u(n,["_self"]);return s!=null&&h(e,["safetyAttributes"],rA(s)),e}function dB(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=u(n,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>uB(o))),h(e,["generatedImages"],r)}const s=u(n,["positivePromptSafetyAttributes"]);return s!=null&&h(e,["positivePromptSafetyAttributes"],rA(s)),e}function hB(n){const e={},t=u(n,["baseModel"]);t!=null&&h(e,["baseModel"],t);const i=u(n,["createTime"]);i!=null&&h(e,["createTime"],i);const s=u(n,["updateTime"]);return s!=null&&h(e,["updateTime"],s),e}function hp(n){const e={},t=u(n,["name"]);t!=null&&h(e,["name"],t);const i=u(n,["displayName"]);i!=null&&h(e,["displayName"],i);const s=u(n,["description"]);s!=null&&h(e,["description"],s);const r=u(n,["version"]);r!=null&&h(e,["version"],r);const o=u(n,["_self"]);o!=null&&h(e,["tunedModelInfo"],hB(o));const a=u(n,["inputTokenLimit"]);a!=null&&h(e,["inputTokenLimit"],a);const l=u(n,["outputTokenLimit"]);l!=null&&h(e,["outputTokenLimit"],l);const c=u(n,["supportedGenerationMethods"]);return c!=null&&h(e,["supportedActions"],c),e}function fB(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=u(n,["nextPageToken"]);i!=null&&h(e,["nextPageToken"],i);const s=u(n,["_self"]);if(s!=null){let r=GE(s);Array.isArray(r)&&(r=r.map(o=>hp(o))),h(e,["models"],r)}return e}function pB(){return{}}function mB(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=u(n,["totalTokens"]);i!=null&&h(e,["totalTokens"],i);const s=u(n,["cachedContentTokenCount"]);return s!=null&&h(e,["cachedContentTokenCount"],s),e}function gB(n){const e={},t=u(n,["video","uri"]);t!=null&&h(e,["uri"],t);const i=u(n,["video","encodedVideo"]);i!=null&&h(e,["videoBytes"],Fr(i));const s=u(n,["encoding"]);return s!=null&&h(e,["mimeType"],s),e}function yB(n){const e={},t=u(n,["_self"]);return t!=null&&h(e,["video"],gB(t)),e}function vB(n){const e={},t=u(n,["generatedSamples"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(o=>yB(o))),h(e,["generatedVideos"],r)}const i=u(n,["raiMediaFilteredCount"]);i!=null&&h(e,["raiMediaFilteredCount"],i);const s=u(n,["raiMediaFilteredReasons"]);return s!=null&&h(e,["raiMediaFilteredReasons"],s),e}function _B(n){const e={},t=u(n,["name"]);t!=null&&h(e,["name"],t);const i=u(n,["metadata"]);i!=null&&h(e,["metadata"],i);const s=u(n,["done"]);s!=null&&h(e,["done"],s);const r=u(n,["error"]);r!=null&&h(e,["error"],r);const o=u(n,["response","generateVideoResponse"]);return o!=null&&h(e,["response"],vB(o)),e}function wB(n){const e={},t=u(n,["fps"]);t!=null&&h(e,["fps"],t);const i=u(n,["endOffset"]);i!=null&&h(e,["endOffset"],i);const s=u(n,["startOffset"]);return s!=null&&h(e,["startOffset"],s),e}function bB(n){const e={},t=u(n,["displayName"]);t!=null&&h(e,["displayName"],t);const i=u(n,["data"]);i!=null&&h(e,["data"],i);const s=u(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function TB(n){const e={},t=u(n,["displayName"]);t!=null&&h(e,["displayName"],t);const i=u(n,["fileUri"]);i!=null&&h(e,["fileUri"],i);const s=u(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function xB(n){const e={},t=u(n,["videoMetadata"]);t!=null&&h(e,["videoMetadata"],wB(t));const i=u(n,["thought"]);i!=null&&h(e,["thought"],i);const s=u(n,["inlineData"]);s!=null&&h(e,["inlineData"],bB(s));const r=u(n,["fileData"]);r!=null&&h(e,["fileData"],TB(r));const o=u(n,["thoughtSignature"]);o!=null&&h(e,["thoughtSignature"],o);const a=u(n,["codeExecutionResult"]);a!=null&&h(e,["codeExecutionResult"],a);const l=u(n,["executableCode"]);l!=null&&h(e,["executableCode"],l);const c=u(n,["functionCall"]);c!=null&&h(e,["functionCall"],c);const d=u(n,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const f=u(n,["text"]);return f!=null&&h(e,["text"],f),e}function EB(n){const e={},t=u(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>xB(r))),h(e,["parts"],s)}const i=u(n,["role"]);return i!=null&&h(e,["role"],i),e}function AB(n){const e={},t=u(n,["citations"]);return t!=null&&h(e,["citations"],t),e}function IB(n){const e={},t=u(n,["retrievedUrl"]);t!=null&&h(e,["retrievedUrl"],t);const i=u(n,["urlRetrievalStatus"]);return i!=null&&h(e,["urlRetrievalStatus"],i),e}function CB(n){const e={},t=u(n,["urlMetadata"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>IB(s))),h(e,["urlMetadata"],i)}return e}function SB(n){const e={},t=u(n,["content"]);t!=null&&h(e,["content"],EB(t));const i=u(n,["citationMetadata"]);i!=null&&h(e,["citationMetadata"],AB(i));const s=u(n,["finishMessage"]);s!=null&&h(e,["finishMessage"],s);const r=u(n,["finishReason"]);r!=null&&h(e,["finishReason"],r);const o=u(n,["urlContextMetadata"]);o!=null&&h(e,["urlContextMetadata"],CB(o));const a=u(n,["avgLogprobs"]);a!=null&&h(e,["avgLogprobs"],a);const l=u(n,["groundingMetadata"]);l!=null&&h(e,["groundingMetadata"],l);const c=u(n,["index"]);c!=null&&h(e,["index"],c);const d=u(n,["logprobsResult"]);d!=null&&h(e,["logprobsResult"],d);const f=u(n,["safetyRatings"]);return f!=null&&h(e,["safetyRatings"],f),e}function U1(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=u(n,["candidates"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(d=>SB(d))),h(e,["candidates"],c)}const s=u(n,["createTime"]);s!=null&&h(e,["createTime"],s);const r=u(n,["modelVersion"]);r!=null&&h(e,["modelVersion"],r);const o=u(n,["promptFeedback"]);o!=null&&h(e,["promptFeedback"],o);const a=u(n,["responseId"]);a!=null&&h(e,["responseId"],a);const l=u(n,["usageMetadata"]);return l!=null&&h(e,["usageMetadata"],l),e}function PB(n){const e={},t=u(n,["truncated"]);t!=null&&h(e,["truncated"],t);const i=u(n,["token_count"]);return i!=null&&h(e,["tokenCount"],i),e}function RB(n){const e={},t=u(n,["values"]);t!=null&&h(e,["values"],t);const i=u(n,["statistics"]);return i!=null&&h(e,["statistics"],PB(i)),e}function kB(n){const e={},t=u(n,["billableCharacterCount"]);return t!=null&&h(e,["billableCharacterCount"],t),e}function NB(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=u(n,["predictions[]","embeddings"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>RB(o))),h(e,["embeddings"],r)}const s=u(n,["metadata"]);return s!=null&&h(e,["metadata"],kB(s)),e}function oA(n){const e={},t=u(n,["gcsUri"]);t!=null&&h(e,["gcsUri"],t);const i=u(n,["bytesBase64Encoded"]);i!=null&&h(e,["imageBytes"],Fr(i));const s=u(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function aA(n){const e={},t=u(n,["safetyAttributes","categories"]);t!=null&&h(e,["categories"],t);const i=u(n,["safetyAttributes","scores"]);i!=null&&h(e,["scores"],i);const s=u(n,["contentType"]);return s!=null&&h(e,["contentType"],s),e}function th(n){const e={},t=u(n,["_self"]);t!=null&&h(e,["image"],oA(t));const i=u(n,["raiFilteredReason"]);i!=null&&h(e,["raiFilteredReason"],i);const s=u(n,["_self"]);s!=null&&h(e,["safetyAttributes"],aA(s));const r=u(n,["prompt"]);return r!=null&&h(e,["enhancedPrompt"],r),e}function MB(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=u(n,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>th(o))),h(e,["generatedImages"],r)}const s=u(n,["positivePromptSafetyAttributes"]);return s!=null&&h(e,["positivePromptSafetyAttributes"],aA(s)),e}function DB(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=u(n,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(r=>th(r))),h(e,["generatedImages"],s)}return e}function LB(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=u(n,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(r=>th(r))),h(e,["generatedImages"],s)}return e}function FB(n){const e={},t=u(n,["predictions"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>th(s))),h(e,["generatedImages"],i)}return e}function VB(n){const e={},t=u(n,["label"]);t!=null&&h(e,["label"],t);const i=u(n,["score"]);return i!=null&&h(e,["score"],i),e}function OB(n){const e={},t=u(n,["_self"]);t!=null&&h(e,["mask"],oA(t));const i=u(n,["labels"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(r=>VB(r))),h(e,["labels"],s)}return e}function UB(n){const e={},t=u(n,["predictions"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>OB(s))),h(e,["generatedMasks"],i)}return e}function BB(n){const e={},t=u(n,["endpoint"]);t!=null&&h(e,["name"],t);const i=u(n,["deployedModelId"]);return i!=null&&h(e,["deployedModelId"],i),e}function zB(n){const e={},t=u(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&h(e,["baseModel"],t);const i=u(n,["createTime"]);i!=null&&h(e,["createTime"],i);const s=u(n,["updateTime"]);return s!=null&&h(e,["updateTime"],s),e}function qB(n){const e={},t=u(n,["checkpointId"]);t!=null&&h(e,["checkpointId"],t);const i=u(n,["epoch"]);i!=null&&h(e,["epoch"],i);const s=u(n,["step"]);return s!=null&&h(e,["step"],s),e}function fp(n){const e={},t=u(n,["name"]);t!=null&&h(e,["name"],t);const i=u(n,["displayName"]);i!=null&&h(e,["displayName"],i);const s=u(n,["description"]);s!=null&&h(e,["description"],s);const r=u(n,["versionId"]);r!=null&&h(e,["version"],r);const o=u(n,["deployedModels"]);if(o!=null){let f=o;Array.isArray(f)&&(f=f.map(m=>BB(m))),h(e,["endpoints"],f)}const a=u(n,["labels"]);a!=null&&h(e,["labels"],a);const l=u(n,["_self"]);l!=null&&h(e,["tunedModelInfo"],zB(l));const c=u(n,["defaultCheckpointId"]);c!=null&&h(e,["defaultCheckpointId"],c);const d=u(n,["checkpoints"]);if(d!=null){let f=d;Array.isArray(f)&&(f=f.map(m=>qB(m))),h(e,["checkpoints"],f)}return e}function HB(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=u(n,["nextPageToken"]);i!=null&&h(e,["nextPageToken"],i);const s=u(n,["_self"]);if(s!=null){let r=GE(s);Array.isArray(r)&&(r=r.map(o=>fp(o))),h(e,["models"],r)}return e}function GB(){return{}}function $B(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=u(n,["totalTokens"]);return i!=null&&h(e,["totalTokens"],i),e}function jB(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=u(n,["tokensInfo"]);return i!=null&&h(e,["tokensInfo"],i),e}function WB(n){const e={},t=u(n,["gcsUri"]);t!=null&&h(e,["uri"],t);const i=u(n,["bytesBase64Encoded"]);i!=null&&h(e,["videoBytes"],Fr(i));const s=u(n,["mimeType"]);return s!=null&&h(e,["mimeType"],s),e}function KB(n){const e={},t=u(n,["_self"]);return t!=null&&h(e,["video"],WB(t)),e}function YB(n){const e={},t=u(n,["videos"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(o=>KB(o))),h(e,["generatedVideos"],r)}const i=u(n,["raiMediaFilteredCount"]);i!=null&&h(e,["raiMediaFilteredCount"],i);const s=u(n,["raiMediaFilteredReasons"]);return s!=null&&h(e,["raiMediaFilteredReasons"],s),e}function JB(n){const e={},t=u(n,["name"]);t!=null&&h(e,["name"],t);const i=u(n,["metadata"]);i!=null&&h(e,["metadata"],i);const s=u(n,["done"]);s!=null&&h(e,["done"],s);const r=u(n,["error"]);r!=null&&h(e,["error"],r);const o=u(n,["response"]);return o!=null&&h(e,["response"],YB(o)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const XB="Content-Type",QB="X-Server-Timeout",ZB="User-Agent",pp="x-goog-api-client",ez="1.15.0",tz=`google-genai-sdk/${ez}`,nz="v1beta1",iz="v1beta",B1=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class sz{constructor(e){var t,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const s={};this.clientOptions.vertexai?(s.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:nz,s.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(s.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:iz,s.baseUrl="https://generativelanguage.googleapis.com/"),s.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=s,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(s,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,i){const s=[this.getRequestUrlInternal(t)];return i&&s.push(this.getBaseResourcePath()),e!==""&&s.push(e),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,t,i);if(e.queryParams)for(const[o,a]of Object.entries(e.queryParams))s.searchParams.append(o,String(a));let r={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else r.body=e.body;return r=await this.includeExtraHttpOptionsToRequestInit(r,t,e.abortSignal),this.unaryApiCall(s,r,e.httpMethod)}patchHttpOptions(e,t){const i=JSON.parse(JSON.stringify(e));for(const[s,r]of Object.entries(t))typeof r=="object"?i[s]=Object.assign(Object.assign({},i[s]),r):r!==void 0&&(i[s]=r);return i}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,t,i);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let r={};return r.body=e.body,r=await this.includeExtraHttpOptionsToRequestInit(r,t,e.abortSignal),this.streamApiCall(s,r,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,i){if(t&&t.timeout||i){const s=new AbortController,r=s.signal;if(t.timeout&&t?.timeout>0){const o=setTimeout(()=>s.abort(),t.timeout);o&&typeof o.unref=="function"&&o.unref()}i&&i.addEventListener("abort",()=>{s.abort()}),e.signal=r}return t&&t.extraBody!==null&&rz(e,t.extraBody),e.headers=await this.getHeadersInternal(t),e}async unaryApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async s=>(await z1(s),new ap(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}async streamApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async s=>(await z1(s),this.processStreamResponse(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}processStreamResponse(e){var t;return vo(this,arguments,function*(){const s=(t=e?.body)===null||t===void 0?void 0:t.getReader(),r=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let o="";for(;;){const{done:a,value:l}=yield Ge(s.read());if(a){if(o.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const c=r.decode(l,{stream:!0});try{const f=JSON.parse(c);if("error"in f){const m=JSON.parse(JSON.stringify(f.error)),y=m.status,v=m.code,w=`got status: ${y}. ${JSON.stringify(f)}`;if(v>=400&&v<600)throw new Zd({message:w,status:v})}}catch(f){if(f.name==="ApiError")throw f}o+=c;let d=o.match(B1);for(;d;){const f=d[1];try{const m=new Response(f,{headers:e?.headers,status:e?.status,statusText:e?.statusText});yield yield Ge(new ap(m)),o=o.slice(d[0].length),d=o.match(B1)}catch(m){throw new Error(`exception parsing stream chunk ${f}. ${m}`)}}}}finally{s.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},t=tz+" "+this.clientOptions.userAgentExtra;return e[ZB]=t,e[pp]=t,e[XB]="application/json",e}async getHeadersInternal(e){const t=new Headers;if(e&&e.headers){for(const[i,s]of Object.entries(e.headers))t.append(i,s);e.timeout&&e.timeout>0&&t.append(QB,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(t),t}async uploadFile(e,t){var i;const s={};t!=null&&(s.mimeType=t.mimeType,s.name=t.name,s.displayName=t.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const r=this.clientOptions.uploader,o=await r.stat(e);s.sizeBytes=String(o.size);const a=(i=t?.mimeType)!==null&&i!==void 0?i:o.type;if(a===void 0||a==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=a;const l=await this.fetchUploadUrl(s,t);return r.upload(e,l,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t){var i;let s={};t?.httpOptions?s=t.httpOptions:s={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const r={file:e},o=await this.request({path:ie("upload/v1beta/files",r._url),body:JSON.stringify(r),httpMethod:"POST",httpOptions:s});if(!o||!o?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const a=(i=o?.headers)===null||i===void 0?void 0:i["x-goog-upload-url"];if(a===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return a}}async function z1(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let i;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await n.json():i={error:{message:await n.text(),code:n.status,status:n.statusText}};const s=JSON.stringify(i);throw t>=400&&t<600?new Zd({message:s,status:t}):new Error(s)}}function rz(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const r=JSON.parse(n.body);if(typeof r=="object"&&r!==null&&!Array.isArray(r))t=r;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(r,o){const a=Object.assign({},r);for(const l in o)if(Object.prototype.hasOwnProperty.call(o,l)){const c=o[l],d=a[l];c&&typeof c=="object"&&!Array.isArray(c)&&d&&typeof d=="object"&&!Array.isArray(d)?a[l]=i(d,c):(d&&c&&typeof d!=typeof c&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${l}". Original type: ${typeof d}, New type: ${typeof c}. Overwriting.`),a[l]=c)}return a}const s=i(t,e);n.body=JSON.stringify(s)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const oz="mcp_used/unknown";let az=!1;function lA(n){for(const e of n)if(lz(e)||typeof e=="object"&&"inputSchema"in e)return!0;return az}function cA(n){var e;const t=(e=n[pp])!==null&&e!==void 0?e:"";n[pp]=(t+` ${oz}`).trimStart()}function lz(n){return n!==null&&typeof n=="object"&&n instanceof Pg}function cz(n,e=100){return vo(this,arguments,function*(){let i,s=0;for(;s<e;){const r=yield Ge(n.listTools({cursor:i}));for(const o of r.tools)yield yield Ge(o),s++;if(!r.nextCursor)break;i=r.nextCursor}})}class Pg{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new Pg(e,t)}async initialize(){var e,t,i,s;if(this.mcpTools.length>0)return;const r={},o=[];for(const d of this.mcpClients)try{for(var a=!0,l=(t=void 0,gl(cz(d))),c;c=await l.next(),e=c.done,!e;a=!0){s=c.value,a=!1;const f=s;o.push(f);const m=f.name;if(r[m])throw new Error(`Duplicate function name ${m} found in MCP tools. Please ensure function names are unique.`);r[m]=d}}catch(f){t={error:f}}finally{try{!a&&!e&&(i=l.return)&&await i.call(l)}finally{if(t)throw t.error}}this.mcpTools=o,this.functionNameToMcpClient=r}async tool(){return await this.initialize(),BL(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const s=this.functionNameToMcpClient[i.name];let r;this.config.timeout&&(r={timeout:this.config.timeout});const o=await s.callTool({name:i.name,arguments:i.args},void 0,r);t.push({functionResponse:{name:i.name,response:o.isError?{error:o}:o}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function uz(n,e,t){const i=new NL;let s;t.data instanceof Blob?s=JSON.parse(await t.data.text()):s=JSON.parse(t.data);const r=GV(s);Object.assign(i,r),e(i)}class dz{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i}async connect(e){var t,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const s=this.apiClient.getWebsocketBaseUrl(),r=this.apiClient.getApiVersion(),o=pz(this.apiClient.getDefaultHeaders()),a=this.apiClient.getApiKey(),l=`${s}/ws/google.ai.generativelanguage.${r}.GenerativeService.BidiGenerateMusic?key=${a}`;let c=()=>{};const d=new Promise(S=>{c=S}),f=e.callbacks,m=function(){c({})},y=this.apiClient,v={onopen:m,onmessage:S=>{uz(y,f.onmessage,S)},onerror:(t=f?.onerror)!==null&&t!==void 0?t:function(S){},onclose:(i=f?.onclose)!==null&&i!==void 0?i:function(S){}},w=this.webSocketFactory.create(l,fz(o),v);w.connect(),await d;const T=Me(this.apiClient,e.model),x=tA({model:T}),P=dp({setup:x});return w.send(JSON.stringify(P)),new hz(w,this.apiClient)}}class hz{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=z9(e),i=nA(t);this.conn.send(JSON.stringify({clientContent:i}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=q9(e),i=dp(t);this.conn.send(JSON.stringify(i))}sendPlaybackControl(e){const t=dp({playbackControl:e});this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(oo.PLAY)}pause(){this.sendPlaybackControl(oo.PAUSE)}stop(){this.sendPlaybackControl(oo.STOP)}resetContext(){this.sendPlaybackControl(oo.RESET_CONTEXT)}close(){this.conn.close()}}function fz(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function pz(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const mz="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function gz(n,e,t){const i=new kL;let s;t.data instanceof Blob?s=await t.data.text():t.data instanceof ArrayBuffer?s=new TextDecoder().decode(t.data):s=t.data;const r=JSON.parse(s);if(n.isVertexAI()){const o=sO(r);Object.assign(i,o)}else{const o=LV(r);Object.assign(i,o)}e(i)}class yz{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i,this.music=new dz(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,i,s,r,o,a;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const l=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion();let d;const f=this.apiClient.getHeaders();e.config&&e.config.tools&&lA(e.config.tools)&&cA(f);const m=bz(f);if(this.apiClient.isVertexAI())d=`${l}/ws/google.cloud.aiplatform.${c}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(m);else{const E=this.apiClient.getApiKey();let D="BidiGenerateContent",k="key";E?.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),c!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),D="BidiGenerateContentConstrained",k="access_token"),d=`${l}/ws/google.ai.generativelanguage.${c}.GenerativeService.${D}?${k}=${E}`}let y=()=>{};const v=new Promise(E=>{y=E}),w=e.callbacks,T=function(){var E;(E=w?.onopen)===null||E===void 0||E.call(w),y({})},x=this.apiClient,P={onopen:T,onmessage:E=>{gz(x,w.onmessage,E)},onerror:(t=w?.onerror)!==null&&t!==void 0?t:function(E){},onclose:(i=w?.onclose)!==null&&i!==void 0?i:function(E){}},S=this.webSocketFactory.create(d,wz(m),P);S.connect(),await v;let L=Me(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&L.startsWith("publishers/")){const E=this.apiClient.getProject(),D=this.apiClient.getLocation();L=`projects/${E}/locations/${D}/`+L}let F={};this.apiClient.isVertexAI()&&((s=e.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Zu.AUDIO]}:e.config.responseModalities=[Zu.AUDIO]),!((r=e.config)===null||r===void 0)&&r.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const U=(a=(o=e.config)===null||o===void 0?void 0:o.tools)!==null&&a!==void 0?a:[],C=[];for(const E of U)if(this.isCallableTool(E)){const D=E;C.push(await D.tool())}else C.push(E);C.length>0&&(e.config.tools=C);const A={model:L,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?F=gV(this.apiClient,A):F=V9(this.apiClient,A),delete F.config,S.send(JSON.stringify(F)),new _z(S,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const vz={turnComplete:!0};class _z{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let i=[];try{i=Dn(t.turns),e.isVertexAI()?i=i.map(s=>da(s)):i=i.map(s=>eh(s))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:i,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let i=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?i=t.functionResponses:i=[t.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const r of i){if(typeof r!="object"||r===null||!("name"in r)||!("response"in r))throw new Error(`Could not parse function response, type '${typeof r}'.`);if(!e.isVertexAI()&&!("id"in r))throw new Error(mz)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},vz),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:_V(e)}:t={realtimeInput:B9(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function wz(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function bz(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const q1=10;function H1(n){var e,t,i;if(!((e=n?.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let s=!1;for(const o of(t=n?.tools)!==null&&t!==void 0?t:[])if(_o(o)){s=!0;break}if(!s)return!0;const r=(i=n?.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return r&&(r<0||!Number.isInteger(r))||r==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",r),!0):!1}function _o(n){return"callTool"in n&&typeof n.callTool=="function"}function Tz(n){var e,t,i;return(i=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(s=>_o(s)))!==null&&i!==void 0?i:!1}function xz(n){var e,t,i;return(i=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(s=>!_o(s)))!==null&&i!==void 0?i:!1}function G1(n){var e;return!(!((e=n?.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ez extends Lr{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var i,s,r,o,a;const l=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!Tz(t)||H1(t.config))return await this.generateContentInternal(l);if(xz(t))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let c,d;const f=Dn(l.contents),m=(r=(s=(i=l.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&r!==void 0?r:q1;let y=0;for(;y<m&&(c=await this.generateContentInternal(l),!(!c.functionCalls||c.functionCalls.length===0));){const v=c.candidates[0].content,w=[];for(const T of(a=(o=t.config)===null||o===void 0?void 0:o.tools)!==null&&a!==void 0?a:[])if(_o(T)){const P=await T.callTool(c.functionCalls);w.push(...P)}y++,d={role:"user",parts:w},l.contents=Dn(l.contents),l.contents.push(v),l.contents.push(d),G1(l.config)&&(f.push(v),f.push(d))}return G1(l.config)&&(c.automaticFunctionCallingHistory=f),c},this.generateContentStream=async t=>{if(this.maybeMoveToResponseJsonSchem(t),H1(t.config)){const i=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(i)}else return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(i=>{var s;let r;const o=[];if(i?.generatedImages)for(const l of i.generatedImages)l&&l?.safetyAttributes&&((s=l?.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?r=l?.safetyAttributes:o.push(l);let a;return r?a={generatedImages:o,positivePromptSafetyAttributes:r,sdkHttpResponse:i.sdkHttpResponse}:a={generatedImages:o,sdkHttpResponse:i.sdkHttpResponse},a}),this.list=async t=>{var i;const o={config:Object.assign(Object.assign({},{queryBase:!0}),t?.config)};if(this.apiClient.isVertexAI()&&!o.config.queryBase){if(!((i=o.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");o.config.filter="labels.tune-type:*"}return new yc(Er.PAGED_ITEM_MODELS,a=>this.listInternal(a),await this.listInternal(o),o)},this.editImage=async t=>{const i={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(i.referenceImages=t.referenceImages.map(s=>s.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async t=>{let i={numberOfImages:1,mode:"upscale"};t.config&&(i=Object.assign(Object.assign({},i),t.config));const s={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:i};return await this.upscaleImageInternal(s)},this.generateVideos=async t=>await this.generateVideosInternal(t)}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,i,s;const r=(t=e.config)===null||t===void 0?void 0:t.tools;if(!r)return e;const o=await Promise.all(r.map(async l=>_o(l)?await l.tool():l)),a={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:o})};if(a.config.tools=o,e.config&&e.config.tools&&lA(e.config.tools)){const l=(s=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&s!==void 0?s:{};let c=Object.assign({},l);Object.keys(c).length===0&&(c=this.apiClient.getDefaultHeaders()),cA(c),a.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:c})}return a}async initAfcToolsMap(e){var t,i,s;const r=new Map;for(const o of(i=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&i!==void 0?i:[])if(_o(o)){const a=o,l=await a.tool();for(const c of(s=l.functionDeclarations)!==null&&s!==void 0?s:[]){if(!c.name)throw new Error("Function declaration name is required.");if(r.has(c.name))throw new Error(`Duplicate tool declaration name: ${c.name}`);r.set(c.name,a)}}return r}async processAfcStream(e){var t,i,s;const r=(s=(i=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&s!==void 0?s:q1;let o=!1,a=0;const l=await this.initAfcToolsMap(e);return(function(c,d,f){var m,y;return vo(this,arguments,function*(){for(var v,w,T,x;a<r;){o&&(a++,o=!1);const F=yield Ge(c.processParamsMaybeAddMcpUsage(f)),U=yield Ge(c.generateContentStreamInternal(F)),C=[],A=[];try{for(var P=!0,S=(w=void 0,gl(U)),L;L=yield Ge(S.next()),v=L.done,!v;P=!0){x=L.value,P=!1;const E=x;if(yield yield Ge(E),E.candidates&&(!((m=E.candidates[0])===null||m===void 0)&&m.content)){A.push(E.candidates[0].content);for(const D of(y=E.candidates[0].content.parts)!==null&&y!==void 0?y:[])if(a<r&&D.functionCall){if(!D.functionCall.name)throw new Error("Function call name was not returned by the model.");if(d.has(D.functionCall.name)){const k=yield Ge(d.get(D.functionCall.name).callTool([D.functionCall]));C.push(...k)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${d.keys()}, mising tool: ${D.functionCall.name}`)}}}}catch(E){w={error:E}}finally{try{!P&&!v&&(T=S.return)&&(yield Ge(T.call(S)))}finally{if(w)throw w.error}}if(C.length>0){o=!0;const E=new Ua;E.candidates=[{content:{role:"user",parts:C}}],yield yield Ge(E);const D=[];D.push(...A),D.push({role:"user",parts:C});const k=Dn(f.contents).concat(D);f.contents=k}else break}})})(this,l,e)}async generateContentInternal(e){var t,i,s,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=V1(this.apiClient,e);return a=ie("{model}:generateContent",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const f=U1(d),m=new Ua;return Object.assign(m,f),m})}else{const c=F1(this.apiClient,e);return a=ie("{model}:generateContent",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const f=O1(d),m=new Ua;return Object.assign(m,f),m})}}async generateContentStreamInternal(e){var t,i,s,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=V1(this.apiClient,e);return a=ie("{model}:streamGenerateContent?alt=sse",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),o.then(function(f){return vo(this,arguments,function*(){var m,y,v,w;try{for(var T=!0,x=gl(f),P;P=yield Ge(x.next()),m=P.done,!m;T=!0){w=P.value,T=!1;const S=w,L=U1(yield Ge(S.json()));L.sdkHttpResponse={headers:S.headers};const F=new Ua;Object.assign(F,L),yield yield Ge(F)}}catch(S){y={error:S}}finally{try{!T&&!m&&(v=x.return)&&(yield Ge(v.call(x)))}finally{if(y)throw y.error}}})})}else{const c=F1(this.apiClient,e);return a=ie("{model}:streamGenerateContent?alt=sse",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),o.then(function(f){return vo(this,arguments,function*(){var m,y,v,w;try{for(var T=!0,x=gl(f),P;P=yield Ge(x.next()),m=P.done,!m;T=!0){w=P.value,T=!1;const S=w,L=O1(yield Ge(S.json()));L.sdkHttpResponse={headers:S.headers};const F=new Ua;Object.assign(F,L),yield yield Ge(F)}}catch(S){y={error:S}}finally{try{!T&&!m&&(v=x.return)&&(yield Ge(v.call(x)))}finally{if(y)throw y.error}}})})}}async embedContent(e){var t,i,s,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=vU(this.apiClient,e);return a=ie("{model}:predict",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const f=NB(d),m=new p1;return Object.assign(m,f),m})}else{const c=RO(this.apiClient,e);return a=ie("{model}:batchEmbedContents",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const f=lB(d),m=new p1;return Object.assign(m,f),m})}}async generateImagesInternal(e){var t,i,s,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=wU(this.apiClient,e);return a=ie("{model}:predict",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const f=MB(d),m=new m1;return Object.assign(m,f),m})}else{const c=NO(this.apiClient,e);return a=ie("{model}:predict",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const f=dB(d),m=new m1;return Object.assign(m,f),m})}}async editImageInternal(e){var t,i;let s,r="",o={};if(this.apiClient.isVertexAI()){const a=CU(this.apiClient,e);return r=ie("{model}:predict",a._url),o=a._query,delete a.config,delete a._url,delete a._query,s=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(c=>{const d=c;return d.sdkHttpResponse={headers:l.headers},d})),s.then(l=>{const c=DB(l),d=new xL;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,i;let s,r="",o={};if(this.apiClient.isVertexAI()){const a=PU(this.apiClient,e);return r=ie("{model}:predict",a._url),o=a._query,delete a.config,delete a._url,delete a._query,s=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(c=>{const d=c;return d.sdkHttpResponse={headers:l.headers},d})),s.then(l=>{const c=LB(l),d=new EL;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,i;let s,r="",o={};if(this.apiClient.isVertexAI()){const a=MU(this.apiClient,e);return r=ie("{model}:predict",a._url),o=a._query,delete a.config,delete a._url,delete a._query,s=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),s.then(l=>{const c=FB(l),d=new AL;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,i;let s,r="",o={};if(this.apiClient.isVertexAI()){const a=VU(this.apiClient,e);return r=ie("{model}:predict",a._url),o=a._query,delete a.config,delete a._url,delete a._query,s=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),s.then(l=>{const c=UB(l),d=new IL;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,i,s,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=OU(this.apiClient,e);return a=ie("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>fp(d))}else{const c=MO(this.apiClient,e);return a=ie("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>hp(d))}}async listInternal(e){var t,i,s,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=BU(this.apiClient,e);return a=ie("{models_url}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const f=HB(d),m=new g1;return Object.assign(m,f),m})}else{const c=LO(this.apiClient,e);return a=ie("{models_url}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const f=fB(d),m=new g1;return Object.assign(m,f),m})}}async update(e){var t,i,s,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=qU(this.apiClient,e);return a=ie("{model}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>fp(d))}else{const c=VO(this.apiClient,e);return a=ie("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>hp(d))}}async delete(e){var t,i,s,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=HU(this.apiClient,e);return a=ie("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(()=>{const d=GB(),f=new y1;return Object.assign(f,d),f})}else{const c=OO(this.apiClient,e);return a=ie("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(()=>{const d=pB(),f=new y1;return Object.assign(f,d),f})}}async countTokens(e){var t,i,s,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=$U(this.apiClient,e);return a=ie("{model}:countTokens",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const f=$B(d),m=new v1;return Object.assign(m,f),m})}else{const c=BO(this.apiClient,e);return a=ie("{model}:countTokens",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const f=mB(d),m=new v1;return Object.assign(m,f),m})}}async computeTokens(e){var t,i;let s,r="",o={};if(this.apiClient.isVertexAI()){const a=jU(this.apiClient,e);return r=ie("{model}:computeTokens",a._url),o=a._query,delete a.config,delete a._url,delete a._query,s=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(c=>{const d=c;return d.sdkHttpResponse={headers:l.headers},d})),s.then(l=>{const c=jB(l),d=new CL;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,i,s,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=JU(this.apiClient,e);return a=ie("{model}:predictLongRunning",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o.then(d=>{const f=JB(d),m=new ed;return Object.assign(m,f),m})}else{const c=HO(this.apiClient,e);return a=ie("{model}:predictLongRunning",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o.then(d=>{const f=_B(d),m=new ed;return Object.assign(m,f),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Az(n){const e={},t=u(n,["operationName"]);t!=null&&h(e,["_url","operationName"],t);const i=u(n,["config"]);return i!=null&&h(e,["config"],i),e}function Iz(n){const e={},t=u(n,["operationName"]);t!=null&&h(e,["_url","operationName"],t);const i=u(n,["config"]);return i!=null&&h(e,["config"],i),e}function Cz(n){const e={},t=u(n,["operationName"]);t!=null&&h(e,["operationName"],t);const i=u(n,["resourceName"]);i!=null&&h(e,["_url","resourceName"],i);const s=u(n,["config"]);return s!=null&&h(e,["config"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Sz extends Lr{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=t.name.split("/operations/")[0];let r;i&&"httpOptions"in i&&(r=i.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:s,config:{httpOptions:r}});return t._fromAPIResponse({apiResponse:o,isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:s,isVertexAI:!1})}}async get(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=t.name.split("/operations/")[0];let r;i&&"httpOptions"in i&&(r=i.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:s,config:{httpOptions:r}});return t._fromAPIResponse({apiResponse:o,isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:s,isVertexAI:!1})}}async getVideosOperationInternal(e){var t,i,s,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=Iz(e);return a=ie("{operationName}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),o}else{const c=Az(e);return a=ie("{operationName}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),o}}async fetchPredictVideosOperationInternal(e){var t,i;let s,r="",o={};if(this.apiClient.isVertexAI()){const a=Cz(e);return r=ie("{resourceName}:fetchPredictOperation",a._url),o=a._query,delete a.config,delete a._url,delete a._query,s=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),s}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Pz(n){const e={},t=u(n,["voiceName"]);return t!=null&&h(e,["voiceName"],t),e}function uA(n){const e={},t=u(n,["prebuiltVoiceConfig"]);return t!=null&&h(e,["prebuiltVoiceConfig"],Pz(t)),e}function Rz(n){const e={},t=u(n,["speaker"]);t!=null&&h(e,["speaker"],t);const i=u(n,["voiceConfig"]);return i!=null&&h(e,["voiceConfig"],uA(i)),e}function kz(n){const e={},t=u(n,["speakerVoiceConfigs"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>Rz(s))),h(e,["speakerVoiceConfigs"],i)}return e}function Nz(n){const e={},t=u(n,["voiceConfig"]);t!=null&&h(e,["voiceConfig"],uA(t));const i=u(n,["multiSpeakerVoiceConfig"]);i!=null&&h(e,["multiSpeakerVoiceConfig"],kz(i));const s=u(n,["languageCode"]);return s!=null&&h(e,["languageCode"],s),e}function Mz(n){const e={},t=u(n,["fps"]);t!=null&&h(e,["fps"],t);const i=u(n,["endOffset"]);i!=null&&h(e,["endOffset"],i);const s=u(n,["startOffset"]);return s!=null&&h(e,["startOffset"],s),e}function Dz(n){const e={};if(u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=u(n,["data"]);t!=null&&h(e,["data"],t);const i=u(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function Lz(n){const e={};if(u(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=u(n,["fileUri"]);t!=null&&h(e,["fileUri"],t);const i=u(n,["mimeType"]);return i!=null&&h(e,["mimeType"],i),e}function Fz(n){const e={},t=u(n,["videoMetadata"]);t!=null&&h(e,["videoMetadata"],Mz(t));const i=u(n,["thought"]);i!=null&&h(e,["thought"],i);const s=u(n,["inlineData"]);s!=null&&h(e,["inlineData"],Dz(s));const r=u(n,["fileData"]);r!=null&&h(e,["fileData"],Lz(r));const o=u(n,["thoughtSignature"]);o!=null&&h(e,["thoughtSignature"],o);const a=u(n,["codeExecutionResult"]);a!=null&&h(e,["codeExecutionResult"],a);const l=u(n,["executableCode"]);l!=null&&h(e,["executableCode"],l);const c=u(n,["functionCall"]);c!=null&&h(e,["functionCall"],c);const d=u(n,["functionResponse"]);d!=null&&h(e,["functionResponse"],d);const f=u(n,["text"]);return f!=null&&h(e,["text"],f),e}function Vz(n){const e={},t=u(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>Fz(r))),h(e,["parts"],s)}const i=u(n,["role"]);return i!=null&&h(e,["role"],i),e}function Oz(n){const e={},t=u(n,["behavior"]);t!=null&&h(e,["behavior"],t);const i=u(n,["description"]);i!=null&&h(e,["description"],i);const s=u(n,["name"]);s!=null&&h(e,["name"],s);const r=u(n,["parameters"]);r!=null&&h(e,["parameters"],r);const o=u(n,["parametersJsonSchema"]);o!=null&&h(e,["parametersJsonSchema"],o);const a=u(n,["response"]);a!=null&&h(e,["response"],a);const l=u(n,["responseJsonSchema"]);return l!=null&&h(e,["responseJsonSchema"],l),e}function Uz(n){const e={},t=u(n,["startTime"]);t!=null&&h(e,["startTime"],t);const i=u(n,["endTime"]);return i!=null&&h(e,["endTime"],i),e}function Bz(n){const e={},t=u(n,["timeRangeFilter"]);if(t!=null&&h(e,["timeRangeFilter"],Uz(t)),u(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function zz(n){const e={},t=u(n,["mode"]);t!=null&&h(e,["mode"],t);const i=u(n,["dynamicThreshold"]);return i!=null&&h(e,["dynamicThreshold"],i),e}function qz(n){const e={},t=u(n,["dynamicRetrievalConfig"]);return t!=null&&h(e,["dynamicRetrievalConfig"],zz(t)),e}function Hz(){return{}}function Gz(n){const e={},t=u(n,["environment"]);return t!=null&&h(e,["environment"],t),e}function $z(n){const e={},t=u(n,["functionDeclarations"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>Oz(c))),h(e,["functionDeclarations"],l)}if(u(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=u(n,["googleSearch"]);i!=null&&h(e,["googleSearch"],Bz(i));const s=u(n,["googleSearchRetrieval"]);if(s!=null&&h(e,["googleSearchRetrieval"],qz(s)),u(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(u(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");u(n,["urlContext"])!=null&&h(e,["urlContext"],Hz());const o=u(n,["computerUse"]);o!=null&&h(e,["computerUse"],Gz(o));const a=u(n,["codeExecution"]);return a!=null&&h(e,["codeExecution"],a),e}function jz(n){const e={},t=u(n,["handle"]);if(t!=null&&h(e,["handle"],t),u(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function $1(){return{}}function Wz(n){const e={},t=u(n,["disabled"]);t!=null&&h(e,["disabled"],t);const i=u(n,["startOfSpeechSensitivity"]);i!=null&&h(e,["startOfSpeechSensitivity"],i);const s=u(n,["endOfSpeechSensitivity"]);s!=null&&h(e,["endOfSpeechSensitivity"],s);const r=u(n,["prefixPaddingMs"]);r!=null&&h(e,["prefixPaddingMs"],r);const o=u(n,["silenceDurationMs"]);return o!=null&&h(e,["silenceDurationMs"],o),e}function Kz(n){const e={},t=u(n,["automaticActivityDetection"]);t!=null&&h(e,["automaticActivityDetection"],Wz(t));const i=u(n,["activityHandling"]);i!=null&&h(e,["activityHandling"],i);const s=u(n,["turnCoverage"]);return s!=null&&h(e,["turnCoverage"],s),e}function Yz(n){const e={},t=u(n,["targetTokens"]);return t!=null&&h(e,["targetTokens"],t),e}function Jz(n){const e={},t=u(n,["triggerTokens"]);t!=null&&h(e,["triggerTokens"],t);const i=u(n,["slidingWindow"]);return i!=null&&h(e,["slidingWindow"],Yz(i)),e}function Xz(n){const e={},t=u(n,["proactiveAudio"]);return t!=null&&h(e,["proactiveAudio"],t),e}function Qz(n,e){const t={},i=u(n,["generationConfig"]);e!==void 0&&i!=null&&h(e,["setup","generationConfig"],i);const s=u(n,["responseModalities"]);e!==void 0&&s!=null&&h(e,["setup","generationConfig","responseModalities"],s);const r=u(n,["temperature"]);e!==void 0&&r!=null&&h(e,["setup","generationConfig","temperature"],r);const o=u(n,["topP"]);e!==void 0&&o!=null&&h(e,["setup","generationConfig","topP"],o);const a=u(n,["topK"]);e!==void 0&&a!=null&&h(e,["setup","generationConfig","topK"],a);const l=u(n,["maxOutputTokens"]);e!==void 0&&l!=null&&h(e,["setup","generationConfig","maxOutputTokens"],l);const c=u(n,["mediaResolution"]);e!==void 0&&c!=null&&h(e,["setup","generationConfig","mediaResolution"],c);const d=u(n,["seed"]);e!==void 0&&d!=null&&h(e,["setup","generationConfig","seed"],d);const f=u(n,["speechConfig"]);e!==void 0&&f!=null&&h(e,["setup","generationConfig","speechConfig"],Nz(Sg(f)));const m=u(n,["enableAffectiveDialog"]);e!==void 0&&m!=null&&h(e,["setup","generationConfig","enableAffectiveDialog"],m);const y=u(n,["systemInstruction"]);e!==void 0&&y!=null&&h(e,["setup","systemInstruction"],Vz(Kt(y)));const v=u(n,["tools"]);if(e!==void 0&&v!=null){let F=ca(v);Array.isArray(F)&&(F=F.map(U=>$z(la(U)))),h(e,["setup","tools"],F)}const w=u(n,["sessionResumption"]);e!==void 0&&w!=null&&h(e,["setup","sessionResumption"],jz(w));const T=u(n,["inputAudioTranscription"]);e!==void 0&&T!=null&&h(e,["setup","inputAudioTranscription"],$1());const x=u(n,["outputAudioTranscription"]);e!==void 0&&x!=null&&h(e,["setup","outputAudioTranscription"],$1());const P=u(n,["realtimeInputConfig"]);e!==void 0&&P!=null&&h(e,["setup","realtimeInputConfig"],Kz(P));const S=u(n,["contextWindowCompression"]);e!==void 0&&S!=null&&h(e,["setup","contextWindowCompression"],Jz(S));const L=u(n,["proactivity"]);return e!==void 0&&L!=null&&h(e,["setup","proactivity"],Xz(L)),t}function Zz(n,e){const t={},i=u(e,["model"]);i!=null&&h(t,["setup","model"],Me(n,i));const s=u(e,["config"]);return s!=null&&h(t,["config"],Qz(s,t)),t}function eq(n,e,t){const i={},s=u(e,["expireTime"]);t!==void 0&&s!=null&&h(t,["expireTime"],s);const r=u(e,["newSessionExpireTime"]);t!==void 0&&r!=null&&h(t,["newSessionExpireTime"],r);const o=u(e,["uses"]);t!==void 0&&o!=null&&h(t,["uses"],o);const a=u(e,["liveConnectConstraints"]);t!==void 0&&a!=null&&h(t,["bidiGenerateContentSetup"],Zz(n,a));const l=u(e,["lockAdditionalFields"]);return t!==void 0&&l!=null&&h(t,["fieldMask"],l),i}function tq(n,e){const t={},i=u(e,["config"]);return i!=null&&h(t,["config"],eq(n,i,t)),t}function nq(n){const e={},t=u(n,["name"]);return t!=null&&h(e,["name"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function iq(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const i=n[t];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const s=Object.keys(i).map(r=>`${t}.${r}`);e.push(...s)}else e.push(t)}return e.join(",")}function sq(n,e){let t=null;const i=n.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const r=i.setup;typeof r=="object"&&r!==null?(n.bidiGenerateContentSetup=r,t=r):delete n.bidiGenerateContentSetup}else i!==void 0&&delete n.bidiGenerateContentSetup;const s=n.fieldMask;if(t){const r=iq(t);if(Array.isArray(e?.lockAdditionalFields)&&e?.lockAdditionalFields.length===0)r?n.fieldMask=r:delete n.fieldMask;else if(e?.lockAdditionalFields&&e.lockAdditionalFields.length>0&&s!==null&&Array.isArray(s)&&s.length>0){const o=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let a=[];s.length>0&&(a=s.map(c=>o.includes(c)?`generationConfig.${c}`:c));const l=[];r&&l.push(r),a.length>0&&l.push(...a),l.length>0?n.fieldMask=l.join(","):delete n.fieldMask}else delete n.fieldMask}else s!==null&&Array.isArray(s)&&s.length>0?n.fieldMask=s.join(","):delete n.fieldMask;return n}class rq extends Lr{constructor(e){super(),this.apiClient=e}async create(e){var t,i;let s,r="",o={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const a=tq(this.apiClient,e);r=ie("auth_tokens",a._url),o=a._query,delete a.config,delete a._url,delete a._query;const l=sq(a,e.config);return s=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),s.then(c=>nq(c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function oq(n){const e={},t=u(n,["name"]);t!=null&&h(e,["_url","name"],t);const i=u(n,["config"]);return i!=null&&h(e,["config"],i),e}function aq(n,e){const t={},i=u(n,["pageSize"]);e!==void 0&&i!=null&&h(e,["_query","pageSize"],i);const s=u(n,["pageToken"]);e!==void 0&&s!=null&&h(e,["_query","pageToken"],s);const r=u(n,["filter"]);return e!==void 0&&r!=null&&h(e,["_query","filter"],r),t}function lq(n){const e={},t=u(n,["config"]);return t!=null&&h(e,["config"],aq(t,e)),e}function cq(n){const e={},t=u(n,["textInput"]);t!=null&&h(e,["textInput"],t);const i=u(n,["output"]);return i!=null&&h(e,["output"],i),e}function uq(n){const e={};if(u(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(u(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const t=u(n,["examples"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>cq(s))),h(e,["examples","examples"],i)}return e}function dq(n,e){const t={};if(u(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=u(n,["tunedModelDisplayName"]);if(e!==void 0&&i!=null&&h(e,["displayName"],i),u(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const s=u(n,["epochCount"]);e!==void 0&&s!=null&&h(e,["tuningTask","hyperparameters","epochCount"],s);const r=u(n,["learningRateMultiplier"]);if(r!=null&&h(t,["tuningTask","hyperparameters","learningRateMultiplier"],r),u(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(u(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(u(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const o=u(n,["batchSize"]);e!==void 0&&o!=null&&h(e,["tuningTask","hyperparameters","batchSize"],o);const a=u(n,["learningRate"]);return e!==void 0&&a!=null&&h(e,["tuningTask","hyperparameters","learningRate"],a),t}function hq(n){const e={},t=u(n,["baseModel"]);t!=null&&h(e,["baseModel"],t);const i=u(n,["preTunedModel"]);i!=null&&h(e,["preTunedModel"],i);const s=u(n,["trainingDataset"]);s!=null&&h(e,["tuningTask","trainingData"],uq(s));const r=u(n,["config"]);return r!=null&&h(e,["config"],dq(r,e)),e}function fq(n){const e={},t=u(n,["name"]);t!=null&&h(e,["_url","name"],t);const i=u(n,["config"]);return i!=null&&h(e,["config"],i),e}function pq(n,e){const t={},i=u(n,["pageSize"]);e!==void 0&&i!=null&&h(e,["_query","pageSize"],i);const s=u(n,["pageToken"]);e!==void 0&&s!=null&&h(e,["_query","pageToken"],s);const r=u(n,["filter"]);return e!==void 0&&r!=null&&h(e,["_query","filter"],r),t}function mq(n){const e={},t=u(n,["config"]);return t!=null&&h(e,["config"],pq(t,e)),e}function gq(n,e){const t={},i=u(n,["gcsUri"]);e!==void 0&&i!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],i);const s=u(n,["vertexDatasetResource"]);if(e!==void 0&&s!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],s),u(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return t}function yq(n,e){const t={},i=u(n,["gcsUri"]);i!=null&&h(t,["validationDatasetUri"],i);const s=u(n,["vertexDatasetResource"]);return e!==void 0&&s!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],s),t}function vq(n,e){const t={},i=u(n,["validationDataset"]);e!==void 0&&i!=null&&h(e,["supervisedTuningSpec"],yq(i,t));const s=u(n,["tunedModelDisplayName"]);e!==void 0&&s!=null&&h(e,["tunedModelDisplayName"],s);const r=u(n,["description"]);e!==void 0&&r!=null&&h(e,["description"],r);const o=u(n,["epochCount"]);e!==void 0&&o!=null&&h(e,["supervisedTuningSpec","hyperParameters","epochCount"],o);const a=u(n,["learningRateMultiplier"]);e!==void 0&&a!=null&&h(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],a);const l=u(n,["exportLastCheckpointOnly"]);e!==void 0&&l!=null&&h(e,["supervisedTuningSpec","exportLastCheckpointOnly"],l);const c=u(n,["preTunedModelCheckpointId"]);c!=null&&h(t,["preTunedModel","checkpointId"],c);const d=u(n,["adapterSize"]);if(e!==void 0&&d!=null&&h(e,["supervisedTuningSpec","hyperParameters","adapterSize"],d),u(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(u(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return t}function _q(n){const e={},t=u(n,["baseModel"]);t!=null&&h(e,["baseModel"],t);const i=u(n,["preTunedModel"]);i!=null&&h(e,["preTunedModel"],i);const s=u(n,["trainingDataset"]);s!=null&&h(e,["supervisedTuningSpec","trainingDatasetUri"],gq(s,e));const r=u(n,["config"]);return r!=null&&h(e,["config"],vq(r,e)),e}function wq(n){const e={},t=u(n,["name"]);t!=null&&h(e,["model"],t);const i=u(n,["name"]);return i!=null&&h(e,["endpoint"],i),e}function dA(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=u(n,["name"]);i!=null&&h(e,["name"],i);const s=u(n,["state"]);s!=null&&h(e,["state"],zE(s));const r=u(n,["createTime"]);r!=null&&h(e,["createTime"],r);const o=u(n,["tuningTask","startTime"]);o!=null&&h(e,["startTime"],o);const a=u(n,["tuningTask","completeTime"]);a!=null&&h(e,["endTime"],a);const l=u(n,["updateTime"]);l!=null&&h(e,["updateTime"],l);const c=u(n,["description"]);c!=null&&h(e,["description"],c);const d=u(n,["baseModel"]);d!=null&&h(e,["baseModel"],d);const f=u(n,["_self"]);f!=null&&h(e,["tunedModel"],wq(f));const m=u(n,["customBaseModel"]);m!=null&&h(e,["customBaseModel"],m);const y=u(n,["experiment"]);y!=null&&h(e,["experiment"],y);const v=u(n,["labels"]);v!=null&&h(e,["labels"],v);const w=u(n,["outputUri"]);w!=null&&h(e,["outputUri"],w);const T=u(n,["pipelineJob"]);T!=null&&h(e,["pipelineJob"],T);const x=u(n,["serviceAccount"]);x!=null&&h(e,["serviceAccount"],x);const P=u(n,["tunedModelDisplayName"]);return P!=null&&h(e,["tunedModelDisplayName"],P),e}function bq(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=u(n,["nextPageToken"]);i!=null&&h(e,["nextPageToken"],i);const s=u(n,["tunedModels"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(o=>dA(o))),h(e,["tuningJobs"],r)}return e}function Tq(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=u(n,["name"]);i!=null&&h(e,["name"],i);const s=u(n,["metadata"]);s!=null&&h(e,["metadata"],s);const r=u(n,["done"]);r!=null&&h(e,["done"],r);const o=u(n,["error"]);return o!=null&&h(e,["error"],o),e}function xq(n){const e={},t=u(n,["checkpointId"]);t!=null&&h(e,["checkpointId"],t);const i=u(n,["epoch"]);i!=null&&h(e,["epoch"],i);const s=u(n,["step"]);s!=null&&h(e,["step"],s);const r=u(n,["endpoint"]);return r!=null&&h(e,["endpoint"],r),e}function Eq(n){const e={},t=u(n,["model"]);t!=null&&h(e,["model"],t);const i=u(n,["endpoint"]);i!=null&&h(e,["endpoint"],i);const s=u(n,["checkpoints"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(o=>xq(o))),h(e,["checkpoints"],r)}return e}function mp(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=u(n,["name"]);i!=null&&h(e,["name"],i);const s=u(n,["state"]);s!=null&&h(e,["state"],zE(s));const r=u(n,["createTime"]);r!=null&&h(e,["createTime"],r);const o=u(n,["startTime"]);o!=null&&h(e,["startTime"],o);const a=u(n,["endTime"]);a!=null&&h(e,["endTime"],a);const l=u(n,["updateTime"]);l!=null&&h(e,["updateTime"],l);const c=u(n,["error"]);c!=null&&h(e,["error"],c);const d=u(n,["description"]);d!=null&&h(e,["description"],d);const f=u(n,["baseModel"]);f!=null&&h(e,["baseModel"],f);const m=u(n,["tunedModel"]);m!=null&&h(e,["tunedModel"],Eq(m));const y=u(n,["preTunedModel"]);y!=null&&h(e,["preTunedModel"],y);const v=u(n,["supervisedTuningSpec"]);v!=null&&h(e,["supervisedTuningSpec"],v);const w=u(n,["tuningDataStats"]);w!=null&&h(e,["tuningDataStats"],w);const T=u(n,["encryptionSpec"]);T!=null&&h(e,["encryptionSpec"],T);const x=u(n,["partnerModelTuningSpec"]);x!=null&&h(e,["partnerModelTuningSpec"],x);const P=u(n,["customBaseModel"]);P!=null&&h(e,["customBaseModel"],P);const S=u(n,["experiment"]);S!=null&&h(e,["experiment"],S);const L=u(n,["labels"]);L!=null&&h(e,["labels"],L);const F=u(n,["outputUri"]);F!=null&&h(e,["outputUri"],F);const U=u(n,["pipelineJob"]);U!=null&&h(e,["pipelineJob"],U);const C=u(n,["serviceAccount"]);C!=null&&h(e,["serviceAccount"],C);const A=u(n,["tunedModelDisplayName"]);return A!=null&&h(e,["tunedModelDisplayName"],A),e}function Aq(n){const e={},t=u(n,["sdkHttpResponse"]);t!=null&&h(e,["sdkHttpResponse"],t);const i=u(n,["nextPageToken"]);i!=null&&h(e,["nextPageToken"],i);const s=u(n,["tuningJobs"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(o=>mp(o))),h(e,["tuningJobs"],r)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Iq extends Lr{constructor(e){super(),this.apiClient=e,this.get=async t=>await this.getInternal(t),this.list=async(t={})=>new yc(Er.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.tune=async t=>{if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const i={tunedModelName:t.baseModel},s=Object.assign(Object.assign({},t),{preTunedModel:i});return s.baseModel=void 0,await this.tuneInternal(s)}else{const i=Object.assign({},t);return await this.tuneInternal(i)}else{const i=Object.assign({},t),s=await this.tuneMldevInternal(i);let r="";return s.metadata!==void 0&&s.metadata.tunedModel!==void 0?r=s.metadata.tunedModel:s.name!==void 0&&s.name.includes("/operations/")&&(r=s.name.split("/operations/")[0]),{name:r,state:op.JOB_STATE_QUEUED}}}}async getInternal(e){var t,i,s,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=fq(e);return a=ie("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>mp(d))}else{const c=oq(e);return a=ie("{name}",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>dA(d))}}async listInternal(e){var t,i,s,r;let o,a="",l={};if(this.apiClient.isVertexAI()){const c=mq(e);return a=ie("tuningJobs",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const f=Aq(d),m=new w1;return Object.assign(m,f),m})}else{const c=lq(e);return a=ie("tunedModels",c._url),l=c._query,delete c.config,delete c._url,delete c._query,o=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json().then(f=>{const m=f;return m.sdkHttpResponse={headers:d.headers},m})),o.then(d=>{const f=bq(d),m=new w1;return Object.assign(m,f),m})}}async tuneInternal(e){var t,i;let s,r="",o={};if(this.apiClient.isVertexAI()){const a=_q(e);return r=ie("tuningJobs",a._url),o=a._query,delete a.config,delete a._url,delete a._query,s=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(c=>{const d=c;return d.sdkHttpResponse={headers:l.headers},d})),s.then(l=>mp(l))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,i;let s,r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=hq(e);return r=ie("tunedModels",a._url),o=a._query,delete a.config,delete a._url,delete a._query,s=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(c=>{const d=c;return d.sdkHttpResponse={headers:l.headers},d})),s.then(l=>Tq(l))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Cq{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const Sq=1024*1024*8,Pq=3,Rq=1e3,kq=2,Qh="x-goog-upload-status";async function Nq(n,e,t){var i,s,r;let o=0,a=0,l=new ap(new Response),c="upload";for(o=n.size;a<o;){const f=Math.min(Sq,o-a),m=n.slice(a,a+f);a+f>=o&&(c+=", finalize");let y=0,v=Rq;for(;y<Pq&&(l=await t.request({path:"",body:m,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":c,"X-Goog-Upload-Offset":String(a),"Content-Length":String(f)}}}),!(!((i=l?.headers)===null||i===void 0)&&i[Qh]));)y++,await Dq(v),v=v*kq;if(a+=f,((s=l?.headers)===null||s===void 0?void 0:s[Qh])!=="active")break;if(o<=a)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const d=await l?.json();if(((r=l?.headers)===null||r===void 0?void 0:r[Qh])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return d.file}async function Mq(n){return{size:n.size,type:n.type}}function Dq(n){return new Promise(e=>setTimeout(e,n))}class Lq{async upload(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Nq(e,t,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Mq(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Fq{create(e,t,i){return new Vq(e,t,i)}}class Vq{constructor(e,t,i){this.url=e,this.headers=t,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const j1="x-goog-api-key";class Oq{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(j1)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(j1,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Uq="gl-node/";class W1{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const i=TL(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion;const s=new Oq(this.apiKey);this.apiClient=new sz({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:Uq+"web",uploader:new Lq,downloader:new Cq}),this.models=new Ez(this.apiClient),this.live=new yz(this.apiClient,s,new Fq),this.batches=new W7(this.apiClient),this.chats=new ZF(this.models,this.apiClient),this.caches=new JF(this.apiClient),this.files=new h9(this.apiClient),this.operations=new Sz(this.apiClient),this.authTokens=new rq(this.apiClient),this.tunings=new Iq(this.apiClient)}}const hA=({className:n,variant:e})=>{const{theme:t}=Hw(),s=(e||t)==="dark"?"#FFFFFF":"#000000";return g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 300 74.999997",preserveAspectRatio:"xMidYMid meet",className:n,"aria-label":"I Love PDFLY Logo",children:g.jsxs("g",{children:[g.jsx("path",{style:{fill:"#A91212"},d:"M 75.253906 5.78125 C 71.476562 8.320312 66.628906 12.535156 64.957031 14.765625 C 64.480469 15.40625 63.945312 15.921875 63.757812 15.921875 C 63.574219 15.921875 62.828125 15.175781 62.128906 14.269531 C 59.363281 10.777344 55.792969 7.804688 52.882812 6.625 C 49.164062 5.117188 44.234375 5.140625 40.621094 6.710938 C 35.832031 8.753906 31.890625 13.546875 30.382812 19.101562 C 29.90625 20.898438 29.847656 21.457031 29.847656 24.90625 C 29.847656 28.394531 29.886719 28.890625 30.402344 30.710938 C 32.035156 36.65625 34.46875 39.816406 43.140625 47.234375 C 48.9375 52.210938 52.839844 55.886719 56.183594 59.523438 C 59.484375 63.136719 62.683594 66.855469 63.964844 68.589844 C 65.472656 70.613281 66.277344 71.378906 66.894531 71.378906 C 67.617188 71.378906 67.988281 71.027344 69.558594 68.917969 C 73.769531 63.300781 81.363281 55.183594 88.136719 49.070312 C 90.117188 47.292969 94.492188 43.433594 97.835938 40.519531 C 104.171875 35.003906 104.628906 34.488281 104.648438 32.960938 C 104.648438 31.640625 103.964844 30.667969 101.222656 28.003906 C 99.757812 26.578125 93.976562 20.917969 88.382812 15.40625 C 82.789062 9.890625 78 5.285156 77.753906 5.140625 C 77.03125 4.726562 76.679688 4.808594 75.253906 5.78125 Z M 89.394531 21.207031 C 98.621094 30.316406 100.890625 32.652344 100.707031 32.878906 C 100.355469 33.3125 77.917969 33.3125 77.484375 32.878906 C 77.238281 32.628906 77.195312 30.8125 77.195312 21.332031 C 77.195312 15.15625 77.257812 10.035156 77.339844 9.972656 C 77.402344 9.890625 77.546875 9.828125 77.648438 9.828125 C 77.753906 9.828125 83.035156 14.949219 89.394531 21.207031 Z M 89.394531 21.207031 "}),g.jsx("path",{style:{fill:s},d:"M 12.960938 9.558594 L 7.222656 9.621094 L 7.222656 58.59375 L 13.003906 58.550781 L 18.78125 58.53125 L 18.78125 33.972656 C 18.78125 20.464844 18.761719 9.433594 18.742188 9.457031 C 18.699219 9.496094 16.101562 9.539062 12.960938 9.558594 Z M 12.960938 9.558594 "}),g.jsx("path",{style:{fill:s},d:"M 114.347656 34.695312 L 114.347656 58.367188 L 125.496094 58.367188 L 125.496094 43.144531 L 128.757812 43.019531 C 134.121094 42.792969 137.15625 42.132812 140.253906 40.539062 C 144.875 38.144531 147.582031 33.0625 147.582031 26.785156 C 147.582031 19.554688 144.402344 14.886719 137.921875 12.511719 C 134.722656 11.355469 133.667969 11.253906 123.597656 11.128906 L 114.347656 11.027344 Z M 131.644531 21.289062 C 133.359375 21.703125 134.347656 22.21875 135.257812 23.234375 C 136.25 24.328125 136.578125 25.03125 136.828125 26.496094 C 137.28125 29.304688 135.960938 31.496094 133.195312 32.546875 C 132.203125 32.941406 131.417969 33.042969 128.632812 33.148438 L 125.269531 33.269531 L 125.328125 28.828125 C 125.351562 26.394531 125.414062 23.625 125.453125 22.675781 L 125.535156 20.980469 L 127.929688 20.980469 C 129.332031 20.980469 130.882812 21.125 131.644531 21.289062 Z M 131.644531 21.289062 "}),g.jsx("path",{style:{fill:s},d:"M 151.480469 27.117188 C 151.460938 35.957031 151.417969 46.59375 151.398438 50.765625 L 151.335938 58.367188 L 159.859375 58.367188 C 168.882812 58.367188 171.480469 58.179688 174.867188 57.332031 C 182.566406 55.351562 188.054688 49.648438 190.015625 41.53125 C 190.925781 37.710938 191.007812 32.402344 190.203125 28.539062 C 188.613281 20.898438 184.03125 15.382812 177.117188 12.800781 C 173.277344 11.355469 170.324219 11.066406 159.40625 11.066406 L 151.5 11.066406 Z M 170.59375 21.785156 C 173.09375 22.449219 174.332031 23.148438 175.980469 24.78125 C 178.726562 27.527344 179.945312 31 179.71875 35.542969 C 179.46875 40.828125 177.15625 44.796875 173.175781 46.757812 C 170.902344 47.894531 169.230469 48.222656 165.496094 48.367188 L 162.441406 48.472656 L 162.441406 34.945312 C 162.441406 22.242188 162.460938 21.414062 162.8125 21.3125 C 163 21.25 164.464844 21.25 166.054688 21.269531 C 168.179688 21.332031 169.375 21.457031 170.59375 21.785156 Z M 170.59375 21.785156 "}),g.jsx("path",{style:{fill:s},d:"M 195.878906 21.972656 C 195.878906 27.984375 195.816406 38.621094 195.734375 45.621094 L 195.609375 58.367188 L 206.964844 58.367188 L 206.859375 49.320312 L 206.757812 40.292969 L 214.230469 40.355469 L 221.679688 40.394531 L 221.679688 30.070312 L 206.796875 30.070312 L 206.820312 25.628906 L 206.839844 21.167969 L 214.992188 21.3125 L 223.125 21.457031 L 223.125 11.066406 L 195.878906 11.066406 Z M 195.878906 21.972656 "}),g.jsx("path",{style:{fill:s},d:"M 251.277344 11.933594 C 251.546875 12.429688 253.527344 15.984375 255.695312 19.84375 C 261.125 29.59375 265.789062 37.835938 266.492188 38.972656 L 267.089844 39.921875 L 267.089844 58.367188 L 277.820312 58.367188 L 277.820312 39.941406 L 282.136719 32.074219 C 289.875 17.882812 292.207031 13.667969 292.953125 12.410156 L 293.675781 11.171875 L 287.667969 11.109375 C 284.363281 11.085938 281.597656 11.128906 281.515625 11.210938 C 281.433594 11.316406 280.15625 13.875 278.6875 16.953125 C 277.222656 20.011719 275.242188 24.101562 274.3125 26.042969 L 272.621094 29.550781 L 272.167969 28.972656 C 271.941406 28.683594 269.835938 24.511719 267.5 19.742188 L 263.292969 11.066406 L 250.761719 11.066406 Z M 251.277344 11.933594 "}),g.jsx("path",{style:{fill:s},d:"M 228.285156 34.820312 L 228.285156 58.367188 L 256.253906 58.367188 L 256.273438 53.410156 L 256.273438 48.453125 L 239.429688 48.453125 L 239.429688 11.273438 L 228.285156 11.273438 Z M 228.285156 34.820312 "})]})})},io=[{id:"merge-pdf",title:"tool.merge-pdf.title",description:"tool.merge-pdf.description",Icon:S8,color:"bg-orange-500",hoverColor:"hover:bg-orange-600",textColor:"text-orange-600",category:"organize",api:{category:"pdf"},fileTypeDisplayName:"PDF",fileTypeNounPlural:"files"},{id:"split-pdf",title:"tool.split-pdf.title",description:"tool.split-pdf.description",Icon:P8,color:"bg-orange-500",hoverColor:"hover:bg-orange-600",textColor:"text-orange-600",category:"organize",api:{category:"pdf"},fileTypeDisplayName:"PDF",fileTypeNounPlural:"files"},{id:"organize-pdf",title:"tool.organize-pdf.title",description:"tool.organize-pdf.description",Icon:V8,color:"bg-orange-500",hoverColor:"hover:bg-orange-600",textColor:"text-orange-600",category:"organize",api:{category:"pdf"},fileTypeDisplayName:"PDF",fileTypeNounPlural:"files"},{id:"rotate-pdf",title:"tool.rotate-pdf.title",description:"tool.rotate-pdf.description",Icon:M8,color:"bg-indigo-500",hoverColor:"hover:bg-indigo-600",textColor:"text-indigo-600",category:"organize",api:{category:"pdf"},fileTypeDisplayName:"PDF",fileTypeNounPlural:"files"},{id:"zip-maker",title:"tool.zip-maker.title",description:"tool.zip-maker.description",Icon:cL,color:"bg-amber-500",hoverColor:"hover:bg-amber-600",textColor:"text-amber-600",category:"organize",isNew:!0,accept:{},api:{category:"utility"},fileTypeDisplayName:"files",fileTypeNounPlural:"files here"},{id:"compress-pdf",title:"tool.compress-pdf.title",description:"tool.compress-pdf.description",Icon:m_,color:"bg-green-500",hoverColor:"hover:bg-green-600",textColor:"text-green-600",category:"optimize",api:{category:"pdf"},fileTypeDisplayName:"PDF",fileTypeNounPlural:"files"},{id:"repair-pdf",title:"tool.repair-pdf.title",description:"tool.repair-pdf.description",Icon:U8,color:"bg-lime-500",hoverColor:"hover:bg-lime-600",textColor:"text-lime-600",isPremium:!0,category:"optimize",api:{category:"pdf"},fileTypeDisplayName:"PDF",fileTypeNounPlural:"files"},{id:"resize-file",title:"tool.resize-file.title",description:"tool.resize-file.description",Icon:I_,color:"bg-cyan-500",hoverColor:"hover:bg-cyan-600",textColor:"text-cyan-600",category:"optimize",isNew:!0,accept:{"image/*":[".png",".jpg",".jpeg"],"application/pdf":[".pdf"]},api:{category:"utility"},fileTypeDisplayName:"files",fileTypeNounPlural:"files"},{id:"jpg-to-pdf",title:"tool.jpg-to-pdf.title",description:"tool.jpg-to-pdf.description",Icon:w_,color:"bg-yellow-400",hoverColor:"hover:bg-yellow-500",textColor:"text-yellow-600",isNew:!0,category:"convert-to",accept:{"image/jpeg":[".jpeg",".jpg"],"image/png":[".png"]},api:{category:"pdf"},fileTypeDisplayName:"JPG",fileTypeNounPlural:"images"},{id:"psd-to-pdf",title:"tool.psd-to-pdf.title",description:"tool.psd-to-pdf.description",Icon:oL,color:"bg-sky-500",hoverColor:"hover:bg-sky-600",textColor:"text-sky-600",isNew:!0,category:"convert-to",accept:{"image/vnd.adobe.photoshop":[".psd"],"application/octet-stream":[".psd"]},api:{category:"pdf"},fileTypeDisplayName:"PSD",fileTypeNounPlural:"files"},{id:"word-to-pdf",title:"tool.word-to-pdf.title",description:"tool.word-to-pdf.description",Icon:g_,color:"bg-blue-500",hoverColor:"hover:bg-blue-600",textColor:"text-blue-600",category:"convert-to",accept:{"application/vnd.openxmlformats-officedocument.wordprocessingml.document":[".docx"]},api:{category:"pdf"},fileTypeDisplayName:"WORD",fileTypeNounPlural:"files"},{id:"powerpoint-to-pdf",title:"tool.powerpoint-to-pdf.title",description:"tool.powerpoint-to-pdf.description",Icon:y_,color:"bg-red-500",hoverColor:"hover:bg-red-600",textColor:"text-red-600",category:"convert-to",accept:{"application/vnd.openxmlformats-officedocument.presentationml.presentation":[".pptx"]},api:{category:"pdf"},fileTypeDisplayName:"POWERPOINT",fileTypeNounPlural:"slideshows"},{id:"excel-to-pdf",title:"tool.excel-to-pdf.title",description:"tool.excel-to-pdf.description",Icon:v_,color:"bg-green-500",hoverColor:"hover:bg-green-600",textColor:"text-green-600",category:"convert-to",accept:{"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":[".xlsx"]},api:{category:"pdf"},fileTypeDisplayName:"EXCEL",fileTypeNounPlural:"files"},{id:"html-to-pdf",title:"tool.html-to-pdf.title",description:"tool.html-to-pdf.description",Icon:D8,color:"bg-yellow-400",hoverColor:"hover:bg-yellow-500",textColor:"text-yellow-600",category:"convert-to",api:{category:"pdf"}},{id:"scan-to-pdf",title:"tool.scan-to-pdf.title",description:"tool.scan-to-pdf.description",Icon:z8,color:"bg-amber-500",hoverColor:"hover:bg-amber-600",textColor:"text-amber-600",isNew:!0,category:"convert-to"},{id:"pdf-to-jpg",title:"tool.pdf-to-jpg.title",description:"tool.pdf-to-jpg.description",Icon:__,color:"bg-yellow-400",hoverColor:"hover:bg-yellow-500",textColor:"text-yellow-600",category:"convert-from",api:{category:"pdf"},fileTypeDisplayName:"PDF",fileTypeNounPlural:"files"},{id:"pdf-to-png",title:"tool.pdf-to-png.title",description:"tool.pdf-to-png.description",Icon:aL,color:"bg-lime-500",hoverColor:"hover:bg-lime-600",textColor:"text-lime-600",isNew:!0,category:"convert-from",api:{category:"pdf"},fileTypeDisplayName:"PDF",fileTypeNounPlural:"files"},{id:"pdf-to-word",title:"tool.pdf-to-word.title",description:"tool.pdf-to-word.description",Icon:g_,color:"bg-blue-500",hoverColor:"hover:bg-blue-600",textColor:"text-blue-600",category:"convert-from",api:{category:"pdf"},fileTypeDisplayName:"PDF",fileTypeNounPlural:"files"},{id:"pdf-to-powerpoint",title:"tool.pdf-to-powerpoint.title",description:"tool.pdf-to-powerpoint.description",Icon:y_,color:"bg-red-500",hoverColor:"hover:bg-red-600",textColor:"text-red-600",isPremium:!0,category:"convert-from",api:{category:"pdf"},fileTypeDisplayName:"PDF",fileTypeNounPlural:"files"},{id:"pdf-to-excel",title:"tool.pdf-to-excel.title",description:"tool.pdf-to-excel.description",Icon:v_,color:"bg-green-500",hoverColor:"hover:bg-green-600",textColor:"text-green-600",category:"convert-from",api:{category:"pdf"},fileTypeDisplayName:"PDF",fileTypeNounPlural:"files"},{id:"pdf-to-pdfa",title:"tool.pdf-to-pdfa.title",description:"tool.pdf-to-pdfa.description",Icon:O8,color:"bg-slate-500",hoverColor:"hover:bg-slate-600",textColor:"text-slate-600",category:"convert-from",api:{category:"pdf"},fileTypeDisplayName:"PDF",fileTypeNounPlural:"files"},{id:"extract-text",title:"tool.extract-text.title",description:"tool.extract-text.description",Icon:E_,color:"bg-red-500",hoverColor:"hover:bg-red-600",textColor:"text-red-600",category:"convert-from",api:{category:"pdf"},fileTypeDisplayName:"PDF",fileTypeNounPlural:"files"},{id:"edit-pdf",title:"tool.edit-pdf.title",description:"tool.edit-pdf.description",Icon:R8,color:"bg-purple-500",hoverColor:"hover:bg-purple-600",textColor:"text-purple-600",isPremium:!0,isNew:!0,category:"edit",api:{category:"pdf"},fileTypeDisplayName:"PDF",fileTypeNounPlural:"files"},{id:"page-numbers",title:"tool.page-numbers.title",description:"tool.page-numbers.description",Icon:B8,color:"bg-fuchsia-500",hoverColor:"hover:bg-fuchsia-600",textColor:"text-fuchsia-600",isPremium:!0,category:"edit",api:{category:"pdf"},fileTypeDisplayName:"PDF",fileTypeNounPlural:"files"},{id:"crop-pdf",title:"tool.crop-pdf.title",description:"tool.crop-pdf.description",Icon:A_,color:"bg-rose-500",hoverColor:"hover:bg-rose-600",textColor:"text-rose-600",isPremium:!0,category:"edit",api:{category:"pdf"},fileTypeDisplayName:"PDF",fileTypeNounPlural:"files"},{id:"ocr-pdf",title:"tool.ocr-pdf.title",description:"tool.ocr-pdf.description",Icon:E_,color:"bg-teal-500",hoverColor:"hover:bg-teal-600",textColor:"text-teal-600",isPremium:!0,category:"edit",api:{category:"pdf"},fileTypeDisplayName:"PDF",fileTypeNounPlural:"files"},{id:"compare-pdf",title:"tool.compare-pdf.title",description:"tool.compare-pdf.description",Icon:q8,color:"bg-sky-500",hoverColor:"hover:bg-sky-600",textColor:"text-sky-600",isPremium:!0,category:"edit",api:{category:"pdf"},fileTypeDisplayName:"PDF",fileTypeNounPlural:"files"},{id:"redact-pdf",title:"tool.redact-pdf.title",description:"tool.redact-pdf.description",Icon:H8,color:"bg-slate-500",hoverColor:"hover:bg-slate-600",textColor:"text-slate-600",isPremium:!0,category:"edit",api:{category:"pdf"},fileTypeDisplayName:"PDF",fileTypeNounPlural:"files"},{id:"ai-question-generator",title:"tool.ai-question-generator.title",description:"tool.ai-question-generator.description",Icon:RE,color:"bg-purple-500",hoverColor:"hover:bg-purple-600",textColor:"text-purple-600",isNew:!0,category:"edit"},{id:"invoice-generator",title:"tool.invoice-generator.title",description:"tool.invoice-generator.description",Icon:rL,color:"bg-teal-500",hoverColor:"hover:bg-teal-600",textColor:"text-teal-600",isNew:!0,category:"business"},{id:"cv-generator",title:"tool.cv-generator.title",description:"tool.cv-generator.description",Icon:lL,color:"bg-cyan-500",hoverColor:"hover:bg-cyan-600",textColor:"text-cyan-600",isNew:!0,category:"business"},{id:"lesson-plan-creator",title:"tool.lesson-plan-creator.title",description:"tool.lesson-plan-creator.description",Icon:Qd,color:"bg-indigo-500",hoverColor:"hover:bg-indigo-600",textColor:"text-indigo-600",isNew:!0,category:"business"},{id:"unlock-pdf",title:"tool.unlock-pdf.title",description:"tool.unlock-pdf.description",Icon:L8,color:"bg-cyan-500",hoverColor:"hover:bg-cyan-600",textColor:"text-cyan-600",category:"security",api:{category:"pdf"},fileTypeDisplayName:"PDF",fileTypeNounPlural:"files"},{id:"protect-pdf",title:"tool.protect-pdf.title",description:"tool.protect-pdf.description",Icon:F8,color:"bg-blue-500",hoverColor:"hover:bg-blue-600",textColor:"text-blue-600",category:"security",api:{category:"pdf"},fileTypeDisplayName:"PDF",fileTypeNounPlural:"files"},{id:"sign-pdf",title:"tool.sign-pdf.title",description:"tool.sign-pdf.description",Icon:N8,color:"bg-blue-500",hoverColor:"hover:bg-blue-600",textColor:"text-blue-600",isPremium:!0,category:"security",api:{category:"signature"},fileTypeDisplayName:"PDF",fileTypeNounPlural:"files"},{id:"watermark-pdf",title:"tool.watermark-pdf.title",description:"tool.watermark-pdf.description",Icon:x_,color:"bg-purple-500",hoverColor:"hover:bg-purple-600",textColor:"text-purple-600",category:"security",api:{category:"pdf"},fileTypeDisplayName:"PDF",fileTypeNounPlural:"files"},{id:"resize-image",title:"tool.resize-image.title",description:"tool.resize-image.description",Icon:I_,color:"bg-blue-500",hoverColor:"hover:bg-blue-600",textColor:"text-blue-600",category:"edit",accept:{"image/*":[".png",".jpg",".jpeg",".gif"]},api:{category:"image"},fileTypeDisplayName:"image",fileTypeNounPlural:"files"},{id:"remove-background",title:"tool.remove-background.title",description:"tool.remove-background.description",Icon:sL,color:"bg-green-500",hoverColor:"hover:bg-green-600",textColor:"text-green-600",category:"edit",accept:{"image/*":[".png",".jpg",".jpeg",".webp"]},api:{category:"image"},fileTypeDisplayName:"image",fileTypeNounPlural:"files"},{id:"crop-image",title:"tool.crop-image.title",description:"tool.crop-image.description",Icon:A_,color:"bg-red-500",hoverColor:"hover:bg-red-600",textColor:"text-red-600",category:"edit",accept:{"image/*":[".png",".jpg",".jpeg",".gif"]},api:{category:"image"},fileTypeDisplayName:"image",fileTypeNounPlural:"files"},{id:"convert-to-jpg",title:"tool.convert-to-jpg.title",description:"tool.convert-to-jpg.description",Icon:w_,color:"bg-yellow-400",hoverColor:"hover:bg-yellow-500",textColor:"text-yellow-600",category:"convert-to",accept:{"image/*":[".png",".gif",".tif",".tiff",".psd",".svg",".webp"]},api:{category:"image"},fileTypeDisplayName:"image",fileTypeNounPlural:"files"},{id:"convert-from-jpg",title:"tool.convert-from-jpg.title",description:"tool.convert-from-jpg.description",Icon:__,color:"bg-yellow-400",hoverColor:"hover:bg-yellow-500",textColor:"text-yellow-600",category:"convert-from",accept:{"image/jpeg":[".jpg",".jpeg"]},api:{category:"image"},fileTypeDisplayName:"JPG",fileTypeNounPlural:"images"},{id:"compress-image",title:"tool.compress-image.title",description:"tool.compress-image.description",Icon:m_,color:"bg-green-500",hoverColor:"hover:bg-green-600",textColor:"text-green-600",category:"optimize",accept:{"image/*":[".png",".jpg",".jpeg"]},api:{category:"image"},fileTypeDisplayName:"image",fileTypeNounPlural:"files"},{id:"watermark-image",title:"tool.watermark-image.title",description:"tool.watermark-image.description",Icon:x_,color:"bg-purple-500",hoverColor:"hover:bg-purple-600",textColor:"text-purple-600",category:"edit",accept:{"image/*":[".png",".jpg",".jpeg"]},api:{category:"image"},fileTypeDisplayName:"image",fileTypeNounPlural:"files"}],Bq=[{slug:"nepal-bans-facebook-social-media",title:"Nepal Bans Facebook and Major Social Media Platforms Over Non-Compliance",date:"September 5, 2025",excerpt:"An analysis of Nepal's social media regulation landscape, the Supreme Court's directive for platform registration, and the profound consequences of the 2025 ban on creators, businesses, and citizens.",content:"<h2>Background of Social Media Regulation in Nepal</h2><p>Nepal’s social media landscape reflects broader global challenges in balancing digital freedom with regulation. The government argues that registration is essential to curb fake accounts, cybercrime, and misinformation. Civil society, however, stresses that such regulation risks suppressing free expression and innovation. The Supreme Court’s directive mandating registration marked a turning point. For the first time, platforms were told that without compliance, they could not legally operate in Nepal. Notices began in 2023, culminating in the ban of 2025. This has profound consequences. Content creators relying on monetization are hit hard, ISPs face losses, and ordinary citizens lose vital communication tools. Migrant families especially suffer, as many rely on these apps to stay connected.</p><p>Nepal’s social media landscape reflects broader global challenges in balancing digital freedom with regulation. The government argues that registration is essential to curb fake accounts, cybercrime, and misinformation. Civil society, however, stresses that such regulation risks suppressing free expression and innovation. The Supreme Court’s directive mandating registration marked a turning point. For the first time, platforms were told that without compliance, they could not legally operate in Nepal. Notices began in 2023, culminating in the ban of 2025. This has profound consequences. Content creators relying on monetization are hit hard, ISPs face losses, and ordinary citizens lose vital communication tools. Migrant families especially suffer, as many rely on these apps to stay connected.</p><p>Nepal’s social media landscape reflects broader global challenges in balancing digital freedom with regulation. The government argues that registration is essential to curb fake accounts, cybercrime, and misinformation. Civil society, however, stresses that such regulation risks suppressing free expression and innovation. The Supreme Court’s directive mandating registration marked a turning point. For the first time, platforms were told that without compliance, they could not legally operate in Nepal. Notices began in 2023, culminating in the ban of 2025. This has profound consequences. Content creators relying on monetization are hit hard, ISPs face losses, and ordinary citizens lose vital communication tools. Migrant families especially suffer, as many rely on these apps to stay connected.</p><p>Nepal’s social media landscape reflects broader global challenges in balancing digital freedom with regulation. The government argues that registration is essential to curb fake accounts, cybercrime, and misinformation. Civil society, however, stresses that such regulation risks suppressing free expression and innovation. The Supreme Court’s directive mandating registration marked a turning point. For the first time, platforms were told that without compliance, they could not legally operate in Nepal. Notices began in 2023, culminating in the ban of 2025. This has profound consequences. Content creators relying on monetization are hit hard, ISPs face losses, and ordinary citizens lose vital communication tools. Migrant families especially suffer, as many rely on these apps to stay connected.</p><p>Nepal’s social media landscape reflects broader global challenges in balancing digital freedom with regulation. The government argues that registration is essential to curb fake accounts, cybercrime, and misinformation. Civil society, however, stresses that such regulation risks suppressing free expression and innovation. The Supreme Court’s directive mandating registration marked a turning point. For the first time, platforms were told that without compliance, they could not legally operate in Nepal. Notices began in 2023, culminating in the ban of 2025. This has profound consequences. Content creators relying on monetization are hit hard, ISPs face losses, and ordinary citizens lose vital communication tools. Migrant families especially suffer, as many rely on these apps to stay connected.</p><p>Nepal’s social media landscape reflects broader global challenges in balancing digital freedom with regulation. The government argues that registration is essential to curb fake accounts, cybercrime, and misinformation. Civil society, however, stresses that such regulation risks suppressing free expression and innovation. The Supreme Court’s directive mandating registration marked a turning point. For the first time, platforms were told that without compliance, they could not legally operate in Nepal. Notices began in 2023, culminating in the ban of 2025. This has profound consequences. Content creators relying on monetization are hit hard, ISPs face losses, and ordinary citizens lose vital communication tools. Migrant families especially suffer, as many rely on these apps to stay connected.</p><h2>Timeline of Government Notices and Deadlines</h2><p>Nepal’s social media landscape reflects broader global challenges in balancing digital freedom with regulation. The government argues that registration is essential to curb fake accounts, cybercrime, and misinformation. Civil society, however, stresses that such regulation risks suppressing free expression and innovation. The Supreme Court’s directive mandating registration marked a turning point. For the first time, platforms were told that without compliance, they could not legally operate in Nepal. Notices began in 2023, culminating in the ban of 2025. This has profound consequences. Content creators relying on monetization are hit hard, ISPs face losses, and ordinary citizens lose vital communication tools. Migrant families especially suffer, as many rely on these apps to stay connected.</p><p>Nepal’s social media landscape reflects broader global challenges in balancing digital freedom with regulation. The government argues that registration is essential to curb fake accounts, cybercrime, and misinformation. Civil society, however, stresses that such regulation risks suppressing free expression and innovation. The Supreme Court’s directive mandating registration marked a turning point. For the first time, platforms were told that without compliance, they could not legally operate in Nepal. Notices began in 2023, culminating in the ban of 2025. This has profound consequences. Content creators relying on monetization are hit hard, ISPs face losses, and ordinary citizens lose vital communication tools. Migrant families especially suffer, as many rely on these apps to stay connected.</p><p>Nepal’s social media landscape reflects broader global challenges in balancing digital freedom with regulation. The government argues that registration is essential to curb fake accounts, cybercrime, and misinformation. Civil society, however, stresses that such regulation risks suppressing free expression and innovation. The Supreme Court’s directive mandating registration marked a turning point. For the first time, platforms were told that without compliance, they could not legally operate in Nepal. Notices began in 2023, culminating in the ban of 2025. This has profound consequences. Content creators relying on monetization are hit hard, ISPs face losses, and ordinary citizens lose vital communication tools. Migrant families especially suffer, as many rely on these apps to stay connected.</p><p>Nepal’s social media landscape reflects broader global challenges in balancing digital freedom with regulation. The government argues that registration is essential to curb fake accounts, cybercrime, and misinformation. Civil society, however, stresses that such regulation risks suppressing free expression and innovation. The Supreme Court’s directive mandating registration marked a turning point. For the first time, platforms were told that without compliance, they could not legally operate in Nepal. Notices began in 2023, culminating in the ban of 2025. This has profound consequences. Content creators relying on monetization are hit hard, ISPs face losses, and ordinary citizens lose vital communication tools. Migrant families especially suffer, as many rely on these apps to stay connected.</p><p>Nepal’s social media landscape reflects broader global challenges in balancing digital freedom with regulation. The government argues that registration is essential to curb fake accounts, cybercrime, and misinformation. Civil society, however, stresses that such regulation risks suppressing free expression and innovation. The Supreme Court’s directive mandating registration marked a turning point. For the first time, platforms were told that without compliance, they could not legally operate in Nepal. Notices began in 2023, culminating in the ban of 2025. This has profound consequences. Content creators relying on monetization are hit hard, ISPs face losses, and ordinary citizens lose vital communication tools. Migrant families especially suffer, as many rely on these apps to stay connected.</p><p>Nepal’s social media landscape reflects broader global challenges in balancing digital freedom with regulation. The government argues that registration is essential to curb fake accounts, cybercrime, and misinformation. Civil society, however, stresses that such regulation risks suppressing free expression and innovation. The Supreme Court’s directive mandating registration marked a turning point. For the first time, platforms were told that without compliance, they could not legally operate in Nepal. Notices began in 2023, culminating in the ban of 2025. This has profound consequences. Content creators relying on monetization are hit hard, ISPs face losses, and ordinary citizens lose vital communication tools. Migrant families especially suffer, as many rely on these apps to stay connected.</p><h2>Platforms Banned vs Platforms Allowed</h2><p>Nepal’s social media landscape reflects broader global challenges in balancing digital freedom with regulation. The government argues that registration is essential to curb fake accounts, cybercrime, and misinformation. Civil society, however, stresses that such regulation risks suppressing free expression and innovation. The Supreme Court’s directive mandating registration marked a turning point. For the first time, platforms were told that without compliance, they could not legally operate in Nepal. Notices began in 2023, culminating in the ban of 2025. This has profound consequences. Content creators relying on monetization are hit hard, ISPs face losses, and ordinary citizens lose vital communication tools. Migrant families especially suffer, as many rely on these apps to stay connected.</p><p>Nepal’s social media landscape reflects broader global challenges in balancing digital freedom with regulation. The government argues that registration is essential to curb fake accounts, cybercrime, and misinformation. Civil society, however, stresses that such regulation risks suppressing free expression and innovation. The Supreme Court’s directive mandating registration marked a turning point. For the first time, platforms were told that without compliance, they could not legally operate in Nepal. Notices began in 2023, culminating in the ban of 2025. This has profound consequences. Content creators relying on monetization are hit hard, ISPs face losses, and ordinary citizens lose vital communication tools. Migrant families especially suffer, as many rely on these apps to stay connected.</p><p>Nepal’s social media landscape reflects broader global challenges in balancing digital freedom with regulation. The government argues that registration is essential to curb fake accounts, cybercrime, and misinformation. Civil society, however, stresses that such regulation risks suppressing free expression and innovation. The Supreme Court’s directive mandating registration marked a turning point. For the first time, platforms were told that without compliance, they could not legally operate in Nepal. Notices began in 2023, culminating in the ban of 2025. This has profound consequences. Content creators relying on monetization are hit hard, ISPs face losses, and ordinary citizens lose vital communication tools. Migrant families especially suffer, as many rely on these apps to stay connected.</p><p>Nepal’s social media landscape reflects broader global challenges in balancing digital freedom with regulation. The government argues that registration is essential to curb fake accounts, cybercrime, and misinformation. Civil society, however, stresses that such regulation risks suppressing free expression and innovation. The Supreme Court’s directive mandating registration marked a turning point. For the first time, platforms were told that without compliance, they could not legally operate in Nepal. Notices began in 2023, culminating in the ban of 2025. This has profound consequences. Content creators relying on monetization are hit hard, ISPs face losses, and ordinary citizens lose vital communication tools. Migrant families especially suffer, as many rely on these apps to stay connected.</p><p>Nepal’s social media landscape reflects broader global challenges in balancing digital freedom with regulation. The government argues that registration is essential to curb fake accounts, cybercrime, and misinformation. Civil society, however, stresses that such regulation risks suppressing free expression and innovation. The Supreme Court’s directive mandating registration marked a turning point. For the first time, platforms were told that without compliance, they could not legally operate in Nepal. Notices began in 2023, culminating in the ban of 2025. This has profound consequences. Content creators relying on monetization are hit hard, ISPs face losses, and ordinary citizens lose vital communication tools. Migrant families especially suffer, as many rely on these apps to stay connected.</p><p>Nepal’s social media landscape reflects broader global challenges in balancing digital freedom with regulation. The government argues that registration is essential to curb fake accounts, cybercrime, and misinformation. Civil society, however, stresses that such regulation risks suppressing free expression and innovation. The Supreme Court’s directive mandating registration marked a turning point. For the first time, platforms were told that without compliance, they could not legally operate in Nepal. Notices began in 2023, culminating in the ban of 2025. This has profound consequences. Content creators relying on monetization are hit hard, ISPs face losses, and ordinary citizens lose vital communication tools. Migrant families especially suffer, as many rely on these apps to stay connected.</p><h2>The Legal Foundation: Supreme Court Directive</h2><p>Nepal’s social media landscape reflects broader global challenges in balancing digital freedom with regulation. The government argues that registration is essential to curb fake accounts, cybercrime, and misinformation. Civil society, however, stresses that such regulation risks suppressing free expression and innovation. The Supreme Court’s directive mandating registration marked a turning point. For the first time, platforms were told that without compliance, they could not legally operate in Nepal. Notices began in 2023, culminating in the ban of 2025. This has profound consequences. Content creators relying on monetization are hit hard, ISPs face losses, and ordinary citizens lose vital communication tools. Migrant families especially suffer, as many rely on these apps to stay connected.</p><p>Nepal’s social media landscape reflects broader global challenges in balancing digital freedom with regulation. The government argues that registration is essential to curb fake accounts, cybercrime, and misinformation. Civil society, however, stresses that such regulation risks suppressing free expression and innovation. The Supreme Court’s directive mandating registration marked a turning point. For the first time, platforms were told that without compliance, they could not legally operate in Nepal. Notices began in 2023, culminating in the ban of 2025. This has profound consequences. Content creators relying on monetization are hit hard, ISPs face losses, and ordinary citizens lose vital communication tools. Migrant families especially suffer, as many rely on these apps to stay connected.</p><p>Nepal’s social media landscape reflects broader global challenges in balancing digital freedom with regulation. The government argues that registration is essential to curb fake accounts, cybercrime, and misinformation. Civil society, however, stresses that such regulation risks suppressing free expression and innovation. The Supreme Court’s directive mandating registration marked a turning point. For the first time, platforms were told that without compliance, they could not legally operate in Nepal. Notices began in 2023, culminating in the ban of 2025. This has profound consequences. Content creators relying on monetization are hit hard, ISPs face losses, and ordinary citizens lose vital communication tools. Migrant families especially suffer, as many rely on these apps to stay connected.</p><p>Nepal’s social media landscape reflects broader global challenges in balancing digital freedom with regulation. The government argues that registration is essential to curb fake accounts, cybercrime, and misinformation. Civil society, however, stresses that such regulation risks suppressing free expression and innovation. The Supreme Court’s directive mandating registration marked a turning point. For the first time, platforms were told that without compliance, they could not legally operate in Nepal. Notices began in 2023, culminating in the ban of 2025. This has profound consequences. Content creators relying on monetization are hit hard, ISPs face losses, and ordinary citizens lose vital communication tools. Migrant families especially suffer, as many rely on these apps to stay connected.</p><p>Nepal’s social media landscape reflects broader global challenges in balancing digital freedom with regulation. The government argues that registration is essential to curb fake accounts, cybercrime, and misinformation. Civil society, however, stresses that such regulation risks suppressing free expression and innovation. The Supreme Court’s directive mandating registration marked a turning point. For the first time, platforms were told that without compliance, they could not legally operate in Nepal. Notices began in 2023, culminating in the ban of 2025. This has profound consequences. Content creators relying on monetization are hit hard, ISPs face losses, and ordinary citizens lose vital communication tools. Migrant families especially suffer, as many rely on these apps to stay connected.</p><p>Nepal’s social media landscape reflects broader global challenges in balancing digital freedom with regulation. The government argues that registration is essential to curb fake accounts, cybercrime, and misinformation. Civil society, however, stresses that such regulation risks suppressing free expression and innovation. The Supreme Court’s directive mandating registration marked a turning point. For the first time, platforms were told that without compliance, they could not legally operate in Nepal. Notices began in 2023, culminating in the ban of 2025. This has profound consequences. Content creators relying on monetization are hit hard, ISPs face losses, and ordinary citizens lose vital communication tools. Migrant families especially suffer, as many rely on these apps to stay connected.</p><h2>Government Rationale: Accountability and Sovereignty</h2><p>Nepal’s social media landscape reflects broader global challenges in balancing digital freedom with regulation. The government argues that registration is essential to curb fake accounts, cybercrime, and misinformation. Civil society, however, stresses that such regulation risks suppressing free expression and innovation. The Supreme Court’s directive mandating registration marked a turning point. For the first time, platforms were told that without compliance, they could not legally operate in Nepal. Notices began in 2023, culminating in the ban of 2025. This has profound consequences. Content creators relying on monetization are hit hard, ISPs face losses, and ordinary citizens lose vital communication tools. Migrant families especially suffer, as many rely on these apps to stay connected.</p><p>Nepal’s social media landscape reflects broader global challenges in balancing digital freedom with regulation. The government argues that registration is essential to curb fake accounts, cybercrime, and misinformation. Civil society, however, stresses that such regulation risks suppressing free expression and innovation. The Supreme Court’s directive mandating registration marked a turning point. For the first time, platforms were told that without compliance, they could not legally operate in Nepal. Notices began in 2023, culminating in the ban of 2025. This has profound consequences. Content creators relying on monetization are hit hard, ISPs face losses, and ordinary citizens lose vital communication tools. Migrant families especially suffer, as many rely on these apps to stay connected.</p><p>Nepal’s social media landscape reflects broader global challenges in balancing digital freedom with regulation. The government argues that registration is essential to curb fake accounts, cybercrime, and misinformation. Civil society, however, stresses that such regulation risks suppressing free expression and innovation. The Supreme Court’s directive mandating registration marked a turning point. For the first time, platforms were told that without compliance, they could not legally operate in Nepal. Notices began in 2023, culminating in the ban of 2025. This has profound consequences. Content creators relying on monetization are hit hard, ISPs face losses, and ordinary citizens lose vital communication tools. Migrant families especially suffer, as many rely on these apps to stay connected.</p><p>Nepal’s social media landscape reflects broader global challenges in balancing digital freedom with regulation. The government argues that registration is essential to curb fake accounts, cybercrime, and misinformation. Civil society, however, stresses that such regulation risks suppressing free expression and innovation. The Supreme Court’s directive mandating registration marked a turning point. For the first time, platforms were told that without compliance, they could not legally operate in Nepal. Notices began in 2023, culminating in the ban of 2025. This has profound consequences. Content creators relying on monetization are hit hard, ISPs face losses, and ordinary citizens lose vital communication tools. Migrant families especially suffer, as many rely on these apps to stay connected.</p><p>Nepal’s social media landscape reflects broader global challenges in balancing digital freedom with regulation. The government argues that registration is essential to curb fake accounts, cybercrime, and misinformation. Civil society, however, stresses that such regulation risks suppressing free expression and innovation. The Supreme Court’s directive mandating registration marked a turning point. For the first time, platforms were told that without compliance, they could not legally operate in Nepal. Notices began in 2023, culminating in the ban of 2025. This has profound consequences. Content creators relying on monetization are hit hard, ISPs face losses, and ordinary citizens lose vital communication tools. Migrant families especially suffer, as many rely on these apps to stay connected.</p><p>Nepal’s social media landscape reflects broader global challenges in balancing digital freedom with regulation. The government argues that registration is essential to curb fake accounts, cybercrime, and misinformation. Civil society, however, stresses that such regulation risks suppressing free expression and innovation. The Supreme Court’s directive mandating registration marked a turning point. For the first time, platforms were told that without compliance, they could not legally operate in Nepal. Notices began in 2023, culminating in the ban of 2025. This has profound consequences. Content creators relying on monetization are hit hard, ISPs face losses, and ordinary citizens lose vital communication tools. Migrant families especially suffer, as many rely on these apps to stay connected.</p><h2>Criticism from Civil Society and Opposition</h2><p>Nepal’s social media landscape reflects broader global challenges in balancing digital freedom with regulation. The government argues that registration is essential to curb fake accounts, cybercrime, and misinformation. Civil society, however, stresses that such regulation risks suppressing free expression and innovation. The Supreme Court’s directive mandating registration marked a turning point. For the first time, platforms were told that without compliance, they could not legally operate in Nepal. Notices began in 2023, culminating in the ban of 2025. This has profound consequences. Content creators relying on monetization are hit hard, ISPs face losses, and ordinary citizens lose vital communication tools. Migrant families especially suffer, as many rely on these apps to stay connected.</p><p>Nepal’s social media landscape reflects broader global challenges in balancing digital freedom with regulation. The government argues that registration is essential to curb fake accounts, cybercrime, and misinformation. Civil society, however, stresses that such regulation risks suppressing free expression and innovation. The Supreme Court’s directive mandating registration marked a turning point. For the first time, platforms were told that without compliance, they could not legally operate in Nepal. Notices began in 2023, culminating in the ban of 2025. This has profound consequences. Content creators relying on monetization are hit hard, ISPs face losses, and ordinary citizens lose vital communication tools. Migrant families especially suffer, as many rely on these apps to stay connected.</p><p>Nepal’s social media landscape reflects broader global challenges in balancing digital freedom with regulation. The government argues that registration is essential to curb fake accounts, cybercrime, and misinformation. Civil society, however, stresses that such regulation risks suppressing free expression and innovation. The Supreme Court’s directive mandating registration marked a turning point. For the first time, platforms were told that without compliance, they could not legally operate in Nepal. Notices began in 2023, culminating in the ban of 2025. This has profound consequences. Content creators relying on monetization are hit hard, ISPs face losses, and ordinary citizens lose vital communication tools. Migrant families especially suffer, as many rely on these apps to stay connected.</p><p>Nepal’s social media landscape reflects broader global challenges in balancing digital freedom with regulation. The government argues that registration is essential to curb fake accounts, cybercrime, and misinformation. Civil society, however, stresses that such regulation risks suppressing free expression and innovation. The Supreme Court’s directive mandating registration marked a turning point. For the first time, platforms were told that without compliance, they could not legally operate in Nepal. Notices began in 2023, culminating in the ban of 2025. This has profound consequences. Content creators relying on monetization are hit hard, ISPs face losses, and ordinary citizens lose vital communication tools. Migrant families especially suffer, as many rely on these apps to stay connected.</p><p>Nepal’s social media landscape reflects broader global challenges in balancing digital freedom with regulation. The government argues that registration is essential to curb fake accounts, cybercrime, and misinformation. Civil society, however, stresses that such regulation risks suppressing free expression and innovation. The Supreme Court’s directive mandating registration marked a turning point. For the first time, platforms were told that without compliance, they could not legally operate in Nepal. Notices began in 2023, culminating in the ban of 2025. This has profound consequences. Content creators relying on monetization are hit hard, ISPs face losses, and ordinary citizens lose vital communication tools. Migrant families especially suffer, as many rely on these apps to stay connected.</p><p>Nepal’s social media landscape reflects broader global challenges in balancing digital freedom with regulation. The government argues that registration is essential to curb fake accounts, cybercrime, and misinformation. Civil society, however, stresses that such regulation risks suppressing free expression and innovation. The Supreme Court’s directive mandating registration marked a turning point. For the first time, platforms were told that without compliance, they could not legally operate in Nepal. Notices began in 2023, culminating in the ban of 2025. This has profound consequences. Content creators relying on monetization are hit hard, ISPs face losses, and ordinary citizens lose vital communication tools. Migrant families especially suffer, as many rely on these apps to stay connected.</p><h2>Impact on Journalists, Creators, and Businesses</h2><p>Nepal’s social media landscape reflects broader global challenges in balancing digital freedom with regulation. The government argues that registration is essential to curb fake accounts, cybercrime, and misinformation. Civil society, however, stresses that such regulation risks suppressing free expression and innovation. The Supreme Court’s directive mandating registration marked a turning point. For the first time, platforms were told that without compliance, they could not legally operate in Nepal. Notices began in 2023, culminating in the ban of 2025. This has profound consequences. Content creators relying on monetization are hit hard, ISPs face losses, and ordinary citizens lose vital communication tools. Migrant families especially suffer, as many rely on these apps to stay connected.</p><p>Nepal’s social media landscape reflects broader global challenges in balancing digital freedom with regulation. The government argues that registration is essential to curb fake accounts, cybercrime, and misinformation. Civil society, however, stresses that such regulation risks suppressing free expression and innovation. The Supreme Court’s directive mandating registration marked a turning point. For the first time, platforms were told that without compliance, they could not legally operate in Nepal. Notices began in 2023, culminating in the ban of 2025. This has profound consequences. Content creators relying on monetization are hit hard, ISPs face losses, and ordinary citizens lose vital communication tools. Migrant families especially suffer, as many rely on these apps to stay connected.</p><p>Nepal’s social media landscape reflects broader global challenges in balancing digital freedom with regulation. The government argues that registration is essential to curb fake accounts, cybercrime, and misinformation. Civil society, however, stresses that such regulation risks suppressing free expression and innovation. The Supreme Court’s directive mandating registration marked a turning point. For the first time, platforms were told that without compliance, they could not legally operate in Nepal. Notices began in 2023, culminating in the ban of 2025. This has profound consequences. Content creators relying on monetization are hit hard, ISPs face losses, and ordinary citizens lose vital communication tools. Migrant families especially suffer, as many rely on these apps to stay connected.</p><p>Nepal’s social media landscape reflects broader global challenges in balancing digital freedom with regulation. The government argues that registration is essential to curb fake accounts, cybercrime, and misinformation. Civil society, however, stresses that such regulation risks suppressing free expression and innovation. The Supreme Court’s directive mandating registration marked a turning point. For the first time, platforms were told that without compliance, they could not legally operate in Nepal. Notices began in 2023, culminating in the ban of 2025. This has profound consequences. Content creators relying on monetization are hit hard, ISPs face losses, and ordinary citizens lose vital communication tools. Migrant families especially suffer, as many rely on these apps to stay connected.</p><p>Nepal’s social media landscape reflects broader global challenges in balancing digital freedom with regulation. The government argues that registration is essential to curb fake accounts, cybercrime, and misinformation. Civil society, however, stresses that such regulation risks suppressing free expression and innovation. The Supreme Court’s directive mandating registration marked a turning point. For the first time, platforms were told that without compliance, they could not legally operate in Nepal. Notices began in 2023, culminating in the ban of 2025. This has profound consequences. Content creators relying on monetization are hit hard, ISPs face losses, and ordinary citizens lose vital communication tools. Migrant families especially suffer, as many rely on these apps to stay connected.</p><p>Nepal’s social media landscape reflects broader global challenges in balancing digital freedom with regulation. The government argues that registration is essential to curb fake accounts, cybercrime, and misinformation. Civil society, however, stresses that such regulation risks suppressing free expression and innovation. The Supreme Court’s directive mandating registration marked a turning point. For the first time, platforms were told that without compliance, they could not legally operate in Nepal. Notices began in 2023, culminating in the ban of 2025. This has profound consequences. Content creators relying on monetization are hit hard, ISPs face losses, and ordinary citizens lose vital communication tools. Migrant families especially suffer, as many rely on these apps to stay connected.</p><h2>Economic Consequences and ISP Challenges</h2><p>Nepal’s social media landscape reflects broader global challenges in balancing digital freedom with regulation. The government argues that registration is essential to curb fake accounts, cybercrime, and misinformation. Civil society, however, stresses that such regulation risks suppressing free expression and innovation. The Supreme Court’s directive mandating registration marked a turning point. For the first time, platforms were told that without compliance, they could not legally operate in Nepal. Notices began in 2023, culminating in the ban of 2025. This has profound consequences. Content creators relying on monetization are hit hard, ISPs face losses, and ordinary citizens lose vital communication tools. Migrant families especially suffer, as many rely on these apps to stay connected.</p><p>Nepal’s social media landscape reflects broader global challenges in balancing digital freedom with regulation. The government argues that registration is essential to curb fake accounts, cybercrime, and misinformation. Civil society, however, stresses that such regulation risks suppressing free expression and innovation. The Supreme Court’s directive mandating registration marked a turning point. For the first time, platforms were told that without compliance, they could not legally operate in Nepal. Notices began in 2023, culminating in the ban of 2025. This has profound consequences. Content creators relying on monetization are hit hard, ISPs face losses, and ordinary citizens lose vital communication tools. Migrant families especially suffer, as many rely on these apps to stay connected.</p><p>Nepal’s social media landscape reflects broader global challenges in balancing digital freedom with regulation. The government argues that registration is essential to curb fake accounts, cybercrime, and misinformation. Civil society, however, stresses that such regulation risks suppressing free expression and innovation. The Supreme Court’s directive mandating registration marked a turning point. For the first time, platforms were told that without compliance, they could not legally operate in Nepal. Notices began in 2023, culminating in the ban of 2025. This has profound consequences. Content creators relying on monetization are hit hard, ISPs face losses, and ordinary citizens lose vital communication tools. Migrant families especially suffer, as many rely on these apps to stay connected.</p><p>Nepal’s social media landscape reflects broader global challenges in balancing digital freedom with regulation. The government argues that registration is essential to curb fake accounts, cybercrime, and misinformation. Civil society, however, stresses that such regulation risks suppressing free expression and innovation. The Supreme Court’s directive mandating registration marked a turning point. For the first time, platforms were told that without compliance, they could not legally operate in Nepal. Notices began in 2023, culminating in the ban of 2025. This has profound consequences. Content creators relying on monetization are hit hard, ISPs face losses, and ordinary citizens lose vital communication tools. Migrant families especially suffer, as many rely on these apps to stay connected.</p><p>Nepal’s social media landscape reflects broader global challenges in balancing digital freedom with regulation. The government argues that registration is essential to curb fake accounts, cybercrime, and misinformation. Civil society, however, stresses that such regulation risks suppressing free expression and innovation. The Supreme Court’s directive mandating registration marked a turning point. For the first time, platforms were told that without compliance, they could not legally operate in Nepal. Notices began in 2023, culminating in the ban of 2025. This has profound consequences. Content creators relying on monetization are hit hard, ISPs face losses, and ordinary citizens lose vital communication tools. Migrant families especially suffer, as many rely on these apps to stay connected.</p><p>Nepal’s social media landscape reflects broader global challenges in balancing digital freedom with regulation. The government argues that registration is essential to curb fake accounts, cybercrime, and misinformation. Civil society, however, stresses that such regulation risks suppressing free expression and innovation. The Supreme Court’s directive mandating registration marked a turning point. For the first time, platforms were told that without compliance, they could not legally operate in Nepal. Notices began in 2023, culminating in the ban of 2025. This has profound consequences. Content creators relying on monetization are hit hard, ISPs face losses, and ordinary citizens lose vital communication tools. Migrant families especially suffer, as many rely on these apps to stay connected.</p><h2>Social and Cultural Implications</h2><p>Nepal’s social media landscape reflects broader global challenges in balancing digital freedom with regulation. The government argues that registration is essential to curb fake accounts, cybercrime, and misinformation. Civil society, however, stresses that such regulation risks suppressing free expression and innovation. The Supreme Court’s directive mandating registration marked a turning point. For the first time, platforms were told that without compliance, they could not legally operate in Nepal. Notices began in 2023, culminating in the ban of 2025. This has profound consequences. Content creators relying on monetization are hit hard, ISPs face losses, and ordinary citizens lose vital communication tools. Migrant families especially suffer, as many rely on these apps to stay connected.</p><p>Nepal’s social media landscape reflects broader global challenges in balancing digital freedom with regulation. The government argues that registration is essential to curb fake accounts, cybercrime, and misinformation. Civil society, however, stresses that such regulation risks suppressing free expression and innovation. The Supreme Court’s directive mandating registration marked a turning point. For the first time, platforms were told that without compliance, they could not legally operate in Nepal. Notices began in 2023, culminating in the ban of 2025. This has profound consequences. Content creators relying on monetization are hit hard, ISPs face losses, and ordinary citizens lose vital communication tools. Migrant families especially suffer, as many rely on these apps to stay connected.</p><p>Nepal’s social media landscape reflects broader global challenges in balancing digital freedom with regulation. The government argues that registration is essential to curb fake accounts, cybercrime, and misinformation. Civil society, however, stresses that such regulation risks suppressing free expression and innovation. The Supreme Court’s directive mandating registration marked a turning point. For the first time, platforms were told that without compliance, they could not legally operate in Nepal. Notices began in 2023, culminating in the ban of 2025. This has profound consequences. Content creators relying on monetization are hit hard, ISPs face losses, and ordinary citizens lose vital communication tools. Migrant families especially suffer, as many rely on these apps to stay connected.</p><p>Nepal’s social media landscape reflects broader global challenges in balancing digital freedom with regulation. The government argues that registration is essential to curb fake accounts, cybercrime, and misinformation. Civil society, however, stresses that such regulation risks suppressing free expression and innovation. The Supreme Court’s directive mandating registration marked a turning point. For the first time, platforms were told that without compliance, they could not legally operate in Nepal. Notices began in 2023, culminating in the ban of 2025. This has profound consequences. Content creators relying on monetization are hit hard, ISPs face losses, and ordinary citizens lose vital communication tools. Migrant families especially suffer, as many rely on these apps to stay connected.</p><p>Nepal’s social media landscape reflects broader global challenges in balancing digital freedom with regulation. The government argues that registration is essential to curb fake accounts, cybercrime, and misinformation. Civil society, however, stresses that such regulation risks suppressing free expression and innovation. The Supreme Court’s directive mandating registration marked a turning point. For the first time, platforms were told that without compliance, they could not legally operate in Nepal. Notices began in 2023, culminating in the ban of 2025. This has profound consequences. Content creators relying on monetization are hit hard, ISPs face losses, and ordinary citizens lose vital communication tools. Migrant families especially suffer, as many rely on these apps to stay connected.</p><p>Nepal’s social media landscape reflects broader global challenges in balancing digital freedom with regulation. The government argues that registration is essential to curb fake accounts, cybercrime, and misinformation. Civil society, however, stresses that such regulation risks suppressing free expression and innovation. The Supreme Court’s directive mandating registration marked a turning point. For the first time, platforms were told that without compliance, they could not legally operate in Nepal. Notices began in 2023, culminating in the ban of 2025. This has profound consequences. Content creators relying on monetization are hit hard, ISPs face losses, and ordinary citizens lose vital communication tools. Migrant families especially suffer, as many rely on these apps to stay connected.</p><h2>Comparisons with Other Countries’ Policies</h2><p>Nepal’s social media landscape reflects broader global challenges in balancing digital freedom with regulation. The government argues that registration is essential to curb fake accounts, cybercrime, and misinformation. Civil society, however, stresses that such regulation risks suppressing free expression and innovation. The Supreme Court’s directive mandating registration marked a turning point. For the first time, platforms were told that without compliance, they could not legally operate in Nepal. Notices began in 2023, culminating in the ban of 2025. This has profound consequences. Content creators relying on monetization are hit hard, ISPs face losses, and ordinary citizens lose vital communication tools. Migrant families especially suffer, as many rely on these apps to stay connected.</p><p>Nepal’s social media landscape reflects broader global challenges in balancing digital freedom with regulation. The government argues that registration is essential to curb fake accounts, cybercrime, and misinformation. Civil society, however, stresses that such regulation risks suppressing free expression and innovation. The Supreme Court’s directive mandating registration marked a turning point. For the first time, platforms were told that without compliance, they could not legally operate in Nepal. Notices began in 2023, culminating in the ban of 2025. This has profound consequences. Content creators relying on monetization are hit hard, ISPs face losses, and ordinary citizens lose vital communication tools. Migrant families especially suffer, as many rely on these apps to stay connected.</p><p>Nepal’s social media landscape reflects broader global challenges in balancing digital freedom with regulation. The government argues that registration is essential to curb fake accounts, cybercrime, and misinformation. Civil society, however, stresses that such regulation risks suppressing free expression and innovation. The Supreme Court’s directive mandating registration marked a turning point. For the first time, platforms were told that without compliance, they could not legally operate in Nepal. Notices began in 2023, culminating in the ban of 2025. This has profound consequences. Content creators relying on monetization are hit hard, ISPs face losses, and ordinary citizens lose vital communication tools. Migrant families especially suffer, as many rely on these apps to stay connected.</p><p>Nepal’s social media landscape reflects broader global challenges in balancing digital freedom with regulation. The government argues that registration is essential to curb fake accounts, cybercrime, and misinformation. Civil society, however, stresses that such regulation risks suppressing free expression and innovation. The Supreme Court’s directive mandating registration marked a turning point. For the first time, platforms were told that without compliance, they could not legally operate in Nepal. Notices began in 2023, culminating in the ban of 2025. This has profound consequences. Content creators relying on monetization are hit hard, ISPs face losses, and ordinary citizens lose vital communication tools. Migrant families especially suffer, as many rely on these apps to stay connected.</p><p>Nepal’s social media landscape reflects broader global challenges in balancing digital freedom with regulation. The government argues that registration is essential to curb fake accounts, cybercrime, and misinformation. Civil society, however, stresses that such regulation risks suppressing free expression and innovation. The Supreme Court’s directive mandating registration marked a turning point. For the first time, platforms were told that without compliance, they could not legally operate in Nepal. Notices began in 2023, culminating in the ban of 2025. This has profound consequences. Content creators relying on monetization are hit hard, ISPs face losses, and ordinary citizens lose vital communication tools. Migrant families especially suffer, as many rely on these apps to stay connected.</p><p>Nepal’s social media landscape reflects broader global challenges in balancing digital freedom with regulation. The government argues that registration is essential to curb fake accounts, cybercrime, and misinformation. Civil society, however, stresses that such regulation risks suppressing free expression and innovation. The Supreme Court’s directive mandating registration marked a turning point. For the first time, platforms were told that without compliance, they could not legally operate in Nepal. Notices began in 2023, culminating in the ban of 2025. This has profound consequences. Content creators relying on monetization are hit hard, ISPs face losses, and ordinary citizens lose vital communication tools. Migrant families especially suffer, as many rely on these apps to stay connected.</p><h2>Technical Implications: VPNs, DNS, and Access Workarounds</h2><p>Nepal’s social media landscape reflects broader global challenges in balancing digital freedom with regulation. The government argues that registration is essential to curb fake accounts, cybercrime, and misinformation. Civil society, however, stresses that such regulation risks suppressing free expression and innovation. The Supreme Court’s directive mandating registration marked a turning point. For the first time, platforms were told that without compliance, they could not legally operate in Nepal. Notices began in 2023, culminating in the ban of 2025. This has profound consequences. Content creators relying on monetization are hit hard, ISPs face losses, and ordinary citizens lose vital communication tools. Migrant families especially suffer, as many rely on these apps to stay connected.</p><p>Nepal’s social media landscape reflects broader global challenges in balancing digital freedom with regulation. The government argues that registration is essential to curb fake accounts, cybercrime, and misinformation. Civil society, however, stresses that such regulation risks suppressing free expression and innovation. The Supreme Court’s directive mandating registration marked a turning point. For the first time, platforms were told that without compliance, they could not legally operate in Nepal. Notices began in 2023, culminating in the ban of 2025. This has profound consequences. Content creators relying on monetization are hit hard, ISPs face losses, and ordinary citizens lose vital communication tools. Migrant families especially suffer, as many rely on these apps to stay connected.</p><p>Nepal’s social media landscape reflects broader global challenges in balancing digital freedom with regulation. The government argues that registration is essential to curb fake accounts, cybercrime, and misinformation. Civil society, however, stresses that such regulation risks suppressing free expression and innovation. The Supreme Court’s directive mandating registration marked a turning point. For the first time, platforms were told that without compliance, they could not legally operate in Nepal. Notices began in 2023, culminating in the ban of 2025. This has profound consequences. Content creators relying on monetization are hit hard, ISPs face losses, and ordinary citizens lose vital communication tools. Migrant families especially suffer, as many rely on these apps to stay connected.</p><p>Nepal’s social media landscape reflects broader global challenges in balancing digital freedom with regulation. The government argues that registration is essential to curb fake accounts, cybercrime, and misinformation. Civil society, however, stresses that such regulation risks suppressing free expression and innovation. The Supreme Court’s directive mandating registration marked a turning point. For the first time, platforms were told that without compliance, they could not legally operate in Nepal. Notices began in 2023, culminating in the ban of 2025. This has profound consequences. Content creators relying on monetization are hit hard, ISPs face losses, and ordinary citizens lose vital communication tools. Migrant families especially suffer, as many rely on these apps to stay connected.</p><p>Nepal’s social media landscape reflects broader global challenges in balancing digital freedom with regulation. The government argues that registration is essential to curb fake accounts, cybercrime, and misinformation. Civil society, however, stresses that such regulation risks suppressing free expression and innovation. The Supreme Court’s directive mandating registration marked a turning point. For the first time, platforms were told that without compliance, they could not legally operate in Nepal. Notices began in 2023, culminating in the ban of 2025. This has profound consequences. Content creators relying on monetization are hit hard, ISPs face losses, and ordinary citizens lose vital communication tools. Migrant families especially suffer, as many rely on these apps to stay connected.</p><p>Nepal’s social media landscape reflects broader global challenges in balancing digital freedom with regulation. The government argues that registration is essential to curb fake accounts, cybercrime, and misinformation. Civil society, however, stresses that such regulation risks suppressing free expression and innovation. The Supreme Court’s directive mandating registration marked a turning point. For the first time, platforms were told that without compliance, they could not legally operate in Nepal. Notices began in 2023, culminating in the ban of 2025. This has profound consequences. Content creators relying on monetization are hit hard, ISPs face losses, and ordinary citizens lose vital communication tools. Migrant families especially suffer, as many rely on these apps to stay connected.</p><h2>The Future of Digital Regulation in Nepal</h2><p>Nepal’s social media landscape reflects broader global challenges in balancing digital freedom with regulation. The government argues that registration is essential to curb fake accounts, cybercrime, and misinformation. Civil society, however, stresses that such regulation risks suppressing free expression and innovation. The Supreme Court’s directive mandating registration marked a turning point. For the first time, platforms were told that without compliance, they could not legally operate in Nepal. Notices began in 2023, culminating in the ban of 2025. This has profound consequences. Content creators relying on monetization are hit hard, ISPs face losses, and ordinary citizens lose vital communication tools. Migrant families especially suffer, as many rely on these apps to stay connected.</p><p>Nepal’s social media landscape reflects broader global challenges in balancing digital freedom with regulation. The government argues that registration is essential to curb fake accounts, cybercrime, and misinformation. Civil society, however, stresses that such regulation risks suppressing free expression and innovation. The Supreme Court’s directive mandating registration marked a turning point. For the first time, platforms were told that without compliance, they could not legally operate in Nepal. Notices began in 2023, culminating in the ban of 2025. This has profound consequences. Content creators relying on monetization are hit hard, ISPs face losses, and ordinary citizens lose vital communication tools. Migrant families especially suffer, as many rely on these apps to stay connected.</p><p>Nepal’s social media landscape reflects broader global challenges in balancing digital freedom with regulation. The government argues that registration is essential to curb fake accounts, cybercrime, and misinformation. Civil society, however, stresses that such regulation risks suppressing free expression and innovation. The Supreme Court’s directive mandating registration marked a turning point. For the first time, platforms were told that without compliance, they could not legally operate in Nepal. Notices began in 2023, culminating in the ban of 2025. This has profound consequences. Content creators relying on monetization are hit hard, ISPs face losses, and ordinary citizens lose vital communication tools. Migrant families especially suffer, as many rely on these apps to stay connected.</p><p>Nepal’s social media landscape reflects broader global challenges in balancing digital freedom with regulation. The government argues that registration is essential to curb fake accounts, cybercrime, and misinformation. Civil society, however, stresses that such regulation risks suppressing free expression and innovation. The Supreme Court’s directive mandating registration marked a turning point. For the first time, platforms were told that without compliance, they could not legally operate in Nepal. Notices began in 2023, culminating in the ban of 2025. This has profound consequences. Content creators relying on monetization are hit hard, ISPs face losses, and ordinary citizens lose vital communication tools. Migrant families especially suffer, as many rely on these apps to stay connected.</p><p>Nepal’s social media landscape reflects broader global challenges in balancing digital freedom with regulation. The government argues that registration is essential to curb fake accounts, cybercrime, and misinformation. Civil society, however, stresses that such regulation risks suppressing free expression and innovation. The Supreme Court’s directive mandating registration marked a turning point. For the first time, platforms were told that without compliance, they could not legally operate in Nepal. Notices began in 2023, culminating in the ban of 2025. This has profound consequences. Content creators relying on monetization are hit hard, ISPs face losses, and ordinary citizens lose vital communication tools. Migrant families especially suffer, as many rely on these apps to stay connected.</p><p>Nepal’s social media landscape reflects broader global challenges in balancing digital freedom with regulation. The government argues that registration is essential to curb fake accounts, cybercrime, and misinformation. Civil society, however, stresses that such regulation risks suppressing free expression and innovation. The Supreme Court’s directive mandating registration marked a turning point. For the first time, platforms were told that without compliance, they could not legally operate in Nepal. Notices began in 2023, culminating in the ban of 2025. This has profound consequences. Content creators relying on monetization are hit hard, ISPs face losses, and ordinary citizens lose vital communication tools. Migrant families especially suffer, as many rely on these apps to stay connected.</p>",image:"https://ik.imagekit.io/fonepay/social%20media%20band%20in%20nepal%20ilovepdfly.png?updatedAt=1757078313764",author:"The I Love PDFLY Team",authorImage:"/logo.svg",tags:["Nepal","Social Media Ban","Facebook Ban","Digital Rights","Internet Freedom","Tech Policy","Government Regulation"]},{slug:"neb-class-12-result-2081-2082",title:"NEB Class 12 Result 2082/2081 (2025): The Ultimate Guide to Check Your Marksheet Online",date:"July 15, 2025",excerpt:"The complete guide to checking your NEB Class 12 Result for 2081/2082. Find official websites like neb.gov.np and ntc.net.np, SMS methods, IVR, and step-by-step instructions to view your results with marksheet. Understand the new grading system and get answers to all your FAQs. Your one-stop resource for the 2025 NEB results is here.",content:`The long wait is almost over for the hundreds of thousands of students who appeared for the National Examinations Board (NEB) Class 12 examinations in 2081/2082. This result is a pivotal moment, serving as the gateway to higher education and future career paths. The anticipation can be overwhelming, with students and parents eagerly searching for the fastest and most reliable ways to check the results. To ease this process, we have created the ultimate, comprehensive guide with all the verified information you need to check your NEB Class 12 Result 2081/2082 the moment it is published.

This guide provides direct links to official websites, step-by-step instructions for checking results via SMS, IVR, and USSD, and detailed information on the latest grading system. We understand that on result day, official websites can be slow or unresponsive due to high traffic. That's why we've compiled a list of alternative methods and multiple web portals to ensure you get your result without delay.

<a href="https://neb.ntc.net.np/" target="_blank" rel="noopener noreferrer" class="inline-block bg-brand-red hover:bg-brand-red-dark text-white font-bold py-3 px-8 rounded-lg my-6 no-underline text-lg">Check NEB Class 12 Result Now</a>

<h2>When Will the NEB Class 12 Result 2081/2082 Be Published?</h2>
<p>While the National Examinations Board (NEB) has not announced an exact date, based on previous years' trends, the results for the Class 12 examinations are typically published by the end of Shrawan or the first week of Bhadra. The board is currently in the final stages of checking and tabulating the results. We recommend students to stay updated through the official NEB website (neb.gov.np) and reliable news portals. You can also bookmark this page, as we will update it with the latest information as soon as it becomes available.</p>

<h2>5 Easy Methods to Check Your NEB Class 12 Result</h2>
<p>Here are the most reliable and fastest methods to check your result with your marksheet. Make sure you have your Symbol Number and Date of Birth (in BS format: YYYY-MM-DD) ready.</p>

<h3>1. Official Websites</h3>
<p>The most reliable way to check your NEB result is by visiting the official websites. This method provides a complete marksheet which you can download and print.</p>
<ol class="list-decimal list-inside space-y-2 my-4">
    <li>Go to one of the official websites listed in the table below.</li>
    <li>Look for the link that says "NEB Class 12 Result 2081" or something similar.</li>
    <li>Enter your Symbol Number and Date of Birth (in BS format).</li>
    <li>Click the "Submit" or "View Result" button.</li>
    <li>Your result, along with a detailed marksheet, will appear on the screen. It is highly recommended to download or print it for future reference.</li>
</ol>
<div class="overflow-x-auto my-4 rounded-lg border border-gray-200 dark:border-gray-700">
  <table class="min-w-full bg-white dark:bg-black">
    <thead class="bg-gray-100 dark:bg-gray-800">
      <tr>
        <th class="px-4 py-3 text-left font-semibold text-gray-700 dark:text-gray-200">Website Name</th>
        <th class="px-4 py-3 text-left font-semibold text-gray-700 dark:text-gray-200">URL</th>
      </tr>
    </thead>
    <tbody class="divide-y divide-gray-200 dark:divide-gray-700">
      <tr><td class="px-4 py-2">NEB Official Website</td><td class="px-4 py-2"><a href="http://www.neb.gov.np" target="_blank" rel="noopener noreferrer" class="text-brand-red hover:underline">www.neb.gov.np</a></td></tr>
      <tr><td class="px-4 py-2">Nepal Telecom Portal</td><td class="px-4 py-2"><a href="http://neb.ntc.net.np" target="_blank" rel="noopener noreferrer" class="text-brand-red hover:underline">neb.ntc.net.np</a></td></tr>
      <tr><td class="px-4 py-2">I Love PDFLY Result Hub</td><td class="px-4 py-2"><a href="https://ilovepdfly.com/blog/neb-class-12-result-2081-2082" class="text-brand-red hover:underline">ilovepdfly.com (You are here!)</a></td></tr>
      <tr><td class="px-4 py-2">Edusanjal</td><td class="px-4 py-2"><a href="http://see.edusanjal.com" target="_blank" rel="noopener noreferrer" class="text-brand-red hover:underline">see.edusanjal.com</a></td></tr>
      <tr><td class="px-4 py-2">Kantipur Publications</td><td class="px-4 py-2"><a href="http://results.ekantipur.com/" target="_blank" rel="noopener noreferrer" class="text-brand-red hover:underline">results.ekantipur.com</a></td></tr>
    </tbody>
  </table>
</div>

<h3>2. SMS Method (Nepal Telecom)</h3>
<p>If you don’t have internet access or if the websites are down, you can easily check your result by sending an SMS from your NTC SIM card.</p>
<ol class="list-decimal list-inside space-y-2 my-4">
    <li>Open your phone’s messaging app.</li>
    <li>Compose a new message and type: <strong>NEB &lt;space&gt; Your_Symbol_Number</strong></li>
    <li>Send the message to <strong>1600</strong>.</li>
    <li>For example: If your symbol number is 12345678, you would type <strong>NEB 12345678</strong>.</li>
    <li>Shortly after, you will receive an SMS with your GPA and overall result.</li>
</ol>
<div class="my-4 p-4 bg-yellow-100 dark:bg-yellow-900/50 border-l-4 border-yellow-400 text-yellow-800 dark:text-yellow-300">
    <strong>Did You Know?</strong> Over 400,000 students appear for the NEB Class 12 exam every year in Nepal. That’s why websites often slow down or crash on result day. Using SMS, USSD, or apps like Khalti and eSewa can help you get results faster without delay!
</div>


<h3>3. IVR Method (Interactive Voice Response)</h3>
<p>Another offline option is to call the IVR system from any NTC mobile or landline to listen to your result.</p>
<ol class="list-decimal list-inside space-y-2 my-4">
    <li>Dial <strong>1601</strong> from your NTC phone.</li>
    <li>Follow the voice instructions provided by the operator.</li>
    <li>Enter your symbol number when prompted.</li>
    <li>Wait for a few moments as the system announces your result.</li>
</ol>

<h3>4. USSD Code Service</h3>
<p>You can also use the USSD service to check your grade 12 result. This method is fast and does not require an internet connection or balance (it's free on the NTC network).</p>
<ol class="list-decimal list-inside space-y-2 my-4">
    <li>Open your phone's dialer.</li>
    <li>Dial <strong>*1601#</strong> and press the call button.</li>
    <li>Follow the on-screen instructions that appear.</li>
    <li>Enter your symbol number.</li>
    <li>Your result will be instantly displayed on your phone screen.</li>
</ol>

<h3>5. Mobile Apps: Khalti and eSewa</h3>
<p>Popular digital wallets like Khalti and eSewa offer easy result-checking features directly within their apps. This method is user-friendly and convenient if you already use these apps for payments.</p>
<ol class="list-decimal list-inside space-y-2 my-4">
    <li>Open the Khalti or eSewa app on your smartphone.</li>
    <li>Navigate to the 'Education' or 'NEB Result' section (it's usually on the homepage during result season).</li>
    <li>Enter your symbol number and date of birth.</li>
    <li>Tap the 'View Result' button to see your marksheet.</li>
</ol>

<h2>Understanding the NEB Class 12 Grading System</h2>
<p>The NEB uses a letter grading system with a corresponding Grade Point Average (GPA). It's crucial to understand this system to interpret your marksheet correctly. Here is the detailed breakdown:</p>
<div class="overflow-x-auto my-4 rounded-lg border border-gray-200 dark:border-gray-700">
  <table class="min-w-full bg-white dark:bg-black">
    <thead class="bg-gray-100 dark:bg-gray-800">
      <tr>
        <th class="px-4 py-3 text-left font-semibold text-gray-700 dark:text-gray-200">Percentage (%)</th>
        <th class="px-4 py-3 text-left font-semibold text-gray-700 dark:text-gray-200">Grade</th>
        <th class="px-4 py-3 text-left font-semibold text-gray-700 dark:text-gray-200">Description</th>
        <th class="px-4 py-3 text-left font-semibold text-gray-700 dark:text-gray-200">Grade Point</th>
      </tr>
    </thead>
    <tbody class="divide-y divide-gray-200 dark:divide-gray-700">
      <tr><td class="px-4 py-2">90 to 100</td><td class="px-4 py-2 font-bold">A+</td><td class="px-4 py-2">Outstanding</td><td class="px-4 py-2">4.0</td></tr>
      <tr><td class="px-4 py-2">80 to below 90</td><td class="px-4 py-2 font-bold">A</td><td class="px-4 py-2">Excellent</td><td class="px-4 py-2">3.6</td></tr>
      <tr><td class="px-4 py-2">70 to below 80</td><td class="px-4 py-2 font-bold">B+</td><td class="px-4 py-2">Very Good</td><td class="px-4 py-2">3.2</td></tr>
      <tr><td class="px-4 py-2">60 to below 70</td><td class="px-4 py-2 font-bold">B</td><td class="px-4 py-2">Good</td><td class="px-4 py-2">2.8</td></tr>
      <tr><td class="px-4 py-2">50 to below 60</td><td class="px-4 py-2 font-bold">C+</td><td class="px-4 py-2">Satisfactory</td><td class="px-4 py-2">2.4</td></tr>
      <tr><td class="px-4 py-2">40 to below 50</td><td class="px-4 py-2 font-bold">C</td><td class="px-4 py-2">Acceptable</td><td class="px-4 py-2">2.0</td></tr>
      <tr><td class="px-4 py-2">35 to below 40</td><td class="px-4 py-2 font-bold">D</td><td class="px-4 py-2">Basic</td><td class="px-4 py-2">1.6</td></tr>
      <tr><td class="px-4 py-2" colspan="4">Below 35% in theory subjects is considered 'Non-Graded (NG)' and the final GPA will not be calculated.</td></tr>
    </tbody>
  </table>
</div>

<h2>Frequently Asked Questions (FAQs)</h2>
<div class="space-y-4 mt-6">
  <div class="border-t border-gray-200 dark:border-gray-700 pt-4">
    <h4 class="font-semibold text-lg">What is the minimum GPA required to pass Class 12?</h4>
    <p>To be eligible for higher studies, a student must obtain a minimum of a 'D' grade (1.6 GPA) in all theory subjects and a 'C' grade in practical subjects. Additionally, students must not have an 'NG' (Non-Graded) result in any subject.</p>
  </div>
  <div class="border-t border-gray-200 dark:border-gray-700 pt-4">
    <h4 class="font-semibold text-lg">What does 'NG' (Non-Graded) mean?</h4>
    <p>'NG' means that a student has scored below the minimum required marks (35%) in a theory subject. If you have an 'NG' in any subject, your final GPA will not be awarded, and you will need to appear for a supplementary (grade improvement) exam for that subject.</p>
  </div>
  <div class="border-t border-gray-200 dark:border-gray-700 pt-4">
    <h4 class="font-semibold text-lg">How can I apply for a re-totaling or re-checking?</h4>
    <p>If you are not satisfied with your result, the NEB provides an opportunity to apply for re-totaling. The notice for this is usually published along with the results on the official NEB website. You will have to fill out a form and pay a nominal fee per subject within a specified timeframe.</p>
  </div>
   <div class="border-t border-gray-200 dark:border-gray-700 pt-4">
    <h4 class="font-semibold text-lg">When will I get my official transcript and certificate?</h4>
    <p>The original academic transcript and migration certificate are usually distributed to schools/colleges a few weeks after the results are published. You should contact your college administration for information on when you can collect them.</p>
  </div>
</div>`,image:"https://ik.imagekit.io/fonepay/class%2012%20result.png?updatedAt=1753244853921",author:"The I Love PDFLY Team",authorImage:"/logo.svg",tags:["NEB Result","Class 12","Education","Nepal","Result 2082"]},{slug:"build-a-professional-cv-in-minutes-with-ai",title:"Build a Professional CV in Minutes with Our New AI-Powered Generator",date:"August 10, 2025",excerpt:"Landing your dream job starts with a perfect CV. Our new free CV Generator helps you create a polished, professional resume in minutes. Choose from modern templates, fill in your details, and download a job-ready PDF.",content:`<h2>The First Impression Matters Most</h2>
<p>In today's competitive job market, your Curriculum Vitae (CV) is often the very first impression you make on a potential employer. A well-structured, professional, and error-free CV can be the difference between landing an interview and being overlooked. However, creating one from scratch can be a daunting task. Which template should you use? What information is most important? How do you format it correctly?</p>

<h2>Introducing the I Love PDFLY CV Generator</h2>
<p>We're excited to introduce a powerful new tool to our suite: the free <a href="/#/cv-generator" class="text-brand-red hover:underline">CV Generator</a>. We've taken the stress and guesswork out of resume building by creating an intuitive, step-by-step process that guides you toward a perfect, job-winning CV.</p>

<h2>Key Features of the CV Generator</h2>
<ul class="list-disc list-inside space-y-2 my-4">
    <li><strong>Professionally Designed Templates:</strong> Choose from a selection of clean, modern templates that are proven to be effective and easy for recruiters to read. No more struggling with Word formatting!</li>
    <li><strong>Guided Sections:</strong> Our tool walks you through every essential section: personal details, professional summary, work experience, education, skills, and projects. Just fill in the blanks.</li>
    <li><strong>Easy Editing:</strong> Add, remove, and reorder sections with ease. Our live preview shows you exactly what your final CV will look like as you type.</li>
    <li><strong>Instant PDF Download:</strong> Once you're finished, download your CV as a high-quality, universally compatible PDF file, ready to be sent to employers.</li>
</ul>

<h2>How to Create Your CV in 5 Simple Steps</h2>
<p>Ready to build your new CV? It's incredibly simple:</p>
<ol class="list-decimal list-inside space-y-2 my-4">
    <li><strong>Navigate to the Tool:</strong> Go to the <a href="/#/cv-generator" class="text-brand-red hover:underline">CV Generator</a> page.</li>
    <li><strong>Fill in Your Details:</strong> Enter your information into the guided form on the left panel, covering everything from your contact info to your work history.</li>
    <li><strong>Upload a Professional Photo (Optional):</strong> Add a professional headshot to give your CV a personal touch.</li>
    <li><strong>Choose Your Design:</strong> Select a template and an accent color that best represents your professional brand.</li>
    <li><strong>Download Your PDF:</strong> Click the "Download PDF" button to instantly save your polished, professional CV.</li>
</ol>
<p>Stop letting CV formatting stand in the way of your career goals. Create a document that makes you stand out and land the interview you deserve. Try our free CV Generator today!</p>`,image:"https://ik.imagekit.io/fonepay/ilovepdfly%20blog.png?updatedAt=1753465347545",author:"The I Love PDFLY Team",authorImage:"/logo.svg",tags:["CV Generator","Resume Builder","Job Search","Career","Free CV Maker","How To"]},{slug:"ai-lesson-plan-creator-for-teachers",title:"Your New Teaching Assistant: The AI Lesson Plan Creator",date:"August 9, 2025",excerpt:"Teachers, reclaim your time! Our new AI Lesson Plan Creator generates detailed, engaging, and curriculum-aligned lesson plans for any subject in seconds. Spend less time on paperwork and more time inspiring your students.",content:`<h2>The Challenge of Modern Teaching</h2>
<p>Educators are the backbone of our society, but the demands on their time are immense. Lesson planning, in particular, is a critical but incredibly time-consuming task. Crafting engaging, effective, and curriculum-aligned plans for every class can take hours each week—hours that could be spent interacting with students or focusing on professional development.</p>

<h2>Save Time with the AI Lesson Plan Creator</h2>
<p>We believe technology should empower teachers, not add to their workload. That’s why we’re thrilled to launch the <a href="/#/lesson-plan-creator" class="text-brand-red hover:underline">AI Lesson Plan Creator</a>, a revolutionary tool designed to be every teacher's new favorite assistant.</p>
<p>Simply provide a few key details—grade level, subject, topic, and class duration—and our AI will generate a comprehensive and structured lesson plan in seconds. It's designed to give you a high-quality, editable foundation that you can adapt to your unique classroom needs.</p>

<h2>What Does a Generated Lesson Plan Include?</h2>
<p>Our AI doesn't just give you a vague outline. It creates a complete, actionable plan with all the essential components:</p>
<ul class="list-disc list-inside space-y-2 my-4">
    <li><strong>Clear Objectives:</strong> Concrete learning goals for students to achieve.</li>
    <li><strong>Engaging Introduction:</strong> A creative "hook" to capture your students' attention from the start.</li>
    <li><strong>Step-by-Step Activities:</strong> Detailed main teaching activities, including suggestions for group work and interaction.</li>
    <li><strong>Assessment Ideas:</strong> Practical ways to check for understanding, from quick quizzes to group discussions.</li>
    <li><strong>Homework Assignments:</strong> Relevant and meaningful practice for students to complete after class.</li>
    <li><strong>Materials List:</strong> A checklist of all the resources you'll need for the lesson.</li>
</ul>

<h2>How It Works</h2>
<ol class="list-decimal list-inside space-y-2 my-4">
    <li><strong>Go to the Tool:</strong> Visit the <a href="/#/lesson-plan-creator" class="text-brand-red hover:underline">AI Lesson Plan Creator</a>.</li>
    <li><strong>Enter Your Lesson Details:</strong> Specify the grade, subject, topic, and duration. You can even suggest a teaching style (e.g., "Interactive & Hands-on").</li>
    <li><strong>Generate the Plan:</strong> Click the "Generate" button and watch as the AI crafts your lesson plan in real-time.</li>
    <li><strong>Review and Refine:</strong> Use the generated plan as-is, or copy and paste it into your favorite editor to tweak and personalize it for your students.</li>
</ol>
<p>The AI Lesson Plan Creator is more than a tool; it's a partner in education. It's here to help you reduce prep time, overcome creative blocks, and focus on what you do best: teaching. Give it a try and revolutionize your planning process today!</p>`,image:"https://ik.imagekit.io/fonepay/4B237CD5-C59B-4982-9ED4-E9A479E8BDA1.png?updatedAt=1753468582689",author:"The I Love PDFLY Team",authorImage:"/logo.svg",tags:["Lesson Plan Creator","AI for Teachers","Education","EdTech","Teaching Tools","Productivity"]},{slug:"turn-any-text-into-a-quiz-ai-question-generator",title:"Study Smarter: Turn Any Text into a Quiz with Our AI Question Generator",date:"August 8, 2025",excerpt:"Transform your study materials instantly! Our new AI Question Generator takes any text—from articles to textbook chapters—and automatically creates a variety of quiz questions to help you learn and retain information more effectively.",content:`<h2>The Power of Active Recall in Learning</h2>
<p>Reading and highlighting text is a common study method, but research shows that one of the most effective ways to learn and remember information is through "active recall"—the process of actively retrieving information from your memory. In other words, quizzing yourself is one of the best ways to study.</p>
<p>But creating good questions takes time and effort. What if you could instantly generate a quiz from any text you're studying? Now you can.</p>

<h2>Introducing the AI Question Generator</h2>
<p>We are excited to launch our <a href="/#/ai-question-generator" class="text-brand-red hover:underline">AI Question Generator</a>, a powerful tool for students, teachers, and lifelong learners. Simply paste any text into the tool, and our AI will analyze the content and generate a diverse set of questions to test your knowledge.</p>

<h2>How Can It Help You?</h2>
<ul class="list-disc list-inside space-y-2 my-4">
    <li><strong>For Students:</strong> Instantly create a practice quiz from your lecture notes, textbook chapters, or online articles. Test your understanding before an exam and identify areas where you need to review.</li>
    <li><strong>For Teachers:</strong> Quickly generate questions for a pop quiz, a worksheet, or a study guide. Save valuable prep time while still providing valuable learning materials for your students.</li>
    <li><strong>For Anyone:</strong> Want to make sure you understood that dense news article or business report? Paste it in and get a set of questions to confirm your comprehension.</li>
</ul>

<h2>A Variety of Question Types</h2>
<p>To ensure a comprehensive review, our AI generates a mix of question formats based on your text, including:</p>
<ul class="list-disc list-inside space-y-2 my-4">
    <li><strong>Multiple Choice:</strong> Test your knowledge with several options.</li>
    <li><strong>True/False:</strong> Verify key facts and statements.</li>
    <li><strong>Short Answer:</strong> Challenge yourself to recall specific information and concepts.</li>
</ul>
<p>Each question comes with the correct answer, so you can check your work immediately. Stop just reading and start actively learning. Turn your study material into an interactive learning experience with the AI Question Generator today!</p>`,image:"https://ik.imagekit.io/fonepay/7543789B-8C56-4BF2-9952-6D6C2F17BA25.png?updatedAt=1753468583193",author:"The I Love PDFLY Team",authorImage:"/logo.svg",tags:["AI Question Generator","Study Tools","Education","Quiz Maker","Learning","Productivity","AI"]},{slug:"you-can-now-edit-images-in-ilovepdfly",title:"You can now edit images in I Love PDFLY",date:"August 4, 2025",excerpt:"Exciting news! I Love PDFLY is expanding beyond PDFs. Discover our powerful new image editing tools, including a one-click Background Remover, designed to streamline your creative workflow. Edit your images and convert them to PDF all in one place.",content:`<h2>More Than Just PDFs: Welcome to Image Editing!</h2>
<p>We've always been your go-to solution for everything PDF, but we know your projects often involve more than just documents. That's why we're thrilled to announce that I Love PDFLY is expanding its toolkit to include powerful, easy-to-use image editing features!</p>
<p>Now, you can manage both your documents and your images in one convenient place, streamlining your workflow and boosting your productivity. Say goodbye to switching between different apps—your complete toolkit is right here.</p>

<h2>Introducing a Game-Changer: One-Click Background Removal</h2>
<p>Have you ever needed to isolate a subject from its background for a presentation, a product photo, or a creative project? Our new <a href="/#/remove-background" class="text-brand-red hover:underline">Remove Background tool</a> makes this complex task incredibly simple.</p>
<ul class="list-disc list-inside space-y-2 my-4">
    <li><strong>Effortless and Automatic:</strong> Simply upload your image (PNG or JPG), and our AI will automatically detect and remove the background with precision.</li>
    <li><strong>Perfect for Any Project:</strong> Create clean product images for your e-commerce store, professional headshots for your profile, or stunning graphics for your presentations.</li>
    <li><strong>High-Quality Results:</strong> Get a crisp, clean cutout with a transparent background, ready to be used anywhere.</li>
</ul>
<p>No more tedious manual selection or expensive software. It's professional-grade background removal, and it's free to use.</p>

<h2>A Complete Image-to-Document Workflow</h2>
<p>Our new image tools are designed to work seamlessly with our existing PDF features, creating a complete workflow from image to final document.</p>
<ol class="list-decimal list-inside space-y-2 my-4">
    <li><strong>Edit Your Image:</strong> Start by perfecting your image. Use the <a href="/#/remove-background" class="text-brand-red hover:underline">Remove Background</a> tool to get a clean cutout.</li>
    <li><strong>Convert to PDF:</strong> Once your image is ready, use our trusted <a href="/#/jpg-to-pdf" class="text-brand-red hover:underline">JPG to PDF</a> tool to convert single or multiple images into a high-quality PDF document.</li>
    <li><strong>Organize and Share:</strong> Need to add the new image PDF to an existing report? Use our <a href="/#/merge-pdf" class="text-brand-red hover:underline">Merge PDF</a> tool to combine it with other documents. Your polished, professional document is now ready to be shared.</li>
</ol>
<p>You can even capture images directly from your camera and convert them on the fly with our <a href="/#/scan-to-pdf" class="text-brand-red hover:underline">Scan to PDF</a> tool, making it easier than ever to digitize and manage your visual content.</p>

<h2>What's Next?</h2>
<p>This is just the beginning of our journey into image editing. We're committed to building the most comprehensive and user-friendly toolkit for all your digital needs. We can't wait for you to try out these new features and hear your feedback!</p>
<p>Ready to get started? Explore our new image tools today!</p>`,image:"https://www.ilovepdf.com/storage/blog/55-1623331581-iOS-mobile-app@348w.jpeg",author:"The I Love PDFLY Team",authorImage:"/logo.svg",tags:["Image Editing","New Feature","Productivity","Remove Background","Photo Editor","Design"]},{slug:"the-best-free-graphic-design-software-2025",title:"The best free graphic design software: 32 must-have tools (2025)",date:"January 4, 2024",excerpt:"Explore graphic design tools ranging from color pallets & AI image generators to photo editing software & file management tools.",content:`<p>Looking for the best free graphic design tools? We’ve done the research so you don’t have to. Check out this list containing some of the best tools for creating professional designs without the professional price tags.</p>
<p>The difficulty levels of the tools varies from motivated amateurs to perfectionist professionals, so you can choose the graphic design software that suits your needs and level.</p>
<p>This post will break down the graphic design software tools into 10 useful categories, from AI image generators to file management tools.</p>
<h2>AI image generators</h2>
<p>Text-to-image generators are a hot topic that’s taking off in 2023. Artificial intelligence is changing the way we approach graphic design, and proving to be controversial in its journey.</p>
<p>These powerful tools use machine learning algorithms to create unique and eye-catching graphics in just a few clicks. Whether you're looking to generate patterns, logos, or photo-realistic images - AI image generators are captivating creative tools.</p>
<p>The software might not give you the perfect professional results every time as we are still in the early stages of this AI explosion. Nevertheless, these tools show incredible potential and can be used for content creation or to push your ideas and imagination to the max.</p>
<h3>DALL-E from OpenAI</h3>
<p>DALL-E from OpenAI (the same people who made the headline-smashing ChatGPT) is a clear front-runner in the race for AI image generators. The free AI image tool is great at taking precise inputs to create multiple variations that let you select the best from the bunch.</p>
<p>It’s most effective when choosing a style for the images, for example an expressive oil painting, a pencil drawing, or a watercolor painting. This feature makes it possible to create unique, professional-looking images with ease.</p>
<p>The software is being updated and improved on a regular basis, so keep watching these AI image generators as many changes and new features are undoubtedly around the corner.</p>
<img src="https://www.ilovepdf.com/storage/blog/205-1678104291-6.-Dalle.png" alt="DALL-E AI Image Generator" class="my-4 rounded-lg shadow-md" />
<h3>Midjourney</h3>
<p>Midjourney creates high-quality designs compared to many of its competitors, with styles that are futuristic and atmospheric. Considering the early stages of the development, like DALL-E, it’s incredible how far these tools have come in such a short amount of time with such impressive results.</p>
<p>However, despite its impressive capabilities, the biggest drawback is its usability. The process to create an image is complicated and time-consuming—you have to enter Discord, find a new “newbies channel”, and then use the “/imagine” command in a chaotic chat with images flying through the chat.</p>
<p>Aside from the difficult usability, once you have understood the process the results of this AI art generator are remarkable.</p>
<h3>DeepAI</h3>
<p>DeepAI is fun AI image generator that lacks some finishing touches. It’s a great tool to get some inspiration on specific ideas, with a simple search bar that is easy to use, and a number of free styles to choose from.</p>
<p>While the results produced by its text-to-image converter may not be as polished and professional as those produced by other AI image generators. DeepAI has a lot of potential, and is a playful tool with a number of free styles to choose from, giving users plenty to experiment with.</p>
<h2>Color palette generators</h2>
<p>This chapter is all about color. We'll explore the best free graphic design software options specifically made to help you create stunning color palettes.</p>
<p>Whether you're a seasoned designer or just starting out, these tools make it easy to experiment with color, select a harmonious scheme, and set the scene for your color scheme. So, let's dive in and discover the best free color palette tools.</p>
<h3>Coolors</h3>
<p>See what’s hot with trending color palettes, generate colors, and select colors from photos with this well-designed website that helps you get into the creative mood from the get-go. Coolors is easy to use and palettes are simple to export, with many options for sharing your chosen colors.</p>
<p>Whether you want to find warm color palettes and share them with your team or save them for future projects, this tool has a smooth workflow that makes it easy to work on multiple new projects while organizing the old ones.</p>
<img src="https://www.ilovepdf.com/storage/blog/205-1678103451-1.-Coolors.png" alt="Coolors Color Palette Generator" class="my-4 rounded-lg shadow-md" />
<h3>Color Space</h3>
<p>Color Space is a useful color palette generator to develop your ideas for a design that starts with a single color. Put your desired color in and the site generates a variety of color palettes including gradient and random shades.</p>
<p>It’s simple to create basic gradients, and has recently released the option to make 3 Color Gradients, which are extremely easy to edit and play around with.</p>
<p>The drawback is that you are limited in the amount of palettes that you can explore, especially if you’re starting from scratch and don’t have a color palette already in mind.</p>
<h3>Adobe Capture</h3>
<p>Adobe Capture is a color palette generator that offers ten free tasks before having to register. This is a superb mobile app that takes real-time images and lets you create a color palette from whatever you see around you.</p>
<p>The app is a useful addition that makes it easy to generate a color palette from an image, whether you choose to use a live camera view or select a saved photo. You can also create shapes and patterns as interesting artistic features.</p>
<h2>Image editing tools</h2>
<p>Photo editing is an essential aspect of graphic design. Whether it's adjusting the angle, changing the brightness and contrast, or adding special filters, having the right image editing software makes all the difference to your final results.</p>
<p>In this section, we'll explore some of the best free image editors available to help elevate your design work and give it that professional touch. Image editing tools can be difficult to use, so we've also included some that are more straightforward.</p>
<h3>iLoveIMG Editor</h3>
<p>The iLoveIMG's Photo Editor is by far the easiest of these free photo editing software. It is a simple yet versatile tool with a range of editing options that allow you to draw on images and add more image files. Users can easily crop, resize, add filters, frames, and effects to add a professional finish to designs.</p>
<p>If you’re looking for a basic photo editor that’s easy and quick to use for some basic editing, then this is the perfect option.</p>
<img src="https://www.ilovepdf.com/storage/blog/205-1678103763-2.1-iLoveIMG-Edit-tool.png" alt="iLoveIMG Photo Editor" class="my-4 rounded-lg shadow-md" />
<h3>Photopea</h3>
<p>Acting as a close alternative to Photoshop, Photopea is an online tool that provides many design features, without the need to download any expensive software.</p>
<p>It's worth pointing out that as an online tool it may run slowly if you’re working with heavy editing tasks. Also, if you are used to other editing software then it will take some time to learn its features.</p>
<p>Despite these challenges, Photopea is a fantastic free editing tool for designers who want professional features to bring their creative visions to life.</p>
<img src="https://www.ilovepdf.com/storage/blog/205-1678103850-2.-Photopea.png" alt="Photopea Online Editor" class="my-4 rounded-lg shadow-md" />
<h3>GIMP</h3>
<p>GIMP is a fantastic open-source image editing software that provides powerful image editing tools and offers an impressive variety of file formats, all completely free.</p>
<p>The workspace is slightly cluttered and it can be difficult to navigate all of the features, especially for beginners, but once you’ve mastered the basics this is an amazing feature-packed photo editor and another free alternative to Photoshop.</p>
<h3>Adobe creative cloud (free trial)</h3>
<p>Adobe graphic design software isn’t the easiest if you’re just starting out, but it takes the top spot for the most in-depth software for image and video editing.</p>
<p>For professionals, this is the industry standard for quality editing, and within the Creative Cloud you have access to multiple Adobe products, including Photoshop, After Effects, and Premiere Pro just to name a few.</p>
<p>Perfect if you aren’t needing them long term, there are free trials for many of the tools. While a 7-day free trial is available, the software can be expensive if you’re looking for a longer-term editing solution.</p>
<h2>Font generators</h2>
<p>Welcome to the world of font generators. For anyone working or playing around with designs, typography plays a crucial role in making your work stand out with the right style.</p>
<p>Free font generators help you find custom typefaces for your projects without the need for extensive design knowledge and expensive font licenses. Experiment with different styles and letterforms until you find the perfect look for your design.</p>
<h3>Fontspring</h3>
<p>Fontspring offers multiple categories that help you find the right free font download. It is also simple to sort the fonts by ‘Most Favorited’ to see what’s trending, as well as 'Best Of’ lists to investigate the most popular selection from previous years.</p>
<p>Frustratingly, when browsing the fonts some are listed as containing free versions when in reality they are only available as icons, which is misleading. If you don’t mind spending time finding the free ones, this is a valuable resource.</p>
<img src="https://www.ilovepdf.com/storage/blog/205-1678105548-3.-Fontspring.png" alt="Fontspring Font Generator" class="my-4 rounded-lg shadow-md" />
<h3>WhatTheFont/MyFonts</h3>
<p>WhatTheFont (also known as MyFonts) has high-quality downloads that are searchable within useful categories. Are you trying to identify a font you’ve spotted? MyFonts can also scan an uploaded image to find and identify the font you want to identify.</p>
<p>Frustratingly, free fonts are often hidden among the paid options, requiring you to scroll through the listings to download the font you need. Despite this, MyFonts remains a great tool for anyone looking for a free font generator.</p>
<h3>Google Fonts</h3>
<p>Google Fonts provides an extremely popular free font browser that offers typography in multiple languages and design styles. There is a user-friendly interface that offers fonts that are free for personal and commercial use.</p>
<p>A drawback is that the range of types is not as diverse as other font browsers, with limited options within a chosen fonts style. If you're looking for a more specific font style, you may need to look elsewhere.</p>
<h2>Icon downloads</h2>
<p>Icons play a critical role in creating a professional and polished look for websites, mobile applications, and other digital platforms. In this section, we'll be exploring the best free icon downloads so you can find the perfect designs for your next project.</p>
<p>From modern designs and classic looks to simple social media icon downloads - the ability to browse and use royalty-free icons is key for any digital designer or marketer looking to create a cohesive brand experience.</p>
<p>We've compiled a list of the top free graphic design software that gives you quality icon libraries to complement your designs.</p>
<h3>Flaticon</h3>
<p>Flaticon gives users a robust library of high-quality designs, where you can find PNG, SVG, Android, and iOS versions of the most popular fonts. Selected fonts also have different styles with changing colors and contrast.</p>
<p>Free users are restricted to downloading certain icons as a PNG, and the SVG version of the icon is sometimes only available with the Premium service.</p>
<img src="https://www.ilovepdf.com/storage/blog/205-1678105567-4.-Flaticon.png" alt="Flaticon Icon Downloads" class="my-4 rounded-lg shadow-md" />
<h3>Noun Project</h3>
<p>The Noun Project is a well-designed platform that offers a more creative and inclusive range of free icons to what we’re used to.</p>
<p>With its user-friendly interface, easily find individual icons or browse through various icon collections to find the perfect fit for your project.</p>
<p>The basic free download option only provides icons in black, but the premium downloads are cost-effective and allow for more customization. If you’re looking for basic but creative and inclusive icons, then Noun Project is a great choice.</p>
<h3>Google Icons within Fonts</h3>
<p>We’re back to Google Fonts, but this time for downloading free icons. Google Icons offers an extensive library of high-quality icons that are perfect for UI design, allowing for the customization of Fill, Weight, Grade, and Optical Size.</p>
<p>Icons are available in SVG or PNG formats for download, as well as the information on the 'Variable Icon Font' configuration for CSS, making it easy for designers to integrate their icons into their web projects.</p>
<h2>3D & 2D Animation software</h2>
<p>Bring your ideas to life with 3D and 2D Animation software. Whether you're creating a short clip for a commercial, designing characters for a video game, or adding some movement to your graphics - free animation software takes your designs to the next level.</p>
<p>We’ve found some of the best animation software that published professionals and aspiring amateurs can all enjoy.</p>
<h3>Blender</h3>
<p>Boasting an intuitive interface, Blender animation software is a widely acclaimed free and open-source tool that’s best for intermediate or professional animators.</p>
<p>It’s loved for its 3D pipeline editing, including 3D and 2D animation, and has an impressive array of animation features that you’d expect to see in the best premium animators.</p>
<p>Despite some occasional lag and slow render times, the software is regularly updated and continues to receive improvements, making it one of the best free animation software options available.</p>
<p>With its versatile tools, Blender is widely used in the creation of animations, models, and artwork, providing a one-stop solution for artists and designers.</p>
<img src="https://www.ilovepdf.com/storage/blog/205-1678105589-5.-Blender.jpeg" alt="Blender Animation Software" class="my-4 rounded-lg shadow-md" />
<h3>Piskel</h3>
<p>Piskel is a perfect option for those just starting out with animation. As a beginner’s tool, the basic and straightforward interface makes it a breeze to use.</p>
<p>The focus of Piskel is on creating 2D animated pixel art and sprite animations, so it's a great choice for game designers and hobbyists.</p>
<p>This 2D animation software offers a wide range of tools and functions, including customizable color palettes, layers, frame management, and more. That being said, for more professional applications, it's unlikely to have all the features and tools required.</p>
<h3>Animaker</h3>
<p>Animaker is another tool that makes it easy to get started with 3D animation software. It has a lot of template characters and customization options that can build a professional final project, as well as sharing options that let you integrate it with other programs.</p>
<p>Within one free animation tool, you have everything you need to create your content within a single tool by adding music and effects, and even the option to create voiceovers from text.</p>
<p>It has various pricing plans if you find that the limited number of free version downloads aren’t enough.</p>
<h2>Find inspiration for your designs</h2>
<p>Stuck for inspiration? It isn’t easy creating content, and being able to keep your designs fresh and interesting will require finding inspiration for your projects.</p>
<p>When you know where to look, the internet is a creative goldmine that’s waiting to be explored. Kick off your next project by browsing the best design inspiration websites.</p>
<p>In this section, we'll outline interesting websites to look for design ideas, including some comments on the more professional sources that are more specifically aimed at graphic designers.</p>
<h3>Behance</h3>
<p>Behance is a leading online platform for graphic designers to showcase their work and connect with the design community. It offers a wealth of inspiration and opportunities for collaboration, with a diverse range of projects and designers to discover, and it has a more professional feel than Pinterest.</p>
<p>With its easy-to-use interface, Behance lets you search by Creative Tools, Colors, and Source Categories so you can narrow your search even further.</p>
<img src="https://www.ilovepdf.com/storage/blog/205-1678105849-7.-Behance-.png" alt="Behance for Design Inspiration" class="my-4 rounded-lg shadow-md" />
<h3>Pinterest</h3>
<p>Pinterest is a straightforward way to research, save, and send new ideas on whatever you’re working on. You can build a network of profiles that you enjoy to follow the latest updates from creators that inspire you, or go through current trending topics.</p>
<p>It also allows you to create boards for your own work, making it an excellent portfolio tool, as well as a research tool.</p>
<h3>Dribbble</h3>
<p>Dribbble is a popular platform with a focus on design. Each category shows trending designs and techniques, and like our other examples, it also provides the chance for graphic designers to share their work and get feedback from the design community.</p>
<p>Browse and follow your favorite designers to keep yourself inspired. When selecting a profile you can see their designs neatly organized into Projects and Collections, as well as the liked designs which have inspired them.</p>
<h2>Stock images</h2>
<p>Are you searching for free stock images? Not everyone has access to professional photography equipment, which is why high-quality stock images are so key for creative roles.</p>
<p>Finding copyright-free images can take up a lot of time that would be better spent elsewhere. This section will look at the best free stock images for commercial use that offer landscapes, people shots, graphics, illustrations. and more.</p>
<h3>Pexels</h3>
<p>Pexels has high-quality content that doesn’t leave you worrying about copyright issues. You can search for images and videos using different categories, but there are no advanced search features for more technical and specific content, so the results can sometimes be slightly repetitive.</p>
<p>In general, the design of the categories and popular collections could be improved to make browsing the stock photos a little more user-friendly. That being said, it’s easy to download the content you require without being bombarded with premium restrictions and payment obligations, which is a big plus.</p>
<img src="https://www.ilovepdf.com/storage/blog/205-1678106190-8.-Pexels.png" alt="Pexels Stock Images" class="my-4 rounded-lg shadow-md" />
<h3>Unsplash</h3>
<p>A fantastic resource for royalty-free, high-quality stock photos, Unsplash has a vast collection of over a million images. Easily browsable categories and a simple website can save you time when you’re looking for free image downloads.</p>
<p>Depending on your theme and niche, the variety of results can be limited, but for general topics it is worth your time. If you don’t have a budget for paid images, then this is a great source for professional content.</p>
<h3>Kaboompics</h3>
<p>From the get-go Kaboompics has a great design that draws you into the site. You can easily select the orientation from the search bar, there is the extremely useful feature of the color palette search also available from the main page, and you can include a custom aspect ratio when downloading.</p>
<p>While the library for Kaboompics isn’t as large as some of its competitors, the usability of the site and the quality of the free stock photos are fantastic. Available for commercial or personal use, you can edit, post, and use them as you require.</p>
<h2>File management</h2>
<p>File management is an essential aspect of graphic design, and having the right software can make all the difference in keeping your work organized and accessible.</p>
<p>Every designer knows the struggles of working with large image files and the compatibility issues that arise when using different image types.</p>
<p>Here we’ll be showcasing the best free file management software to keep your workflow streamlined and efficient. These software solutions are packed with features to keep your work organized, accessible, and secure.</p>
<h3>Compress PDF files with iLovePDF</h3>
<p>The Compress PDF tool is a lifesaver when it comes to helping you save, share, or design your portfolio. You can reduce the file size of your PDF files for free with this PDF compressor to make them easier to send, store, and upload.</p>
<p>Are you struggling to share or upload files because of large file sizes? Use the free Compress PDF tool to drastically make your files smaller and more manageable. This is especially useful for design students trying to submit their files for assessment.</p>
<img src="https://www.ilovepdf.com/storage/blog/205-1678110276-9.-iLovePDF-Compress-%281%29.png" alt="I Love PDFLY Compress PDF" class="my-4 rounded-lg shadow-md" />
<h3>iLoveIMG Compress Image tool</h3>
<p>This free image compressor takes your pictures and reduces the file size while keeping as much quality as possible. When you’re creating designs, large file sizes lead to web designers struggling with storage, upload issues, and slow loading times for website and online content—this is a perfect solution.</p>
<p>Quickly and easily reduce the size of your images with a user-friendly tool that can complete your task in under a minute from start to finish. It can also batch convert JPG to PDF along with the other image files it accepts, including PNG, SVG, and GIF.</p>
<h3>iLovePDF JPG to PDF converter</h3>
<p>Transform your JPG files into professional PDF documents with ease and precision, thanks to iLovePDF's free JPG to PDF converter.</p>
<p>Whether you're working with one file or a batch of JPGs, this fast and convenient tool will save you time and ensure your designs are ready for printing, presenting, or sharing in a format famed for its accuracy.</p>
<h3>iLovePDF/IMG Watermark tools</h3>
<p>Protect your valuable designs and ensure they are not used without your permission with the iLoveIMG and iLovePDF Watermark tools. With user-friendly interfaces, adding a custom watermark to your images or PDFs has never been easier.</p>
<p>Overall, it’s recommended that you use the iLovePDF tool for a wider range of features. The free watermark tools allow you to add a text box with editable fonts, sizes, color, and more.</p>
<p>Whether you're an artist, designer, photographer, or any other creative professional, these tools keep your designs protected.</p>
<h2>Bonus chapter: Simple design tools for content creation</h2>
<p>You don’t have to be a design expert to create content for social media that looks professional and creative. This section is focused on graphic design tools for beginners that can be used to create content across various platforms like Instagram, LinkedIn, and TikTok.</p>
<p>A lot of design software now has entire sections for the creation of this content, with sizes, templates, and pre-made features meaning you can create without being a Photoshop and video-editing expert.</p>
<h3>Canva</h3>
<p>Canva is an outstanding way to edit high-quality templates or create your designs completely from scratch. It is extremely easy to use, and boasts a huge variety collection of templates, images, and graphics that simplify the design process and save you time, with intuitive editing features that take no time at all to get your head around.</p>
<p>It offers a seamless and accessible design experience, enabling designers of all levels to effortlessly craft visually appealing graphics and visual content.</p>
<p>It has a section designed specifically for social media that enable you to work with the correct aspect ratio relative to the platform you want to post on.</p>
<img src="https://www.ilovepdf.com/storage/blog/205-1678110794-10.-Canva.png" alt="Canva Design Tool" class="my-4 rounded-lg shadow-md" />
<h3>Capcut</h3>
<p>Another user-friendly tool, Capcut is designed especially for creating professional videos for your social media content. It provides the tools to craft captivating and professional-looking videos that will grab the attention of your audience with very little previous experience.</p>
<p>The web version may experience some issues with lag, so downloading the app and creating videos directly from your mobile device is a good idea if you come across this problem.</p>`,image:"https://www.ilovepdf.com/storage/blog/205-1678104167-Graphic-Design-Software.jpg",author:"The I Love PDFLY Team",authorImage:"/logo.svg",tags:["Graphic Design","Software","Free Tools","AI","Productivity","Design"]},{slug:"how-to-convert-html-to-pdf",title:"How to convert HTML websites into PDF files",date:"August 3, 2025",excerpt:"Have you tried to download a webpage before, only to be left with a faulty file that's cut the most important graph in half? Use this online tool to accurately convert web pages into PDF documents.",content:`<h2>The Problem with Saving Webpages</h2>
<p>Have you ever tried to save an important webpage for offline use—like an online receipt, a travel itinerary, or a fascinating article—only to end up with a mess? Using the browser's "Save As" feature can result in broken layouts and missing images. Taking screenshots often means stitching together multiple images and losing the ability to select text. The "Print to PDF" function can be even worse, awkwardly cutting off content and ruining the formatting of tables and graphs.</p>

<h2>The Perfect Solution: HTML to PDF Conversion</h2>
<p>Our <a href="/#/html-to-pdf" class="text-brand-red hover:underline">HTML to PDF converter</a> is designed to solve this problem perfectly. It accurately captures the entire content of a live webpage—including all text, images, and layout elements—and preserves it in a single, high-quality PDF document. This method is incredibly useful for:</p>
<ul class="list-disc list-inside space-y-2 my-4">
    <li><strong>Archiving Articles:</strong> Save news articles or blog posts for offline reading or research.</li>
    <li><strong>Saving Online Receipts:</strong> Keep a clean, readable record of your online purchases.</li>
    <li><strong>Creating Offline Reading Material:</strong> Compile tutorials, guides, and documentation into a portable format.</li>
    <li><strong>Sharing Web Content:</strong> Share a static, unchangeable version of a webpage with colleagues or clients.</li>
</ul>

<h2>How to Convert a Webpage to PDF</h2>
<p>The process is incredibly simple and takes just a few seconds. Follow these steps:</p>
<ol class="list-decimal list-inside space-y-2 my-4">
    <li><strong>Find the webpage:</strong> Open the webpage you want to convert in your browser and copy its URL from the address bar.</li>
    <li><strong>Go to our tool:</strong> Navigate to the <a href="/#/html-to-pdf" class="text-brand-red hover:underline">HTML to PDF tool</a>.</li>
    <li><strong>Paste the URL:</strong> Paste the copied URL into the input field provided.</li>
    <li><strong>Click 'Convert to PDF':</strong> Our tool will instantly fetch the webpage, render it, and convert it into a perfectly formatted PDF.</li>
    <li><strong>Download your file:</strong> Your new PDF will be ready for download immediately.</li>
</ol>
<p>Say goodbye to awkward screenshots and incomplete printouts. With our HTML to PDF converter, you can reliably save any webpage as a clean, professional, and portable document.</p>`,image:"https://images.minitool.com/minitool.com/images/uploads/2021/04/html-to-pdf-thumbnail.png",author:"The I Love PDFLY Team",authorImage:"/logo.svg",tags:["HTML to PDF","Convert to PDF","Webpage to PDF","How To","Archive","Productivity"]},{slug:"how-to-add-password-to-pdf",title:"How to add a password to a PDF",date:"August 2, 2025",excerpt:'Find out how to keep your sensitive data secure by adding a password to your PDF document. In an age where data privacy is paramount, protecting your documents is more important than ever. Our "Protect PDF" tool offers a simple yet robust solution to encrypt your files.',content:`<h2>Why Add a Password to Your PDF?</h2>
<p>In an age where data privacy is paramount, protecting your documents is more important than ever. Whether you're sharing confidential business reports, sending personal identification, or archiving sensitive financial records, adding a password provides a critical layer of security. It ensures that only authorized individuals with the correct password can open and view the contents of your PDF file.</p>
<p>Password protection uses encryption to scramble the data within the PDF, making it unreadable without the key (your password). This is the most effective way to prevent unauthorized access and maintain confidentiality.</p>

<h2>How to Password Protect a PDF Online for Free</h2>
<p>Our <a href="/#/protect-pdf" class="text-brand-red hover:underline">Protect PDF tool</a> offers a simple, fast, and secure way to encrypt your files. Follow these easy steps:</p>
<ol class="list-decimal list-inside space-y-2 my-4">
    <li><strong>Go to the Protect PDF tool:</strong> Navigate to the tool page to get started.</li>
    <li><strong>Upload your PDF file:</strong> Select the PDF document you want to secure from your device, Google Drive, or Dropbox.</li>
    <li><strong>Set a strong password:</strong> In the options panel on the right, type your desired password. You will be asked to type it a second time to confirm and avoid typos. Choose a password that is strong and not easily guessable.</li>
    <li><strong>Click 'Protect PDF':</strong> Once you've set your password, click the button to start the encryption process.</li>
    <li><strong>Download your secure file:</strong> Your PDF is now password-protected. Click the download button to save it. Anyone who tries to open this file will now be prompted to enter the password you set.</li>
</ol>

<h2>Your Security is Our Priority</h2>
<p>We understand the importance of the documents you process with us. The entire password protection process is handled securely. Your files are uploaded over an encrypted connection, and they are automatically and permanently deleted from our servers within a few hours. This guarantees that your privacy is always respected.</p>
<p>Using our "Protect PDF" tool is the perfect way to share documents with peace of mind, knowing that your sensitive information is safe.</p>`,image:"https://www.ilovepdf.com/storage/blog/54-1623250400-Secure-remote-working@348w.jpeg",author:"The I Love PDFLY Team",authorImage:"/logo.svg",tags:["Protect PDF","Password","Security","Encryption","How To","Data Privacy"]},{slug:"are-digital-signatures-legally-binding",title:"Are digital signatures legally binding?",date:"August 1, 2025",excerpt:"Digital signatures are a top choice for cross-border business transactions. But are they legally binding? The short answer is yes, in many parts of the world. This guide explains the legal frameworks, the technology behind them, and how our Sign PDF tool can help.",content:`<h2>The Short Answer: Yes, They Are.</h2>
<p>In an increasingly digital world, signing documents electronically has become the norm. But a common question remains: are digital signatures actually legally binding? The short answer is yes, in most countries around the world, digital signatures carry the same legal weight as a traditional handwritten signature. Laws like the <strong>ESIGN Act</strong> in the United States and the <strong>eIDAS Regulation</strong> in the European Union have established solid legal frameworks that validate their use in commerce and legal proceedings.</p>

<h2>Understanding the Difference: Electronic vs. Digital Signatures</h2>
<p>While often used interchangeably, there's a key distinction between a standard "electronic signature" and a more secure "digital signature."</p>
<ul class="list-disc list-inside space-y-2 my-4">
    <li>An <strong>electronic signature</strong> can be as simple as a typed name at the end of an email or an image of a handwritten signature. It indicates intent to sign but has limited security.</li>
    <li>A <strong>digital signature</strong> is a highly secure type of electronic signature. It uses cryptographic technology to embed a unique, verifiable 'fingerprint' into the document. This makes it far more secure and legally robust.</li>
</ul>

<h2>The Three Pillars of a Secure Digital Signature</h2>
<p>A true digital signature provides three critical guarantees that make it legally sound:</p>
<ol class="list-decimal list-inside space-y-2 my-4">
    <li><strong>Authentication:</strong> It cryptographically verifies that the person signing is who they claim to be, preventing forgery.</li>
    <li><strong>Integrity:</strong> It creates a tamper-evident seal. If the document is altered in any way after being signed, the signature becomes invalid.</li>
    <li><strong>Non-repudiation:</strong> The cryptographic link between the signature and the document means the signer cannot later deny their involvement in the signing process.</li>
</ol>

<h2>How I Love PDFLY Helps</h2>
<p>Our <a href="/#/sign-pdf" class="text-brand-red hover:underline">Sign PDF tool</a> is designed to create secure and verifiable digital signatures. It provides a complete audit trail, including timestamps and IP addresses, which strengthens the legal standing of your signed documents. Whether you're signing a simple agreement or a critical business contract, our tool provides the security and validity you need.</p>

<h2>Final Recommendation</h2>
<p>While digital signatures are widely accepted, regulations can vary by jurisdiction and the nature of the document. For highly sensitive or regulated transactions, it's always a good practice to consult with a legal professional to ensure full compliance with local laws. For the vast majority of business and personal needs, a secure digital signature provides a reliable and legally binding solution.</p>`,image:"https://www.ilovepdf.com/storage/blog/43-1623746170-Digital-Signature@348w.jpeg",author:"The I Love PDFLY Team",authorImage:"/logo.svg",tags:["Digital Signature","eSign","Legally Binding","Security","Sign PDF","How To"]},{slug:"smart-ocr-tips-get-most-out-of-scanned-documents",title:"Smart OCR tips: how to get the most out of your scanned documents",date:"July 31, 2025",excerpt:"Boost your OCR results with smart scanning techniques. Learn how resolution, contrast, and language support affect text recognition accuracy. Optical Character Recognition (OCR) is a powerful technology, but its accuracy depends on the quality of the source image. This guide provides tips on how to scan your documents to achieve the best possible OCR results, ensuring your text is searchable and selectable with high fidelity.",content:`<h2>Why Scan Quality is Everything for OCR</h2>
<p>Optical Character Recognition (OCR) is a fantastic technology that transforms flat, non-interactive images of text (like a scanned document) into fully searchable, selectable, and editable text. It's the magic behind making your paper archives digital. However, the accuracy of OCR is highly dependent on one thing: the quality of the source scan. A blurry, skewed, or low-resolution scan will result in jumbled text and poor recognition. To get the most out of our <a href="/#/ocr-pdf" class="text-brand-red hover:underline">OCR PDF tool</a>, follow these smart scanning tips.</p>

<h2>1. Aim for the Right Resolution (DPI)</h2>
<p>DPI, or Dots Per Inch, is a measure of a scanner's resolution. For OCR, the sweet spot is generally <strong>300 DPI</strong>. Here’s why:</p>
<ul class="list-disc list-inside space-y-2 my-4">
    <li><strong>Too Low (e.g., 150 DPI):</strong> The characters might be too pixelated for the OCR engine to recognize them accurately, leading to errors.</li>
    <li><strong>Just Right (300 DPI):</strong> This provides enough detail for clear character recognition without creating an unnecessarily large file. It's the industry standard for archiving documents.</li>
    <li><strong>Too High (e.g., 600+ DPI):</strong> While it provides more detail, it often doesn't significantly improve OCR accuracy for standard text and results in a much larger file size, which takes longer to process.</li>
</ul>

<h2>2. Optimize Contrast and Brightness</h2>
<p>Clarity is key. The OCR engine works best when there is a sharp contrast between the text and the background. The ideal document is crisp black text on a clean white background.</p>
<ul class="list-disc list-inside space-y-2 my-4">
    <li><strong>Adjust Scanner Settings:</strong> Before scanning, use your scanner's preview function to adjust brightness and contrast. Increase the contrast to make the text darker and the background whiter.</li>
    <li><strong>Avoid Shadows and Stains:</strong> Ensure your document is flat on the scanner bed to avoid shadows. Stains, wrinkles, or highlighter marks can interfere with recognition, so use the cleanest copy of the document you can find.</li>
</ul>

<h2>3. Keep it Straight (Deskewing)</h2>
<p>A document that was scanned at an angle (skewed) can be difficult for an OCR engine to read. The lines of text should be perfectly horizontal.</p>
<ul class="list-disc list-inside space-y-2 my-4">
    <li><strong>Align Carefully:</strong> Take an extra second to make sure your paper is aligned perfectly with the guides on your scanner.</li>
    <li><strong>Use Auto-Straighten Features:</strong> Most modern scanners and our OCR tool have a "deskew" or "auto-straighten" feature. Make sure it's enabled to automatically correct slight misalignments.</li>
</ul>

<h2>4. Choose the Right Color Mode</h2>
<p>Your scanner will likely offer three modes: Color, Grayscale, and Black & White (Monochrome).</p>
<ul class="list-disc list-inside space-y-2 my-4">
    <li><strong>Black & White (Monochrome):</strong> This is the best option for simple, high-contrast text documents. It produces the smallest file size and the sharpest distinction between text and background.</li>
    <li><strong>Grayscale:</strong> Use this if your document has light-colored text or images with shades of gray that are important.</li>
    <li><strong>Color:</strong> Only use this mode if the color of the text or images is essential to the document's meaning. It produces the largest file size and can sometimes reduce contrast for standard black text.</li>
</ul>

<h2>5. Select the Correct Language</h2>
<p>An OCR engine uses a dictionary and character set specific to a language to achieve the best results. If you're scanning a document in French, telling the OCR tool that the language is French will allow it to recognize characters like 'é', 'à', and 'ç' correctly.</p>
<p>Our <a href="/#/ocr-pdf" class="text-brand-red hover:underline">OCR PDF tool</a> supports multiple languages. Always make sure you select the correct language from the options before starting the process to maximize accuracy.</p>

<h2>Conclusion: A Great Scan Means a Great Result</h2>
<p>By taking a few extra moments to prepare your documents and configure your scanner settings, you can dramatically improve the quality of your OCR results. A clean, high-contrast, 300 DPI scan will transform your paper documents into accurate, searchable, and highly usable digital files. Happy scanning!</p>`,image:"https://www.ilovepdf.com/storage/blog/49-1623244532-how-to-scan-and-convert-text@348w.jpeg",author:"The I Love PDFLY Team",authorImage:"/logo.svg",tags:["OCR","Scanning","Productivity","How To","Tips","Document Management"]},{slug:"how-to-edit-pdf-text-online",title:"How to edit text directly in your PDF files online",date:"July 30, 2025",excerpt:"Need to fix a typo or update a date in a PDF? Our advanced PDF editor makes it possible. This post walks you through the process, showing you how to select and edit text just like you would in a word processor, saving you the hassle of converting the file back and forth.",content:`<h2>The Challenge of Editing PDF Text</h2>
<p>PDFs are designed for reliability and consistency across platforms, which is great for sharing, but historically made them difficult to edit. Changing even a simple word often required converting the PDF to an editable format like Word, making the changes, and then converting it back to PDF—a process that can mess up formatting.</p>

<h2>Introducing the I Love PDFLY Editor: Edit Text Directly</h2>
<p>Our powerful PDF Editor tool changes the game. It allows you to edit text directly within your PDF file, just as you would in a word processor. Here's how it works and what makes it so effective:</p>
<ul class="list-disc list-inside space-y-2 my-4">
    <li><strong>Automatic Font Detection:</strong> When you select text to edit, our tool automatically detects the original font, size, and color, ensuring that your changes blend in seamlessly.</li>
    <li><strong>Full Formatting Control:</strong> Want to change the style? You have full control to customize the font, size, color, and apply bold or italic formatting to your new text.</li>
    <li><strong>Simple and Intuitive:</strong> No complex menus or tools to learn. Just upload your PDF, click on the text you want to change, and start typing.</li>
</ul>

<h2>How to Edit Text in a PDF Online for Free</h2>
<p>Follow these simple steps to edit the text in your PDF document in just a few clicks:</p>
<ol class="list-decimal list-inside space-y-2 my-4">
    <li>Go to the <a href="/#/edit-pdf" class="text-brand-red hover:underline">Edit PDF tool</a>.</li>
    <li>Upload your PDF file from your device, Google Drive, or Dropbox.</li>
    <li>Once the file is loaded in the editor, select the <strong>'Edit text'</strong> option from the toolbar.</li>
    <li>Click on the text you want to modify. A bounding box will appear around the text block.</li>
    <li>Start typing to replace the existing text. Use the formatting toolbar that appears to adjust the font, size, color, and style as needed.</li>
    <li>After making all your changes, click the 'Save' button.</li>
    <li>Download your edited PDF file.</li>
</ol>
<p>That's it! You've successfully edited your PDF without losing quality or wasting time on conversions. Whether you need to correct a small typo, update an address, or revise a paragraph, the I Love PDFLY Editor is the fastest and easiest way to get it done online.</p>`,image:"https://www.ilovepdf.com/storage/blog/41-1623230784-Add-text-to-PDF@348w.png",author:"The I Love PDFLY Team",authorImage:"/logo.svg",tags:["Edit PDF","PDF Editor","Text Editing","How To","Productivity","Online Tools"]},{slug:"ilovepdfly-web-vs-desktop-vs-mobile-which-is-for-you",title:"I Love PDFLY Web vs. Desktop vs. Mobile: Which One Is for You?",date:"July 29, 2025",excerpt:"Confused about which I Love PDFLY version to use? This guide breaks down the key differences between our Web, Desktop, and Mobile platforms. Discover which tool is best for your specific needs, whether you prioritize online convenience, offline power, or on-the-go document management.",content:`Choosing the right tool for the job is key to maximizing productivity. At I Love PDFLY, we offer three powerful platforms designed to fit different workflows: Web, Desktop, and Mobile. Each has its unique strengths, and understanding them will help you manage your documents more effectively than ever before. Let's break down the differences.

<h2>I Love PDFLY Web: Instant Access, Anywhere</h2>
<p>The Web version is the heart of our service. It's the ultimate tool for convenience and accessibility.</p>
<ul class="list-disc list-inside space-y-2 my-4">
    <li><strong>No Installation Needed:</strong> Access our full suite of tools directly from any web browser (Chrome, Firefox, Safari, etc.) on any operating system (Windows, Mac, Linux).</li>
    <li><strong>Client-Side Processing:</strong> For most tools, your files are processed directly in your browser, ensuring maximum privacy and speed as nothing needs to be uploaded.</li>
    <li><strong>Always Up-to-Date:</strong> You are always using the latest version with the newest features and security enhancements, no updates required.</li>
    <li><strong>Best For:</strong> Quick, one-off tasks, users who work on multiple devices, and those who prioritize privacy and don't want to install software.</li>
</ul>

<h2>I Love PDFLY Desktop: Power and Offline Performance</h2>
<p>For professionals and power users who handle large volumes of documents, the Desktop app is a game-changer.</p>
<ul class="list-disc list-inside space-y-2 my-4">
    <li><strong>Work Completely Offline:</strong> Process your documents without an internet connection. Your files never leave your computer, offering an unparalleled level of security.</li>
    <li><strong>Enhanced Performance:</strong> The Desktop app is optimized to use your computer's full processing power, making it ideal for large files and heavy-duty tasks like batch processing.</li>
    <li><strong>No File Size Limits:</strong> Handle massive PDF files without worrying about browser or internet limitations.</li>
    <li><strong>Best For:</strong> Professionals who need to process sensitive or large documents, users with unstable internet connections, and anyone who wants the fastest possible performance.</li>
</ul>

<h2>I Love PDFLY Mobile: Your On-the-Go PDF Toolkit</h2>
<p>Turn your smartphone into a powerful document management tool with the I Love PDFLY Mobile app.</p>
<ul class="list-disc list-inside space-y-2 my-4">
    <li><strong>PDF Scanner:</strong> Use your phone's camera to scan physical documents and save them as high-quality PDFs.</li>
    <li><strong>Edit and Annotate:</strong> Add text, highlight, draw, and comment on your PDFs directly from your phone or tablet.</li>
    <li><strong>Sign on the Go:</strong> Sign documents with your finger or a stylus, or request signatures from others, no matter where you are.</li>
    <li><strong>Cloud Integration:</strong> Easily import files from and save them to Google Drive and Dropbox for a seamless workflow between your devices.</li>
    <li><strong>Best For:</strong> Students, remote workers, and anyone who needs to manage documents while away from their desk.</li>
</ul>

<h2>Which One Should You Choose?</h2>
<p>The best version of I Love PDFLY depends on your needs:</p>
<ul class="list-disc list-inside space-y-2 my-4">
    <li>For <strong>ultimate convenience and accessibility</strong>, use the <strong>Web</strong> version.</li>
    <li>For <strong>maximum power, security, and offline work</strong>, download the <strong>Desktop</strong> app.</li>
    <li>For <strong>managing documents on the move</strong>, the <strong>Mobile</strong> app is your perfect companion.</li>
</ul>
<p>Many of our users find that a combination of the platforms works best, using each for what it does best. The choice is yours, and no matter which you pick, you'll be equipped with the best tools to handle any PDF task.</p>`,image:"https://www.ilovepdf.com/storage/blog/34-1623144469-Organize-PDF@348w.jpg",author:"The I Love PDFLY Team",authorImage:"/logo.svg",tags:["Web App","Desktop App","Mobile App","Productivity","PDF Tools","Comparison","Offline PDF","On-the-go"]},{slug:"introducing-ilovepdfly-chatgpt-custom-pdf-gpt",title:"Introducing I Love PDFLY + ChatGPT: The Custom PDF GPT",date:"July 28, 2025",excerpt:"Meet your new PDF assistant! I Love PDFLY integrates with ChatGPT, allowing you to summarize, translate, and ask questions about your documents using natural language. Upload any PDF and interact with it like never before, saving time and working smarter.",content:`Use ChatGPT as your PDF assistant with I Love PDFLY—no software needed. Just upload, describe, and go.

We are excited to announce an innovative integration that combines the power of our PDF tools with the intelligence of ChatGPT. Now you can summarize, translate, or ask questions about your PDF content using natural language. This feature is set to revolutionize how you interact with your documents.

Imagine you have a dense, 50-page research paper. Instead of spending hours reading it, you can simply upload it to our AI Assistant, and ask, "What are the key findings of this study?". Our tool will analyze the document and provide a concise summary in seconds.

This isn't just about saving time; it's about making information more accessible and allowing you to work smarter, not harder.

The integration is seamless. There are no complex settings or configurations. It's designed to be as intuitive as having a conversation. Whether you're a student preparing for an exam, a professional analyzing a report, or just someone curious about a document's contents, our AI Assistant is here to help.

We believe this is the future of document management, and we're thrilled to be at the forefront of this technology.`,image:"https://www.ilovepdf.com/storage/blog/310-1744202844-iLovePDF%27s-OpenAI-PDF-GPT.png",author:"The I Love PDFLY Team",authorImage:"/logo.svg",tags:["ChatGPT","AI Assistant","PDF GPT","Summarize PDF","Translate PDF","Productivity","New Feature"]},{slug:"see-result-2081-2082",title:"How to Check SEE Result 2081/2082?",date:"July 25, 2025",excerpt:"Eagerly awaiting your SEE (Secondary Education Examination) result for 2081/2082? You're in the right place! This comprehensive guide provides everything you need to check your NEB SEE result quickly, easily, and securely. We've compiled all the official websites, SMS services, and the complete grading system to help you and your guardians navigate the result-checking process without any stress.",content:`Eagerly awaiting your SEE (Secondary Education Examination) result for 2081/2082? You're in the right place! This comprehensive guide provides everything you need to check your NEB SEE result quickly, easily, and securely. We've compiled all the official websites, SMS services, and the complete grading system to help you and your guardians navigate the result-checking process without any stress. The National Examination Board (NEB) will be publishing the results soon, and this guide is your one-stop resource to get your score the moment it's live.

<a href="https://see.ntc.net.np/" target="_blank" rel="noopener noreferrer" class="inline-block bg-brand-red hover:bg-brand-red-dark text-white font-bold py-3 px-8 rounded-lg my-6 no-underline text-lg">Check SEE Result Now</a>

<h2>How to Check Your SEE Result 2081/2082</h2>
<p>There are multiple ways to check your result. Below are the most reliable methods provided by the NEB and other trusted organizations.</p>

<h3>1. Check SEE Result via Official Websites</h3>
<p>The fastest way to view your results online is through the official portals. Simply click on a link from the table below, and have your Symbol Number and Date of Birth ready.</p>

<div class="my-6 rounded-lg shadow-md overflow-hidden border border-gray-200 dark:border-gray-700">
  <table class="min-w-full border-collapse">
    <thead class="bg-gray-50 dark:bg-gray-800">
      <tr>
        <th scope="col" class="px-6 py-4 text-left text-sm font-semibold text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-700">Name of the Organization</th>
        <th scope="col" class="px-6 py-4 text-left text-sm font-semibold text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-700">Website</th>
      </tr>
    </thead>
    <tbody class="bg-white dark:bg-gray-900">
        <tr><td class="px-6 py-4 text-sm text-gray-800 dark:text-gray-200 border border-gray-300 dark:border-gray-700">Edusanjal</td><td class="px-6 py-4 text-sm border border-gray-300 dark:border-gray-700"><a href="http://see.edusanjal.com" target="_blank" rel="noopener noreferrer" class="text-brand-red hover:underline">see.edusanjal.com</a></td></tr>
        <tr><td class="px-6 py-4 text-sm text-gray-800 dark:text-gray-200 border border-gray-300 dark:border-gray-700">National Examination Board (NEB), Grade 10</td><td class="px-6 py-4 text-sm border border-gray-300 dark:border-gray-700"><a href="http://www.see.gov.np" target="_blank" rel="noopener noreferrer" class="text-brand-red hover:underline">www.see.gov.np</a></td></tr>
        <tr><td class="px-6 py-4 text-sm text-gray-800 dark:text-gray-200 border border-gray-300 dark:border-gray-700">National Examination Board (NEB), Sanothimi</td><td class="px-6 py-4 text-sm border border-gray-300 dark:border-gray-700"><a href="http://www.neb.gov.np" target="_blank" rel="noopener noreferrer" class="text-brand-red hover:underline">www.neb.gov.np</a></td></tr>
        <tr><td class="px-6 py-4 text-sm text-gray-800 dark:text-gray-200 border border-gray-300 dark:border-gray-700">Nepal Telecom</td><td class="px-6 py-4 text-sm border border-gray-300 dark:border-gray-700"><a href="http://www.see.ntc.net.np" target="_blank" rel="noopener noreferrer" class="text-brand-red hover:underline">www.see.ntc.net.np</a></td></tr>
        <tr><td class="px-6 py-4 text-sm text-gray-800 dark:text-gray-200 border border-gray-300 dark:border-gray-700">Ekantipur</td><td class="px-6 py-4 text-sm border border-gray-300 dark:border-gray-700"><a href="http://results.ekantipur.com" target="_blank" rel="noopener noreferrer" class="text-brand-red hover:underline">results.ekantipur.com</a></td></tr>
        <tr><td class="px-6 py-4 text-sm text-gray-800 dark:text-gray-200 border border-gray-300 dark:border-gray-700">The Connect Plus</td><td class="px-6 py-4 text-sm border border-gray-300 dark:border-gray-700"><a href="https://theconnectplus.com" target="_blank" rel="noopener noreferrer" class="text-brand-red hover:underline">https://theconnectplus.com</a></td></tr>
        <tr><td class="px-6 py-4 text-sm text-gray-800 dark:text-gray-200 border border-gray-300 dark:border-gray-700">E-Sewa</td><td class="px-6 py-4 text-sm border border-gray-300 dark:border-gray-700"><a href="http://see.esewa.com.np" target="_blank" rel="noopener noreferrer" class="text-brand-red hover:underline">see.esewa.com.np</a></td></tr>
        <tr><td class="px-6 py-4 text-sm text-gray-800 dark:text-gray-200 border border-gray-300 dark:border-gray-700">Khalti</td><td class="px-6 py-4 text-sm border border-gray-300 dark:border-gray-700"><a href="https://khalti.com/app" target="_blank" rel="noopener noreferrer" class="text-brand-red hover:underline">https://khalti.com/app</a></td></tr>
        <tr><td class="px-6 py-4 text-sm text-gray-800 dark:text-gray-200 border border-gray-300 dark:border-gray-700">College Info Nepal</td><td class="px-6 py-4 text-sm border border-gray-300 dark:border-gray-700"><a href="http://collegeinfonepal.com/see" target="_blank" rel="noopener noreferrer" class="text-brand-red hover:underline">collegeinfonepal.com/see</a></td></tr>
    </tbody>
  </table>
</div>

<h3>2. Check SEE Result via SMS</h3>
<p>For students without easy internet access, the SMS service is a reliable alternative. Follow these simple steps:</p>
<ol class="list-decimal list-inside space-y-2 my-4">
    <li>Open the messaging app on your phone.</li>
    <li>Compose a new message and type: <strong>SEE &lt;space&gt; Your_Symbol_Number</strong></li>
    <li>Send this message to <strong>1600</strong>.</li>
    <li>Example: If your symbol number is 1234567A, type <strong>SEE 1234567A</strong>.</li>
    <li>You will receive your result with GPA via SMS shortly.</li>
</ol>

<h3>3. Check SEE Result via IVR Service</h3>
<p>You can also listen to your result through the Interactive Voice Response (IVR) system from any Nepal Telecom phone.</p>
<ol class="list-decimal list-inside space-y-2 my-4">
    <li>Dial <strong>1601</strong> from your NTC mobile or landline.</li>
    <li>Follow the instructions provided by the automated system.</li>
    <li>Enter your symbol number when prompted to hear your result.</li>
</ol>

<h2>Understanding the SEE Grading System</h2>
<p>The SEE result is published using a letter grading system. It's important to understand what each grade means:</p>
<div class="overflow-x-auto my-4 rounded-lg border border-gray-200 dark:border-gray-700">
  <table class="min-w-full bg-white dark:bg-black">
    <thead class="bg-gray-100 dark:bg-gray-800">
      <tr>
        <th class="px-4 py-3 text-left font-semibold text-gray-700 dark:text-gray-200">Percentage Range</th>
        <th class="px-4 py-3 text-left font-semibold text-gray-700 dark:text-gray-200">Grade</th>
        <th class="px-4 py-3 text-left font-semibold text-gray-700 dark:text-gray-200">Grade Point</th>
        <th class="px-4 py-3 text-left font-semibold text-gray-700 dark:text-gray-200">Description</th>
      </tr>
    </thead>
    <tbody class="divide-y divide-gray-200 dark:divide-gray-700">
      <tr><td class="px-4 py-2">90 - 100</td><td class="px-4 py-2 font-bold">A+</td><td class="px-4 py-2">4.0</td><td class="px-4 py-2">Outstanding</td></tr>
      <tr><td class="px-4 py-2">80 - 89</td><td class="px-4 py-2 font-bold">A</td><td class="px-4 py-2">3.6</td><td class="px-4 py-2">Excellent</td></tr>
      <tr><td class="px-4 py-2">70 - 79</td><td class="px-4 py-2 font-bold">B+</td><td class="px-4 py-2">3.2</td><td class="px-4 py-2">Very Good</td></tr>
      <tr><td class="px-4 py-2">60 - 69</td><td class="px-4 py-2 font-bold">B</td><td class="px-4 py-2">2.8</td><td class="px-4 py-2">Good</td></tr>
      <tr><td class="px-4 py-2">50 - 59</td><td class="px-4 py-2 font-bold">C+</td><td class="px-4 py-2">2.4</td><td class="px-4 py-2">Satisfactory</td></tr>
      <tr><td class="px-4 py-2">40 - 49</td><td class="px-4 py-2 font-bold">C</td><td class="px-4 py-2">2.0</td><td class="px-4 py-2">Acceptable</td></tr>
      <tr><td class="px-4 py-2">35 - 39</td><td class="px-4 py-2 font-bold">D</td><td class="px-4 py-2">1.6</td><td class="px-4 py-2">Basic</td></tr>
      <tr><td class="px-4 py-2" colspan="4">Below 35% in theory subjects is considered 'Non-Graded (NG)'.</td></tr>
    </tbody>
  </table>
</div>

<p>We wish all SEE students the very best of luck with their results!</p>`,image:"https://ik.imagekit.io/fonepay/result%20copy.jpg?updatedAt=1753159229021",author:"The I Love PDFLY Team",authorImage:"/logo.svg",tags:["SEE Result","Class 10","Education","Nepal","Result 2082"]}],zq=({className:n})=>g.jsx("svg",{className:n,stroke:"currentColor",fill:"none",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})}),qq=({onOpenProfileImageModal:n,onOpenSearchModal:e,onOpenChangePasswordModal:t})=>{const[i,s]=M.useState(!1),[r,o]=M.useState(!1),[a,l]=M.useState(!1),[c,d]=M.useState(!1),[f,m]=M.useState(!1),[y,v]=M.useState(!1),[w,T]=M.useState(null),[x,P]=M.useState("main"),S=M.useRef(null),L=M.useRef(null),F=M.useRef(null),U=M.useRef(null),{theme:C,toggleTheme:A}=Hw(),{user:E,logout:D,auth:k}=Dr(),{locale:N,setLocale:R,t:q}=IE(),te=Kl(),W=k.currentUser?.providerData.some(H=>H.providerId==="password");M.useEffect(()=>{const H=()=>{const Ie=sessionStorage.getItem("isAdminAuthenticated")==="true";v(Ie)};return H(),window.addEventListener("storage",H),()=>{window.removeEventListener("storage",H)}},[]),M.useEffect(()=>{const H=Ie=>{S.current&&!S.current.contains(Ie.target)&&s(!1),L.current&&!L.current.contains(Ie.target)&&o(!1)};return document.addEventListener("mousedown",H),()=>{document.removeEventListener("mousedown",H)}},[]),M.useEffect(()=>(document.body.style.overflow=a?"hidden":"unset",()=>{document.body.style.overflow="unset"}),[a]);const K=()=>{s(!1),o(!1),l(!1),d(!1),m(!1),P("main"),T(null)},Ee=(H,Ie)=>{Ie.current&&(clearTimeout(Ie.current),Ie.current=null),H(!0)},me=(H,Ie)=>{Ie.current=window.setTimeout(()=>{H(!1)},200)},Et=io.filter(H=>H.category==="convert-to"),Ke=io.filter(H=>H.category==="convert-from"),Re=[{to:"/merge-pdf",labelKey:"header.merge_pdf"},{to:"/split-pdf",labelKey:"header.split_pdf"},{to:"/compress-pdf",labelKey:"header.compress_pdf"}],ge=M.useMemo(()=>new Map(io.map(H=>[H.id,H])),[]),kt=M.useMemo(()=>[{title:"ORGANIZE PDF",tools:["merge-pdf","split-pdf","organize-pdf","scan-to-pdf"]},{title:"OPTIMIZE PDF",tools:["compress-pdf","repair-pdf","ocr-pdf"]},{title:"CONVERT TO PDF",tools:["jpg-to-pdf","word-to-pdf","powerpoint-to-pdf","excel-to-pdf","html-to-pdf"]},{title:"CONVERT FROM PDF",tools:["pdf-to-jpg","pdf-to-word","pdf-to-powerpoint","pdf-to-excel","pdf-to-pdfa"]},{title:"EDIT PDF",tools:["rotate-pdf","page-numbers","watermark-pdf","edit-pdf"]},{title:"PDF SECURITY",tools:["unlock-pdf","protect-pdf","sign-pdf","redact-pdf","compare-pdf"]}],[]),at={products:[{title:"iLoveIMG",description:"Effortless image editing",href:"https://iloveimg.com",icon:Jc,iconColor:"bg-blue-500"},{title:"iLoveSign",description:"e-Signing made simple",href:"/#/",icon:Jc,iconColor:"bg-blue-600"},{title:"iLoveAPI",description:"Document automation for developers",to:"/developer",icon:Jc,iconColor:"bg-teal-500"}],integrations:{title:"Integrations",description:"Zapier, Make, Wordpress...",href:"/#/",icon:yL,bordered:!0},solutions:[{title:"Business",description:"Streamlined PDF editing and workflows for business teams",to:"/business",icon:vL,iconColor:"bg-red-500"}],applications:[{title:"Desktop App",description:"Available for Mac and Windows",href:"/#/",icon:pL,iconColor:"bg-red-600"},{title:"Mobile App",description:"Available for iOS and Android",href:"/#/",icon:mL,iconColor:"bg-red-700"}],links:[{title:"Pricing",to:"/pricing",icon:kE},{title:"Developer",to:"/developer",icon:hL},{title:"Security",to:"/security-policy",icon:gL},{title:"Features",to:"/features",icon:T_},{title:"About us",to:"/about",icon:Jc}],bottomLinks:[{title:"Help",onClick:()=>P("help"),icon:Xc},{title:"Admin Access",to:"/developer-access",icon:ME}]},Be=[{title:"FAQ",to:"/faq",icon:RE},{title:"Tools",to:"/how-to-use",icon:Qd},{title:"Legal & Privacy",to:"/legal",icon:NE},{title:"Contact",to:"/contact",icon:CE}],Ae=new Set(["resize-image","remove-background","crop-image","convert-to-jpg","convert-from-jpg","compress-image","watermark-image"]),vn=[{key:"organize",title:"Organize PDF"},{key:"optimize",title:"Optimize PDF"},{key:"convert-to",title:"Convert to PDF"},{key:"convert-from",title:"Convert from PDF"},{key:"edit",title:"Edit PDF"},{key:"security",title:"PDF Security"},{key:"business",title:"Business & AI Tools"}],pi=M.useMemo(()=>[...vn.map(H=>({title:H.title,tools:io.filter(Ie=>Ie.category===H.key&&!Ae.has(Ie.id))})),{title:"Image Tools",tools:io.filter(H=>Ae.has(H.id))}].filter(H=>H.tools.length>0),[]),Ot=({item:H})=>{const Ie=g.jsxs("div",{className:`flex items-start gap-3 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors group ${H.bordered?"border border-gray-200 dark:border-gray-700":""}`,children:[g.jsx("div",{className:`${H.iconColor?`${H.iconColor} p-1.5 rounded-md`:""}`,children:g.jsx(H.icon,{className:`h-5 w-5 ${H.iconColor?"text-white":"text-gray-500 dark:text-gray-400"}`})}),g.jsxs("div",{children:[g.jsx("p",{className:"font-semibold text-gray-800 dark:text-gray-200 text-sm",children:H.title}),g.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:H.description})]})]});return H.to?g.jsx(gt,{to:H.to,onClick:K,children:Ie}):g.jsx("a",{href:H.href,onClick:K,target:H.href.startsWith("http")?"_blank":"_self",rel:"noopener noreferrer",children:Ie})},_n=({item:H,isSubItem:Ie})=>{const Nt=g.jsxs("div",{className:"flex items-center gap-3 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors group",children:[g.jsx(H.icon,{className:`h-5 w-5 ${Ie?"":"text-gray-500 dark:text-gray-400"}`}),g.jsx("p",{className:"font-semibold text-gray-800 dark:text-gray-200 text-sm",children:H.title})]});return H.onClick?g.jsx("button",{onClick:H.onClick,className:"w-full text-left",children:Nt}):H.to?g.jsx(gt,{to:H.to,onClick:K,children:Nt}):g.jsx("a",{href:H.href,onClick:K,target:H.href.startsWith("http")?"_blank":"_self",rel:"noopener noreferrer",children:Nt})},At=I8,zi=At.slice(0,Math.ceil(At.length/3)),qi=At.slice(Math.ceil(At.length/3),2*Math.ceil(At.length/3)),Hi=At.slice(2*Math.ceil(At.length/3));return g.jsxs(g.Fragment,{children:[g.jsx("header",{className:"bg-white dark:bg-black border-b border-gray-200 dark:border-gray-800 sticky top-0 z-50",children:g.jsx("div",{className:"px-4 sm:px-6 py-2",children:g.jsxs("div",{className:"flex items-center justify-between",children:[g.jsxs("div",{className:"flex items-center space-x-4",children:[g.jsx("div",{className:"lg:hidden",children:g.jsx("button",{onClick:()=>l(!0),className:"text-gray-600 dark:text-gray-300 hover:text-brand-red dark:hover:text-brand-red transition-colors","aria-label":"Open main menu",title:"Open main menu",children:g.jsx(zq,{className:"h-6 w-6"})})}),g.jsx("a",{href:"/",className:"flex items-center text-gray-800 dark:text-gray-100",title:"I Love PDFLY Home",children:g.jsx(hA,{className:"h-8 md:h-10 w-auto"})}),g.jsxs("nav",{className:"hidden lg:flex items-center space-x-1",children:[Re.map(H=>g.jsx(gt,{to:H.to,onClick:K,title:q(H.labelKey),className:"px-2 2xl:px-3 py-2 text-gray-800 dark:text-gray-300 hover:text-brand-red dark:hover:text-brand-red transition-colors rounded-md text-xs 2xl:text-sm font-semibold text-center",children:q(H.labelKey)},H.to)),g.jsx(gt,{to:"/developer",onClick:K,title:"Developer API",className:"px-2 2xl:px-3 py-2 text-gray-800 dark:text-gray-300 hover:text-brand-red dark:hover:text-brand-red transition-colors rounded-md text-xs 2xl:text-sm font-semibold text-center",children:q("header.developer")}),g.jsxs("div",{className:"relative",onMouseEnter:()=>Ee(d,F),onMouseLeave:()=>me(d,F),children:[g.jsxs("button",{title:"Convert PDF Tools",className:"flex items-center px-2 2xl:px-3 py-2 text-gray-800 dark:text-gray-300 hover:text-brand-red dark:hover:text-brand-red transition-colors rounded-md text-xs 2xl:text-sm font-semibold",children:[g.jsx("span",{children:q("header.convert_pdf")}),g.jsx(b_,{className:`h-4 w-4 ml-1 transition-transform duration-200 ${c?"rotate-180":""}`})]}),g.jsx("div",{className:`absolute top-full left-1/2 -translate-x-1/2 mt-2 w-max bg-white dark:bg-black border border-gray-200 dark:border-gray-700 rounded-lg shadow-xl p-6 z-20 transition-all duration-200 ease-out origin-top ${c?"opacity-100 scale-100":"opacity-0 scale-95 pointer-events-none"}`,children:g.jsxs("div",{className:"grid grid-cols-2 gap-x-8",children:[g.jsxs("div",{children:[g.jsx("h4",{className:"px-2 pb-2 text-sm font-bold text-gray-500 dark:text-gray-400 border-b border-gray-200 dark:border-gray-700 uppercase",children:"Convert to PDF"}),g.jsx("div",{className:"mt-2 space-y-1",children:Et.map(H=>g.jsxs(gt,{to:`/${H.id}`,onClick:K,title:q(H.title),className:"flex items-center gap-3 p-2 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:[g.jsx(H.Icon,{className:`h-5 w-5 flex-shrink-0 ${H.textColor}`}),g.jsx("span",{className:"font-semibold text-sm whitespace-nowrap",children:q(H.title)})]},H.id))})]}),g.jsxs("div",{children:[g.jsx("h4",{className:"px-2 pb-2 text-sm font-bold text-gray-500 dark:text-gray-400 border-b border-gray-200 dark:border-gray-700 uppercase",children:"Convert from PDF"}),g.jsx("div",{className:"mt-2 space-y-1",children:Ke.map(H=>g.jsxs(gt,{to:`/${H.id}`,onClick:K,title:q(H.title),className:"flex items-center gap-3 p-2 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:[g.jsx(H.Icon,{className:`h-5 w-5 flex-shrink-0 ${H.textColor}`}),g.jsx("span",{className:"font-semibold text-sm whitespace-nowrap",children:q(H.title)})]},H.id))})]})]})})]}),g.jsxs("div",{onMouseEnter:()=>Ee(m,U),onMouseLeave:()=>me(m,U),children:[g.jsxs("button",{title:"All PDF Tools",className:"flex items-center px-2 2xl:px-3 py-2 text-red-600 dark:text-red-400 transition-colors rounded-md text-xs 2xl:text-sm font-semibold",children:[g.jsx("span",{children:q("header.all_pdf_tools")}),g.jsx(b_,{className:`h-4 w-4 ml-1 transition-transform duration-200 ${f?"rotate-180":""}`})]}),g.jsx("div",{className:`absolute top-full left-1/2 -translate-x-1/2 mt-2 w-max max-w-[calc(100vw-2rem)] bg-white dark:bg-black border border-gray-200 dark:border-gray-700 rounded-lg shadow-xl z-50 transition-all duration-200 ease-out origin-top ${f?"opacity-100 scale-100":"opacity-0 scale-95 pointer-events-none"} overflow-x-auto no-scrollbar`,children:g.jsx("div",{className:"p-6 grid grid-cols-6 gap-x-4",children:kt.map(H=>g.jsxs("div",{className:"pr-4 border-r border-gray-200 dark:border-gray-700 last:border-r-0",children:[g.jsx("h4",{className:"pb-2 text-sm font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:H.title}),g.jsx("div",{className:"mt-2 space-y-1",children:H.tools.map(Ie=>{const Nt=ge.get(Ie);return Nt?g.jsxs(gt,{to:`/${Nt.id}`,onClick:K,title:q(Nt.title),className:"flex items-center gap-3 p-2 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:[g.jsx(Nt.Icon,{className:`h-5 w-5 flex-shrink-0 ${Nt.textColor}`}),g.jsx("span",{className:"font-semibold text-sm",children:q(Nt.title)})]},Nt.id):null})})]},H.title))})})]})]})]}),g.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[g.jsx("button",{onClick:e,className:"text-gray-600 dark:text-gray-300 hover:text-brand-red dark:hover:text-brand-red transition-colors p-2 rounded-full","aria-label":"Search",title:"Search",children:g.jsx(SE,{className:"h-6 w-6"})}),g.jsx("button",{onClick:A,className:"text-gray-600 dark:text-gray-300 hover:text-brand-red dark:hover:text-brand-red transition-colors p-2 rounded-full","aria-label":"Toggle theme",title:"Toggle theme",children:C==="light"?g.jsx($8,{className:"h-6 w-6"}):g.jsx(G8,{className:"h-6 w-6"})}),E?g.jsxs("div",{className:"relative",ref:L,children:[g.jsx("button",{onClick:()=>o(!r),className:"block h-8 w-8 sm:h-10 sm:w-10 rounded-full overflow-hidden border-2 border-transparent hover:border-brand-red transition","aria-label":"Open user profile menu",title:"Open user profile menu",children:E.profileImage?g.jsx("img",{src:E.profileImage,alt:"Profile",className:"h-full w-full object-cover"}):g.jsx(Z8,{className:"h-full w-full text-gray-500 dark:text-gray-400"})}),r&&g.jsxs("div",{className:"absolute top-full right-0 mt-2 w-64 bg-white dark:bg-black border border-gray-200 dark:border-gray-700 rounded-lg shadow-xl py-2",children:[g.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700",children:[g.jsx("p",{className:"text-sm font-semibold text-gray-800 dark:text-gray-200",children:q("header.signed_in_as")}),g.jsxs("div",{className:"flex items-center justify-between mt-1",children:[g.jsx("p",{className:"text-sm font-bold text-gray-900 dark:text-white truncate",children:E.username}),E.isPremium&&g.jsxs("span",{className:"flex items-center gap-1 bg-yellow-100 text-yellow-800 text-xs font-semibold px-2 py-0.5 rounded-full border border-yellow-400 dark:bg-yellow-900/50 dark:text-yellow-300 dark:border-yellow-600",children:[g.jsx(sp,{className:"h-3 w-3"}),"Premium"]})]})]}),g.jsxs("div",{className:"py-1",children:[g.jsxs("button",{onClick:()=>{n(),K()},title:q("header.change_photo"),className:"w-full text-left flex items-center gap-3 px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 hover:text-brand-red transition-colors",children:[g.jsx(eL,{className:"h-5 w-5"}),g.jsx("span",{children:q("header.change_photo")})]}),g.jsxs("button",{onClick:()=>{te("/account-settings"),K()},title:q("header.account_settings"),className:"w-full text-left flex items-center gap-3 px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 hover:text-brand-red transition-colors",children:[g.jsx(fL,{className:"h-5 w-5"}),g.jsx("span",{children:q("header.account_settings")})]}),W&&g.jsxs("button",{onClick:()=>{t(),K()},title:q("header.change_password"),className:"w-full text-left flex items-center gap-3 px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 hover:text-brand-red transition-colors",children:[g.jsx(tL,{className:"h-5 w-5"}),g.jsx("span",{children:q("header.change_password")})]})]}),g.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 py-1",children:g.jsxs("button",{onClick:()=>{D(),K()},title:q("header.logout"),className:"w-full text-left flex items-center gap-3 px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 hover:text-brand-red transition-colors",children:[g.jsx(nL,{className:"h-5 w-5"}),g.jsx("span",{children:q("header.logout")})]})})]})]}):g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"hidden sm:flex items-center space-x-2 md:space-x-4",children:[g.jsx(gt,{to:"/login",title:q("header.login"),className:"text-gray-800 dark:text-gray-300 hover:text-brand-red dark:hover:text-brand-red transition-colors font-semibold px-2 text-sm",children:q("header.login")}),g.jsx(gt,{to:"/signup",title:q("header.signup"),className:"bg-brand-red hover:bg-brand-red-dark text-white font-bold py-1.5 px-3 text-sm rounded-md transition-colors",children:q("header.signup")})]}),g.jsx("div",{className:"sm:hidden",children:g.jsx(gt,{to:"/login",className:"text-gray-600 dark:text-gray-300 hover:text-brand-red","aria-label":"Login or sign up",title:"Login or sign up",children:g.jsx(es,{className:"h-7 w-7"})})})]}),g.jsxs("div",{className:"relative",ref:S,children:[g.jsx("button",{onClick:()=>s(!i),className:"text-gray-600 dark:text-gray-300 hover:text-brand-red dark:hover:text-brand-red transition-colors p-2 rounded-full","aria-label":"Open all tools and options",title:"Open all tools and options",children:g.jsx(T_,{className:"h-7 w-7 lg:h-8 lg:w-8"})}),i&&g.jsx("div",{className:"absolute top-full right-0 mt-2 z-20",children:g.jsxs("div",{className:"w-[calc(100vw-2rem)] max-w-sm md:max-w-2xl lg:max-w-[52rem] bg-white dark:bg-black border border-gray-200 dark:border-gray-800 rounded-lg shadow-2xl animate-fade-in-down overflow-y-auto max-h-[calc(100vh-100px)]",children:[x==="main"&&g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3",children:[g.jsxs("div",{className:"p-4 md:border-r border-gray-200 dark:border-gray-700",children:[g.jsx("h3",{className:"text-sm font-semibold uppercase text-gray-500 dark:text-gray-400 tracking-wider mb-4",children:"Other Products"}),g.jsxs("div",{className:"space-y-1",children:[at.products.map(H=>g.jsx(Ot,{item:H},H.title)),g.jsx("div",{className:"pt-2",children:g.jsx(Ot,{item:at.integrations})})]})]}),g.jsxs("div",{className:"p-4 md:border-r border-gray-200 dark:border-gray-700",children:[g.jsx("h3",{className:"text-sm font-semibold uppercase text-gray-500 dark:text-gray-400 tracking-wider mb-4",children:"Solutions"}),g.jsx("div",{className:"space-y-1",children:at.solutions.map(H=>g.jsx(Ot,{item:H},H.title))}),g.jsx("h3",{className:"text-sm font-semibold uppercase text-gray-500 dark:text-gray-400 tracking-wider mt-6 mb-2",children:"Applications"}),g.jsx("div",{className:"space-y-1",children:at.applications.map(H=>g.jsx(Ot,{item:H},H.title))})]}),g.jsxs("div",{className:"p-4",children:[g.jsx("div",{className:"space-y-1",children:at.links.map(H=>g.jsx(_n,{item:H},H.title))}),g.jsx("hr",{className:"my-4 border-gray-200 dark:border-gray-700"}),g.jsx("div",{className:"space-y-1",children:at.bottomLinks.map(H=>g.jsx(_n,{item:H},H.title))}),g.jsx("div",{className:"mt-4",children:g.jsxs("button",{onClick:()=>P("language"),className:"w-full flex items-center gap-3 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors group","aria-label":"Select language",title:"Select language",children:[g.jsx(Xc,{className:"h-5 w-5 text-gray-500 dark:text-gray-400"}),g.jsx("p",{className:"font-semibold text-gray-800 dark:text-gray-200 text-sm",children:"Select Language"})]})}),g.jsx("div",{className:"md:hidden",children:!E&&g.jsxs(g.Fragment,{children:[g.jsx("hr",{className:"my-4 border-gray-200 dark:border-gray-700"}),g.jsxs("div",{className:"space-y-2",children:[g.jsx(gt,{to:"/login",onClick:K,className:"block w-full text-center font-bold py-2 px-4 rounded-md border border-brand-red text-brand-red hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:q("header.login")}),g.jsx(gt,{to:"/signup",onClick:K,className:"block w-full text-center bg-brand-red hover:bg-brand-red-dark text-white font-bold py-2 px-4 rounded-md transition-colors",children:q("header.signup")})]})]})})]})]}),x==="help"&&g.jsxs("div",{className:"p-4",children:[g.jsxs("button",{onClick:()=>P("main"),className:"w-full flex items-center gap-3 p-2 mb-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 font-semibold text-gray-800 dark:text-gray-200 text-sm",children:[g.jsx(Xc,{className:"h-5 w-5"}),"Help"]}),g.jsx("div",{className:"space-y-1",children:Be.map(H=>g.jsx(_n,{item:H,isSubItem:!0},H.title))})]}),x==="language"&&g.jsxs("div",{className:"p-4",children:[g.jsxs("button",{onClick:()=>P("main"),className:"w-full flex items-center gap-3 p-2 mb-4 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 font-semibold text-gray-800 dark:text-gray-200 text-sm",children:[g.jsx(Xc,{className:"h-5 w-5"}),"Language"]}),g.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-1",children:[g.jsx("div",{children:zi.map(H=>g.jsxs("button",{onClick:()=>{R(H.code),K()},className:"w-full text-left flex items-center gap-2 p-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 text-sm whitespace-nowrap",children:[N===H.code?g.jsx(go,{className:"h-4 w-4 text-brand-red"}):g.jsx("div",{className:"w-4 h-4"}),g.jsx("span",{className:N===H.code?"font-bold":"",children:q(`languages.${H.code}`)})]},H.code))}),g.jsx("div",{children:qi.map(H=>g.jsxs("button",{onClick:()=>{R(H.code),K()},className:"w-full text-left flex items-center gap-2 p-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 text-sm whitespace-nowrap",children:[N===H.code?g.jsx(go,{className:"h-4 w-4 text-brand-red"}):g.jsx("div",{className:"w-4 h-4"}),g.jsx("span",{className:N===H.code?"font-bold":"",children:q(`languages.${H.code}`)})]},H.code))}),g.jsx("div",{children:Hi.map(H=>g.jsxs("button",{onClick:()=>{R(H.code),K()},className:"w-full text-left flex items-center gap-2 p-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 text-sm whitespace-nowrap",children:[N===H.code?g.jsx(go,{className:"h-4 w-4 text-brand-red"}):g.jsx("div",{className:"w-4 h-4"}),g.jsx("span",{className:N===H.code?"font-bold":"",children:q(`languages.${H.code}`)})]},H.code))})]})]})]})})]})]})]})})}),g.jsx("div",{className:`fixed inset-0 z-[60] bg-white dark:bg-black transition-transform duration-300 lg:hidden ${a?"translate-x-0":"-translate-x-full"}`,children:g.jsxs("div",{className:"flex flex-col h-full",children:[g.jsx("div",{className:"flex items-center justify-end p-4 border-b border-gray-200 dark:border-gray-700",children:g.jsx("button",{onClick:()=>l(!1),className:"text-gray-600 dark:text-gray-300","aria-label":"Close menu",title:"Close menu",children:g.jsx(DE,{className:"h-8 w-8"})})}),g.jsx("nav",{className:"flex-grow overflow-y-auto px-4 py-2",children:pi.map(H=>g.jsxs("div",{children:[g.jsx("h3",{className:"px-2 text-sm font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-2 mt-6 first:mt-0",children:q(H.title)}),g.jsx("div",{className:"space-y-1",children:H.tools.map(Ie=>g.jsxs(gt,{to:`/${Ie.id}`,onClick:K,className:"flex items-center gap-3 p-2 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:[g.jsx(Ie.Icon,{className:`h-6 w-6 flex-shrink-0 ${Ie.textColor}`}),g.jsx("span",{className:"font-semibold text-sm",children:q(Ie.title)})]},Ie.id))})]},H.title))})]})})]})},Hq=M.memo(qq),Gq=({onOpenCalendarModal:n,onOpenProblemReportModal:e})=>{const[t,i]=M.useState(""),[s,r]=M.useState(""),{t:o}=IE(),a=y=>{y.preventDefault(),t&&t.includes("@")?(r(`Thank you for subscribing, ${t}!`),i(""),setTimeout(()=>r(""),5e3)):(r("Please enter a valid email address."),setTimeout(()=>r(""),3e3))},l=[{path:"/merge-pdf",nameKey:"footer.top_tools.merge_pdf"},{path:"/compress-pdf",nameKey:"footer.top_tools.compress_pdf"},{path:"/jpg-to-pdf",nameKey:"footer.top_tools.jpg_to_pdf"},{path:"/edit-pdf",nameKey:"footer.top_tools.edit_pdf"},{path:"/pdf-to-word",nameKey:"footer.top_tools.pdf_to_word"}],c=[{path:"/education",nameKey:"footer.solution_links.education"},{path:"/business",nameKey:"footer.solution_links.business"},{path:"/how-to-use",nameKey:"footer.solution_links.how_to"}],d=[{path:"/about",nameKey:"footer.company_links.about"},{path:"/blog",nameKey:"footer.company_links.blog"},{path:"/press",nameKey:"footer.company_links.press"},{path:"/contact",nameKey:"footer.company_links.contact"},{path:"/ceo",nameKey:"footer.company_links.ceo_message"}],f=[{path:"/legal",nameKey:"footer.legal_links.legal_hub"},{path:"/privacy-policy",nameKey:"footer.legal_links.privacy"},{path:"/terms-of-service",nameKey:"footer.legal_links.terms"},{path:"/cookies-policy",nameKey:"footer.legal_links.cookies"},{path:"/user-data-deletion",nameKey:"footer.legal_links.data_deletion"}],m=g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"flex space-x-4 mt-5",children:[g.jsx("a",{href:"https://www.facebook.com/share/16sdjGNVGr/?mibextid=wwXIfr",target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-white transition-colors","aria-label":"Facebook",title:"Facebook",children:g.jsx(W8,{className:"h-6 w-6"})}),g.jsx("a",{href:"https://wa.me/message/JYA22CVSYSZ4N1",target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-white transition-colors","aria-label":"WhatsApp",title:"WhatsApp",children:g.jsx(j8,{className:"h-6 w-6"})}),g.jsx("a",{href:"https://www.youtube.com/@btmobilecare",target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-white transition-colors","aria-label":"YouTube",title:"YouTube",children:g.jsx(K8,{className:"h-6 w-6"})})]}),g.jsx("div",{className:"mt-6",children:g.jsx("p",{className:"text-gray-400 text-sm font-semibold",children:"App Coming Soon"})})]});return g.jsx("footer",{className:"bg-black text-white w-full",children:g.jsxs("div",{className:"px-6 py-12",children:[g.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-8",children:[g.jsxs("div",{className:"col-span-2 lg:col-span-2",children:[g.jsx("a",{href:"/",title:"I Love PDFLY Home",children:g.jsx(hA,{className:"h-10 w-auto mb-3",variant:"dark"})}),g.jsx("p",{className:"text-gray-400 text-sm max-w-xs",children:o("footer.slogan")}),m]}),g.jsxs("div",{children:[g.jsx("h3",{className:"font-bold text-lg mb-4",children:o("footer.tools")}),g.jsx("ul",{className:"space-y-2 text-gray-400 text-sm",children:l.map(y=>g.jsx("li",{children:g.jsx(gt,{to:y.path,title:o(y.nameKey),className:"hover:text-white",children:o(y.nameKey)})},y.path))})]}),g.jsxs("div",{children:[g.jsx("h3",{className:"font-bold text-lg mb-4",children:o("footer.solutions")}),g.jsx("ul",{className:"space-y-2 text-gray-400 text-sm",children:c.map(y=>g.jsx("li",{children:g.jsx(gt,{to:y.path,title:o(y.nameKey),className:"hover:text-white",children:o(y.nameKey)})},y.path))})]}),g.jsxs("div",{children:[g.jsx("h3",{className:"font-bold text-lg mb-4",children:o("footer.company")}),g.jsxs("ul",{className:"space-y-2 text-gray-400 text-sm",children:[d.map(y=>g.jsx("li",{children:g.jsx(gt,{to:y.path,title:o(y.nameKey),className:"hover:text-white",children:o(y.nameKey)})},y.path)),g.jsx("li",{children:g.jsx("button",{onClick:e,title:o("footer.company_links.report_problem"),className:"hover:text-white text-left",children:o("footer.company_links.report_problem")})})]})]}),g.jsxs("div",{children:[g.jsx("h3",{className:"font-bold text-lg mb-4",children:o("footer.legal")}),g.jsx("ul",{className:"space-y-2 text-gray-400 text-sm",children:f.map(y=>g.jsx("li",{children:g.jsx(gt,{to:y.path,title:o(y.nameKey),className:"hover:text-white",children:o(y.nameKey)})},y.path))})]})]}),g.jsxs("div",{className:"mt-12 pt-8 border-t border-gray-700 text-center",children:[g.jsx("h3",{className:"font-bold text-lg mb-2",children:o("footer.subscribe_title")}),g.jsx("p",{className:"text-gray-400 text-sm mb-4 max-w-md mx-auto",children:o("footer.subscribe_text")}),g.jsxs("form",{onSubmit:a,className:"flex flex-col sm:flex-row gap-2 max-w-md mx-auto",children:[g.jsx("input",{type:"email",placeholder:"Enter your email",value:t,onChange:y=>i(y.target.value),required:!0,"aria-label":"Email for newsletter",className:"flex-grow px-4 py-2 bg-gray-800 border border-gray-600 rounded-md text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-brand-red"}),g.jsx("button",{type:"submit",className:"bg-brand-red hover:bg-brand-red-dark text-white font-bold py-2 px-6 rounded-md transition-colors",children:o("footer.subscribe_button")})]}),s&&g.jsx("p",{className:`text-sm mt-3 ${s.includes("Thank you")?"text-green-400":"text-red-400"}`,children:s})]}),g.jsxs("div",{className:"mt-12 border-t border-gray-700 pt-6 flex flex-col sm:flex-row justify-between items-center text-gray-400 text-sm",children:[g.jsx("p",{className:"order-2 sm:order-1 mt-4 sm:mt-0",children:o("footer.copyright",{year:new Date().getFullYear()})}),g.jsx("div",{className:"order-1 sm:order-2",children:g.jsx(gt,{to:"/sitemap",title:"Sitemap",className:"hover:text-white transition-colors",children:"Sitemap"})})]})]})})},$q=M.memo(Gq),jq=()=>{const[n,e]=M.useState(!1),t=()=>{window.pageYOffset>300?e(!0):e(!1)},i=()=>{window.scrollTo({top:0,behavior:"smooth"})};return M.useEffect(()=>(window.addEventListener("scroll",t),()=>{window.removeEventListener("scroll",t)}),[]),g.jsx("button",{onClick:i,className:`fixed bottom-6 right-6 z-50 text-brand-red filter drop-shadow-lg hover:text-brand-red-dark transition-all duration-300 ease-in-out transform hover:scale-110 ${n?"opacity-100 scale-100":"opacity-0 scale-0"}`,"aria-label":"Scroll to top",title:"Scroll to top",children:g.jsx("svg",{className:"h-14 w-14",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M12 2C8.13 2 5 5.13 5 9v6c0 3.87 3.13 7 7 7s7-3.13 7-7V9c0-3.87-3.13-7-7-7zm0 2c2.76 0 5 2.24 5 5v6c0 2.76-2.24 5-5 5s-5-2.24-5-5V9c0-2.76 2.24-5 5-5zm-1 2v4h2V6h-2z"})})})};var Zh={exports:{}},ef,K1;function Wq(){if(K1)return ef;K1=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return ef=n,ef}var tf,Y1;function Kq(){if(Y1)return tf;Y1=1;var n=Wq();function e(){}function t(){}return t.resetWarningCache=e,tf=function(){function i(o,a,l,c,d,f){if(f!==n){var m=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw m.name="Invariant Violation",m}}i.isRequired=i;function s(){return i}var r={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:s,element:i,elementType:i,instanceOf:s,node:i,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:t,resetWarningCache:e};return r.PropTypes=r,r},tf}var J1;function Yq(){return J1||(J1=1,Zh.exports=Kq()()),Zh.exports}var Jq=Yq();const Oe=ad(Jq);function Vr(n,e,t,i){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(d){try{c(i.next(d))}catch(f){o(f)}}function l(d){try{c(i.throw(d))}catch(f){o(f)}}function c(d){d.done?r(d.value):s(d.value).then(a,l)}c((i=i.apply(n,e||[])).next())})}const Xq=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function $o(n,e,t){const i=Qq(n),{webkitRelativePath:s}=n,r=typeof e=="string"?e:typeof s=="string"&&s.length>0?s:`./${n.name}`;return typeof i.path!="string"&&X1(i,"path",r),X1(i,"relativePath",r),i}function Qq(n){const{name:e}=n;if(e&&e.lastIndexOf(".")!==-1&&!n.type){const i=e.split(".").pop().toLowerCase(),s=Xq.get(i);s&&Object.defineProperty(n,"type",{value:s,writable:!1,configurable:!1,enumerable:!0})}return n}function X1(n,e,t){Object.defineProperty(n,e,{value:t,writable:!1,configurable:!1,enumerable:!0})}const Zq=[".DS_Store","Thumbs.db"];function eH(n){return Vr(this,void 0,void 0,function*(){return nd(n)&&tH(n.dataTransfer)?rH(n.dataTransfer,n.type):nH(n)?iH(n):Array.isArray(n)&&n.every(e=>"getFile"in e&&typeof e.getFile=="function")?sH(n):[]})}function tH(n){return nd(n)}function nH(n){return nd(n)&&nd(n.target)}function nd(n){return typeof n=="object"&&n!==null}function iH(n){return gp(n.target.files).map(e=>$o(e))}function sH(n){return Vr(this,void 0,void 0,function*(){return(yield Promise.all(n.map(t=>t.getFile()))).map(t=>$o(t))})}function rH(n,e){return Vr(this,void 0,void 0,function*(){if(n.items){const t=gp(n.items).filter(s=>s.kind==="file");if(e!=="drop")return t;const i=yield Promise.all(t.map(oH));return Q1(fA(i))}return Q1(gp(n.files).map(t=>$o(t)))})}function Q1(n){return n.filter(e=>Zq.indexOf(e.name)===-1)}function gp(n){if(n===null)return[];const e=[];for(let t=0;t<n.length;t++){const i=n[t];e.push(i)}return e}function oH(n){if(typeof n.webkitGetAsEntry!="function")return Z1(n);const e=n.webkitGetAsEntry();return e&&e.isDirectory?pA(e):Z1(n,e)}function fA(n){return n.reduce((e,t)=>[...e,...Array.isArray(t)?fA(t):[t]],[])}function Z1(n,e){return Vr(this,void 0,void 0,function*(){var t;if(globalThis.isSecureContext&&typeof n.getAsFileSystemHandle=="function"){const r=yield n.getAsFileSystemHandle();if(r===null)throw new Error(`${n} is not a File`);if(r!==void 0){const o=yield r.getFile();return o.handle=r,$o(o)}}const i=n.getAsFile();if(!i)throw new Error(`${n} is not a File`);return $o(i,(t=e?.fullPath)!==null&&t!==void 0?t:void 0)})}function aH(n){return Vr(this,void 0,void 0,function*(){return n.isDirectory?pA(n):lH(n)})}function pA(n){const e=n.createReader();return new Promise((t,i)=>{const s=[];function r(){e.readEntries(o=>Vr(this,void 0,void 0,function*(){if(o.length){const a=Promise.all(o.map(aH));s.push(a),r()}else try{const a=yield Promise.all(s);t(a)}catch(a){i(a)}}),o=>{i(o)})}r()})}function lH(n){return Vr(this,void 0,void 0,function*(){return new Promise((e,t)=>{n.file(i=>{const s=$o(i,n.fullPath);e(s)},i=>{t(i)})})})}var eu={},ew;function cH(){return ew||(ew=1,eu.__esModule=!0,eu.default=function(n,e){if(n&&e){var t=Array.isArray(e)?e:e.split(",");if(t.length===0)return!0;var i=n.name||"",s=(n.type||"").toLowerCase(),r=s.replace(/\/.*$/,"");return t.some(function(o){var a=o.trim().toLowerCase();return a.charAt(0)==="."?i.toLowerCase().endsWith(a):a.endsWith("/*")?r===a.replace(/\/.*$/,""):s===a})}return!0}),eu}var uH=cH();const nf=ad(uH);function tw(n){return fH(n)||hH(n)||gA(n)||dH()}function dH(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hH(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function fH(n){if(Array.isArray(n))return yp(n)}function nw(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,i)}return t}function iw(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?nw(Object(t),!0).forEach(function(i){mA(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):nw(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function mA(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function $l(n,e){return gH(n)||mH(n,e)||gA(n,e)||pH()}function pH(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gA(n,e){if(n){if(typeof n=="string")return yp(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return yp(n,e)}}function yp(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function mH(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var i=[],s=!0,r=!1,o,a;try{for(t=t.call(n);!(s=(o=t.next()).done)&&(i.push(o.value),!(e&&i.length===e));s=!0);}catch(l){r=!0,a=l}finally{try{!s&&t.return!=null&&t.return()}finally{if(r)throw a}}return i}}function gH(n){if(Array.isArray(n))return n}var yH=typeof nf=="function"?nf:nf.default,vH="file-invalid-type",_H="file-too-large",wH="file-too-small",bH="too-many-files",TH=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",t=e.split(","),i=t.length>1?"one of ".concat(t.join(", ")):t[0];return{code:vH,message:"File type must be ".concat(i)}},sw=function(e){return{code:_H,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},rw=function(e){return{code:wH,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},xH={code:bH,message:"Too many files"};function yA(n,e){var t=n.type==="application/x-moz-file"||yH(n,e);return[t,t?null:TH(e)]}function vA(n,e,t){if(tr(n.size))if(tr(e)&&tr(t)){if(n.size>t)return[!1,sw(t)];if(n.size<e)return[!1,rw(e)]}else{if(tr(e)&&n.size<e)return[!1,rw(e)];if(tr(t)&&n.size>t)return[!1,sw(t)]}return[!0,null]}function tr(n){return n!=null}function EH(n){var e=n.files,t=n.accept,i=n.minSize,s=n.maxSize,r=n.multiple,o=n.maxFiles,a=n.validator;return!r&&e.length>1||r&&o>=1&&e.length>o?!1:e.every(function(l){var c=yA(l,t),d=$l(c,1),f=d[0],m=vA(l,i,s),y=$l(m,1),v=y[0],w=a?a(l):null;return f&&v&&!w})}function id(n){return typeof n.isPropagationStopped=="function"?n.isPropagationStopped():typeof n.cancelBubble<"u"?n.cancelBubble:!1}function tu(n){return n.dataTransfer?Array.prototype.some.call(n.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!n.target&&!!n.target.files}function ow(n){n.preventDefault()}function AH(n){return n.indexOf("MSIE")!==-1||n.indexOf("Trident/")!==-1}function IH(n){return n.indexOf("Edge/")!==-1}function CH(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return AH(n)||IH(n)}function jn(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return function(i){for(var s=arguments.length,r=new Array(s>1?s-1:0),o=1;o<s;o++)r[o-1]=arguments[o];return e.some(function(a){return!id(i)&&a&&a.apply(void 0,[i].concat(r)),id(i)})}}function SH(){return"showOpenFilePicker"in window}function PH(n){if(tr(n)){var e=Object.entries(n).filter(function(t){var i=$l(t,2),s=i[0],r=i[1],o=!0;return _A(s)||(console.warn('Skipped "'.concat(s,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),o=!1),(!Array.isArray(r)||!r.every(wA))&&(console.warn('Skipped "'.concat(s,'" because an invalid file extension was provided.')),o=!1),o}).reduce(function(t,i){var s=$l(i,2),r=s[0],o=s[1];return iw(iw({},t),{},mA({},r,o))},{});return[{description:"Files",accept:e}]}return n}function RH(n){if(tr(n))return Object.entries(n).reduce(function(e,t){var i=$l(t,2),s=i[0],r=i[1];return[].concat(tw(e),[s],tw(r))},[]).filter(function(e){return _A(e)||wA(e)}).join(",")}function kH(n){return n instanceof DOMException&&(n.name==="AbortError"||n.code===n.ABORT_ERR)}function NH(n){return n instanceof DOMException&&(n.name==="SecurityError"||n.code===n.SECURITY_ERR)}function _A(n){return n==="audio/*"||n==="video/*"||n==="image/*"||n==="text/*"||n==="application/*"||/\w+\/[-+.\w]+/g.test(n)}function wA(n){return/^.*\.[\w]+$/.test(n)}var MH=["children"],DH=["open"],LH=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],FH=["refKey","onChange","onClick"];function VH(n){return BH(n)||UH(n)||bA(n)||OH()}function OH(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function UH(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function BH(n){if(Array.isArray(n))return vp(n)}function sf(n,e){return HH(n)||qH(n,e)||bA(n,e)||zH()}function zH(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bA(n,e){if(n){if(typeof n=="string")return vp(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return vp(n,e)}}function vp(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function qH(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var i=[],s=!0,r=!1,o,a;try{for(t=t.call(n);!(s=(o=t.next()).done)&&(i.push(o.value),!(e&&i.length===e));s=!0);}catch(l){r=!0,a=l}finally{try{!s&&t.return!=null&&t.return()}finally{if(r)throw a}}return i}}function HH(n){if(Array.isArray(n))return n}function aw(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,i)}return t}function Ze(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?aw(Object(t),!0).forEach(function(i){_p(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):aw(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function _p(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function sd(n,e){if(n==null)return{};var t=GH(n,e),i,s;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}function GH(n,e){if(n==null)return{};var t={},i=Object.keys(n),s,r;for(r=0;r<i.length;r++)s=i[r],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var Rg=M.forwardRef(function(n,e){var t=n.children,i=sd(n,MH),s=xA(i),r=s.open,o=sd(s,DH);return M.useImperativeHandle(e,function(){return{open:r}},[r]),bo.createElement(M.Fragment,null,t(Ze(Ze({},o),{},{open:r})))});Rg.displayName="Dropzone";var TA={disabled:!1,getFilesFromEvent:eH,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};Rg.defaultProps=TA;Rg.propTypes={children:Oe.func,accept:Oe.objectOf(Oe.arrayOf(Oe.string)),multiple:Oe.bool,preventDropOnDocument:Oe.bool,noClick:Oe.bool,noKeyboard:Oe.bool,noDrag:Oe.bool,noDragEventsBubbling:Oe.bool,minSize:Oe.number,maxSize:Oe.number,maxFiles:Oe.number,disabled:Oe.bool,getFilesFromEvent:Oe.func,onFileDialogCancel:Oe.func,onFileDialogOpen:Oe.func,useFsAccessApi:Oe.bool,autoFocus:Oe.bool,onDragEnter:Oe.func,onDragLeave:Oe.func,onDragOver:Oe.func,onDrop:Oe.func,onDropAccepted:Oe.func,onDropRejected:Oe.func,onError:Oe.func,validator:Oe.func};var wp={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function xA(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=Ze(Ze({},TA),n),t=e.accept,i=e.disabled,s=e.getFilesFromEvent,r=e.maxSize,o=e.minSize,a=e.multiple,l=e.maxFiles,c=e.onDragEnter,d=e.onDragLeave,f=e.onDragOver,m=e.onDrop,y=e.onDropAccepted,v=e.onDropRejected,w=e.onFileDialogCancel,T=e.onFileDialogOpen,x=e.useFsAccessApi,P=e.autoFocus,S=e.preventDropOnDocument,L=e.noClick,F=e.noKeyboard,U=e.noDrag,C=e.noDragEventsBubbling,A=e.onError,E=e.validator,D=M.useMemo(function(){return RH(t)},[t]),k=M.useMemo(function(){return PH(t)},[t]),N=M.useMemo(function(){return typeof T=="function"?T:lw},[T]),R=M.useMemo(function(){return typeof w=="function"?w:lw},[w]),q=M.useRef(null),te=M.useRef(null),W=M.useReducer($H,wp),K=sf(W,2),Ee=K[0],me=K[1],Et=Ee.isFocused,Ke=Ee.isFileDialogActive,Re=M.useRef(typeof window<"u"&&window.isSecureContext&&x&&SH()),ge=function(){!Re.current&&Ke&&setTimeout(function(){if(te.current){var ce=te.current.files;ce.length||(me({type:"closeDialog"}),R())}},300)};M.useEffect(function(){return window.addEventListener("focus",ge,!1),function(){window.removeEventListener("focus",ge,!1)}},[te,Ke,R,Re]);var kt=M.useRef([]),at=function(ce){q.current&&q.current.contains(ce.target)||(ce.preventDefault(),kt.current=[])};M.useEffect(function(){return S&&(document.addEventListener("dragover",ow,!1),document.addEventListener("drop",at,!1)),function(){S&&(document.removeEventListener("dragover",ow),document.removeEventListener("drop",at))}},[q,S]),M.useEffect(function(){return!i&&P&&q.current&&q.current.focus(),function(){}},[q,P,i]);var Be=M.useCallback(function(Q){A?A(Q):console.error(Q)},[A]),Ae=M.useCallback(function(Q){Q.preventDefault(),Q.persist(),Gi(Q),kt.current=[].concat(VH(kt.current),[Q.target]),tu(Q)&&Promise.resolve(s(Q)).then(function(ce){if(!(id(Q)&&!C)){var we=ce.length,Se=we>0&&EH({files:ce,accept:D,minSize:o,maxSize:r,multiple:a,maxFiles:l,validator:E}),It=we>0&&!Se;me({isDragAccept:Se,isDragReject:It,isDragActive:!0,type:"setDraggedFiles"}),c&&c(Q)}}).catch(function(ce){return Be(ce)})},[s,c,Be,C,D,o,r,a,l,E]),vn=M.useCallback(function(Q){Q.preventDefault(),Q.persist(),Gi(Q);var ce=tu(Q);if(ce&&Q.dataTransfer)try{Q.dataTransfer.dropEffect="copy"}catch{}return ce&&f&&f(Q),!1},[f,C]),pi=M.useCallback(function(Q){Q.preventDefault(),Q.persist(),Gi(Q);var ce=kt.current.filter(function(Se){return q.current&&q.current.contains(Se)}),we=ce.indexOf(Q.target);we!==-1&&ce.splice(we,1),kt.current=ce,!(ce.length>0)&&(me({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),tu(Q)&&d&&d(Q))},[q,d,C]),Ot=M.useCallback(function(Q,ce){var we=[],Se=[];Q.forEach(function(It){var $i=yA(It,D),mi=sf($i,2),fa=mi[0],gi=mi[1],Ur=vA(It,o,r),Us=sf(Ur,2),Bs=Us[0],pa=Us[1],ma=E?E(It):null;if(fa&&Bs&&!ma)we.push(It);else{var zs=[gi,pa];ma&&(zs=zs.concat(ma)),Se.push({file:It,errors:zs.filter(function(Tc){return Tc})})}}),(!a&&we.length>1||a&&l>=1&&we.length>l)&&(we.forEach(function(It){Se.push({file:It,errors:[xH]})}),we.splice(0)),me({acceptedFiles:we,fileRejections:Se,isDragReject:Se.length>0,type:"setFiles"}),m&&m(we,Se,ce),Se.length>0&&v&&v(Se,ce),we.length>0&&y&&y(we,ce)},[me,a,D,o,r,l,m,y,v,E]),_n=M.useCallback(function(Q){Q.preventDefault(),Q.persist(),Gi(Q),kt.current=[],tu(Q)&&Promise.resolve(s(Q)).then(function(ce){id(Q)&&!C||Ot(ce,Q)}).catch(function(ce){return Be(ce)}),me({type:"reset"})},[s,Ot,Be,C]),At=M.useCallback(function(){if(Re.current){me({type:"openDialog"}),N();var Q={multiple:a,types:k};window.showOpenFilePicker(Q).then(function(ce){return s(ce)}).then(function(ce){Ot(ce,null),me({type:"closeDialog"})}).catch(function(ce){kH(ce)?(R(ce),me({type:"closeDialog"})):NH(ce)?(Re.current=!1,te.current?(te.current.value=null,te.current.click()):Be(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):Be(ce)});return}te.current&&(me({type:"openDialog"}),N(),te.current.value=null,te.current.click())},[me,N,R,x,Ot,Be,k,a]),zi=M.useCallback(function(Q){!q.current||!q.current.isEqualNode(Q.target)||(Q.key===" "||Q.key==="Enter"||Q.keyCode===32||Q.keyCode===13)&&(Q.preventDefault(),At())},[q,At]),qi=M.useCallback(function(){me({type:"focus"})},[]),Hi=M.useCallback(function(){me({type:"blur"})},[]),H=M.useCallback(function(){L||(CH()?setTimeout(At,0):At())},[L,At]),Ie=function(ce){return i?null:ce},Nt=function(ce){return F?null:Ie(ce)},Os=function(ce){return U?null:Ie(ce)},Gi=function(ce){C&&ce.stopPropagation()},bc=M.useMemo(function(){return function(){var Q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ce=Q.refKey,we=ce===void 0?"ref":ce,Se=Q.role,It=Q.onKeyDown,$i=Q.onFocus,mi=Q.onBlur,fa=Q.onClick,gi=Q.onDragEnter,Ur=Q.onDragOver,Us=Q.onDragLeave,Bs=Q.onDrop,pa=sd(Q,LH);return Ze(Ze(_p({onKeyDown:Nt(jn(It,zi)),onFocus:Nt(jn($i,qi)),onBlur:Nt(jn(mi,Hi)),onClick:Ie(jn(fa,H)),onDragEnter:Os(jn(gi,Ae)),onDragOver:Os(jn(Ur,vn)),onDragLeave:Os(jn(Us,pi)),onDrop:Os(jn(Bs,_n)),role:typeof Se=="string"&&Se!==""?Se:"presentation"},we,q),!i&&!F?{tabIndex:0}:{}),pa)}},[q,zi,qi,Hi,H,Ae,vn,pi,_n,F,U,i]),hh=M.useCallback(function(Q){Q.stopPropagation()},[]),ha=M.useMemo(function(){return function(){var Q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ce=Q.refKey,we=ce===void 0?"ref":ce,Se=Q.onChange,It=Q.onClick,$i=sd(Q,FH),mi=_p({accept:D,multiple:a,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:Ie(jn(Se,_n)),onClick:Ie(jn(It,hh)),tabIndex:-1},we,te);return Ze(Ze({},mi),$i)}},[te,t,a,_n,i]);return Ze(Ze({},Ee),{},{isFocused:Et&&!i,getRootProps:bc,getInputProps:ha,rootRef:q,inputRef:te,open:Ie(At)})}function $H(n,e){switch(e.type){case"focus":return Ze(Ze({},n),{},{isFocused:!0});case"blur":return Ze(Ze({},n),{},{isFocused:!1});case"openDialog":return Ze(Ze({},wp),{},{isFileDialogActive:!0});case"closeDialog":return Ze(Ze({},n),{},{isFileDialogActive:!1});case"setDraggedFiles":return Ze(Ze({},n),{},{isDragActive:e.isDragActive,isDragAccept:e.isDragAccept,isDragReject:e.isDragReject});case"setFiles":return Ze(Ze({},n),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections,isDragReject:e.isDragReject});case"reset":return Ze({},wp);default:return n}}function lw(){}const jH=({isOpen:n,onClose:e})=>{const[t,i]=M.useState(null),[s,r]=M.useState(null),[o,a]=M.useState(""),[l,c]=M.useState(!1),{user:d,updateProfileImage:f}=Dr(),m=M.useCallback((P,S)=>{if(a(""),S.length>0){a("Please upload a valid image file (PNG, JPG, etc.) under 2MB.");return}if(P.length>0){const L=P[0];i(L);const F=new FileReader;F.onloadend=()=>{r(F.result)},F.readAsDataURL(L)}},[]),{getRootProps:y,getInputProps:v,isDragActive:w}=xA({onDrop:m,accept:{"image/*":[".jpeg",".png",".gif",".jpg",".webp"]},maxSize:2*1024*1024,multiple:!1}),T=async()=>{if(!(!t||!d)){c(!0),a("");try{await f(t),x()}catch(P){a(P.message||"Failed to save image.")}finally{c(!1)}}},x=()=>{i(null),r(null),a(""),c(!1),e()};return M.useEffect(()=>{if(!n)return;const P=S=>{S.key==="Escape"&&x()};return document.addEventListener("keydown",P),()=>{document.removeEventListener("keydown",P)}},[n,x]),n?g.jsx("div",{className:"fixed inset-0 bg-black/60 dark:bg-black/80 z-[100] flex items-center justify-center p-4",onClick:x,role:"dialog","aria-modal":"true","aria-labelledby":"profile-image-modal-title",children:g.jsxs("div",{className:"bg-white dark:bg-gray-900 w-full max-w-lg flex flex-col rounded-lg shadow-2xl",onClick:P=>P.stopPropagation(),children:[g.jsxs("header",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[g.jsx("h2",{id:"profile-image-modal-title",className:"text-xl font-bold text-gray-800 dark:text-gray-100",children:"Change Profile Photo"}),g.jsx("button",{onClick:x,className:"text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-white transition-colors","aria-label":"Close modal",children:g.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),g.jsxs("main",{className:"p-8",children:[o&&g.jsx("p",{className:"text-center text-sm text-red-500 bg-red-100 dark:bg-red-900/30 p-3 rounded-md mb-4",children:o}),s?g.jsxs("div",{className:"text-center",children:[g.jsx("img",{src:s,alt:"Preview",className:"w-40 h-40 rounded-full mx-auto object-cover border-4 border-gray-200 dark:border-gray-700"}),g.jsx("button",{onClick:()=>{i(null),r(null)},className:"mt-4 text-sm text-brand-red hover:underline",children:"Choose a different photo"})]}):g.jsxs("div",{...y(),className:`relative flex flex-col items-center justify-center p-12 border-2 border-dashed rounded-lg cursor-pointer transition-colors duration-300 ${w?"border-brand-red bg-red-50 dark:bg-red-900/20":"border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-800"}`,children:[g.jsx("input",{...v()}),g.jsx(k8,{className:"h-12 w-12 text-gray-400"}),g.jsx("p",{className:"mt-4 font-semibold text-gray-700 dark:text-gray-200",children:"Drag & drop or click to upload"}),g.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"PNG, JPG, GIF up to 2MB"})]})]}),g.jsxs("footer",{className:"flex justify-end gap-4 p-4 bg-gray-50 dark:bg-gray-800/50 rounded-b-lg",children:[g.jsx("button",{onClick:x,className:"px-4 py-2 text-sm font-semibold text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors",children:"Cancel"}),g.jsx("button",{onClick:T,disabled:!t||l,className:"px-4 py-2 text-sm font-semibold text-white bg-brand-red rounded-md hover:bg-brand-red-dark transition-colors disabled:bg-red-300 dark:disabled:bg-red-800 disabled:cursor-not-allowed",children:l?"Saving...":"Save Changes"})]})]})}):null},WH=[{path:"/about",title:"About Us",description:"Learn about our mission, values, and the story behind I Love PDFLY.",Icon:es,color:"bg-blue-500"},{path:"/contact",title:"Contact",description:"Get in touch with our team for support or inquiries.",Icon:es,color:"bg-green-500"},{path:"/faq",title:"FAQ",description:"Find answers to frequently asked questions about our tools and services.",Icon:es,color:"bg-yellow-500"},{path:"/pricing",title:"Pricing",description:"View our flexible pricing plans for users.",Icon:sp,color:"bg-purple-500"},{path:"/developer",title:"Developer Hub",description:"Integrate our powerful tools into your applications with our REST API.",Icon:ME,color:"bg-teal-500"},{path:"/sitemap",title:"Sitemap",description:"A complete overview of all pages and tools available on our site.",Icon:es,color:"bg-gray-500"},{path:"/ceo",title:"Message from the CEO",description:"Read a letter from our founder, Bishal Mishra.",Icon:es,color:"bg-indigo-500"},{path:"/legal",title:"Legal & Privacy Hub",description:"Find our Terms of Service, Privacy Policy, and Cookie Policy.",Icon:NE,color:"bg-slate-500"},{path:"/education",title:"For Education",description:"Solutions and tools tailored for students and educators.",Icon:dL,color:"bg-pink-500"},{path:"/business",title:"For Business",description:"Streamline document workflows for your company.",Icon:uL,color:"bg-cyan-500"},{path:"/press",title:"Press Kit",description:"Media kits, logos, and information for the press.",Icon:kE,color:"bg-rose-500"},{path:"/features",title:"Features",description:"Explore all the powerful features of our platform.",Icon:es,color:"bg-fuchsia-500"},{path:"/api-pricing",title:"API Pricing",description:"View pricing plans for our developer API.",Icon:sp,color:"bg-purple-500"},{path:"/api-reference",title:"API Reference",description:"Detailed documentation for all API endpoints and libraries.",Icon:Qd,color:"bg-gray-500"}],KH=({isOpen:n,onClose:e})=>{const[t,i]=M.useState(""),s=M.useRef(null),r=M.useMemo(()=>{const a=io.map(d=>({type:"tool",path:`/${d.id}`,title:d.title,description:d.description,Icon:d.Icon,color:d.color})),l=Bq.map(d=>({type:"blog",path:`/blog/${d.slug}`,title:d.title,description:d.excerpt,Icon:Qd,color:"bg-orange-500"})),c=WH.map(d=>({type:"page",...d}));return[...a,...l,...c]},[]),o=M.useMemo(()=>{if(!t.trim())return[];const a=t.toLowerCase();return r.filter(l=>l.title.toLowerCase().includes(a)||l.description.toLowerCase().includes(a))},[t,r]);return M.useEffect(()=>{if(n){i(""),setTimeout(()=>s.current?.focus(),100);const a=l=>{l.key==="Escape"&&e()};return document.addEventListener("keydown",a),()=>document.removeEventListener("keydown",a)}},[n,e]),n?g.jsx("div",{className:"fixed inset-0 bg-black/60 dark:bg-black/80 z-[100] flex items-start justify-center p-4 pt-[10vh]",onClick:e,role:"dialog","aria-modal":"true","aria-labelledby":"search-modal-title",children:g.jsxs("div",{className:"bg-white dark:bg-black w-full max-w-2xl rounded-lg shadow-2xl",onClick:a=>a.stopPropagation(),children:[g.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 flex items-center",children:[g.jsx("h2",{id:"search-modal-title",className:"sr-only",children:"Search Site"}),g.jsx(SE,{className:"h-5 w-5 text-gray-400 mr-3"}),g.jsx("input",{ref:s,type:"text",value:t,onChange:a=>i(a.target.value),placeholder:"Search for tools, articles, and pages...",className:"w-full bg-transparent focus:outline-none text-gray-800 dark:text-gray-100"})]}),g.jsx("div",{className:"max-h-[60vh] overflow-y-auto",children:o.length>0?g.jsx("ul",{children:o.map(a=>g.jsx("li",{children:g.jsxs(gt,{to:a.path,onClick:e,className:"flex items-center gap-4 p-4 hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:[g.jsx("div",{className:`p-2 rounded-lg ${a.color||"bg-gray-500"}`,children:g.jsx(a.Icon,{className:"h-6 w-6 text-white"})}),g.jsxs("div",{children:[g.jsx("h3",{className:"font-semibold text-gray-800 dark:text-gray-100",children:a.title}),g.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:a.description})]})]})},`${a.type}-${a.path}`))}):t.trim()?g.jsx("div",{className:"p-8 text-center text-gray-500",children:g.jsxs("p",{children:['No results found for "',t,'"']})}):g.jsx("div",{className:"p-8 text-center text-gray-500",children:g.jsx("p",{children:"Start typing to search for anything on the site."})})})]})}):null},YH=()=>sessionStorage.getItem("isAdminAuthenticated")==="true"?g.jsx(zw,{}):g.jsx(Bw,{to:"/developer-access"}),JH=()=>{const{user:n,loading:e}=Dr(),t=Cr();return e?g.jsx(xE,{}):n?g.jsx(zw,{}):g.jsx(Bw,{to:"/login",state:{from:t},replace:!0})},XH=({className:n})=>g.jsxs("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor",children:[g.jsx("path",{d:"M0 0h24v24H0V0z",fill:"none"}),g.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12l4.58-4.59z"})]}),QH=({className:n})=>g.jsxs("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor",children:[g.jsx("path",{d:"M0 0h24v24H0V0z",fill:"none"}),g.jsx("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6-6-6z"})]}),ZH=({isOpen:n,onClose:e})=>{const[t,i]=M.useState(new Date);if(M.useEffect(()=>{if(!n)return;const y=v=>{v.key==="Escape"&&e()};return document.addEventListener("keydown",y),()=>document.removeEventListener("keydown",y)},[n,e]),!n)return null;const s=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],r=new Date,o=t.getMonth(),a=t.getFullYear(),l=new Date(a,o,1).getDay(),c=new Date(a,o+1,0).getDate(),d=()=>i(new Date(a,o-1,1)),f=()=>i(new Date(a,o+1,1)),m=()=>{const y=[];for(let v=0;v<l;v++)y.push(g.jsx("div",{className:"p-2"},`empty-prev-${v}`));for(let v=1;v<=c;v++){const w=r.getDate()===v&&r.getMonth()===o&&r.getFullYear()===a;y.push(g.jsx("div",{className:`p-2 text-center rounded-full flex items-center justify-center font-semibold h-10 w-10
                    ${w?"bg-brand-red text-white":"text-gray-700 dark:text-gray-300"}`,children:v},v))}return y};return g.jsx("div",{className:"fixed inset-0 bg-black/60 dark:bg-black/80 z-[100] flex items-center justify-center p-4",onClick:e,role:"dialog","aria-modal":"true","aria-labelledby":"calendar-modal-title",children:g.jsxs("div",{className:"bg-white dark:bg-black w-full max-w-lg rounded-xl shadow-2xl animated-border",onClick:y=>y.stopPropagation(),children:[g.jsxs("div",{className:"p-6",children:[g.jsxs("div",{className:"flex justify-between items-center mb-4",children:[g.jsx("button",{onClick:d,className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800","aria-label":"Previous month",children:g.jsx(XH,{className:"h-6 w-6"})}),g.jsx("h2",{id:"calendar-modal-title",className:"text-xl font-bold text-gray-800 dark:text-gray-100",children:t.toLocaleString("default",{month:"long",year:"numeric"})}),g.jsx("button",{onClick:f,className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800","aria-label":"Next month",children:g.jsx(QH,{className:"h-6 w-6"})})]}),g.jsx("div",{className:"grid grid-cols-7 gap-2 text-center text-sm text-gray-500 dark:text-gray-400 mb-2",children:s.map(y=>g.jsx("div",{children:y},y))}),g.jsx("div",{className:"grid grid-cols-7 gap-2",children:m()})]}),g.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-900/50 text-center rounded-b-xl",children:g.jsx("button",{onClick:e,className:"text-brand-red font-semibold hover:underline",children:"Close"})})]})})},eG=()=>{const[n,e]=M.useState(!1);M.useEffect(()=>{try{if(!localStorage.getItem("cookie_consent")){const s=setTimeout(()=>{e(!0)},500);return()=>clearTimeout(s)}}catch(i){console.error("Could not access localStorage:",i);const s=setTimeout(()=>{e(!0)},500);return()=>clearTimeout(s)}},[]);const t=()=>{try{localStorage.setItem("cookie_consent","true")}catch(i){console.error("Could not set localStorage item:",i)}e(!1)};return n?g.jsx("div",{className:"fixed bottom-4 left-4 right-4 sm:left-auto sm:right-4 bg-white/80 dark:bg-black/80 backdrop-blur-sm border border-gray-200 dark:border-gray-700 p-4 sm:p-5 rounded-lg shadow-2xl z-[100] animate-fade-in-up max-w-lg",children:g.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[g.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:"We use cookies to enhance your experience. By continuing to visit this site you agree to our use of cookies."}),g.jsxs("button",{onClick:t,className:"flex-shrink-0 w-full sm:w-auto bg-brand-red hover:bg-brand-red-dark text-white font-bold py-2 px-6 rounded-lg transition-colors flex items-center justify-center gap-2",children:[g.jsx(go,{className:"h-5 w-5"}),"Accept"]})]})}):null},tG=({isOpen:n,onClose:e})=>{const[t,i]=M.useState(""),[s,r]=M.useState(""),[o,a]=M.useState(""),[l,c]=M.useState(""),[d,f]=M.useState(""),[m,y]=M.useState(!1),{user:v,changePassword:w}=Dr(),T=M.useRef(null),x=async S=>{if(S.preventDefault(),c(""),f(""),s!==o){c("New passwords do not match.");return}if(s.length<6){c("Password must be at least 6 characters long.");return}if(!v){c("You must be logged in to change your password.");return}y(!0);try{await w(t,s),f("Password changed successfully! You can now close this window."),i(""),r(""),a("")}catch(L){c(L.message||"Failed to change password.")}finally{y(!1)}},P=()=>{i(""),r(""),a(""),c(""),f(""),y(!1),e()};return M.useEffect(()=>{if(n){setTimeout(()=>T.current?.focus(),100);const S=L=>{L.key==="Escape"&&P()};return document.addEventListener("keydown",S),()=>document.removeEventListener("keydown",S)}},[n,P]),n?g.jsx("div",{className:"fixed inset-0 bg-black/60 dark:bg-black/80 z-[100] flex items-center justify-center p-4",onClick:P,role:"dialog","aria-modal":"true","aria-labelledby":"change-password-modal-title",children:g.jsxs("div",{className:"bg-white dark:bg-gray-900 w-full max-w-lg flex flex-col rounded-lg shadow-2xl",onClick:S=>S.stopPropagation(),children:[g.jsxs("header",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[g.jsx("h2",{id:"change-password-modal-title",className:"text-xl font-bold text-gray-800 dark:text-gray-100",children:"Change Password"}),g.jsx("button",{onClick:P,className:"text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-white transition-colors","aria-label":"Close modal",children:g.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),g.jsxs("form",{onSubmit:x,children:[g.jsxs("main",{className:"p-8 space-y-4",children:[l&&g.jsx("p",{className:"text-center text-sm text-red-500 bg-red-100 dark:bg-red-900/30 p-3 rounded-md",children:l}),d&&g.jsx("p",{className:"text-center text-sm text-green-600 bg-green-100 dark:bg-green-900/30 p-3 rounded-md",children:d}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"old-password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Old Password"}),g.jsx("input",{ref:T,type:"password",id:"old-password",value:t,onChange:S=>i(S.target.value),required:!0,className:"w-full px-4 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-brand-red focus:border-brand-red text-gray-800 dark:text-gray-200"})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"new-password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"New Password"}),g.jsx("input",{type:"password",id:"new-password",value:s,onChange:S=>r(S.target.value),required:!0,className:"w-full px-4 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-brand-red focus:border-brand-red text-gray-800 dark:text-gray-200"})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"confirm-password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Confirm New Password"}),g.jsx("input",{type:"password",id:"confirm-password",value:o,onChange:S=>a(S.target.value),required:!0,className:"w-full px-4 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-brand-red focus:border-brand-red text-gray-800 dark:text-gray-200"})]})]}),g.jsxs("footer",{className:"flex justify-end gap-4 p-4 bg-gray-50 dark:bg-gray-800/50 rounded-b-lg",children:[g.jsx("button",{type:"button",onClick:P,className:"px-4 py-2 text-sm font-semibold text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors",children:"Cancel"}),g.jsx("button",{type:"submit",disabled:m||!!d,className:"px-4 py-2 text-sm font-semibold text-white bg-brand-red rounded-md hover:bg-brand-red-dark transition-colors disabled:bg-red-300 dark:disabled:bg-red-800 disabled:cursor-not-allowed",children:m?"Saving...":"Save Changes"})]})]})]})}):null},nG=()=>{const[n,e]=M.useState(null);M.useEffect(()=>{const s=r=>{r.preventDefault(),e(r)};return window.addEventListener("beforeinstallprompt",s),()=>{window.removeEventListener("beforeinstallprompt",s)}},[]);const t=()=>{n&&(n.prompt(),n.userChoice.then(s=>{s.outcome==="accepted"?console.log("User accepted the PWA installation"):console.log("User dismissed the PWA installation"),e(null)}))},i=()=>{e(null)};return n?g.jsx("div",{className:"fixed bottom-24 right-4 z-[100] bg-white/80 dark:bg-black/80 backdrop-blur-sm p-4 rounded-xl shadow-2xl border border-gray-200 dark:border-gray-800 animate-fade-in-up w-full max-w-sm",children:g.jsxs("div",{className:"flex items-start gap-4",children:[g.jsx("div",{className:"flex-shrink-0 bg-brand-red p-3 rounded-lg mt-1",children:g.jsx(iL,{className:"h-6 w-6 text-white"})}),g.jsxs("div",{className:"flex-grow",children:[g.jsx("h3",{className:"font-bold text-gray-800 dark:text-gray-100",children:"Install I Love PDFLY App"}),g.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Get a faster, offline-capable experience on your device."}),g.jsxs("div",{className:"mt-4 flex gap-2",children:[g.jsx("button",{onClick:t,className:"bg-brand-red hover:bg-brand-red-dark text-white font-bold py-2 px-6 rounded-lg transition-colors flex-shrink-0 text-sm",children:"Install"}),g.jsx("button",{onClick:i,className:"bg-transparent hover:bg-gray-200 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300 font-bold py-2 px-4 rounded-lg transition-colors text-sm",children:"Later"})]})]}),g.jsx("button",{onClick:i,className:"p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-200 absolute top-2 right-2","aria-label":"Dismiss install prompt",children:g.jsx(DE,{className:"h-5 w-5"})})]})}):null},iG=({isOpen:n,onClose:e})=>{const{user:t,auth:i,submitProblemReport:s}=Dr(),[r,o]=M.useState(""),[a,l]=M.useState("Tool Not Working"),[c,d]=M.useState(!1),[f,m]=M.useState(""),[y,v]=M.useState(!1),w=async x=>{x.preventDefault(),d(!0),m(""),v(!1);try{await s({email:i.currentUser?.email||"Not logged in",url:window.location.href,description:r.trim(),problemType:a}),v(!0),setTimeout(()=>T(),3e3)}catch(P){m(P.message||"Failed to submit report. Please try again.")}finally{d(!1)}},T=()=>{o(""),l("Tool Not Working"),m(""),v(!1),d(!1),e()};return n?g.jsx("div",{className:"fixed inset-0 bg-black/60 dark:bg-black/80 z-[100] flex items-center justify-center p-4",onClick:T,children:g.jsxs("div",{className:"bg-white dark:bg-black w-full max-w-lg rounded-lg shadow-xl",onClick:x=>x.stopPropagation(),children:[g.jsxs("header",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[g.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-gray-100",children:"Report a Problem"}),g.jsx("button",{onClick:T,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200","aria-label":"Close modal",children:"×"})]}),y?g.jsxs("div",{className:"p-8 text-center",children:[g.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-green-100 dark:bg-green-900/50 mb-6",children:g.jsx(go,{className:"h-10 w-10 text-green-600 dark:text-green-400"})}),g.jsx("h3",{className:"text-lg font-bold",children:"Report Submitted"}),g.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Thank you for your feedback! Our team will look into it."})]}):g.jsxs("form",{onSubmit:w,noValidate:!0,children:[g.jsxs("main",{className:"p-6 space-y-4",children:[g.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Found an issue? Please describe it below. The current page URL and your user info (if logged in) will be included automatically."}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"problemType",className:"block text-sm font-bold mb-1 text-gray-700 dark:text-gray-300",children:"Problem Type"}),g.jsxs("select",{id:"problemType",value:a,onChange:x=>l(x.target.value),className:"w-full p-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md",children:[g.jsx("option",{children:"Tool Not Working"}),g.jsx("option",{children:"Visual Bug"}),g.jsx("option",{children:"Login Issue"}),g.jsx("option",{children:"Payment Problem"}),g.jsx("option",{children:"Other"})]})]}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"description",className:"block text-sm font-bold mb-1 text-gray-700 dark:text-gray-300",children:"Description*"}),g.jsx("textarea",{id:"description",value:r,onChange:x=>o(x.target.value),rows:4,required:!0,className:"w-full p-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md"})]}),f&&g.jsx("div",{className:"text-sm text-red-500 bg-red-100 dark:bg-red-900/30 p-2 rounded-md",children:f})]}),g.jsxs("footer",{className:"flex justify-end gap-4 p-4 bg-gray-50 dark:bg-gray-900/50 rounded-b-lg",children:[g.jsx("button",{type:"button",onClick:T,className:"px-6 py-2 text-sm font-semibold border rounded-md bg-white dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600",children:"Cancel"}),g.jsxs("button",{type:"submit",disabled:c,className:"flex items-center gap-2 bg-brand-red text-white font-bold py-2 px-6 rounded-md disabled:bg-red-300 hover:bg-brand-red-dark",children:[g.jsx(Y8,{className:"h-5 w-5"}),c?"Submitting...":"Submit Report"]})]})]})]})}):null},sG=()=>(bo.useEffect(()=>{document.title="User Data Deletion | I Love PDFLY"},[]),g.jsx("div",{className:"py-16 md:py-24",children:g.jsx("div",{className:"px-6",children:g.jsxs("div",{className:"max-w-4xl mx-auto bg-white dark:bg-black p-8 md:p-12 rounded-lg shadow-lg border border-gray-200 dark:border-gray-800",children:[g.jsx("h1",{className:"text-3xl md:text-4xl font-extrabold text-gray-800 dark:text-gray-100 mb-8",children:"User Data Deletion Request"}),g.jsxs("div",{className:"prose dark:prose-invert max-w-none text-gray-700 dark:text-gray-300",children:[g.jsx("p",{children:"We are committed to protecting your privacy and giving you control over your personal data. If you wish to delete your account and all associated data from our systems, please follow the instructions below."}),g.jsx("h3",{children:"How to Delete Your Data"}),g.jsx("p",{children:"You can permanently delete your account and all associated data directly from your account settings. This is the fastest and most secure way to delete your data."}),g.jsxs("ol",{children:[g.jsx("li",{children:"Log in to your I Love PDFLY account."}),g.jsxs("li",{children:["Navigate to the ",g.jsx(gt,{to:"/account-settings",className:"text-brand-red hover:underline",children:"Account Settings"})," page."]}),g.jsx("li",{children:'Scroll down to the "Danger Zone" section.'}),g.jsx("li",{children:'Click on "Delete My Account" and follow the on-screen instructions to confirm the deletion.'})]}),g.jsx("h3",{className:"mt-6",children:"Alternative Method"}),g.jsx("p",{children:'If you are unable to access your account, you can request data deletion by sending an email to our support team with the subject line "Data Deletion Request".'}),g.jsxs("p",{children:[g.jsx("strong",{children:"Email:"})," ",g.jsx("a",{href:"mailto:Support@ilovepdfly.com",className:"text-brand-red hover:underline",children:"Support@ilovepdfly.com"})]}),g.jsx("p",{children:"Please include the username and email address associated with your account in your message."}),g.jsx("h3",{children:"What Happens Next?"}),g.jsxs("p",{children:[g.jsx("strong",{children:"For self-service deletion:"})," Your account and data will be permanently deleted immediately upon confirmation."]}),g.jsxs("p",{children:[g.jsx("strong",{children:"For email requests:"})," Once we receive your request, our team will verify your identity and process the deletion. We will confirm with you via email once the process is complete, which typically takes up to 30 days."]}),g.jsx("h3",{children:"What Data is Deleted?"}),g.jsx("p",{children:"The deletion process will remove:"}),g.jsxs("ul",{children:[g.jsx("li",{children:"Your user account and profile information (username, email, profile picture, etc.)."}),g.jsx("li",{children:"Any content you have created or saved within your account."}),g.jsx("li",{children:"Your API key and associated usage data."})]}),g.jsx("p",{children:"Please note that some anonymous, aggregated usage data that is not linked to your personal identity may be retained for analytical purposes."}),g.jsx("p",{children:"If you have any questions about this process, please do not hesitate to contact us."})]})]})})})),rG=({isOpen:n,onClose:e})=>{const[t,i]=M.useState(""),[s,r]=M.useState(""),[o,a]=M.useState(""),[l,c]=M.useState(!1),{auth:d}=Dr(),f=M.useRef(null);M.useEffect(()=>{n&&(i(""),r(""),a(""),c(!1),setTimeout(()=>f.current?.focus(),100))},[n]);const m=async y=>{y.preventDefault(),r(""),a(""),c(!0);try{await d.sendPasswordResetEmail(t),a(`Password reset link sent to ${t}. Please check your inbox (and spam folder).`)}catch(v){v.code==="auth/user-not-found"?r("No account found with this email address."):r(v.message||"Failed to send reset email. Please try again.")}finally{c(!1)}};return n?g.jsx("div",{className:"fixed inset-0 bg-black/60 z-[100] flex items-center justify-center p-4",onClick:e,children:g.jsxs("div",{className:"bg-white dark:bg-black w-full max-w-md rounded-lg shadow-xl",onClick:y=>y.stopPropagation(),children:[g.jsxs("header",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[g.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-gray-100",children:"Reset Password"}),g.jsx("button",{onClick:e,"aria-label":"Close modal",className:"text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-white transition-colors",children:"×"})]}),o?g.jsxs("div",{className:"p-8 text-center",children:[g.jsx(go,{className:"h-12 w-12 text-green-500 mx-auto mb-4"}),g.jsx("p",{className:"text-green-700 dark:text-green-300",children:o}),g.jsx("button",{onClick:e,className:"mt-6 w-full bg-brand-red text-white font-bold py-2 px-4 rounded-md",children:"Close"})]}):g.jsxs("form",{onSubmit:m,children:[g.jsxs("main",{className:"p-6 space-y-4",children:[g.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Enter your account's email address and we will send you a password reset link."}),g.jsxs("div",{children:[g.jsx("label",{htmlFor:"reset-email",className:"sr-only",children:"Email address"}),g.jsxs("div",{className:"relative",children:[g.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3",children:g.jsx(CE,{className:"h-5 w-5 text-gray-400"})}),g.jsx("input",{ref:f,type:"email",id:"reset-email",value:t,onChange:y=>i(y.target.value),required:!0,placeholder:"you@example.com",className:"w-full pl-10 pr-3 py-2 border rounded-md bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 focus:ring-brand-red focus:border-brand-red"})]})]}),s&&g.jsx("p",{className:"text-sm text-red-500",children:s})]}),g.jsxs("footer",{className:"flex justify-end gap-4 p-4 bg-gray-50 dark:bg-gray-900/50 rounded-b-lg",children:[g.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm font-semibold border rounded-md bg-white dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600",children:"Cancel"}),g.jsx("button",{type:"submit",disabled:l,className:"px-4 py-2 text-sm font-semibold text-white bg-brand-red rounded-md disabled:bg-red-300 hover:bg-brand-red-dark",children:l?"Sending...":"Send Reset Link"})]})]})]})}):null},oG=({className:n})=>g.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M21.99 4c0-1.1-.89-2-1.99-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h14l4 4-.01-18z"})}),aG=({className:n})=>g.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),lG=({className:n})=>g.jsx("svg",{className:n,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:g.jsx("path",{d:"M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"})}),cG=({text:n,sources:e})=>{const t=Kl(),i=n.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/(\s|^)(\/[-a-zA-Z0-9_/?=&]+)/g,'$1<a href="$2" class="text-blue-500 hover:underline" data-internal-link="true">$2</a>'),s=r=>{const o=r.target;if(o.tagName==="A"&&o.dataset.internalLink==="true"){r.preventDefault();const a=o.getAttribute("href");a&&t(a)}};return g.jsxs("div",{children:[g.jsx("div",{style:{whiteSpace:"pre-wrap"},dangerouslySetInnerHTML:{__html:i},onClick:s}),e&&e.length>0&&g.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-300 dark:border-gray-600",children:[g.jsxs("h4",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 flex items-center gap-1.5 mb-1",children:[g.jsx(PE,{className:"h-3.5 w-3.5"})," Sources"]}),g.jsx("div",{className:"flex flex-col gap-1.5",children:e.map((r,o)=>g.jsxs("a",{href:r.uri,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/30 p-2 rounded-md hover:underline truncate block",title:r.uri,children:[o+1,". ",r.title||r.uri]},o))})]})]})},uG=[{q:"How do I merge PDF files?",icon:"📄"},{q:"Can I edit text in a PDF?",icon:"✏️"},{q:"Is this service secure?",icon:"🔒"},{q:"What are the premium features?",icon:"⭐"}],dG=()=>{const[n,e]=M.useState(!1),[t,i]=M.useState(!1),[s,r]=M.useState(()=>{try{const k=localStorage.getItem("chatHistory");if(k)return JSON.parse(k)}catch(k){console.error("Failed to load chat history",k)}return[{role:"model",text:"Hi 👋 I’m your support assistant. How can I help you today?"}]}),[o,a]=M.useState(""),[l,c]=M.useState(!1),[d,f]=M.useState(""),[m,y]=M.useState(null),[v,w]=M.useState(!1),[T,x]=M.useState(!1),[P,S]=M.useState(null),L=M.useRef(null),F=M.useRef(null);M.useEffect(()=>{if(!sessionStorage.getItem("chatWidgetAutoOpened")&&!n){const N=setTimeout(()=>{e(!0),sessionStorage.setItem("chatWidgetAutoOpened","true")},3e3);return()=>clearTimeout(N)}},[n]),M.useEffect(()=>{try{localStorage.setItem("chatHistory",JSON.stringify(s))}catch(k){console.error("Failed to save chat history",k)}},[s]);const U=()=>{try{const k="AIzaSyBI_J2MvEyG-k6q8WKZzNOyw3_-g_wxSVY",R=new W1({apiKey:k}).chats.create({model:"gemini-2.5-flash",config:{systemInstruction:`You are an expert, friendly, and helpful customer support assistant for a website called 'iLovePDFLY'. Your name is Bishal, and you represent the company. Your goal is to provide accurate information, guide users on how to use the site, and answer frequently asked questions.

**Your Identity:**
- **Your Persona:** You are Bishal, the founder. Be confident, knowledgeable, and professional, yet approachable and friendly. Use emojis to add a warm touch where appropriate. ✨
- **Your Creator:** You were created by the development team at iLovePDFLY, led by founder and CEO, **Bishal Mishra**. When asked about yourself, you can embody this persona.

**Key Information about iLovePDFLY:**
- **Website:** The official website is ilovepdfly.com.
- **Mission:** To provide a comprehensive online toolkit for PDF and image management that is FREE, fast, secure, and private.
- **Privacy:** A key feature is client-side processing. Files are processed in the user's browser, ensuring they are 100% private. This is a major selling point.
- **Tools:** The site offers a wide range of tools for PDFs (Merge, Split, Compress, Convert, Edit, Sign, Watermark, etc.) and Images (Background Remover, Resize, Crop). There are also AI tools like an Invoice Generator, CV Generator, and Lesson Plan Creator.
- **Premium Features:** While most tools are free, some advanced features (like higher limits, OCR in PDF to Word, batch processing, no ads, team features) require a Premium subscription.

**Contact Information & Support Tiers:**
- **General User Support:** For general questions, help with tools, or feedback, direct users to the main support channels. The primary support email is **Support@ilovepdfly.com**. Human support is available via WhatsApp.
- **Developer & Admin Contact:** If a user specifically asks for developer, founder, or admin contact information, you MUST provide the following details:
  - **Email:** admin@ilovepdfly.com
  - **Phone:** +9779827801575
- **Do not** provide the developer/admin contact for general inquiries. Only when explicitly asked.

**Interaction Guidelines:**
- **Answering FAQs:** Users may click pre-defined FAQ buttons. Answer these questions directly and helpfully. For example, if asked "How to merge PDFs?", explain the simple steps: go to the Merge PDF tool, upload files, reorder them, and click the merge button.
- **Providing Links:** Always provide relative links (e.g., /about, /pricing, /merge-pdf) when a user asks for a specific page or tool. Do not say you cannot provide links. Format links simply as text paths, for example: "You can find our pricing details on our pricing page: /pricing".
- **Formatting:** Use Markdown for emphasis. Use double asterisks for bolding: \`**this is bold**\`. This is important for highlighting tool names, key features, or links. Keep paragraphs short.
- **Exclusivity:** You are an assistant for **iLovePDFLY** only. If asked about competitors (like 'iLovePDF'), politely clarify that you only have information about iLovePDFLY and its unique features, like its strong focus on privacy.`}});return y(R),R}catch(k){return console.error("Failed to initialize Gemini Chat:",k),f("Could not connect to the AI assistant. Please try again later."),null}};M.useEffect(()=>{n&&!m&&U()},[n,m]),M.useEffect(()=>{if(typeof window<"u"&&("SpeechRecognition"in window||"webkitSpeechRecognition"in window)){const k=window.SpeechRecognition||window.webkitSpeechRecognition,N=new k;N.continuous=!1,N.interimResults=!1,N.lang="en-US",N.onresult=R=>a(R.results[0][0].transcript),N.onerror=R=>f(`Voice recognition error: ${R.error}`),N.onend=()=>x(!1),F.current=N}},[]),M.useEffect(()=>{L.current&&(L.current.scrollTop=L.current.scrollHeight)},[s,l]);const C=async k=>{const N=(k||o).trim();if(!N||l)return;i(!0);const R={role:"user",text:N};r(q=>[...q,R]),a(""),c(!0),f("");try{const q="AIzaSyBI_J2MvEyG-k6q8WKZzNOyw3_-g_wxSVY",te=new W1({apiKey:q});if(v){const W=await te.models.generateContent({model:"gemini-2.5-flash",contents:N,config:{tools:[{googleSearch:{}}]}}),Ee=W.candidates?.[0]?.groundingMetadata?.groundingChunks?.map(me=>me.web).filter(me=>!!me?.uri)||[];r(me=>[...me,{role:"model",text:W.text,sources:Ee.length>0?Ee:void 0}])}else{let W=m;if(!W&&(W=U(),!W))throw new Error("Chat could not be re-initialized.");const K=await W.sendMessageStream({message:N});let Ee="";r(me=>[...me,{role:"model",text:""}]);for await(const me of K)Ee+=me.text,r(Et=>{const Ke=[...Et];return Ke.length>0&&(Ke[Ke.length-1].text=Ee),Ke})}}catch(q){console.error("Gemini API error:",q);const te="Sorry, I couldn't get a response. Please check your connection or try again later.";f(te),r(W=>[...W,{role:"model",text:te}])}finally{c(!1)}},A=()=>{T||!F.current||(x(!0),f(""),F.current.start())},E=()=>{r([{role:"model",text:"New chat started. How can I help you?"}]),i(!1),f(""),U()},D=(k,N)=>{navigator.clipboard.writeText(k),S(N),setTimeout(()=>S(null),2e3)};return g.jsxs("div",{className:"fixed bottom-4 left-4 z-[99] pointer-events-none",children:[g.jsx("div",{className:`transition-all duration-300 ease-in-out ${n?"opacity-100 translate-y-0 pointer-events-auto":"opacity-0 translate-y-4 pointer-events-none"}`,children:g.jsxs("div",{className:"w-full max-w-[calc(100vw-2rem)] sm:w-80 h-[60vh] max-h-[480px] sm:max-h-[500px] bg-white dark:bg-black rounded-2xl shadow-2xl flex flex-col border border-gray-200 dark:border-gray-800",children:[g.jsxs("div",{className:"flex-shrink-0 p-4 flex justify-between items-center bg-gradient-to-r from-red-600 to-orange-500 rounded-t-2xl",children:[g.jsx("p",{className:"font-bold text-white",children:"iLovePDFly Support"}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("button",{onClick:E,className:"text-white/70 hover:text-white","aria-label":"Start new chat",title:"Start new chat",children:g.jsx(X8,{className:"h-5 w-5"})}),g.jsx("button",{onClick:()=>e(!1),className:"text-white/70 hover:text-white","aria-label":"Close chat widget",title:"Close chat widget",children:g.jsx(aG,{className:"h-6 w-6"})})]})]}),g.jsxs("div",{ref:L,className:"flex-grow p-4 overflow-y-auto space-y-4",children:[s.map((k,N)=>g.jsxs("div",{className:`flex items-end gap-2.5 ${k.role==="user"?"justify-end":"justify-start"}`,children:[k.role==="model"&&g.jsx("img",{src:"https://ik.imagekit.io/fonepay/bishal%20mishra%20ceo%20of%20ilovepdfly.jpg?updatedAt=1753167712490",alt:"Support",className:"w-8 h-8 rounded-full object-cover flex-shrink-0 border-2 border-white shadow-md"}),g.jsx("div",{className:`max-w-[80%] p-3 rounded-2xl text-sm relative group ${k.role==="user"?"bg-blue-500 text-white rounded-br-none":"bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 rounded-bl-none"}`,children:g.jsx(cG,{text:k.text,sources:k.sources})}),k.role==="model"&&g.jsxs("div",{className:"relative self-center",children:[g.jsx("button",{onClick:()=>D(k.text,`chat-${N}`),className:"opacity-0 group-hover:opacity-100 text-gray-400 hover:text-brand-red transition-all duration-200","aria-label":"Copy message",children:g.jsx(J8,{className:"h-4 w-4"})}),P===`chat-${N}`&&g.jsx("span",{className:"absolute -top-8 left-1/2 -translate-x-1/2 text-xs bg-black text-white px-2 py-1 rounded shadow-lg z-10",children:"Copied!"})]})]},N)),l&&g.jsxs("div",{className:"flex items-end gap-2.5 justify-start",children:[g.jsx("img",{src:"https://ik.imagekit.io/fonepay/bishal%20mishra%20ceo%20of%20ilovepdfly.jpg?updatedAt=1753167712490",alt:"Support",className:"w-8 h-8 rounded-full object-cover flex-shrink-0 border-2 border-white shadow-md"}),g.jsxs("div",{className:"p-3 rounded-2xl bg-gray-200 dark:bg-gray-700 flex items-center rounded-bl-none",children:[g.jsx("span",{className:"h-2 w-2 bg-gray-500 rounded-full animate-bounce [animation-delay:-0.3s]"}),g.jsx("span",{className:"h-2 w-2 bg-gray-500 rounded-full animate-bounce [animation-delay:-0.15s] mx-1.5"}),g.jsx("span",{className:"h-2 w-2 bg-gray-500 rounded-full animate-bounce"})]})]}),!t&&!l&&g.jsxs("div",{className:"pt-2",children:[g.jsx("p",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 mb-2",children:"Or ask about:"}),g.jsx("div",{className:"flex flex-wrap gap-2",children:uG.map((k,N)=>g.jsxs("button",{onClick:()=>C(k.q),className:"flex items-center gap-2 text-xs text-left bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 p-2 rounded-lg transition-colors",children:[g.jsx("span",{children:k.icon}),g.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:k.q})]},N))})]})]}),d&&g.jsx("p",{className:"text-xs text-red-500 text-center px-4 pb-2",children:d}),g.jsxs("div",{className:"flex-shrink-0 p-3 border-t border-gray-200 dark:border-gray-700",children:[g.jsxs("a",{href:"https://wa.me/9779827801575",target:"_blank",rel:"noopener noreferrer",className:"mb-2 w-full text-center bg-green-500 hover:bg-green-600 text-white text-xs font-bold py-2 px-4 rounded-full flex items-center justify-center gap-2 transition-colors",children:[g.jsx(es,{className:"h-4 w-4"}),g.jsx("span",{children:"Talk to human support"})]}),g.jsxs("div",{className:"relative flex items-center",children:[g.jsx("button",{type:"button",onClick:A,disabled:l||T,className:`absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-brand-red transition-colors disabled:opacity-50 ${T?"text-red-500 animate-pulse":""}`,"aria-label":"Use voice input",title:"Use voice input",children:g.jsx(Q8,{className:"h-5 w-5"})}),g.jsx("input",{type:"text",value:o,onChange:k=>a(k.target.value),onKeyPress:k=>k.key==="Enter"&&C(),placeholder:T?"Listening...":"Type a message...",className:"flex-grow w-full px-4 py-2 pl-10 bg-gray-100 dark:bg-gray-800 border border-transparent rounded-full focus:ring-brand-red focus:border-brand-red text-sm",disabled:l||T}),g.jsx("button",{onClick:()=>C(),disabled:l||!o.trim(),className:"p-2.5 ml-2 bg-brand-red text-white rounded-full disabled:bg-red-300 transition-colors flex-shrink-0",children:g.jsx(lG,{className:"h-5 w-5"})})]}),g.jsx("div",{className:"mt-2 flex items-center justify-center gap-2",children:g.jsxs("label",{htmlFor:"google-search-toggle",className:"flex items-center cursor-pointer",children:[g.jsxs("div",{className:"relative",children:[g.jsx("input",{type:"checkbox",id:"google-search-toggle",className:"sr-only",checked:v,onChange:()=>w(!v)}),g.jsx("div",{className:"block bg-gray-200 dark:bg-gray-700 w-10 h-6 rounded-full"}),g.jsx("div",{className:`dot absolute left-1 top-1 bg-white w-4 h-4 rounded-full transition-transform ${v?"translate-x-full bg-brand-red":""}`})]}),g.jsxs("div",{className:"ml-2 text-xs text-gray-600 dark:text-gray-300 font-semibold flex items-center gap-1",children:[g.jsx(PE,{className:"h-4 w-4"})," Search with Google"]})]})})]})]})}),g.jsxs("button",{onClick:()=>e(!0),className:`relative transition-all duration-300 ease-in-out bg-brand-red text-white w-12 h-12 rounded-full shadow-lg flex items-center justify-center transform hover:scale-110 pointer-events-auto ${n?"opacity-0 translate-y-4 pointer-events-none":"opacity-100 translate-y-0"}`,"aria-label":"Open chat support",title:"Open chat support",children:[g.jsx("span",{className:"absolute inline-flex h-full w-full rounded-full bg-brand-red opacity-75 animate-ping-slow"}),g.jsx(oG,{className:"h-6 w-6 relative"})]})]})},hG=M.lazy(()=>le(()=>import("./HomePage-Ba2A2mA0.js"),__vite__mapDeps([0,1,2]))),fG=M.lazy(()=>le(()=>import("./ToolPage-DYYXrWtS.js"),__vite__mapDeps([3,4,5,6,7,2,8,9,10])).then(n=>({default:n.default||n}))),pG=M.lazy(()=>le(()=>import("./AboutPage--BVFZ9ix.js"),__vite__mapDeps([11,2]))),mG=M.lazy(()=>le(()=>import("./BlogPage-D6XMJC0H.js"),__vite__mapDeps([12,2]))),gG=M.lazy(()=>le(()=>import("./BlogPostPage-CB6rapbi.js"),__vite__mapDeps([13,2]))),yG=M.lazy(()=>le(()=>import("./ContactPage-CA_AVVUY.js"),__vite__mapDeps([14,2]))),vG=M.lazy(()=>le(()=>import("./LoginPage-B-7BSFha.js"),__vite__mapDeps([15,2]))),_G=M.lazy(()=>le(()=>import("./SignUpPage-ulHfRJzP.js"),__vite__mapDeps([16,2]))),wG=M.lazy(()=>le(()=>import("./DeveloperPage-S6VZQ4xi.js"),__vite__mapDeps([17,2]))),bG=M.lazy(()=>le(()=>import("./FaqPage-DvgAibvB.js"),__vite__mapDeps([18,2]))),TG=M.lazy(()=>le(()=>import("./SitemapPage-DRFIv49F.js"),__vite__mapDeps([19,2]))),xG=M.lazy(()=>le(()=>import("./InvoiceGeneratorPage-Csz4KKnr.js"),__vite__mapDeps([20,5,9,2]))),EG=M.lazy(()=>le(()=>import("./CVGeneratorPage-9j_312Zj.js"),__vite__mapDeps([21,5,9,2]))),AG=M.lazy(()=>le(()=>import("./LessonPlanCreatorPage-DclCHCov.js"),__vite__mapDeps([22,8,9,2]))),IG=M.lazy(()=>le(()=>import("./AIQuestionGeneratorPage-DBsY2Fay.js"),__vite__mapDeps([23,2]))),CG=M.lazy(()=>le(()=>import("./PricingPage-Bby5pXEE.js"),__vite__mapDeps([24,2]))),SG=M.lazy(()=>le(()=>import("./PremiumFeaturePage-B7fEsl1c.js"),__vite__mapDeps([25,2]))),PG=M.lazy(()=>le(()=>import("./PaymentPage-W6FXJy5A.js"),__vite__mapDeps([26,2]))),RG=M.lazy(()=>le(()=>import("./DeveloperAccessPage-BQiAXtfN.js"),__vite__mapDeps([27,2]))),kG=M.lazy(()=>le(()=>import("./AdminDashboardPage-SyUdkII5.js"),__vite__mapDeps([28,2]))),NG=M.lazy(()=>le(()=>import("./HowToUsePage-BPN9G4BU.js"),__vite__mapDeps([29,2]))),MG=M.lazy(()=>le(()=>import("./EducationPage-aqweBJAT.js"),__vite__mapDeps([30,2]))),DG=M.lazy(()=>le(()=>import("./BusinessPage-DNQA8qQ4.js"),__vite__mapDeps([31,2]))),LG=M.lazy(()=>le(()=>import("./PrivacyPolicyPage-CiujB50j.js"),__vite__mapDeps([32,2]))),FG=M.lazy(()=>le(()=>import("./TermsOfServicePage-DcUXcXPv.js"),__vite__mapDeps([33,2]))),VG=M.lazy(()=>le(()=>import("./CookiesPolicyPage-B-F_ni_B.js"),__vite__mapDeps([34,2]))),OG=M.lazy(()=>le(()=>import("./CeoPage-K4nfgda_.js"),__vite__mapDeps([35,2]))),UG=M.lazy(()=>le(()=>import("./ApiPricingPage-Dk4w970L.js"),__vite__mapDeps([36,2]))),BG=M.lazy(()=>le(()=>import("./ApiReferencePage-BbnQ7dim.js"),__vite__mapDeps([37,2]))),zG=M.lazy(()=>le(()=>import("./ApiPdfPage-BNKhMa7h.js"),__vite__mapDeps([38,2]))),qG=M.lazy(()=>le(()=>import("./ApiImagePage-Bo8FjxGi.js"),__vite__mapDeps([39,2]))),HG=M.lazy(()=>le(()=>import("./ApiSignaturePage-BpANaPn6.js"),__vite__mapDeps([40,2]))),GG=M.lazy(()=>le(()=>import("./AccountSettingsPage-irz1aBXq.js"),__vite__mapDeps([41,2]))),$G=M.lazy(()=>le(()=>import("./PressPage-CRmtYPDy.js"),__vite__mapDeps([42,2]))),jG=M.lazy(()=>le(()=>import("./WorkflowsPage-BLb1GkmD.js"),__vite__mapDeps([43,1,2]))),WG=M.lazy(()=>le(()=>import("./CreateWorkflowPage-CbuQ3A1G.js"),__vite__mapDeps([44,1,2]))),KG=M.lazy(()=>le(()=>import("./UserDashboardLayout-CIzvEn-b.js"),__vite__mapDeps([45,2]))),YG=M.lazy(()=>le(()=>import("./LegalPage-BFM5ORu_.js"),__vite__mapDeps([46,2]))),JG=M.lazy(()=>le(()=>import("./SecurityPolicyPage-En8tvHsn.js"),__vite__mapDeps([47,2]))),XG=M.lazy(()=>le(()=>import("./FeaturesPage-npk2FGSI.js"),__vite__mapDeps([48,2]))),QG=M.lazy(()=>le(()=>import("./SecurityPage-CfcAFho-.js"),__vite__mapDeps([49,2]))),ZG=M.lazy(()=>le(()=>import("./TeamPage-BPHxR9DK.js"),__vite__mapDeps([50,4,5,2]))),e$=M.lazy(()=>le(()=>import("./LastTasksPage-1B5lvFWJ.js"),__vite__mapDeps([51,7,2]))),t$=M.lazy(()=>le(()=>import("./SignaturesOverviewPage-CYlc52Mf.js"),__vite__mapDeps([52,4,5,6,2]))),n$=M.lazy(()=>le(()=>import("./SentPage-B4QH29f0.js"),__vite__mapDeps([53,4,5,2]))),i$=M.lazy(()=>le(()=>import("./InboxPage-Cak9m7N_.js"),__vite__mapDeps([54,4,5,2]))),s$=M.lazy(()=>le(()=>import("./SignedPage-Ncws4acm.js"),__vite__mapDeps([55,9,6,2]))),r$=M.lazy(()=>le(()=>import("./TemplatesPage-DMQGm8MO.js"),__vite__mapDeps([56,4,5,2]))),o$=M.lazy(()=>le(()=>import("./ContactsPage-1y10EHbP.js"),__vite__mapDeps([57,4,5,10,2]))),a$=M.lazy(()=>le(()=>import("./SignatureSettingsPage-DTyVfgdP.js"),__vite__mapDeps([58,2]))),l$=M.lazy(()=>le(()=>import("./PlansAndPackagesPage-CDWhRK8r.js"),__vite__mapDeps([59,2]))),c$=M.lazy(()=>le(()=>import("./BusinessDetailsPage-OHfB28-8.js"),__vite__mapDeps([60,2]))),u$=M.lazy(()=>le(()=>import("./InvoicesPage-BpQI7IWb.js"),__vite__mapDeps([61,9,2]))),d$=M.createContext({setShowFooter:n=>{}});function h$(){const n=Cr(),e=Kl(),{user:t,loading:i}=Dr(),[s,r]=M.useState(!1),[o,a]=M.useState(!1),[l,c]=M.useState(!1),[d,f]=M.useState(!1),[m,y]=M.useState(!1),[v,w]=M.useState(!1),[T,x]=M.useState(!0);return bo.useEffect(()=>{window.scrollTo(0,0)},[n.pathname]),bo.useEffect(()=>{if(!i&&t){const P=sessionStorage.getItem("postLoginRedirect");if(P){sessionStorage.removeItem("postLoginRedirect");const S=JSON.parse(P),L=sessionStorage.getItem("pendingInvoiceDataRedirect");L?(sessionStorage.removeItem("pendingInvoiceDataRedirect"),e("/invoice-generator",{state:{restoredData:JSON.parse(L)},replace:!0})):S.from==="pricing"?e("/payment",{state:{plan:S.plan}}):S.from==="developer"?e("/developer"):S.from==="workflows_create"?e("/workflows/create"):(n.pathname==="/login"||n.pathname==="/signup")&&e("/")}else(n.pathname==="/login"||n.pathname==="/signup")&&e("/")}},[t,i,e,n.pathname]),g.jsx(d$.Provider,{value:{setShowFooter:x},children:g.jsxs("div",{className:"flex flex-col min-h-screen text-gray-800 dark:text-gray-200",children:[g.jsx(Hq,{onOpenProfileImageModal:()=>r(!0),onOpenSearchModal:()=>a(!0),onOpenChangePasswordModal:()=>f(!0)}),g.jsx("main",{className:"flex-grow",children:g.jsx(M.Suspense,{fallback:g.jsx("div",{className:"w-full py-20"}),children:g.jsxs(bC,{children:[g.jsx(oe,{path:"/",element:g.jsx(hG,{})}),g.jsx(oe,{path:"/about",element:g.jsx(pG,{})}),g.jsx(oe,{path:"/blog",element:g.jsx(mG,{})}),g.jsx(oe,{path:"/blog/:slug",element:g.jsx(gG,{})}),g.jsx(oe,{path:"/contact",element:g.jsx(yG,{})}),g.jsx(oe,{path:"/login",element:g.jsx(vG,{onOpenForgotPasswordModal:()=>w(!0)})}),g.jsx(oe,{path:"/signup",element:g.jsx(_G,{})}),g.jsx(oe,{path:"/developer",element:g.jsx(wG,{})}),g.jsx(oe,{path:"/faq",element:g.jsx(bG,{})}),g.jsx(oe,{path:"/sitemap",element:g.jsx(TG,{})}),g.jsx(oe,{path:"/invoice-generator",element:g.jsx(xG,{})}),g.jsx(oe,{path:"/cv-generator",element:g.jsx(EG,{})}),g.jsx(oe,{path:"/lesson-plan-creator",element:g.jsx(AG,{})}),g.jsx(oe,{path:"/ai-question-generator",element:g.jsx(IG,{})}),g.jsx(oe,{path:"/pricing",element:g.jsx(CG,{})}),g.jsx(oe,{path:"/api-pricing",element:g.jsx(UG,{})}),g.jsx(oe,{path:"/premium-feature",element:g.jsx(SG,{})}),g.jsx(oe,{path:"/payment",element:g.jsx(PG,{})}),g.jsx(oe,{path:"/developer-access",element:g.jsx(RG,{})}),g.jsx(oe,{path:"/how-to-use",element:g.jsx(NG,{})}),g.jsx(oe,{path:"/education",element:g.jsx(MG,{})}),g.jsx(oe,{path:"/business",element:g.jsx(DG,{})}),g.jsx(oe,{path:"/privacy-policy",element:g.jsx(LG,{})}),g.jsx(oe,{path:"/terms-of-service",element:g.jsx(FG,{})}),g.jsx(oe,{path:"/cookies-policy",element:g.jsx(VG,{})}),g.jsx(oe,{path:"/ceo",element:g.jsx(OG,{})}),g.jsx(oe,{path:"/press",element:g.jsx($G,{})}),g.jsx(oe,{path:"/user-data-deletion",element:g.jsx(sG,{})}),g.jsx(oe,{path:"/legal",element:g.jsx(YG,{})}),g.jsx(oe,{path:"/security-policy",element:g.jsx(JG,{})}),g.jsx(oe,{path:"/features",element:g.jsx(XG,{})}),g.jsx(oe,{path:"/api-reference",element:g.jsx(BG,{})}),g.jsx(oe,{path:"/api-pdf",element:g.jsx(zG,{})}),g.jsx(oe,{path:"/api-image",element:g.jsx(qG,{})}),g.jsx(oe,{path:"/api-signature",element:g.jsx(HG,{})}),g.jsx(oe,{element:g.jsx(YH,{}),children:g.jsx(oe,{path:"/admin-dashboard",element:g.jsx(kG,{})})}),g.jsx(oe,{element:g.jsx(JH,{}),children:g.jsxs(oe,{element:g.jsx(KG,{}),children:[g.jsx(oe,{path:"/account-settings",element:g.jsx(GG,{})}),g.jsx(oe,{path:"/workflows",element:g.jsx(jG,{})}),g.jsx(oe,{path:"/workflows/create",element:g.jsx(WG,{})}),g.jsx(oe,{path:"/security",element:g.jsx(QG,{})}),g.jsx(oe,{path:"/team",element:g.jsx(ZG,{})}),g.jsx(oe,{path:"/last-tasks",element:g.jsx(e$,{})}),g.jsx(oe,{path:"/signatures-overview",element:g.jsx(t$,{})}),g.jsx(oe,{path:"/sent",element:g.jsx(n$,{})}),g.jsx(oe,{path:"/inbox",element:g.jsx(i$,{})}),g.jsx(oe,{path:"/signed",element:g.jsx(s$,{})}),g.jsx(oe,{path:"/templates",element:g.jsx(r$,{})}),g.jsx(oe,{path:"/contacts",element:g.jsx(o$,{})}),g.jsx(oe,{path:"/signature-settings",element:g.jsx(a$,{})}),g.jsx(oe,{path:"/plans-packages",element:g.jsx(l$,{})}),g.jsx(oe,{path:"/business-details",element:g.jsx(c$,{})}),g.jsx(oe,{path:"/invoices",element:g.jsx(u$,{})})]})}),g.jsx(oe,{path:"/:toolId",element:g.jsx(fG,{})})]})})}),T&&g.jsx($q,{onOpenCalendarModal:()=>c(!0),onOpenProblemReportModal:()=>y(!0)}),g.jsx(jH,{isOpen:s,onClose:()=>r(!1)}),g.jsx(KH,{isOpen:o,onClose:()=>a(!1)}),g.jsx(ZH,{isOpen:l,onClose:()=>c(!1)}),g.jsx(tG,{isOpen:d,onClose:()=>f(!1)}),g.jsx(iG,{isOpen:m,onClose:()=>y(!1)}),g.jsx(rG,{isOpen:v,onClose:()=>w(!1)}),g.jsx(jq,{}),g.jsx(eG,{}),g.jsx(nG,{}),g.jsx(dG,{})]})})}function f$(){return g.jsx(DC,{children:g.jsx(A8,{children:g.jsx(C8,{children:g.jsx(h$,{})})})})}var yl={};yl.d=(n,e)=>{for(var t in e)yl.o(e,t)&&!yl.o(n,t)&&Object.defineProperty(n,t,{enumerable:!0,get:e[t]})};yl.o=(n,e)=>Object.prototype.hasOwnProperty.call(n,e);var fe=globalThis.pdfjsLib={};yl.d(fe,{AbortException:()=>Is,AnnotationEditorLayer:()=>wi,AnnotationEditorParamsType:()=>Ce,AnnotationEditorType:()=>ye,AnnotationEditorUIManager:()=>Cs,AnnotationLayer:()=>lW,AnnotationMode:()=>ns,ColorPicker:()=>Rn,DOMSVGFactory:()=>qg,DrawLayer:()=>tn,FeatureTest:()=>cn,GlobalWorkerOptions:()=>_l,ImageKind:()=>Eu,InvalidPDFException:()=>Tp,MissingPDFException:()=>jl,OPS:()=>Un,OutputScale:()=>xp,PDFDataRangeTransport:()=>qA,PDFDateString:()=>IA,PDFWorker:()=>Ct,PasswordResponses:()=>y$,PermissionFlag:()=>g$,PixelsPerInch:()=>jo,RenderingCancelledException:()=>Mg,TextLayer:()=>nn,TouchManager:()=>lh,UnexpectedResponseException:()=>rd,Util:()=>ae,VerbosityLevel:()=>nh,XfaLayer:()=>GA,build:()=>qj,createValidAbsoluteUrl:()=>b$,fetchData:()=>oh,getDocument:()=>Mj,getFilenameFromUrl:()=>R$,getPdfFilenameFromUrl:()=>k$,getXfaPageViewport:()=>N$,isDataScheme:()=>ah,isPdfFile:()=>Dg,noContextMenu:()=>$n,normalizeUnicode:()=>C$,setLayerDimensions:()=>Ar,shadow:()=>_e,stopEvent:()=>En,version:()=>zj});const jt=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),EA=[1,0,0,1,0,0],bp=[.001,0,0,.001,0,0],p$=1e7,rf=1.35,bn={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},ns={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},m$="pdfjs_internal_editor_",ye={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},Ce={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},g$={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},qt={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Eu={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},wt={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,WIDGET:20},Ba={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},nh={ERRORS:0,WARNINGS:1,INFOS:5},Un={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},y$={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let ih=nh.WARNINGS;function v$(n){Number.isInteger(n)&&(ih=n)}function _$(){return ih}function sh(n){ih>=nh.INFOS&&console.log(`Info: ${n}`)}function ve(n){ih>=nh.WARNINGS&&console.log(`Warning: ${n}`)}function Ue(n){throw new Error(n)}function vt(n,e){n||Ue(e)}function w$(n){switch(n?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function b$(n,e=null,t=null){if(!n)return null;try{if(t&&typeof n=="string"&&(t.addDefaultProtocol&&n.startsWith("www.")&&n.match(/\./g)?.length>=2&&(n=`http://${n}`),t.tryConvertEncoding))try{n=I$(n)}catch{}const i=e?new URL(n,e):new URL(n);if(w$(i))return i}catch{}return null}function _e(n,e,t,i=!1){return Object.defineProperty(n,e,{value:t,enumerable:!i,configurable:!0,writable:!1}),t}const Vs=(function(){function e(t,i){this.message=t,this.name=i}return e.prototype=new Error,e.constructor=e,e})();class cw extends Vs{constructor(e,t){super(e,"PasswordException"),this.code=t}}class of extends Vs{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class Tp extends Vs{constructor(e){super(e,"InvalidPDFException")}}class jl extends Vs{constructor(e){super(e,"MissingPDFException")}}class rd extends Vs{constructor(e,t){super(e,"UnexpectedResponseException"),this.status=t}}class T$ extends Vs{constructor(e){super(e,"FormatError")}}class Is extends Vs{constructor(e){super(e,"AbortException")}}function AA(n){(typeof n!="object"||n?.length===void 0)&&Ue("Invalid argument for bytesToString");const e=n.length,t=8192;if(e<t)return String.fromCharCode.apply(null,n);const i=[];for(let s=0;s<e;s+=t){const r=Math.min(s+t,e),o=n.subarray(s,r);i.push(String.fromCharCode.apply(null,o))}return i.join("")}function rh(n){typeof n!="string"&&Ue("Invalid argument for stringToBytes");const e=n.length,t=new Uint8Array(e);for(let i=0;i<e;++i)t[i]=n.charCodeAt(i)&255;return t}function x$(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function kg(n){const e=Object.create(null);for(const[t,i]of n)e[t]=i;return e}function E$(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function A$(){try{return new Function(""),!0}catch{return!1}}class cn{static get isLittleEndian(){return _e(this,"isLittleEndian",E$())}static get isEvalSupported(){return _e(this,"isEvalSupported",A$())}static get isOffscreenCanvasSupported(){return _e(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return _e(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){return typeof navigator<"u"&&typeof navigator?.platform=="string"?_e(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof navigator?.userAgent=="string"&&navigator.userAgent.includes("Firefox")}):_e(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){return _e(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const af=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));class ae{static makeHexColor(e,t,i){return`#${af[e]}${af[t]}${af[i]}`}static scaleMinMax(e,t){let i;e[0]?(e[0]<0&&(i=t[0],t[0]=t[2],t[2]=i),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(i=t[1],t[1]=t[3],t[3]=i),t[1]*=e[3],t[3]*=e[3]):(i=t[0],t[0]=t[1],t[1]=i,i=t[2],t[2]=t[3],t[3]=i,e[1]<0&&(i=t[1],t[1]=t[3],t[3]=i),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(i=t[0],t[0]=t[2],t[2]=i),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){const i=e[0]*t[0]+e[1]*t[2]+t[4],s=e[0]*t[1]+e[1]*t[3]+t[5];return[i,s]}static applyInverseTransform(e,t){const i=t[0]*t[3]-t[1]*t[2],s=(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/i,r=(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/i;return[s,r]}static getAxialAlignedBoundingBox(e,t){const i=this.applyTransform(e,t),s=this.applyTransform(e.slice(2,4),t),r=this.applyTransform([e[0],e[3]],t),o=this.applyTransform([e[2],e[1]],t);return[Math.min(i[0],s[0],r[0],o[0]),Math.min(i[1],s[1],r[1],o[1]),Math.max(i[0],s[0],r[0],o[0]),Math.max(i[1],s[1],r[1],o[1])]}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e){const t=[e[0],e[2],e[1],e[3]],i=e[0]*t[0]+e[1]*t[2],s=e[0]*t[1]+e[1]*t[3],r=e[2]*t[0]+e[3]*t[2],o=e[2]*t[1]+e[3]*t[3],a=(i+o)/2,l=Math.sqrt((i+o)**2-4*(i*o-r*s))/2,c=a+l||1,d=a-l||1;return[Math.sqrt(c),Math.sqrt(d)]}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const i=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),s=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(i>s)return null;const r=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),o=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return r>o?null:[i,r,s,o]}static#e(e,t,i,s,r,o,a,l,c,d){if(c<=0||c>=1)return;const f=1-c,m=c*c,y=m*c,v=f*(f*(f*e+3*c*t)+3*m*i)+y*s,w=f*(f*(f*r+3*c*o)+3*m*a)+y*l;d[0]=Math.min(d[0],v),d[1]=Math.min(d[1],w),d[2]=Math.max(d[2],v),d[3]=Math.max(d[3],w)}static#t(e,t,i,s,r,o,a,l,c,d,f,m){if(Math.abs(c)<1e-12){Math.abs(d)>=1e-12&&this.#e(e,t,i,s,r,o,a,l,-f/d,m);return}const y=d**2-4*f*c;if(y<0)return;const v=Math.sqrt(y),w=2*c;this.#e(e,t,i,s,r,o,a,l,(-d+v)/w,m),this.#e(e,t,i,s,r,o,a,l,(-d-v)/w,m)}static bezierBoundingBox(e,t,i,s,r,o,a,l,c){return c?(c[0]=Math.min(c[0],e,a),c[1]=Math.min(c[1],t,l),c[2]=Math.max(c[2],e,a),c[3]=Math.max(c[3],t,l)):c=[Math.min(e,a),Math.min(t,l),Math.max(e,a),Math.max(t,l)],this.#t(e,i,r,a,t,s,o,l,3*(-e+3*(i-r)+a),6*(e-2*i+r),3*(i-e),c),this.#t(e,i,r,a,t,s,o,l,3*(-t+3*(s-o)+l),6*(t-2*s+o),3*(s-t),c),c}}function I$(n){return decodeURIComponent(escape(n))}let lf=null,uw=null;function C$(n){return lf||(lf=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,uw=new Map([["ﬅ","ſt"]])),n.replaceAll(lf,(e,t,i)=>t?t.normalize("NFKC"):uw.get(i))}function S$(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const n=new Uint8Array(32);return crypto.getRandomValues(n),AA(n)}const Ng="pdfjs_internal_id_";function P$(n){return Uint8Array.prototype.toBase64?n.toBase64():btoa(AA(n))}typeof Promise.try!="function"&&(Promise.try=function(n,...e){return new Promise(t=>{t(n(...e))})});const _i="http://www.w3.org/2000/svg";class jo{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function oh(n,e="text"){if(Qa(n,document.baseURI)){const t=await fetch(n);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,i)=>{const s=new XMLHttpRequest;s.open("GET",n,!0),s.responseType=e,s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE){if(s.status===200||s.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(s.response);return}t(s.responseText);return}i(new Error(s.statusText))}},s.send(null)})}class vc{constructor({viewBox:e,userUnit:t,scale:i,rotation:s,offsetX:r=0,offsetY:o=0,dontFlip:a=!1}){this.viewBox=e,this.userUnit=t,this.scale=i,this.rotation=s,this.offsetX=r,this.offsetY=o,i*=t;const l=(e[2]+e[0])/2,c=(e[3]+e[1])/2;let d,f,m,y;switch(s%=360,s<0&&(s+=360),s){case 180:d=-1,f=0,m=0,y=1;break;case 90:d=0,f=1,m=1,y=0;break;case 270:d=0,f=-1,m=-1,y=0;break;case 0:d=1,f=0,m=0,y=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}a&&(m=-m,y=-y);let v,w,T,x;d===0?(v=Math.abs(c-e[1])*i+r,w=Math.abs(l-e[0])*i+o,T=(e[3]-e[1])*i,x=(e[2]-e[0])*i):(v=Math.abs(l-e[0])*i+r,w=Math.abs(c-e[1])*i+o,T=(e[2]-e[0])*i,x=(e[3]-e[1])*i),this.transform=[d*i,f*i,m*i,y*i,v-d*i*l-m*i*c,w-f*i*l-y*i*c],this.width=T,this.height=x}get rawDims(){const{userUnit:e,viewBox:t}=this,i=t.map(s=>s*e);return _e(this,"rawDims",{pageWidth:i[2]-i[0],pageHeight:i[3]-i[1],pageX:i[0],pageY:i[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:i=this.offsetX,offsetY:s=this.offsetY,dontFlip:r=!1}={}){return new vc({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:i,offsetY:s,dontFlip:r})}convertToViewportPoint(e,t){return ae.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){const t=ae.applyTransform([e[0],e[1]],this.transform),i=ae.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],i[0],i[1]]}convertToPdfPoint(e,t){return ae.applyInverseTransform([e,t],this.transform)}}class Mg extends Vs{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function ah(n){const e=n.length;let t=0;for(;t<e&&n[t].trim()==="";)t++;return n.substring(t,t+5).toLowerCase()==="data:"}function Dg(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function R$(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function k$(n,e="document.pdf"){if(typeof n!="string")return e;if(ah(n))return ve('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const t=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,i=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,s=t.exec(n);let r=i.exec(s[1])||i.exec(s[2])||i.exec(s[3]);if(r&&(r=r[0],r.includes("%")))try{r=i.exec(decodeURIComponent(r))[0]}catch{}return r||e}class dw{started=Object.create(null);times=[];time(e){e in this.started&&ve(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||ve(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:i}of this.times)t=Math.max(i.length,t);for(const{name:i,start:s,end:r}of this.times)e.push(`${i.padEnd(t)} ${r-s}ms
`);return e.join("")}}function Qa(n,e){try{const{protocol:t}=e?new URL(n,e):new URL(n);return t==="http:"||t==="https:"}catch{return!1}}function $n(n){n.preventDefault()}function En(n){n.preventDefault(),n.stopPropagation()}class IA{static#e;static toDateObject(e){if(!e||typeof e!="string")return null;this.#e||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const t=this.#e.exec(e);if(!t)return null;const i=parseInt(t[1],10);let s=parseInt(t[2],10);s=s>=1&&s<=12?s-1:0;let r=parseInt(t[3],10);r=r>=1&&r<=31?r:1;let o=parseInt(t[4],10);o=o>=0&&o<=23?o:0;let a=parseInt(t[5],10);a=a>=0&&a<=59?a:0;let l=parseInt(t[6],10);l=l>=0&&l<=59?l:0;const c=t[7]||"Z";let d=parseInt(t[8],10);d=d>=0&&d<=23?d:0;let f=parseInt(t[9],10)||0;return f=f>=0&&f<=59?f:0,c==="-"?(o+=d,a+=f):c==="+"&&(o-=d,a-=f),new Date(Date.UTC(i,s,r,o,a,l))}}function N$(n,{scale:e=1,rotation:t=0}){const{width:i,height:s}=n.attributes.style,r=[0,0,parseInt(i),parseInt(s)];return new vc({viewBox:r,userUnit:1,scale:e,rotation:t})}function Lg(n){if(n.startsWith("#")){const e=parseInt(n.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(e=>parseInt(e)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(ve(`Not a valid color format: "${n}"`),[0,0,0])}function M$(n){const e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);for(const t of n.keys()){e.style.color=t;const i=window.getComputedStyle(e).color;n.set(t,Lg(i))}e.remove()}function Ye(n){const{a:e,b:t,c:i,d:s,e:r,f:o}=n.getTransform();return[e,t,i,s,r,o]}function Wn(n){const{a:e,b:t,c:i,d:s,e:r,f:o}=n.getTransform().invertSelf();return[e,t,i,s,r,o]}function Ar(n,e,t=!1,i=!0){if(e instanceof vc){const{pageWidth:s,pageHeight:r}=e.rawDims,{style:o}=n,a=cn.isCSSRoundSupported,l=`var(--scale-factor) * ${s}px`,c=`var(--scale-factor) * ${r}px`,d=a?`round(down, ${l}, var(--scale-round-x, 1px))`:`calc(${l})`,f=a?`round(down, ${c}, var(--scale-round-y, 1px))`:`calc(${c})`;!t||e.rotation%180===0?(o.width=d,o.height=f):(o.width=f,o.height=d)}i&&n.setAttribute("data-main-rotation",e.rotation)}class xp{constructor(){const e=window.devicePixelRatio||1;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}}class vl{#e=null;#t=null;#n;#i=null;#r=null;static#s=null;constructor(e){this.#n=e,vl.#s||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"})}render(){const e=this.#e=document.createElement("div");e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=this.#n._uiManager._signal;e.addEventListener("contextmenu",$n,{signal:t}),e.addEventListener("pointerdown",vl.#l,{signal:t});const i=this.#i=document.createElement("div");i.className="buttons",e.append(i);const s=this.#n.toolbarPosition;if(s){const{style:r}=e,o=this.#n._uiManager.direction==="ltr"?1-s[0]:s[0];r.insetInlineEnd=`${100*o}%`,r.top=`calc(${100*s[1]}% + var(--editor-toolbar-vert-offset))`}return this.#h(),e}get div(){return this.#e}static#l(e){e.stopPropagation()}#a(e){this.#n._focusEventsAllowed=!1,En(e)}#u(e){this.#n._focusEventsAllowed=!0,En(e)}#c(e){const t=this.#n._uiManager._signal;e.addEventListener("focusin",this.#a.bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",this.#u.bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",$n,{signal:t})}hide(){this.#e.classList.add("hidden"),this.#t?.hideDropdown()}show(){this.#e.classList.remove("hidden"),this.#r?.shown()}#h(){const{editorType:e,_uiManager:t}=this.#n,i=document.createElement("button");i.className="delete",i.tabIndex=0,i.setAttribute("data-l10n-id",vl.#s[e]),this.#c(i),i.addEventListener("click",s=>{t.delete()},{signal:t._signal}),this.#i.append(i)}get#d(){const e=document.createElement("div");return e.className="divider",e}async addAltText(e){const t=await e.render();this.#c(t),this.#i.prepend(t,this.#d),this.#r=e}addColorPicker(e){this.#t=e;const t=e.renderButton();this.#c(t),this.#i.prepend(t,this.#d)}remove(){this.#e.remove(),this.#t?.destroy(),this.#t=null}}class D${#e=null;#t=null;#n;constructor(e){this.#n=e}#i(){const e=this.#t=document.createElement("div");e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",$n,{signal:this.#n._signal});const t=this.#e=document.createElement("div");return t.className="buttons",e.append(t),this.#s(),e}#r(e,t){let i=0,s=0;for(const r of e){const o=r.y+r.height;if(o<i)continue;const a=r.x+(t?r.width:0);if(o>i){s=a,i=o;continue}t?a>s&&(s=a):a<s&&(s=a)}return[t?1-s:s,i]}show(e,t,i){const[s,r]=this.#r(t,i),{style:o}=this.#t||=this.#i();e.append(this.#t),o.insetInlineEnd=`${100*s}%`,o.top=`calc(${100*r}% + var(--editor-toolbar-vert-offset))`}hide(){this.#t.remove()}#s(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const i=this.#n._signal;e.addEventListener("contextmenu",$n,{signal:i}),e.addEventListener("click",()=>{this.#n.highlightSelection("floating_button")},{signal:i}),this.#e.append(e)}}function od(n,e,t){for(const i of t)e.addEventListener(i,n[i].bind(n))}class L${#e=0;get id(){return`${m$}${this.#e++}`}}class Fg{#e=S$();#t=0;#n=null;static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',i=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),s=new Image;s.src=e;const r=s.decode().then(()=>(i.drawImage(s,0,0,1,1,0,0,1,3),new Uint32Array(i.getImageData(0,0,1,1).data.buffer)[0]===0));return _e(this,"_isSVGFittingCanvas",r)}async#i(e,t){this.#n||=new Map;let i=this.#n.get(e);if(i===null)return null;if(i?.bitmap)return i.refCounter+=1,i;try{i||={bitmap:null,id:`image_${this.#e}_${this.#t++}`,refCounter:0,isSvg:!1};let s;if(typeof t=="string"?(i.url=t,s=await oh(t,"blob")):t instanceof File?s=i.file=t:t instanceof Blob&&(s=t),s.type==="image/svg+xml"){const r=Fg._isSVGFittingCanvas,o=new FileReader,a=new Image,l=new Promise((c,d)=>{a.onload=()=>{i.bitmap=a,i.isSvg=!0,c()},o.onload=async()=>{const f=i.svgUrl=o.result;a.src=await r?`${f}#svgView(preserveAspectRatio(none))`:f},a.onerror=o.onerror=d});o.readAsDataURL(s),await l}else i.bitmap=await createImageBitmap(s);i.refCounter=1}catch(s){ve(s),i=null}return this.#n.set(e,i),i&&this.#n.set(i.id,i),i}async getFromFile(e){const{lastModified:t,name:i,size:s,type:r}=e;return this.#i(`${t}_${i}_${s}_${r}`,e)}async getFromUrl(e){return this.#i(e,e)}async getFromBlob(e,t){const i=await t;return this.#i(e,i)}async getFromId(e){this.#n||=new Map;const t=this.#n.get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:i}=t;return delete t.blobPromise,this.getFromBlob(t.id,i)}return this.getFromUrl(t.url)}getFromCanvas(e,t){this.#n||=new Map;let i=this.#n.get(e);if(i?.bitmap)return i.refCounter+=1,i;const s=new OffscreenCanvas(t.width,t.height);return s.getContext("2d").drawImage(t,0,0),i={bitmap:s.transferToImageBitmap(),id:`image_${this.#e}_${this.#t++}`,refCounter:1,isSvg:!1},this.#n.set(e,i),this.#n.set(i.id,i),i}getSvgUrl(e){const t=this.#n.get(e);return t?.isSvg?t.svgUrl:null}deleteId(e){this.#n||=new Map;const t=this.#n.get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:i}=t;if(!t.url&&!t.file){const s=new OffscreenCanvas(i.width,i.height);s.getContext("bitmaprenderer").transferFromImageBitmap(i),t.blobPromise=s.convertToBlob()}i.close?.(),t.bitmap=null}isValidId(e){return e.startsWith(`image_${this.#e}_`)}}class F${#e=[];#t=!1;#n;#i=-1;constructor(e=128){this.#n=e}add({cmd:e,undo:t,post:i,mustExec:s,type:r=NaN,overwriteIfSameType:o=!1,keepUndo:a=!1}){if(s&&e(),this.#t)return;const l={cmd:e,undo:t,post:i,type:r};if(this.#i===-1){this.#e.length>0&&(this.#e.length=0),this.#i=0,this.#e.push(l);return}if(o&&this.#e[this.#i].type===r){a&&(l.undo=this.#e[this.#i].undo),this.#e[this.#i]=l;return}const c=this.#i+1;c===this.#n?this.#e.splice(0,1):(this.#i=c,c<this.#e.length&&this.#e.splice(c)),this.#e.push(l)}undo(){if(this.#i===-1)return;this.#t=!0;const{undo:e,post:t}=this.#e[this.#i];e(),t?.(),this.#t=!1,this.#i-=1}redo(){if(this.#i<this.#e.length-1){this.#i+=1,this.#t=!0;const{cmd:e,post:t}=this.#e[this.#i];e(),t?.(),this.#t=!1}}hasSomethingToUndo(){return this.#i!==-1}hasSomethingToRedo(){return this.#i<this.#e.length-1}cleanType(e){if(this.#i!==-1){for(let t=this.#i;t>=0;t--)if(this.#e[t].type!==e){this.#e.splice(t+1,this.#i-t),this.#i=t;return}this.#e.length=0,this.#i=-1}}destroy(){this.#e=null}}class _c{constructor(e){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=cn.platform;for(const[i,s,r={}]of e)for(const o of i){const a=o.startsWith("mac+");t&&a?(this.callbacks.set(o.slice(4),{callback:s,options:r}),this.allKeys.add(o.split("+").at(-1))):!t&&!a&&(this.callbacks.set(o,{callback:s,options:r}),this.allKeys.add(o.split("+").at(-1)))}}#e(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t}exec(e,t){if(!this.allKeys.has(t.key))return;const i=this.callbacks.get(this.#e(t));if(!i)return;const{callback:s,options:{bubbles:r=!1,args:o=[],checker:a=null}}=i;a&&!a(e,t)||(s.bind(e,...o,t)(),r||En(t))}}class Vg{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return M$(e),_e(this,"_colors",e)}convert(e){const t=Lg(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[i,s]of this._colors)if(s.every((r,o)=>r===t[o]))return Vg._colorsMapping.get(i);return t}getHexCode(e){const t=this._colors.get(e);return t?ae.makeHexColor(...t):e}}class Cs{#e=new AbortController;#t=null;#n=new Map;#i=new Map;#r=null;#s=null;#l=null;#a=new F$;#u=null;#c=null;#h=0;#d=new Set;#f=null;#o=null;#p=new Set;_editorUndoBar=null;#g=!1;#m=!1;#y=!1;#w=null;#v=null;#b=null;#x=null;#A=!1;#C=null;#P=new L$;#T=!1;#S=!1;#I=null;#k=null;#D=null;#F=null;#E=ye.NONE;#_=new Set;#M=null;#z=null;#q=null;#H={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#V=[0,0];#L=null;#O=null;#G=null;#N=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const e=Cs.prototype,t=o=>o.#O.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),i=(o,{target:a})=>{if(a instanceof HTMLInputElement){const{type:l}=a;return l!=="text"&&l!=="number"}return!0},s=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return _e(this,"_keyboardManager",new _c([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],e.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:i}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&o.#O.contains(a)&&!o.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&o.#O.contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-s,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[s,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-s],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,s],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}]]))}constructor(e,t,i,s,r,o,a,l,c,d,f,m,y){const v=this._signal=this.#e.signal;this.#O=e,this.#G=t,this.#r=i,this._eventBus=s,s._on("editingaction",this.onEditingAction.bind(this),{signal:v}),s._on("pagechanging",this.onPageChanging.bind(this),{signal:v}),s._on("scalechanging",this.onScaleChanging.bind(this),{signal:v}),s._on("rotationchanging",this.onRotationChanging.bind(this),{signal:v}),s._on("setpreference",this.onSetPreference.bind(this),{signal:v}),s._on("switchannotationeditorparams",w=>this.updateParams(w.type,w.value),{signal:v}),this.#te(),this.#re(),this.#K(),this.#s=r.annotationStorage,this.#w=r.filterFactory,this.#z=o,this.#x=a||null,this.#g=l,this.#m=c,this.#y=d,this.#F=f||null,this.viewParameters={realScale:jo.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=m||null,this._supportsPinchToZoom=y!==!1}destroy(){this.#N?.resolve(),this.#N=null,this.#e?.abort(),this.#e=null,this._signal=null;for(const e of this.#i.values())e.destroy();this.#i.clear(),this.#n.clear(),this.#p.clear(),this.#t=null,this.#_.clear(),this.#a.destroy(),this.#r?.destroy(),this.#C?.hide(),this.#C=null,this.#v&&(clearTimeout(this.#v),this.#v=null),this.#L&&(clearTimeout(this.#L),this.#L=null),this._editorUndoBar?.destroy()}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return this.#F}get useNewAltTextFlow(){return this.#m}get useNewAltTextWhenAddingImage(){return this.#y}get hcmFilter(){return _e(this,"hcmFilter",this.#z?this.#w.addHCMFilter(this.#z.foreground,this.#z.background):"none")}get direction(){return _e(this,"direction",getComputedStyle(this.#O).direction)}get highlightColors(){return _e(this,"highlightColors",this.#x?new Map(this.#x.split(",").map(e=>e.split("=").map(t=>t.trim()))):null)}get highlightColorNames(){return _e(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#c=e}setMainHighlightColorPicker(e){this.#D=e}editAltText(e,t=!1){this.#r?.editAltText(this,e,t)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":this.#y=t;break}}onPageChanging({pageNumber:e}){this.#h=e-1}focusMainContainer(){this.#O.focus()}findParent(e,t){for(const i of this.#i.values()){const{x:s,y:r,width:o,height:a}=i.div.getBoundingClientRect();if(e>=s&&e<=s+o&&t>=r&&t<=r+a)return i}return null}disableUserSelect(e=!1){this.#G.classList.toggle("noUserSelect",e)}addShouldRescale(e){this.#p.add(e)}removeShouldRescale(e){this.#p.delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*jo.PDF_TO_CSS_UNITS;for(const t of this.#p)t.onScaleChanging();this.#c?.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}#U({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e}#W(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const i of this.#i.values())if(i.hasTextLayer(e))return i;return null}highlightSelection(e=""){const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:i,anchorOffset:s,focusNode:r,focusOffset:o}=t,a=t.toString(),c=this.#U(t).closest(".textLayer"),d=this.getSelectionBoxes(c);if(!d)return;t.empty();const f=this.#W(c),m=this.#E===ye.NONE,y=()=>{f?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:d,anchorNode:i,anchorOffset:s,focusNode:r,focusOffset:o,text:a}),m&&this.showAllEditors("highlight",!0,!0)};if(m){this.switchToMode(ye.HIGHLIGHT,y);return}y()}#Z(){const e=document.getSelection();if(!e||e.isCollapsed)return;const i=this.#U(e).closest(".textLayer"),s=this.getSelectionBoxes(i);s&&(this.#C||=new D$(this),this.#C.show(i,s,this.direction==="ltr"))}addToAnnotationStorage(e){!e.isEmpty()&&this.#s&&!this.#s.has(e.id)&&this.#s.setValue(e.id,e)}#ee(){const e=document.getSelection();if(!e||e.isCollapsed){this.#M&&(this.#C?.hide(),this.#M=null,this.#R({hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===this.#M)return;const s=this.#U(e).closest(".textLayer");if(!s){this.#M&&(this.#C?.hide(),this.#M=null,this.#R({hasSelectedText:!1}));return}if(this.#C?.hide(),this.#M=t,this.#R({hasSelectedText:!0}),!(this.#E!==ye.HIGHLIGHT&&this.#E!==ye.NONE)&&(this.#E===ye.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#A=this.isShiftKeyDown,!this.isShiftKeyDown)){const r=this.#E===ye.HIGHLIGHT?this.#W(s):null;r?.toggleDrawing();const o=new AbortController,a=this.combinedSignal(o),l=c=>{c.type==="pointerup"&&c.button!==0||(o.abort(),r?.toggleDrawing(!0),c.type==="pointerup"&&this.#j("main_toolbar"))};window.addEventListener("pointerup",l,{signal:a}),window.addEventListener("blur",l,{signal:a})}}#j(e=""){this.#E===ye.HIGHLIGHT?this.highlightSelection(e):this.#g&&this.#Z()}#te(){document.addEventListener("selectionchange",this.#ee.bind(this),{signal:this._signal})}#ne(){if(this.#b)return;this.#b=new AbortController;const e=this.combinedSignal(this.#b);window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})}#ie(){this.#b?.abort(),this.#b=null}blur(){if(this.isShiftKeyDown=!1,this.#A&&(this.#A=!1,this.#j("main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of this.#_)if(t.div.contains(e)){this.#k=[t,e],t._focusEventsAllowed=!1;break}}focus(){if(!this.#k)return;const[e,t]=this.#k;this.#k=null,t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}#K(){if(this.#I)return;this.#I=new AbortController;const e=this.combinedSignal(this.#I);window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})}#se(){this.#I?.abort(),this.#I=null}#Y(){if(this.#u)return;this.#u=new AbortController;const e=this.combinedSignal(this.#u);document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})}#J(){this.#u?.abort(),this.#u=null}#re(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})}addEditListeners(){this.#K(),this.#Y()}removeEditListeners(){this.#se(),this.#J()}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const i of this.#o)if(i.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const i of this.#o)if(i.isHandlingMimeForPasting(t.type)){i.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){if(e.preventDefault(),this.#t?.commitOrRemove(),!this.hasSelection)return;const t=[];for(const i of this.#_){const s=i.serialize(!0);s&&t.push(s)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const r of t.items)for(const o of this.#o)if(o.isHandlingMimeForPasting(r.type)){o.paste(r,this.currentLayer);return}let i=t.getData("application/pdfjs");if(!i)return;try{i=JSON.parse(i)}catch(r){ve(`paste: "${r.message}".`);return}if(!Array.isArray(i))return;this.unselectAll();const s=this.currentLayer;try{const r=[];for(const l of i){const c=await s.deserialize(l);if(!c)return;r.push(c)}const o=()=>{for(const l of r)this.#X(l);this.#Q(r)},a=()=>{for(const l of r)l.remove()};this.addCommands({cmd:o,undo:a,mustExec:!0})}catch(r){ve(`paste: "${r.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),this.#E!==ye.NONE&&!this.isEditorHandlingKeyboard&&Cs._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,this.#A&&(this.#A=!1,this.#j("main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}#R(e){Object.entries(e).some(([i,s])=>this.#H[i]!==s)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#H,e)}),this.#E===ye.HIGHLIGHT&&e.hasSelectedEditor===!1&&this.#B([[Ce.HIGHLIGHT_FREE,!0]]))}#B(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})}setEditingState(e){e?(this.#ne(),this.#Y(),this.#R({isEditing:this.#E!==ye.NONE,isEmpty:this.#$(),hasSomethingToUndo:this.#a.hasSomethingToUndo(),hasSomethingToRedo:this.#a.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#ie(),this.#J(),this.#R({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!this.#o){this.#o=e;for(const t of this.#o)this.#B(t.defaultPropertiesToUpdate)}}getId(){return this.#P.id}get currentLayer(){return this.#i.get(this.#h)}getLayer(e){return this.#i.get(e)}get currentPageIndex(){return this.#h}addLayer(e){this.#i.set(e.pageIndex,e),this.#T?e.enable():e.disable()}removeLayer(e){this.#i.delete(e.pageIndex)}async updateMode(e,t=null,i=!1){if(this.#E!==e&&!(this.#N&&(await this.#N.promise,!this.#N))){if(this.#N=Promise.withResolvers(),this.#E=e,e===ye.NONE){this.setEditingState(!1),this.#ae(),this._editorUndoBar?.hide(),this.#N.resolve();return}this.setEditingState(!0),await this.#oe(),this.unselectAll();for(const s of this.#i.values())s.updateMode(e);if(!t){i&&this.addNewEditorFromKeyboard(),this.#N.resolve();return}for(const s of this.#n.values())s.annotationElementId===t?(this.setSelected(s),s.enterInEditMode()):s.unselect();this.#N.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e!==this.#E&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,t){if(this.#o){switch(e){case Ce.CREATE:this.currentLayer.addNewEditor();return;case Ce.HIGHLIGHT_DEFAULT_COLOR:this.#D?.updateColor(t);break;case Ce.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#q||=new Map).set(e,t),this.showAllEditors("highlight",t);break}for(const i of this.#_)i.updateParams(e,t);for(const i of this.#o)i.updateDefaultParams(e,t)}}showAllEditors(e,t,i=!1){for(const r of this.#n.values())r.editorType===e&&r.show(t);(this.#q?.get(Ce.HIGHLIGHT_SHOW_ALL)??!0)!==t&&this.#B([[Ce.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(this.#S!==e){this.#S=e;for(const t of this.#i.values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}async#oe(){if(!this.#T){this.#T=!0;const e=[];for(const t of this.#i.values())e.push(t.enable());await Promise.all(e);for(const t of this.#n.values())t.enable()}}#ae(){if(this.unselectAll(),this.#T){this.#T=!1;for(const e of this.#i.values())e.disable();for(const e of this.#n.values())e.disable()}}getEditors(e){const t=[];for(const i of this.#n.values())i.pageIndex===e&&t.push(i);return t}getEditor(e){return this.#n.get(e)}addEditor(e){this.#n.set(e.id,e)}removeEditor(e){e.div.contains(document.activeElement)&&(this.#v&&clearTimeout(this.#v),this.#v=setTimeout(()=>{this.focusMainContainer(),this.#v=null},0)),this.#n.delete(e.id),this.unselect(e),(!e.annotationElementId||!this.#d.has(e.annotationElementId))&&this.#s?.remove(e.id)}addDeletedAnnotationElement(e){this.#d.add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return this.#d.has(e)}removeDeletedAnnotationElement(e){this.#d.delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}#X(e){const t=this.#i.get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))}setActiveEditor(e){this.#t!==e&&(this.#t=e,e&&this.#B(e.propertiesToUpdate))}get#le(){let e=null;for(e of this.#_);return e}updateUI(e){this.#le===e&&this.#B(e.propertiesToUpdate)}updateUIForDefaultProperties(e){this.#B(e.defaultPropertiesToUpdate)}toggleSelected(e){if(this.#_.has(e)){this.#_.delete(e),e.unselect(),this.#R({hasSelectedEditor:this.hasSelection});return}this.#_.add(e),e.select(),this.#B(e.propertiesToUpdate),this.#R({hasSelectedEditor:!0})}setSelected(e){this.#c?.commitOrRemove();for(const t of this.#_)t!==e&&t.unselect();this.#_.clear(),this.#_.add(e),e.select(),this.#B(e.propertiesToUpdate),this.#R({hasSelectedEditor:!0})}isSelected(e){return this.#_.has(e)}get firstSelectedEditor(){return this.#_.values().next().value}unselect(e){e.unselect(),this.#_.delete(e),this.#R({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#_.size!==0}get isEnterHandled(){return this.#_.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#a.undo(),this.#R({hasSomethingToUndo:this.#a.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#$()}),this._editorUndoBar?.hide()}redo(){this.#a.redo(),this.#R({hasSomethingToUndo:!0,hasSomethingToRedo:this.#a.hasSomethingToRedo(),isEmpty:this.#$()})}addCommands(e){this.#a.add(e),this.#R({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#$()})}cleanUndoStack(e){this.#a.cleanType(e)}#$(){if(this.#n.size===0)return!0;if(this.#n.size===1)for(const e of this.#n.values())return e.isEmpty();return!1}delete(){this.commitOrRemove();const e=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...this.#_],i=()=>{this._editorUndoBar?.show(s,t.length===1?t[0].editorType:t.length);for(const r of t)r.remove()},s=()=>{for(const r of t)this.#X(r)};this.addCommands({cmd:i,undo:s,mustExec:!0})}commitOrRemove(){this.#t?.commitOrRemove()}hasSomethingToControl(){return this.#t||this.hasSelection}#Q(e){for(const t of this.#_)t.unselect();this.#_.clear();for(const t of e)t.isEmpty()||(this.#_.add(t),t.select());this.#R({hasSelectedEditor:this.hasSelection})}selectAll(){for(const e of this.#_)e.commit();this.#Q(this.#n.values())}unselectAll(){if(!(this.#t&&(this.#t.commitOrRemove(),this.#E!==ye.NONE))&&!this.#c?.commitOrRemove()&&this.hasSelection){for(const e of this.#_)e.unselect();this.#_.clear(),this.#R({hasSelectedEditor:!1})}}translateSelectedEditors(e,t,i=!1){if(i||this.commitOrRemove(),!this.hasSelection)return;this.#V[0]+=e,this.#V[1]+=t;const[s,r]=this.#V,o=[...this.#_],a=1e3;this.#L&&clearTimeout(this.#L),this.#L=setTimeout(()=>{this.#L=null,this.#V[0]=this.#V[1]=0,this.addCommands({cmd:()=>{for(const l of o)this.#n.has(l.id)&&l.translateInPage(s,r)},undo:()=>{for(const l of o)this.#n.has(l.id)&&l.translateInPage(-s,-r)},mustExec:!1})},a);for(const l of o)l.translateInPage(e,t)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#f=new Map;for(const e of this.#_)this.#f.set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#f)return!1;this.disableUserSelect(!1);const e=this.#f;this.#f=null;let t=!1;for(const[{x:s,y:r,pageIndex:o},a]of e)a.newX=s,a.newY=r,a.newPageIndex=o,t||=s!==a.savedX||r!==a.savedY||o!==a.savedPageIndex;if(!t)return!1;const i=(s,r,o,a)=>{if(this.#n.has(s.id)){const l=this.#i.get(a);l?s._setParentAndPosition(l,r,o):(s.pageIndex=a,s.x=r,s.y=o)}};return this.addCommands({cmd:()=>{for(const[s,{newX:r,newY:o,newPageIndex:a}]of e)i(s,r,o,a)},undo:()=>{for(const[s,{savedX:r,savedY:o,savedPageIndex:a}]of e)i(s,r,o,a)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(this.#f)for(const i of this.#f.keys())i.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#_.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return this.#t===e}getActive(){return this.#t}getMode(){return this.#E}get imageManager(){return _e(this,"imageManager",new Fg)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let c=0,d=t.rangeCount;c<d;c++)if(!e.contains(t.getRangeAt(c).commonAncestorContainer))return null;const{x:i,y:s,width:r,height:o}=e.getBoundingClientRect();let a;switch(e.getAttribute("data-main-rotation")){case"90":a=(c,d,f,m)=>({x:(d-s)/o,y:1-(c+f-i)/r,width:m/o,height:f/r});break;case"180":a=(c,d,f,m)=>({x:1-(c+f-i)/r,y:1-(d+m-s)/o,width:f/r,height:m/o});break;case"270":a=(c,d,f,m)=>({x:1-(d+m-s)/o,y:(c-i)/r,width:m/o,height:f/r});break;default:a=(c,d,f,m)=>({x:(c-i)/r,y:(d-s)/o,width:f/r,height:m/o});break}const l=[];for(let c=0,d=t.rangeCount;c<d;c++){const f=t.getRangeAt(c);if(!f.collapsed)for(const{x:m,y,width:v,height:w}of f.getClientRects())v===0||w===0||l.push(a(m,y,v,w))}return l.length===0?null:l}addChangedExistingAnnotation({annotationElementId:e,id:t}){(this.#l||=new Map).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){this.#l?.delete(e)}renderAnnotationElement(e){const t=this.#l?.get(e.data.id);if(!t)return;const i=this.#s.getRawValue(t);i&&(this.#E===ye.NONE&&!i.hasBeenModified||i.renderAnnotationElement(e))}}class Jn{#e=null;#t=!1;#n=null;#i=null;#r=null;#s=null;#l=!1;#a=null;#u=null;#c=null;#h=null;#d=!1;static#f=null;static _l10n=null;constructor(e){this.#u=e,this.#d=e._uiManager.useNewAltTextFlow,Jn.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(e){Jn._l10n??=e}async render(){const e=this.#n=document.createElement("button");e.className="altText",e.tabIndex="0";const t=this.#i=document.createElement("span");e.append(t),this.#d?(e.classList.add("new"),e.setAttribute("data-l10n-id",Jn.#f.missing),t.setAttribute("data-l10n-id",Jn.#f["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const i=this.#u._uiManager._signal;e.addEventListener("contextmenu",$n,{signal:i}),e.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:i});const s=r=>{r.preventDefault(),this.#u._uiManager.editAltText(this.#u),this.#d&&this.#u._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#o}})};return e.addEventListener("click",s,{capture:!0,signal:i}),e.addEventListener("keydown",r=>{r.target===e&&r.key==="Enter"&&(this.#l=!0,s(r))},{signal:i}),await this.#p(),e}get#o(){return this.#e&&"added"||this.#e===null&&this.guessedText&&"review"||"missing"}finish(){this.#n&&(this.#n.focus({focusVisible:this.#l}),this.#l=!1)}isEmpty(){return this.#d?this.#e===null:!this.#e&&!this.#t}hasData(){return this.#d?this.#e!==null||!!this.#c:this.isEmpty()}get guessedText(){return this.#c}async setGuessedText(e){this.#e===null&&(this.#c=e,this.#h=await Jn._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e}),this.#p())}toggleAltTextBadge(e=!1){if(!this.#d||this.#e){this.#a?.remove(),this.#a=null;return}if(!this.#a){const t=this.#a=document.createElement("div");t.className="noAltTextBadge",this.#u.div.append(t)}this.#a.classList.toggle("hidden",!e)}serialize(e){let t=this.#e;return!e&&this.#c===t&&(t=this.#h),{altText:t,decorative:this.#t,guessedText:this.#c,textWithDisclaimer:this.#h}}get data(){return{altText:this.#e,decorative:this.#t}}set data({altText:e,decorative:t,guessedText:i,textWithDisclaimer:s,cancel:r=!1}){i&&(this.#c=i,this.#h=s),!(this.#e===e&&this.#t===t)&&(r||(this.#e=e,this.#t=t),this.#p())}toggle(e=!1){this.#n&&(!e&&this.#s&&(clearTimeout(this.#s),this.#s=null),this.#n.disabled=!e)}shown(){this.#u._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#o}})}destroy(){this.#n?.remove(),this.#n=null,this.#i=null,this.#r=null,this.#a?.remove(),this.#a=null}async#p(){const e=this.#n;if(!e)return;if(this.#d){if(e.classList.toggle("done",!!this.#e),e.setAttribute("data-l10n-id",Jn.#f[this.#o]),this.#i?.setAttribute("data-l10n-id",Jn.#f[`${this.#o}-label`]),!this.#e){this.#r?.remove();return}}else{if(!this.#e&&!this.#t){e.classList.remove("done"),this.#r?.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=this.#r;if(!t){this.#r=t=document.createElement("span"),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${this.#u.id}`;const s=100,r=this.#u._uiManager._signal;r.addEventListener("abort",()=>{clearTimeout(this.#s),this.#s=null},{once:!0}),e.addEventListener("mouseenter",()=>{this.#s=setTimeout(()=>{this.#s=null,this.#r.classList.add("show"),this.#u._reportTelemetry({action:"alt_text_tooltip"})},s)},{signal:r}),e.addEventListener("mouseleave",()=>{this.#s&&(clearTimeout(this.#s),this.#s=null),this.#r?.classList.remove("show")},{signal:r})}this.#t?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=this.#e),t.parentNode||e.append(t),this.#u.getImageForAltText()?.setAttribute("aria-describedby",t.id)}}class lh{#e;#t=!1;#n=null;#i;#r;#s;#l;#a;#u=null;#c;#h=null;constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:i=null,onPinchStart:s=null,onPinching:r=null,onPinchEnd:o=null,signal:a}){this.#e=e,this.#n=i,this.#i=t,this.#r=s,this.#s=r,this.#l=o,this.#c=new AbortController,this.#a=AbortSignal.any([a,this.#c.signal]),e.addEventListener("touchstart",this.#d.bind(this),{passive:!1,signal:this.#a})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return _e(this,"MIN_TOUCH_DISTANCE_TO_PINCH",35/(window.devicePixelRatio||1))}#d(e){if(this.#i?.()||e.touches.length<2)return;if(!this.#h){this.#h=new AbortController;const s=AbortSignal.any([this.#a,this.#h.signal]),r=this.#e,o={signal:s,passive:!1};r.addEventListener("touchmove",this.#f.bind(this),o),r.addEventListener("touchend",this.#o.bind(this),o),r.addEventListener("touchcancel",this.#o.bind(this),o),this.#r?.()}if(En(e),e.touches.length!==2||this.#n?.()){this.#u=null;return}let[t,i]=e.touches;t.identifier>i.identifier&&([t,i]=[i,t]),this.#u={touch0X:t.screenX,touch0Y:t.screenY,touch1X:i.screenX,touch1Y:i.screenY}}#f(e){if(!this.#u||e.touches.length!==2)return;let[t,i]=e.touches;t.identifier>i.identifier&&([t,i]=[i,t]);const{screenX:s,screenY:r}=t,{screenX:o,screenY:a}=i,l=this.#u,{touch0X:c,touch0Y:d,touch1X:f,touch1Y:m}=l,y=f-c,v=m-d,w=o-s,T=a-r,x=Math.hypot(w,T)||1,P=Math.hypot(y,v)||1;if(!this.#t&&Math.abs(P-x)<=lh.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(l.touch0X=s,l.touch0Y=r,l.touch1X=o,l.touch1Y=a,e.preventDefault(),!this.#t){this.#t=!0;return}const S=[(s+o)/2,(r+a)/2];this.#s?.(S,P,x)}#o(e){this.#h.abort(),this.#h=null,this.#l?.(),this.#u&&(e.preventDefault(),this.#u=null,this.#t=!1)}destroy(){this.#c?.abort(),this.#c=null}}class de{#e=null;#t=null;#n=null;#i=!1;#r=null;#s="";#l=!1;#a=null;#u=null;#c=null;#h=null;#d="";#f=!1;#o=null;#p=!1;#g=!1;#m=!1;#y=null;#w=0;#v=0;#b=null;#x=null;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#A=!1;#C=de._zIndex++;static _borderLineWidth=-1;static _colorManager=new Vg;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const e=de.prototype._resizeWithKeyboard,t=Cs.TRANSLATE_SMALL,i=Cs.TRANSLATE_BIG;return _e(this,"_resizerKeyboardManager",new _c([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,i]}],[["Escape","mac+Escape"],de.prototype._stopResizingWithKeyboard]]))}constructor(e){this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;const{rotation:t,rawDims:{pageWidth:i,pageHeight:s,pageX:r,pageY:o}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,s],this.pageTranslation=[r,o];const[a,l]=this.parentDimensions;this.x=e.x/a,this.y=e.y/l,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get isDrawer(){return!1}static get _defaultLineColor(){return _e(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new V$({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(de._l10n??=e,de._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),de._borderLineWidth!==-1)return;const i=getComputedStyle(document.documentElement);de._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){Ue("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#A}set _isDraggable(e){this.#A=e,this.div?.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#C}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):this.#U(),this.parent=e}focusin(e){this._focusEventsAllowed&&(this.#f?this.#f=!1:this.parent.setSelected(this))}focusout(e){!this._focusEventsAllowed||!this.isAttachedToDOM||e.relatedTarget?.closest(`#${this.id}`)||(e.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,i,s){const[r,o]=this.parentDimensions;[i,s]=this.screenToPageTranslation(i,s),this.x=(e+i)/r,this.y=(t+s)/o,this.fixAndSetPosition()}#P([e,t],i,s){[i,s]=this.screenToPageTranslation(i,s),this.x+=i/e,this.y+=s/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(e,t){this.#P(this.parentDimensions,e,t)}translateInPage(e,t){this.#o||=[this.x,this.y,this.width,this.height],this.#P(this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}drag(e,t){this.#o||=[this.x,this.y,this.width,this.height];const{div:i,parentDimensions:[s,r]}=this;if(this.x+=e/s,this.y+=t/r,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:f,y:m}=this.div.getBoundingClientRect();this.parent.findNewParent(this,f,m)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:a}=this;const[l,c]=this.getBaseTranslation();o+=l,a+=c;const{style:d}=i;d.left=`${(100*o).toFixed(2)}%`,d.top=`${(100*a).toFixed(2)}%`,this._onTranslating(o,a),i.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!this.#o&&(this.#o[0]!==this.x||this.#o[1]!==this.y)}get _hasBeenResized(){return!!this.#o&&(this.#o[2]!==this.width||this.#o[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:i}=de,s=i/e,r=i/t;switch(this.rotation){case 90:return[-s,r];case 180:return[s,r];case 270:return[s,-r];default:return[-s,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[i,s]}=this;let{x:r,y:o,width:a,height:l}=this;if(a*=i,l*=s,r*=i,o*=s,this._mustFixPosition)switch(e){case 0:r=Math.max(0,Math.min(i-a,r)),o=Math.max(0,Math.min(s-l,o));break;case 90:r=Math.max(0,Math.min(i-l,r)),o=Math.min(s,Math.max(a,o));break;case 180:r=Math.min(i,Math.max(a,r)),o=Math.min(s,Math.max(l,o));break;case 270:r=Math.min(i,Math.max(l,r)),o=Math.max(0,Math.min(s-a,o));break}this.x=r/=i,this.y=o/=s;const[c,d]=this.getBaseTranslation();r+=c,o+=d,t.left=`${(100*r).toFixed(2)}%`,t.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}static#T(e,t,i){switch(i){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}}screenToPageTranslation(e,t){return de.#T(e,t,this.parentRotation)}pageTranslationToScreen(e,t){return de.#T(e,t,360-this.parentRotation)}#S(e){switch(e){case 90:{const[t,i]=this.pageDimensions;return[0,-t/i,i/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,i]=this.pageDimensions;return[0,t/i,-i/t,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,i]}=this;return[t*e,i*e]}setDims(e,t){const[i,s]=this.parentDimensions,{style:r}=this.div;r.width=`${(100*e/i).toFixed(2)}%`,this.#l||(r.height=`${(100*t/s).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:i}=e,s=i.endsWith("%"),r=!this.#l&&t.endsWith("%");if(s&&r)return;const[o,a]=this.parentDimensions;s||(e.width=`${(100*parseFloat(i)/o).toFixed(2)}%`),!this.#l&&!r&&(e.height=`${(100*parseFloat(t)/a).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#I(){if(this.#a)return;this.#a=document.createElement("div"),this.#a.classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const i of e){const s=document.createElement("div");this.#a.append(s),s.classList.add("resizer",i),s.setAttribute("data-resizer-name",i),s.addEventListener("pointerdown",this.#k.bind(this,i),{signal:t}),s.addEventListener("contextmenu",$n,{signal:t}),s.tabIndex=-1}this.div.prepend(this.#a)}#k(e,t){t.preventDefault();const{isMac:i}=cn.platform;if(t.button!==0||t.ctrlKey&&i)return;this.#n?.toggle(!1);const s=this._isDraggable;this._isDraggable=!1,this.#u=[t.screenX,t.screenY];const r=new AbortController,o=this._uiManager.combinedSignal(r);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#E.bind(this,e),{passive:!0,capture:!0,signal:o}),window.addEventListener("touchmove",En,{passive:!1,signal:o}),window.addEventListener("contextmenu",$n,{signal:o}),this.#c={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const a=this.parent.div.style.cursor,l=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const c=()=>{r.abort(),this.parent.togglePointerEvents(!0),this.#n?.toggle(!0),this._isDraggable=s,this.parent.div.style.cursor=a,this.div.style.cursor=l,this.#F()};window.addEventListener("pointerup",c,{signal:o}),window.addEventListener("blur",c,{signal:o})}#D(e,t,i,s){this.width=i,this.height=s,this.x=e,this.y=t;const[r,o]=this.parentDimensions;this.setDims(r*i,o*s),this.fixAndSetPosition(),this._onResized()}_onResized(){}#F(){if(!this.#c)return;const{savedX:e,savedY:t,savedWidth:i,savedHeight:s}=this.#c;this.#c=null;const r=this.x,o=this.y,a=this.width,l=this.height;r===e&&o===t&&a===i&&l===s||this.addCommands({cmd:this.#D.bind(this,r,o,a,l),undo:this.#D.bind(this,e,t,i,s),mustExec:!0})}static _round(e){return Math.round(e*1e4)/1e4}#E(e,t){const[i,s]=this.parentDimensions,r=this.x,o=this.y,a=this.width,l=this.height,c=de.MIN_SIZE/i,d=de.MIN_SIZE/s,f=this.#S(this.rotation),m=(W,K)=>[f[0]*W+f[2]*K,f[1]*W+f[3]*K],y=this.#S(360-this.rotation),v=(W,K)=>[y[0]*W+y[2]*K,y[1]*W+y[3]*K];let w,T,x=!1,P=!1;switch(e){case"topLeft":x=!0,w=(W,K)=>[0,0],T=(W,K)=>[W,K];break;case"topMiddle":w=(W,K)=>[W/2,0],T=(W,K)=>[W/2,K];break;case"topRight":x=!0,w=(W,K)=>[W,0],T=(W,K)=>[0,K];break;case"middleRight":P=!0,w=(W,K)=>[W,K/2],T=(W,K)=>[0,K/2];break;case"bottomRight":x=!0,w=(W,K)=>[W,K],T=(W,K)=>[0,0];break;case"bottomMiddle":w=(W,K)=>[W/2,K],T=(W,K)=>[W/2,0];break;case"bottomLeft":x=!0,w=(W,K)=>[0,K],T=(W,K)=>[W,0];break;case"middleLeft":P=!0,w=(W,K)=>[0,K/2],T=(W,K)=>[W,K/2];break}const S=w(a,l),L=T(a,l);let F=m(...L);const U=de._round(r+F[0]),C=de._round(o+F[1]);let A=1,E=1,D,k;if(t.fromKeyboard)({deltaX:D,deltaY:k}=t);else{const{screenX:W,screenY:K}=t,[Ee,me]=this.#u;[D,k]=this.screenToPageTranslation(W-Ee,K-me),this.#u[0]=W,this.#u[1]=K}if([D,k]=v(D/i,k/s),x){const W=Math.hypot(a,l);A=E=Math.max(Math.min(Math.hypot(L[0]-S[0]-D,L[1]-S[1]-k)/W,1/a,1/l),c/a,d/l)}else P?A=Math.max(c,Math.min(1,Math.abs(L[0]-S[0]-D)))/a:E=Math.max(d,Math.min(1,Math.abs(L[1]-S[1]-k)))/l;const N=de._round(a*A),R=de._round(l*E);F=m(...T(N,R));const q=U-F[0],te=C-F[1];this.#o||=[this.x,this.y,this.width,this.height],this.width=N,this.height=R,this.x=q,this.y=te,this.setDims(i*N,s*R),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#n?.finish()}async addEditToolbar(){return this._editToolbar||this.#g?this._editToolbar:(this._editToolbar=new vl(this),this.div.append(this._editToolbar.render()),this.#n&&await this._editToolbar.addAltText(this.#n),this._editToolbar)}removeEditToolbar(){this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,this.#n?.destroy())}addContainer(e){const t=this._editToolbar?.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){this.#n||(Jn.initialize(de._l10n),this.#n=new Jn(this),this.#e&&(this.#n.data=this.#e,this.#e=null),await this.addEditToolbar())}get altTextData(){return this.#n?.data}set altTextData(e){this.#n&&(this.#n.data=e)}get guessedAltText(){return this.#n?.guessedText}async setGuessedAltText(e){await this.#n?.setGuessedText(e)}serializeAltText(e){return this.#n?.serialize(e)}hasAltText(){return!!this.#n&&!this.#n.isEmpty()}hasAltTextData(){return this.#n?.hasData()??!1}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=this.#i?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),this.#V();const[e,t]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*t/e).toFixed(2)}%`,this.div.style.maxHeight=`${(100*e/t).toFixed(2)}%`);const[i,s]=this.getInitialTranslation();return this.translate(i,s),od(this,this.div,["pointerdown"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#x||=new lh({container:this.div,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#_.bind(this),onPinching:this.#M.bind(this),onPinchEnd:this.#z.bind(this),signal:this._uiManager._signal})),this._uiManager._editorUndoBar?.hide(),this.div}#_(){this.#c={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#n?.toggle(!1),this.parent.togglePointerEvents(!1)}#M(e,t,i){let r=.7*(i/t)+1-.7;if(r===1)return;const o=this.#S(this.rotation),a=(U,C)=>[o[0]*U+o[2]*C,o[1]*U+o[3]*C],[l,c]=this.parentDimensions,d=this.x,f=this.y,m=this.width,y=this.height,v=de.MIN_SIZE/l,w=de.MIN_SIZE/c;r=Math.max(Math.min(r,1/m,1/y),v/m,w/y);const T=de._round(m*r),x=de._round(y*r);if(T===m&&x===y)return;this.#o||=[d,f,m,y];const P=a(m/2,y/2),S=de._round(d+P[0]),L=de._round(f+P[1]),F=a(T/2,x/2);this.x=S-F[0],this.y=L-F[1],this.width=T,this.height=x,this.setDims(l*T,c*x),this.fixAndSetPosition(),this._onResizing()}#z(){this.#n?.toggle(!0),this.parent.togglePointerEvents(!0),this.#F()}pointerdown(e){const{isMac:t}=cn.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(this.#f=!0,this._isDraggable){this.#H(e);return}this.#q(e)}get isSelected(){return this._uiManager.isSelected(this)}#q(e){const{isMac:t}=cn.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)}#H(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let i=!1;const s=new AbortController,r=this._uiManager.combinedSignal(s),o={capture:!0,passive:!1,signal:r},a=c=>{s.abort(),this.#r=null,this.#f=!1,this._uiManager.endDragSession()||this.#q(c),i&&this._onStopDragging()};t&&(this.#w=e.clientX,this.#v=e.clientY,this.#r=e.pointerId,this.#s=e.pointerType,window.addEventListener("pointermove",c=>{i||(i=!0,this._onStartDragging());const{clientX:d,clientY:f,pointerId:m}=c;if(m!==this.#r){En(c);return}const[y,v]=this.screenToPageTranslation(d-this.#w,f-this.#v);this.#w=d,this.#v=f,this._uiManager.dragSelectedEditors(y,v)},o),window.addEventListener("touchmove",En,o),window.addEventListener("pointerdown",c=>{c.pointerType===this.#s&&(this.#x||c.isPrimary)&&a(c),En(c)},o));const l=c=>{if(!this.#r||this.#r===c.pointerId){a(c);return}En(c)};window.addEventListener("pointerup",l,{signal:r}),window.addEventListener("blur",l,{signal:r})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#y&&clearTimeout(this.#y),this.#y=setTimeout(()=>{this.#y=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(e,t,i){e.changeParent(this),this.x=t,this.y=i,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,i=this.rotation){const s=this.parentScale,[r,o]=this.pageDimensions,[a,l]=this.pageTranslation,c=e/s,d=t/s,f=this.x*r,m=this.y*o,y=this.width*r,v=this.height*o;switch(i){case 0:return[f+c+a,o-m-d-v+l,f+c+y+a,o-m-d+l];case 90:return[f+d+a,o-m+c+l,f+d+v+a,o-m+c+y+l];case 180:return[f-c-y+a,o-m+d+l,f-c+a,o-m+d+v+l];case 270:return[f-d-v+a,o-m-c-y+l,f-d+a,o-m-c+l];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[i,s,r,o]=e,a=r-i,l=o-s;switch(this.rotation){case 0:return[i,t-o,a,l];case 90:return[i,t-s,l,a];case 180:return[r,t-s,a,l];case 270:return[r,t-o,l,a];default:throw new Error("Invalid rotation")}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){this.#g=!0}disableEditMode(){this.#g=!1}isInEditMode(){return this.#g}shouldGetKeyboardEvents(){return this.#m}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:i,right:s}=this.getClientDimensions(),{innerHeight:r,innerWidth:o}=window;return t<o&&s>0&&e<r&&i>0}#V(){if(this.#h||!this.div)return;this.#h=new AbortController;const e=this._uiManager.combinedSignal(this.#h);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})}rebuild(){this.#V()}rotate(e){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(e=!1,t=null){Ue("An editor must be serializable")}static async deserialize(e,t,i){const s=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:i});s.rotation=e.rotation,s.#e=e.accessibilityData;const[r,o]=s.pageDimensions,[a,l,c,d]=s.getRectInCurrentCoords(e.rect,o);return s.x=a/r,s.y=l/o,s.width=c/r,s.height=d/o,s}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#h?.abort(),this.#h=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#y&&(clearTimeout(this.#y),this.#y=null),this.#U(),this.removeEditToolbar(),this.#b){for(const e of this.#b.values())clearTimeout(e);this.#b=null}this.parent=null,this.#x?.destroy(),this.#x=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#I(),this.#a.classList.remove("hidden"),od(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),this.#c={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const t=this.#a.children;if(!this.#t){this.#t=Array.from(t);const o=this.#L.bind(this),a=this.#O.bind(this),l=this._uiManager._signal;for(const c of this.#t){const d=c.getAttribute("data-resizer-name");c.setAttribute("role","spinbutton"),c.addEventListener("keydown",o,{signal:l}),c.addEventListener("blur",a,{signal:l}),c.addEventListener("focus",this.#G.bind(this,d),{signal:l}),c.setAttribute("data-l10n-id",de._l10nResizer[d])}}const i=this.#t[0];let s=0;for(const o of t){if(o===i)break;s++}const r=(360-this.rotation+this.parentRotation)%360/90*(this.#t.length/4);if(r!==s){if(r<s)for(let a=0;a<s-r;a++)this.#a.append(this.#a.firstChild);else if(r>s)for(let a=0;a<r-s;a++)this.#a.firstChild.before(this.#a.lastChild);let o=0;for(const a of t){const c=this.#t[o++].getAttribute("data-resizer-name");a.setAttribute("data-l10n-id",de._l10nResizer[c])}}this.#N(0),this.#m=!0,this.#a.firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}#L(e){de._resizerKeyboardManager.exec(this,e)}#O(e){this.#m&&e.relatedTarget?.parentNode!==this.#a&&this.#U()}#G(e){this.#d=this.#m?e:""}#N(e){if(this.#t)for(const t of this.#t)t.tabIndex=e}_resizeWithKeyboard(e,t){this.#m&&this.#E(this.#d,{deltaX:e,deltaY:t,fromKeyboard:!0})}#U(){this.#m=!1,this.#N(-1),this.#F()}_stopResizingWithKeyboard(){this.#U(),this.div.focus()}select(){if(this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#n?.toggleAltTextBadge(!1)}unselect(){this.#a?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#n?.toggleAltTextBadge(!0)}updateParams(e,t){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return this.#p}set isEditing(e){this.#p=e,this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){this.#l=!0;const i=e/t,{style:s}=this.div;s.aspectRatio=i,s.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){this.#b||=new Map;const{action:i}=e;let s=this.#b.get(i);s&&clearTimeout(s),s=setTimeout(()=>{this._reportTelemetry(e),this.#b.delete(i),this.#b.size===0&&(this.#b=null)},de._telemetryTimeout),this.#b.set(i,s);return}e.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),this.#i=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#i=!0}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const i=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),i.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;t?.nodeName==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}}class V$ extends de{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const hw=3285377520,Pn=4294901760,Kn=65535;class CA{constructor(e){this.h1=e?e&4294967295:hw,this.h2=e?e&4294967295:hw}update(e){let t,i;if(typeof e=="string"){t=new Uint8Array(e.length*2),i=0;for(let w=0,T=e.length;w<T;w++){const x=e.charCodeAt(w);x<=255?t[i++]=x:(t[i++]=x>>>8,t[i++]=x&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),i=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const s=i>>2,r=i-s*4,o=new Uint32Array(t.buffer,0,s);let a=0,l=0,c=this.h1,d=this.h2;const f=3432918353,m=461845907,y=f&Kn,v=m&Kn;for(let w=0;w<s;w++)w&1?(a=o[w],a=a*f&Pn|a*y&Kn,a=a<<15|a>>>17,a=a*m&Pn|a*v&Kn,c^=a,c=c<<13|c>>>19,c=c*5+3864292196):(l=o[w],l=l*f&Pn|l*y&Kn,l=l<<15|l>>>17,l=l*m&Pn|l*v&Kn,d^=l,d=d<<13|d>>>19,d=d*5+3864292196);switch(a=0,r){case 3:a^=t[s*4+2]<<16;case 2:a^=t[s*4+1]<<8;case 1:a^=t[s*4],a=a*f&Pn|a*y&Kn,a=a<<15|a>>>17,a=a*m&Pn|a*v&Kn,s&1?c^=a:d^=a}this.h1=c,this.h2=d}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&Pn|e*36045&Kn,t=t*4283543511&Pn|((t<<16|e>>>16)*2950163797&Pn)>>>16,e^=t>>>1,e=e*444984403&Pn|e*60499&Kn,t=t*3301882366&Pn|((t<<16|e>>>16)*3120437893&Pn)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const Ep=Object.freeze({map:null,hash:"",transfer:void 0});class Og{#e=!1;#t=null;#n=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const i=this.#n.get(e);return i===void 0?t:Object.assign(t,i)}getRawValue(e){return this.#n.get(e)}remove(e){if(this.#n.delete(e),this.#n.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const t of this.#n.values())if(t instanceof de)return;this.onAnnotationEditor(null)}}setValue(e,t){const i=this.#n.get(e);let s=!1;if(i!==void 0)for(const[r,o]of Object.entries(t))i[r]!==o&&(s=!0,i[r]=o);else s=!0,this.#n.set(e,t);s&&this.#i(),t instanceof de&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return this.#n.has(e)}getAll(){return this.#n.size>0?kg(this.#n):null}setAll(e){for(const[t,i]of Object.entries(e))this.setValue(t,i)}get size(){return this.#n.size}#i(){this.#e||(this.#e=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#e&&(this.#e=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new SA(this)}get serializable(){if(this.#n.size===0)return Ep;const e=new Map,t=new CA,i=[],s=Object.create(null);let r=!1;for(const[o,a]of this.#n){const l=a instanceof de?a.serialize(!1,s):a;l&&(e.set(o,l),t.update(`${o}:${JSON.stringify(l)}`),r||=!!l.bitmap)}if(r)for(const o of e.values())o.bitmap&&i.push(o.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:i}:Ep}get editorStats(){let e=null;const t=new Map;for(const i of this.#n.values()){if(!(i instanceof de))continue;const s=i.telemetryFinalData;if(!s)continue;const{type:r}=s;t.has(r)||t.set(r,Object.getPrototypeOf(i).constructor),e||=Object.create(null);const o=e[r]||=new Map;for(const[a,l]of Object.entries(s)){if(a==="type")continue;let c=o.get(a);c||(c=new Map,o.set(a,c));const d=c.get(l)??0;c.set(l,d+1)}}for(const[i,s]of t)e[i]=s.computeTelemetryFinalData(e[i]);return e}resetModifiedIds(){this.#t=null}get modifiedIds(){if(this.#t)return this.#t;const e=[];for(const t of this.#n.values())!(t instanceof de)||!t.annotationElementId||!t.serialize()||e.push(t.annotationElementId);return this.#t={ids:new Set(e),hash:e.join(",")}}}class SA extends Og{#e;constructor(e){super();const{map:t,hash:i,transfer:s}=e.serializable,r=structuredClone(t,s?{transfer:s}:null);this.#e={map:r,hash:i,transfer:s}}get print(){Ue("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#e}get modifiedIds(){return _e(this,"modifiedIds",{ids:new Set,hash:""})}}class O${#e=new Set;constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),this.#e.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,_inspectFont:t}){if(!(!e||this.#e.has(e.loadedName))){if(vt(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:s,style:r}=e,o=new FontFace(i,s,r);this.addNativeFontFace(o);try{await o.load(),this.#e.add(i),t?.(e)}catch{ve(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(o)}return}Ue("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const i=e.createNativeFontFace();if(i){this.addNativeFontFace(i);try{await i.loaded}catch(s){throw ve(`Failed to load font '${i.family}': '${s}'.`),e.disableFontFace=!0,s}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(i=>{const s=this._queueLoadingCallback(i);this._prepareFontLoadEvent(e,s)})}}get isFontLoadingAPISupported(){const e=!!this._document?.fonts;return _e(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){let e=!1;return(jt||typeof navigator<"u"&&typeof navigator?.userAgent=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(e=!0),_e(this,"isSyncFontLoadingSupported",e)}_queueLoadingCallback(e){function t(){for(vt(!s.done,"completeRequest() cannot be called twice."),s.done=!0;i.length>0&&i[0].done;){const r=i.shift();setTimeout(r.callback,0)}}const{loadingRequests:i}=this,s={done:!1,complete:t,callback:e};return i.push(s),s}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return _e(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function i(L,F){return L.charCodeAt(F)<<24|L.charCodeAt(F+1)<<16|L.charCodeAt(F+2)<<8|L.charCodeAt(F+3)&255}function s(L,F,U,C){const A=L.substring(0,F),E=L.substring(F+U);return A+C+E}let r,o;const a=this._document.createElement("canvas");a.width=1,a.height=1;const l=a.getContext("2d");let c=0;function d(L,F){if(++c>30){ve("Load test font never loaded."),F();return}if(l.font="30px "+L,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0){F();return}setTimeout(d.bind(null,L,F))}const f=`lt${Date.now()}${this.loadTestFontId++}`;let m=this._loadTestFont;m=s(m,976,f.length,f);const v=16,w=1482184792;let T=i(m,v);for(r=0,o=f.length-3;r<o;r+=4)T=T-w+i(f,r)|0;r<f.length&&(T=T-w+i(f+"XXX",r)|0),m=s(m,v,4,x$(T));const x=`url(data:font/opentype;base64,${btoa(m)});`,P=`@font-face {font-family:"${f}";src:${x}}`;this.insertRule(P);const S=this._document.createElement("div");S.style.visibility="hidden",S.style.width=S.style.height="10px",S.style.position="absolute",S.style.top=S.style.left="0px";for(const L of[e.loadedName,f]){const F=this._document.createElement("span");F.textContent="Hi",F.style.fontFamily=L,S.append(F)}this._document.body.append(S),d(f,()=>{S.remove(),t.complete()})}}class U${constructor(e,{disableFontFace:t=!1,fontExtraProperties:i=!1,inspectFont:s=null}){this.compiledGlyphs=Object.create(null);for(const r in e)this[r]=e[r];this.disableFontFace=t===!0,this.fontExtraProperties=i===!0,this._inspectFont=s}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const t={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(t.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,t)}return this._inspectFont?.(this),e}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${P$(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${e}}`}return this._inspectFont?.(this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const i=this.loadedName+"_path_"+t;let s;try{s=e.get(i)}catch(o){ve(`getPathGenerator - ignoring character: "${o}".`)}const r=new Path2D(s||"");return this.fontExtraProperties||e.delete(i),this.compiledGlyphs[t]=r}}const nu={DATA:1,ERROR:2},pt={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function fw(){}function hn(n){if(n instanceof Is||n instanceof Tp||n instanceof jl||n instanceof cw||n instanceof rd||n instanceof of)return n;switch(n instanceof Error||typeof n=="object"&&n!==null||Ue('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new Is(n.message);case"InvalidPDFException":return new Tp(n.message);case"MissingPDFException":return new jl(n.message);case"PasswordException":return new cw(n.message,n.code);case"UnexpectedResponseException":return new rd(n.message,n.status);case"UnknownErrorException":return new of(n.message,n.details)}return new of(n.message,n.toString())}class Za{#e=new AbortController;constructor(e,t,i){this.sourceName=e,this.targetName=t,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),i.addEventListener("message",this.#t.bind(this),{signal:this.#e.signal})}#t({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){this.#i(e);return}if(e.callback){const i=e.callbackId,s=this.callbackCapabilities[i];if(!s)throw new Error(`Cannot resolve callback ${i}`);if(delete this.callbackCapabilities[i],e.callback===nu.DATA)s.resolve(e.data);else if(e.callback===nu.ERROR)s.reject(hn(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const i=this.sourceName,s=e.sourceName,r=this.comObj;Promise.try(t,e.data).then(function(o){r.postMessage({sourceName:i,targetName:s,callback:nu.DATA,callbackId:e.callbackId,data:o})},function(o){r.postMessage({sourceName:i,targetName:s,callback:nu.ERROR,callbackId:e.callbackId,reason:hn(o)})});return}if(e.streamId){this.#n(e);return}t(e.data)}on(e,t){const i=this.actionHandler;if(i[e])throw new Error(`There is already an actionName called "${e}"`);i[e]=t}send(e,t,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},i)}sendWithPromise(e,t,i){const s=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[s]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:s,data:t},i)}catch(o){r.reject(o)}return r.promise}sendWithStream(e,t,i,s){const r=this.streamId++,o=this.sourceName,a=this.targetName,l=this.comObj;return new ReadableStream({start:c=>{const d=Promise.withResolvers();return this.streamControllers[r]={controller:c,startCall:d,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:o,targetName:a,action:e,streamId:r,data:t,desiredSize:c.desiredSize},s),d.promise},pull:c=>{const d=Promise.withResolvers();return this.streamControllers[r].pullCall=d,l.postMessage({sourceName:o,targetName:a,stream:pt.PULL,streamId:r,desiredSize:c.desiredSize}),d.promise},cancel:c=>{vt(c instanceof Error,"cancel must have a valid reason");const d=Promise.withResolvers();return this.streamControllers[r].cancelCall=d,this.streamControllers[r].isClosed=!0,l.postMessage({sourceName:o,targetName:a,stream:pt.CANCEL,streamId:r,reason:hn(c)}),d.promise}},i)}#n(e){const t=e.streamId,i=this.sourceName,s=e.sourceName,r=this.comObj,o=this,a=this.actionHandler[e.action],l={enqueue(c,d=1,f){if(this.isCancelled)return;const m=this.desiredSize;this.desiredSize-=d,m>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:i,targetName:s,stream:pt.ENQUEUE,streamId:t,chunk:c},f)},close(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:i,targetName:s,stream:pt.CLOSE,streamId:t}),delete o.streamSinks[t])},error(c){vt(c instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,r.postMessage({sourceName:i,targetName:s,stream:pt.ERROR,streamId:t,reason:hn(c)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[t]=l,Promise.try(a,e.data,l).then(function(){r.postMessage({sourceName:i,targetName:s,stream:pt.START_COMPLETE,streamId:t,success:!0})},function(c){r.postMessage({sourceName:i,targetName:s,stream:pt.START_COMPLETE,streamId:t,reason:hn(c)})})}#i(e){const t=e.streamId,i=this.sourceName,s=e.sourceName,r=this.comObj,o=this.streamControllers[t],a=this.streamSinks[t];switch(e.stream){case pt.START_COMPLETE:e.success?o.startCall.resolve():o.startCall.reject(hn(e.reason));break;case pt.PULL_COMPLETE:e.success?o.pullCall.resolve():o.pullCall.reject(hn(e.reason));break;case pt.PULL:if(!a){r.postMessage({sourceName:i,targetName:s,stream:pt.PULL_COMPLETE,streamId:t,success:!0});break}a.desiredSize<=0&&e.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=e.desiredSize,Promise.try(a.onPull||fw).then(function(){r.postMessage({sourceName:i,targetName:s,stream:pt.PULL_COMPLETE,streamId:t,success:!0})},function(c){r.postMessage({sourceName:i,targetName:s,stream:pt.PULL_COMPLETE,streamId:t,reason:hn(c)})});break;case pt.ENQUEUE:if(vt(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(e.chunk);break;case pt.CLOSE:if(vt(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),this.#r(o,t);break;case pt.ERROR:vt(o,"error should have stream controller"),o.controller.error(hn(e.reason)),this.#r(o,t);break;case pt.CANCEL_COMPLETE:e.success?o.cancelCall.resolve():o.cancelCall.reject(hn(e.reason)),this.#r(o,t);break;case pt.CANCEL:if(!a)break;const l=hn(e.reason);Promise.try(a.onCancel||fw,l).then(function(){r.postMessage({sourceName:i,targetName:s,stream:pt.CANCEL_COMPLETE,streamId:t,success:!0})},function(c){r.postMessage({sourceName:i,targetName:s,stream:pt.CANCEL_COMPLETE,streamId:t,reason:hn(c)})}),a.sinkCapability.reject(l),a.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}}async#r(e,t){await Promise.allSettled([e.startCall?.promise,e.pullCall?.promise,e.cancelCall?.promise]),delete this.streamControllers[t]}destroy(){this.#e?.abort(),this.#e=null}}class PA{#e=!1;constructor({enableHWA:e=!1}){this.#e=e}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const i=this._createCanvas(e,t);return{canvas:i,context:i.getContext("2d",{willReadFrequently:!this.#e})}}reset(e,t,i){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||i<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=i}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){Ue("Abstract method `_createCanvas` called.")}}class B$ extends PA{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const i=this._document.createElement("canvas");return i.width=e,i.height=t,i}}class RA{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(i=>({cMapData:i,isCompressed:this.isCompressed})).catch(i=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){Ue("Abstract method `_fetch` called.")}}class kA extends RA{async _fetch(e){const t=await oh(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):rh(t)}}class NA{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,i,s,r){return"none"}destroy(e=!1){}}class z$ extends NA{#e;#t;#n;#i;#r;#s;#l=0;constructor({docId:e,ownerDocument:t=globalThis.document}){super(),this.#i=e,this.#r=t}get#a(){return this.#t||=new Map}get#u(){return this.#s||=new Map}get#c(){if(!this.#n){const e=this.#r.createElement("div"),{style:t}=e;t.visibility="hidden",t.contain="strict",t.width=t.height=0,t.position="absolute",t.top=t.left=0,t.zIndex=-1;const i=this.#r.createElementNS(_i,"svg");i.setAttribute("width",0),i.setAttribute("height",0),this.#n=this.#r.createElementNS(_i,"defs"),e.append(i),i.append(this.#n),this.#r.body.append(e)}return this.#n}#h(e){if(e.length===1){const l=e[0],c=new Array(256);for(let f=0;f<256;f++)c[f]=l[f]/255;const d=c.join(",");return[d,d,d]}const[t,i,s]=e,r=new Array(256),o=new Array(256),a=new Array(256);for(let l=0;l<256;l++)r[l]=t[l]/255,o[l]=i[l]/255,a[l]=s[l]/255;return[r.join(","),o.join(","),a.join(",")]}#d(e){if(this.#e===void 0){this.#e="";const t=this.#r.URL;t!==this.#r.baseURI&&(ah(t)?ve('#createUrl: ignore "data:"-URL for performance reasons.'):this.#e=t.split("#",1)[0])}return`url(${this.#e}#${e})`}addFilter(e){if(!e)return"none";let t=this.#a.get(e);if(t)return t;const[i,s,r]=this.#h(e),o=e.length===1?i:`${i}${s}${r}`;if(t=this.#a.get(o),t)return this.#a.set(e,t),t;const a=`g_${this.#i}_transfer_map_${this.#l++}`,l=this.#d(a);this.#a.set(e,l),this.#a.set(o,l);const c=this.#p(a);return this.#m(i,s,r,c),l}addHCMFilter(e,t){const i=`${e}-${t}`,s="base";let r=this.#u.get(s);if(r?.key===i||(r?(r.filter?.remove(),r.key=i,r.url="none",r.filter=null):(r={key:i,url:"none",filter:null},this.#u.set(s,r)),!e||!t))return r.url;const o=this.#w(e);e=ae.makeHexColor(...o);const a=this.#w(t);if(t=ae.makeHexColor(...a),this.#c.style.color="",e==="#000000"&&t==="#ffffff"||e===t)return r.url;const l=new Array(256);for(let y=0;y<=255;y++){const v=y/255;l[y]=v<=.03928?v/12.92:((v+.055)/1.055)**2.4}const c=l.join(","),d=`g_${this.#i}_hcm_filter`,f=r.filter=this.#p(d);this.#m(c,c,c,f),this.#o(f);const m=(y,v)=>{const w=o[y]/255,T=a[y]/255,x=new Array(v+1);for(let P=0;P<=v;P++)x[P]=w+P/v*(T-w);return x.join(",")};return this.#m(m(0,5),m(1,5),m(2,5),f),r.url=this.#d(d),r.url}addAlphaFilter(e){let t=this.#a.get(e);if(t)return t;const[i]=this.#h([e]),s=`alpha_${i}`;if(t=this.#a.get(s),t)return this.#a.set(e,t),t;const r=`g_${this.#i}_alpha_map_${this.#l++}`,o=this.#d(r);this.#a.set(e,o),this.#a.set(s,o);const a=this.#p(r);return this.#y(i,a),o}addLuminosityFilter(e){let t=this.#a.get(e||"luminosity");if(t)return t;let i,s;if(e?([i]=this.#h([e]),s=`luminosity_${i}`):s="luminosity",t=this.#a.get(s),t)return this.#a.set(e,t),t;const r=`g_${this.#i}_luminosity_map_${this.#l++}`,o=this.#d(r);this.#a.set(e,o),this.#a.set(s,o);const a=this.#p(r);return this.#f(a),e&&this.#y(i,a),o}addHighlightHCMFilter(e,t,i,s,r){const o=`${t}-${i}-${s}-${r}`;let a=this.#u.get(e);if(a?.key===o||(a?(a.filter?.remove(),a.key=o,a.url="none",a.filter=null):(a={key:o,url:"none",filter:null},this.#u.set(e,a)),!t||!i))return a.url;const[l,c]=[t,i].map(this.#w.bind(this));let d=Math.round(.2126*l[0]+.7152*l[1]+.0722*l[2]),f=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),[m,y]=[s,r].map(this.#w.bind(this));f<d&&([d,f,m,y]=[f,d,y,m]),this.#c.style.color="";const v=(x,P,S)=>{const L=new Array(256),F=(f-d)/S,U=x/255,C=(P-x)/(255*S);let A=0;for(let E=0;E<=S;E++){const D=Math.round(d+E*F),k=U+E*C;for(let N=A;N<=D;N++)L[N]=k;A=D+1}for(let E=A;E<256;E++)L[E]=L[A-1];return L.join(",")},w=`g_${this.#i}_hcm_${e}_filter`,T=a.filter=this.#p(w);return this.#o(T),this.#m(v(m[0],y[0],5),v(m[1],y[1],5),v(m[2],y[2],5),T),a.url=this.#d(w),a.url}destroy(e=!1){e&&this.#s?.size||(this.#n?.parentNode.parentNode.remove(),this.#n=null,this.#t?.clear(),this.#t=null,this.#s?.clear(),this.#s=null,this.#l=0)}#f(e){const t=this.#r.createElementNS(_i,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(t)}#o(e){const t=this.#r.createElementNS(_i,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(t)}#p(e){const t=this.#r.createElementNS(_i,"filter");return t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("id",e),this.#c.append(t),t}#g(e,t,i){const s=this.#r.createElementNS(_i,t);s.setAttribute("type","discrete"),s.setAttribute("tableValues",i),e.append(s)}#m(e,t,i,s){const r=this.#r.createElementNS(_i,"feComponentTransfer");s.append(r),this.#g(r,"feFuncR",e),this.#g(r,"feFuncG",t),this.#g(r,"feFuncB",i)}#y(e,t){const i=this.#r.createElementNS(_i,"feComponentTransfer");t.append(i),this.#g(i,"feFuncA",e)}#w(e){return this.#c.style.color=e,Lg(getComputedStyle(this.#c).getPropertyValue("color"))}}class MA{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(i=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){Ue("Abstract method `_fetch` called.")}}class DA extends MA{async _fetch(e){const t=await oh(e,"arraybuffer");return new Uint8Array(t)}}jt&&ve("Please use the `legacy` build in Node.js environments.");async function LA(n){const t=await process.getBuiltinModule("fs").promises.readFile(n);return new Uint8Array(t)}class q$ extends NA{}class H$ extends PA{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class G$ extends RA{async _fetch(e){return LA(e)}}class $$ extends MA{async _fetch(e){return LA(e)}}const Gt={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Ap(n,e){if(!e)return;const t=e[2]-e[0],i=e[3]-e[1],s=new Path2D;s.rect(e[0],e[1],t,i),n.clip(s)}class Ug{getPattern(){Ue("Abstract method `getPattern` called.")}}class j$ extends Ug{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const i of this._colorStops)t.addColorStop(i[0],i[1]);return t}getPattern(e,t,i,s){let r;if(s===Gt.STROKE||s===Gt.FILL){const o=t.current.getClippedPathBoundingBox(s,Ye(e))||[0,0,0,0],a=Math.ceil(o[2]-o[0])||1,l=Math.ceil(o[3]-o[1])||1,c=t.cachedCanvases.getCanvas("pattern",a,l),d=c.context;d.clearRect(0,0,d.canvas.width,d.canvas.height),d.beginPath(),d.rect(0,0,d.canvas.width,d.canvas.height),d.translate(-o[0],-o[1]),i=ae.transform(i,[1,0,0,1,o[0],o[1]]),d.transform(...t.baseTransform),this.matrix&&d.transform(...this.matrix),Ap(d,this._bbox),d.fillStyle=this._createGradient(d),d.fill(),r=e.createPattern(c.canvas,"no-repeat");const f=new DOMMatrix(i);r.setTransform(f)}else Ap(e,this._bbox),r=this._createGradient(e);return r}}function cf(n,e,t,i,s,r,o,a){const l=e.coords,c=e.colors,d=n.data,f=n.width*4;let m;l[t+1]>l[i+1]&&(m=t,t=i,i=m,m=r,r=o,o=m),l[i+1]>l[s+1]&&(m=i,i=s,s=m,m=o,o=a,a=m),l[t+1]>l[i+1]&&(m=t,t=i,i=m,m=r,r=o,o=m);const y=(l[t]+e.offsetX)*e.scaleX,v=(l[t+1]+e.offsetY)*e.scaleY,w=(l[i]+e.offsetX)*e.scaleX,T=(l[i+1]+e.offsetY)*e.scaleY,x=(l[s]+e.offsetX)*e.scaleX,P=(l[s+1]+e.offsetY)*e.scaleY;if(v>=P)return;const S=c[r],L=c[r+1],F=c[r+2],U=c[o],C=c[o+1],A=c[o+2],E=c[a],D=c[a+1],k=c[a+2],N=Math.round(v),R=Math.round(P);let q,te,W,K,Ee,me,Et,Ke;for(let Re=N;Re<=R;Re++){if(Re<T){const Ae=Re<v?0:(v-Re)/(v-T);q=y-(y-w)*Ae,te=S-(S-U)*Ae,W=L-(L-C)*Ae,K=F-(F-A)*Ae}else{let Ae;Re>P?Ae=1:T===P?Ae=0:Ae=(T-Re)/(T-P),q=w-(w-x)*Ae,te=U-(U-E)*Ae,W=C-(C-D)*Ae,K=A-(A-k)*Ae}let ge;Re<v?ge=0:Re>P?ge=1:ge=(v-Re)/(v-P),Ee=y-(y-x)*ge,me=S-(S-E)*ge,Et=L-(L-D)*ge,Ke=F-(F-k)*ge;const kt=Math.round(Math.min(q,Ee)),at=Math.round(Math.max(q,Ee));let Be=f*Re+kt*4;for(let Ae=kt;Ae<=at;Ae++)ge=(q-Ae)/(q-Ee),ge<0?ge=0:ge>1&&(ge=1),d[Be++]=te-(te-me)*ge|0,d[Be++]=W-(W-Et)*ge|0,d[Be++]=K-(K-Ke)*ge|0,d[Be++]=255}}function W$(n,e,t){const i=e.coords,s=e.colors;let r,o;switch(e.type){case"lattice":const a=e.verticesPerRow,l=Math.floor(i.length/a)-1,c=a-1;for(r=0;r<l;r++){let d=r*a;for(let f=0;f<c;f++,d++)cf(n,t,i[d],i[d+1],i[d+a],s[d],s[d+1],s[d+a]),cf(n,t,i[d+a+1],i[d+1],i[d+a],s[d+a+1],s[d+1],s[d+a])}break;case"triangles":for(r=0,o=i.length;r<o;r+=3)cf(n,t,i[r],i[r+1],i[r+2],s[r],s[r+1],s[r+2]);break;default:throw new Error("illegal figure")}}class K$ extends Ug{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}_createMeshCanvas(e,t,i){const a=Math.floor(this._bounds[0]),l=Math.floor(this._bounds[1]),c=Math.ceil(this._bounds[2])-a,d=Math.ceil(this._bounds[3])-l,f=Math.min(Math.ceil(Math.abs(c*e[0]*1.1)),3e3),m=Math.min(Math.ceil(Math.abs(d*e[1]*1.1)),3e3),y=c/f,v=d/m,w={coords:this._coords,colors:this._colors,offsetX:-a,offsetY:-l,scaleX:1/y,scaleY:1/v},T=f+4,x=m+4,P=i.getCanvas("mesh",T,x),S=P.context,L=S.createImageData(f,m);if(t){const U=L.data;for(let C=0,A=U.length;C<A;C+=4)U[C]=t[0],U[C+1]=t[1],U[C+2]=t[2],U[C+3]=255}for(const U of this._figures)W$(L,U,w);return S.putImageData(L,2,2),{canvas:P.canvas,offsetX:a-2*y,offsetY:l-2*v,scaleX:y,scaleY:v}}getPattern(e,t,i,s){Ap(e,this._bbox);let r;if(s===Gt.SHADING)r=ae.singularValueDecompose2dScale(Ye(e));else if(r=ae.singularValueDecompose2dScale(t.baseTransform),this.matrix){const a=ae.singularValueDecompose2dScale(this.matrix);r=[r[0]*a[0],r[1]*a[1]]}const o=this._createMeshCanvas(r,s===Gt.SHADING?null:this._background,t.cachedCanvases);return s!==Gt.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(o.offsetX,o.offsetY),e.scale(o.scaleX,o.scaleY),e.createPattern(o.canvas,"no-repeat")}}class Y$ extends Ug{getPattern(){return"hotpink"}}function J$(n){switch(n[0]){case"RadialAxial":return new j$(n);case"Mesh":return new K$(n);case"Dummy":return new Y$}throw new Error(`Unknown IR type: ${n[0]}`)}const pw={COLORED:1,UNCOLORED:2};class Bg{static MAX_PATTERN_SIZE=3e3;constructor(e,t,i,s,r){this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=t,this.ctx=i,this.canvasGraphicsFactory=s,this.baseTransform=r}createPatternCanvas(e){const{bbox:t,operatorList:i,paintType:s,tilingType:r,color:o,canvasGraphicsFactory:a}=this;let{xstep:l,ystep:c}=this;l=Math.abs(l),c=Math.abs(c),sh("TilingType: "+r);const d=t[0],f=t[1],m=t[2],y=t[3],v=m-d,w=y-f,T=ae.singularValueDecompose2dScale(this.matrix),x=ae.singularValueDecompose2dScale(this.baseTransform),P=T[0]*x[0],S=T[1]*x[1];let L=v,F=w,U=!1,C=!1;const A=Math.ceil(l*P),E=Math.ceil(c*S),D=Math.ceil(v*P),k=Math.ceil(w*S);A>=D?L=l:U=!0,E>=k?F=c:C=!0;const N=this.getSizeAndScale(L,this.ctx.canvas.width,P),R=this.getSizeAndScale(F,this.ctx.canvas.height,S),q=e.cachedCanvases.getCanvas("pattern",N.size,R.size),te=q.context,W=a.createCanvasGraphics(te);if(W.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(W,s,o),te.translate(-N.scale*d,-R.scale*f),W.transform(N.scale,0,0,R.scale,0,0),te.save(),this.clipBbox(W,d,f,m,y),W.baseTransform=Ye(W.ctx),W.executeOperatorList(i),W.endDrawing(),te.restore(),U||C){const K=q.canvas;U&&(L=l),C&&(F=c);const Ee=this.getSizeAndScale(L,this.ctx.canvas.width,P),me=this.getSizeAndScale(F,this.ctx.canvas.height,S),Et=Ee.size,Ke=me.size,Re=e.cachedCanvases.getCanvas("pattern-workaround",Et,Ke),ge=Re.context,kt=U?Math.floor(v/l):0,at=C?Math.floor(w/c):0;for(let Be=0;Be<=kt;Be++)for(let Ae=0;Ae<=at;Ae++)ge.drawImage(K,Et*Be,Ke*Ae,Et,Ke,0,0,Et,Ke);return{canvas:Re.canvas,scaleX:Ee.scale,scaleY:me.scale,offsetX:d,offsetY:f}}return{canvas:q.canvas,scaleX:N.scale,scaleY:R.scale,offsetX:d,offsetY:f}}getSizeAndScale(e,t,i){const s=Math.max(Bg.MAX_PATTERN_SIZE,t);let r=Math.ceil(e*i);return r>=s?r=s:i=r/e,{scale:i,size:r}}clipBbox(e,t,i,s,r){const o=s-t,a=r-i;e.ctx.rect(t,i,o,a),e.current.updateRectMinMax(Ye(e.ctx),[t,i,s,r]),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,i){const s=e.ctx,r=e.current;switch(t){case pw.COLORED:const o=this.ctx;s.fillStyle=o.fillStyle,s.strokeStyle=o.strokeStyle,r.fillColor=o.fillStyle,r.strokeColor=o.strokeStyle;break;case pw.UNCOLORED:const a=ae.makeHexColor(i[0],i[1],i[2]);s.fillStyle=a,s.strokeStyle=a,r.fillColor=a,r.strokeColor=a;break;default:throw new T$(`Unsupported paint type: ${t}`)}}getPattern(e,t,i,s){let r=i;s!==Gt.SHADING&&(r=ae.transform(r,t.baseTransform),this.matrix&&(r=ae.transform(r,this.matrix)));const o=this.createPatternCanvas(t);let a=new DOMMatrix(r);a=a.translate(o.offsetX,o.offsetY),a=a.scale(1/o.scaleX,1/o.scaleY);const l=e.createPattern(o.canvas,"repeat");return l.setTransform(a),l}}function X$({src:n,srcPos:e=0,dest:t,width:i,height:s,nonBlackColor:r=4294967295,inverseDecode:o=!1}){const a=cn.isLittleEndian?4278190080:255,[l,c]=o?[r,a]:[a,r],d=i>>3,f=i&7,m=n.length;t=new Uint32Array(t.buffer);let y=0;for(let v=0;v<s;v++){for(const T=e+d;e<T;e++){const x=e<m?n[e]:255;t[y++]=x&128?c:l,t[y++]=x&64?c:l,t[y++]=x&32?c:l,t[y++]=x&16?c:l,t[y++]=x&8?c:l,t[y++]=x&4?c:l,t[y++]=x&2?c:l,t[y++]=x&1?c:l}if(f===0)continue;const w=e<m?n[e++]:255;for(let T=0;T<f;T++)t[y++]=w&1<<7-T?c:l}return{srcPos:e,destPos:y}}const mw=16,gw=100,Q$=15,yw=10,vw=1e3,fn=16;function Z$(n,e){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){e.save(),this.__originalSave()},n.restore=function(){e.restore(),this.__originalRestore()},n.translate=function(i,s){e.translate(i,s),this.__originalTranslate(i,s)},n.scale=function(i,s){e.scale(i,s),this.__originalScale(i,s)},n.transform=function(i,s,r,o,a,l){e.transform(i,s,r,o,a,l),this.__originalTransform(i,s,r,o,a,l)},n.setTransform=function(i,s,r,o,a,l){e.setTransform(i,s,r,o,a,l),this.__originalSetTransform(i,s,r,o,a,l)},n.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},n.rotate=function(i){e.rotate(i),this.__originalRotate(i)},n.clip=function(i){e.clip(i),this.__originalClip(i)},n.moveTo=function(t,i){e.moveTo(t,i),this.__originalMoveTo(t,i)},n.lineTo=function(t,i){e.lineTo(t,i),this.__originalLineTo(t,i)},n.bezierCurveTo=function(t,i,s,r,o,a){e.bezierCurveTo(t,i,s,r,o,a),this.__originalBezierCurveTo(t,i,s,r,o,a)},n.rect=function(t,i,s,r){e.rect(t,i,s,r),this.__originalRect(t,i,s,r)},n.closePath=function(){e.closePath(),this.__originalClosePath()},n.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class ej{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,i){let s;return this.cache[e]!==void 0?(s=this.cache[e],this.canvasFactory.reset(s,t,i)):(s=this.canvasFactory.create(t,i),this.cache[e]=s),s}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function iu(n,e,t,i,s,r,o,a,l,c){const[d,f,m,y,v,w]=Ye(n);if(f===0&&m===0){const P=o*d+v,S=Math.round(P),L=a*y+w,F=Math.round(L),U=(o+l)*d+v,C=Math.abs(Math.round(U)-S)||1,A=(a+c)*y+w,E=Math.abs(Math.round(A)-F)||1;return n.setTransform(Math.sign(d),0,0,Math.sign(y),S,F),n.drawImage(e,t,i,s,r,0,0,C,E),n.setTransform(d,f,m,y,v,w),[C,E]}if(d===0&&y===0){const P=a*m+v,S=Math.round(P),L=o*f+w,F=Math.round(L),U=(a+c)*m+v,C=Math.abs(Math.round(U)-S)||1,A=(o+l)*f+w,E=Math.abs(Math.round(A)-F)||1;return n.setTransform(0,Math.sign(f),Math.sign(m),0,S,F),n.drawImage(e,t,i,s,r,0,0,E,C),n.setTransform(d,f,m,y,v,w),[E,C]}n.drawImage(e,t,i,s,r,o,a,l,c);const T=Math.hypot(d,f),x=Math.hypot(m,y);return[T*l,x*c]}function tj(n){const{width:e,height:t}=n;if(e>vw||t>vw)return null;const i=1e3,s=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),r=e+1;let o=new Uint8Array(r*(t+1)),a,l,c;const d=e+7&-8;let f=new Uint8Array(d*t),m=0;for(const x of n.data){let P=128;for(;P>0;)f[m++]=x&P?0:255,P>>=1}let y=0;for(m=0,f[m]!==0&&(o[0]=1,++y),l=1;l<e;l++)f[m]!==f[m+1]&&(o[l]=f[m]?2:1,++y),m++;for(f[m]!==0&&(o[l]=2,++y),a=1;a<t;a++){m=a*d,c=a*r,f[m-d]!==f[m]&&(o[c]=f[m]?1:8,++y);let x=(f[m]?4:0)+(f[m-d]?8:0);for(l=1;l<e;l++)x=(x>>2)+(f[m+1]?4:0)+(f[m-d+1]?8:0),s[x]&&(o[c+l]=s[x],++y),m++;if(f[m-d]!==f[m]&&(o[c+l]=f[m]?2:4,++y),y>i)return null}for(m=d*(t-1),c=a*r,f[m]!==0&&(o[c]=8,++y),l=1;l<e;l++)f[m]!==f[m+1]&&(o[c+l]=f[m]?4:8,++y),m++;if(f[m]!==0&&(o[c+l]=4,++y),y>i)return null;const v=new Int32Array([0,r,-1,0,-r,0,0,0,1]),w=new Path2D;for(a=0;y&&a<=t;a++){let x=a*r;const P=x+e;for(;x<P&&!o[x];)x++;if(x===P)continue;w.moveTo(x%r,a);const S=x;let L=o[x];do{const F=v[L];do x+=F;while(!o[x]);const U=o[x];U!==5&&U!==10?(L=U,o[x]=0):(L=U&51*L>>4,o[x]&=L>>2|L<<2),w.lineTo(x%r,x/r|0),o[x]||--y}while(S!==x);--a}return f=null,o=null,function(x){x.save(),x.scale(1/e,-1/t),x.translate(0,-t),x.fill(w),x.beginPath(),x.restore()}}class _w{constructor(e,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=EA,this.textMatrixScale=1,this.fontMatrix=bp,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=qt.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.patternStroke=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,t])}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,t){this.x=e,this.y=t}updatePathMinMax(e,t,i){[t,i]=ae.applyTransform([t,i],e),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,i),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,i)}updateRectMinMax(e,t){const i=ae.applyTransform(t,e),s=ae.applyTransform(t.slice(2),e),r=ae.applyTransform([t[0],t[3]],e),o=ae.applyTransform([t[2],t[1]],e);this.minX=Math.min(this.minX,i[0],s[0],r[0],o[0]),this.minY=Math.min(this.minY,i[1],s[1],r[1],o[1]),this.maxX=Math.max(this.maxX,i[0],s[0],r[0],o[0]),this.maxY=Math.max(this.maxY,i[1],s[1],r[1],o[1])}updateScalingPathMinMax(e,t){ae.scaleMinMax(e,t),this.minX=Math.min(this.minX,t[0]),this.minY=Math.min(this.minY,t[1]),this.maxX=Math.max(this.maxX,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(e,t,i,s,r,o,a,l,c,d){const f=ae.bezierBoundingBox(t,i,s,r,o,a,l,c,d);d||this.updateRectMinMax(e,f)}getPathBoundingBox(e=Gt.FILL,t=null){const i=[this.minX,this.minY,this.maxX,this.maxY];if(e===Gt.STROKE){t||Ue("Stroke bounding box must include transform.");const s=ae.singularValueDecompose2dScale(t),r=s[0]*this.lineWidth/2,o=s[1]*this.lineWidth/2;i[0]-=r,i[1]-=o,i[2]+=r,i[3]+=o}return i}updateClipFromPath(){const e=ae.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(e=Gt.FILL,t=null){return ae.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function ww(n,e){if(e instanceof ImageData){n.putImageData(e,0,0);return}const t=e.height,i=e.width,s=t%fn,r=(t-s)/fn,o=s===0?r:r+1,a=n.createImageData(i,fn);let l=0,c;const d=e.data,f=a.data;let m,y,v,w;if(e.kind===Eu.GRAYSCALE_1BPP){const T=d.byteLength,x=new Uint32Array(f.buffer,0,f.byteLength>>2),P=x.length,S=i+7>>3,L=4294967295,F=cn.isLittleEndian?4278190080:255;for(m=0;m<o;m++){for(v=m<r?fn:s,c=0,y=0;y<v;y++){const U=T-l;let C=0;const A=U>S?i:U*8-7,E=A&-8;let D=0,k=0;for(;C<E;C+=8)k=d[l++],x[c++]=k&128?L:F,x[c++]=k&64?L:F,x[c++]=k&32?L:F,x[c++]=k&16?L:F,x[c++]=k&8?L:F,x[c++]=k&4?L:F,x[c++]=k&2?L:F,x[c++]=k&1?L:F;for(;C<A;C++)D===0&&(k=d[l++],D=128),x[c++]=k&D?L:F,D>>=1}for(;c<P;)x[c++]=0;n.putImageData(a,0,m*fn)}}else if(e.kind===Eu.RGBA_32BPP){for(y=0,w=i*fn*4,m=0;m<r;m++)f.set(d.subarray(l,l+w)),l+=w,n.putImageData(a,0,y),y+=fn;m<o&&(w=i*s*4,f.set(d.subarray(l,l+w)),n.putImageData(a,0,y))}else if(e.kind===Eu.RGB_24BPP)for(v=fn,w=i*v,m=0;m<o;m++){for(m>=r&&(v=s,w=i*v),c=0,y=w;y--;)f[c++]=d[l++],f[c++]=d[l++],f[c++]=d[l++],f[c++]=255;n.putImageData(a,0,m*fn)}else throw new Error(`bad image kind: ${e.kind}`)}function bw(n,e){if(e.bitmap){n.drawImage(e.bitmap,0,0);return}const t=e.height,i=e.width,s=t%fn,r=(t-s)/fn,o=s===0?r:r+1,a=n.createImageData(i,fn);let l=0;const c=e.data,d=a.data;for(let f=0;f<o;f++){const m=f<r?fn:s;({srcPos:l}=X$({src:c,srcPos:l,dest:d,width:i,height:m,nonBlackColor:0})),n.putImageData(a,0,f*fn)}}function za(n,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of t)n[i]!==void 0&&(e[i]=n[i]);n.setLineDash!==void 0&&(e.setLineDash(n.getLineDash()),e.lineDashOffset=n.lineDashOffset)}function su(n){if(n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0),!jt){const{filter:e}=n;e!=="none"&&e!==""&&(n.filter="none")}}function Tw(n,e){if(e)return!0;const t=ae.singularValueDecompose2dScale(n);t[0]=Math.fround(t[0]),t[1]=Math.fround(t[1]);const i=Math.fround((globalThis.devicePixelRatio||1)*jo.PDF_TO_CSS_UNITS);return t[0]<=i&&t[1]<=i}const nj=["butt","round","square"],ij=["miter","round","bevel"],sj={},xw={};class wo{constructor(e,t,i,s,r,{optionalContentConfig:o,markedContentStack:a=null},l,c){this.ctx=e,this.current=new _w(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=i,this.canvasFactory=s,this.filterFactory=r,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=a||[],this.optionalContentConfig=o,this.cachedCanvases=new ej(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=l,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=c,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:i=!1,background:s=null}){const r=this.ctx.canvas.width,o=this.ctx.canvas.height,a=this.ctx.fillStyle;if(this.ctx.fillStyle=s||"#ffffff",this.ctx.fillRect(0,0,r,o),this.ctx.fillStyle=a,i){const l=this.cachedCanvases.getCanvas("transparent",r,o);this.compositeCtx=this.ctx,this.transparentCanvas=l.canvas,this.ctx=l.context,this.ctx.save(),this.ctx.transform(...Ye(this.compositeCtx))}this.ctx.save(),su(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=Ye(this.ctx)}executeOperatorList(e,t,i,s){const r=e.argsArray,o=e.fnArray;let a=t||0;const l=r.length;if(l===a)return a;const c=l-a>yw&&typeof i=="function",d=c?Date.now()+Q$:0;let f=0;const m=this.commonObjs,y=this.objs;let v;for(;;){if(s!==void 0&&a===s.nextBreakPoint)return s.breakIt(a,i),a;if(v=o[a],v!==Un.dependency)this[v].apply(this,r[a]);else for(const w of r[a]){const T=w.startsWith("g_")?m:y;if(!T.has(w))return T.get(w,i),a}if(a++,a===l)return a;if(c&&++f>yw){if(Date.now()>d)return i(),a;f=0}}}#e(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#e(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),this.#t()}#t(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}}_scaleImage(e,t){const i=e.width??e.displayWidth,s=e.height??e.displayHeight;let r=Math.max(Math.hypot(t[0],t[1]),1),o=Math.max(Math.hypot(t[2],t[3]),1),a=i,l=s,c="prescale1",d,f;for(;r>2&&a>1||o>2&&l>1;){let m=a,y=l;r>2&&a>1&&(m=a>=16384?Math.floor(a/2)-1||1:Math.ceil(a/2),r/=a/m),o>2&&l>1&&(y=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l)/2,o/=l/y),d=this.cachedCanvases.getCanvas(c,m,y),f=d.context,f.clearRect(0,0,m,y),f.drawImage(e,0,0,a,l,0,0,m,y),e=d.canvas,a=m,l=y,c=c==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:a,paintHeight:l}}_createMaskCanvas(e){const t=this.ctx,{width:i,height:s}=e,r=this.current.fillColor,o=this.current.patternFill,a=Ye(t);let l,c,d,f;if((e.bitmap||e.data)&&e.count>1){const A=e.bitmap||e.data.buffer;c=JSON.stringify(o?a:[a.slice(0,4),r]),l=this._cachedBitmapsMap.get(A),l||(l=new Map,this._cachedBitmapsMap.set(A,l));const E=l.get(c);if(E&&!o){const D=Math.round(Math.min(a[0],a[2])+a[4]),k=Math.round(Math.min(a[1],a[3])+a[5]);return{canvas:E,offsetX:D,offsetY:k}}d=E}d||(f=this.cachedCanvases.getCanvas("maskCanvas",i,s),bw(f.context,e));let m=ae.transform(a,[1/i,0,0,-1/s,0,0]);m=ae.transform(m,[1,0,0,1,0,-s]);const[y,v,w,T]=ae.getAxialAlignedBoundingBox([0,0,i,s],m),x=Math.round(w-y)||1,P=Math.round(T-v)||1,S=this.cachedCanvases.getCanvas("fillCanvas",x,P),L=S.context,F=y,U=v;L.translate(-F,-U),L.transform(...m),d||(d=this._scaleImage(f.canvas,Wn(L)),d=d.img,l&&o&&l.set(c,d)),L.imageSmoothingEnabled=Tw(Ye(L),e.interpolate),iu(L,d,0,0,d.width,d.height,0,0,i,s),L.globalCompositeOperation="source-in";const C=ae.transform(Wn(L),[1,0,0,1,-F,-U]);return L.fillStyle=o?r.getPattern(t,this,C,Gt.FILL):r,L.fillRect(0,0,i,s),l&&!o&&(this.cachedCanvases.delete("fillCanvas"),l.set(c,S.canvas)),{canvas:S.canvas,offsetX:Math.round(F),offsetY:Math.round(U)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=nj[e]}setLineJoin(e){this.ctx.lineJoin=ij[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(e),i.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,i]of e)switch(t){case"LW":this.setLineWidth(i);break;case"LC":this.setLineCap(i);break;case"LJ":this.setLineJoin(i);break;case"ML":this.setMiterLimit(i);break;case"D":this.setDash(i[0],i[1]);break;case"RI":this.setRenderingIntent(i);break;case"FL":this.setFlatness(i);break;case"Font":this.setFont(i[0],i[1]);break;case"CA":this.current.strokeAlpha=i;break;case"ca":this.current.fillAlpha=i,this.ctx.globalAlpha=i;break;case"BM":this.ctx.globalCompositeOperation=i;break;case"SMask":this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,s=this.cachedCanvases.getCanvas(i,e,t);this.suspendedCtx=this.ctx,this.ctx=s.context;const r=this.ctx;r.setTransform(...Ye(this.suspendedCtx)),za(this.suspendedCtx,r),Z$(r,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),za(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,i=this.suspendedCtx;this.composeSMask(i,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,i,s){const r=s[0],o=s[1],a=s[2]-r,l=s[3]-o;a===0||l===0||(this.genericComposeSMask(t.context,i,a,l,t.subtype,t.backdrop,t.transferMap,r,o,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(i.canvas,0,0),e.restore())}genericComposeSMask(e,t,i,s,r,o,a,l,c,d,f){let m=e.canvas,y=l-d,v=c-f;if(o){const T=ae.makeHexColor(...o);if(y<0||v<0||y+i>m.width||v+s>m.height){const x=this.cachedCanvases.getCanvas("maskExtension",i,s),P=x.context;P.drawImage(m,-y,-v),P.globalCompositeOperation="destination-atop",P.fillStyle=T,P.fillRect(0,0,i,s),P.globalCompositeOperation="source-over",m=x.canvas,y=v=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const x=new Path2D;x.rect(y,v,i,s),e.clip(x),e.globalCompositeOperation="destination-atop",e.fillStyle=T,e.fillRect(y,v,i,s),e.restore()}}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),r==="Alpha"&&a?t.filter=this.filterFactory.addAlphaFilter(a):r==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(a));const w=new Path2D;w.rect(l,c,i,s),t.clip(w),t.globalCompositeOperation="destination-in",t.drawImage(m,y,v,i,s,l,c,i,s),t.restore()}save(){this.inSMaskMode?(za(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),za(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,t,i,s,r,o){this.ctx.transform(e,t,i,s,r,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,i){const s=this.ctx,r=this.current;let o=r.x,a=r.y,l,c;const d=Ye(s),f=d[0]===0&&d[3]===0||d[1]===0&&d[2]===0,m=f?i.slice(0):null;for(let y=0,v=0,w=e.length;y<w;y++)switch(e[y]|0){case Un.rectangle:o=t[v++],a=t[v++];const T=t[v++],x=t[v++],P=o+T,S=a+x;s.moveTo(o,a),T===0||x===0?s.lineTo(P,S):(s.lineTo(P,a),s.lineTo(P,S),s.lineTo(o,S)),f||r.updateRectMinMax(d,[o,a,P,S]),s.closePath();break;case Un.moveTo:o=t[v++],a=t[v++],s.moveTo(o,a),f||r.updatePathMinMax(d,o,a);break;case Un.lineTo:o=t[v++],a=t[v++],s.lineTo(o,a),f||r.updatePathMinMax(d,o,a);break;case Un.curveTo:l=o,c=a,o=t[v+4],a=t[v+5],s.bezierCurveTo(t[v],t[v+1],t[v+2],t[v+3],o,a),r.updateCurvePathMinMax(d,l,c,t[v],t[v+1],t[v+2],t[v+3],o,a,m),v+=6;break;case Un.curveTo2:l=o,c=a,s.bezierCurveTo(o,a,t[v],t[v+1],t[v+2],t[v+3]),r.updateCurvePathMinMax(d,l,c,o,a,t[v],t[v+1],t[v+2],t[v+3],m),o=t[v+2],a=t[v+3],v+=4;break;case Un.curveTo3:l=o,c=a,o=t[v+2],a=t[v+3],s.bezierCurveTo(t[v],t[v+1],o,a,o,a),r.updateCurvePathMinMax(d,l,c,t[v],t[v+1],o,a,o,a,m),v+=4;break;case Un.closePath:s.closePath();break}f&&r.updateScalingPathMinMax(d,m),r.setCurrentPoint(o,a)}closePath(){this.ctx.closePath()}stroke(e=!0){const t=this.ctx,i=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof i=="object"&&i?.getPattern?(t.save(),t.strokeStyle=i.getPattern(t,this,Wn(t),Gt.STROKE),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(e=!0){const t=this.ctx,i=this.current.fillColor,s=this.current.patternFill;let r=!1;s&&(t.save(),t.fillStyle=i.getPattern(t,this,Wn(t),Gt.FILL),r=!0);const o=this.current.getClippedPathBoundingBox();this.contentVisible&&o!==null&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),r&&t.restore(),e&&this.consumePath(o)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=sj}eoClip(){this.pendingClip=xw}beginText(){this.current.textMatrix=EA,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(e===void 0){t.beginPath();return}const i=new Path2D,s=t.getTransform().invertSelf();for(const{transform:r,x:o,y:a,fontSize:l,path:c}of e)i.addPath(c,new DOMMatrix(r).preMultiplySelf(s).translate(o,a).scale(l,-l));t.clip(i),t.beginPath(),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){const i=this.commonObjs.get(e),s=this.current;if(!i)throw new Error(`Can't find font for ${e}`);if(s.fontMatrix=i.fontMatrix||bp,(s.fontMatrix[0]===0||s.fontMatrix[3]===0)&&ve("Invalid font matrix for font "+e),t<0?(t=-t,s.fontDirection=-1):s.fontDirection=1,this.current.font=i,this.current.fontSize=t,i.isType3Font)return;const r=i.loadedName||"sans-serif",o=i.systemFontInfo?.css||`"${r}", ${i.fallbackName}`;let a="normal";i.black?a="900":i.bold&&(a="bold");const l=i.italic?"italic":"normal";let c=t;t<mw?c=mw:t>gw&&(c=gw),this.current.fontSizeScale=t/c,this.ctx.font=`${l} ${a} ${c}px ${o}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e,t,i,s,r,o){this.current.textMatrix=[e,t,i,s,r,o],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}#n(e,t,i){const s=new Path2D;return s.addPath(e,new DOMMatrix(i).invertSelf().multiplySelf(t)),s}paintChar(e,t,i,s,r){const o=this.ctx,a=this.current,l=a.font,c=a.textRenderingMode,d=a.fontSize/a.fontSizeScale,f=c&qt.FILL_STROKE_MASK,m=!!(c&qt.ADD_TO_PATH_FLAG),y=a.patternFill&&!l.missingFile,v=a.patternStroke&&!l.missingFile;let w;if((l.disableFontFace||m||y||v)&&(w=l.getPathGenerator(this.commonObjs,e)),l.disableFontFace||y||v){if(o.save(),o.translate(t,i),o.scale(d,-d),f===qt.FILL||f===qt.FILL_STROKE)if(s){const T=o.getTransform();o.setTransform(...s),o.fill(this.#n(w,T,s))}else o.fill(w);if(f===qt.STROKE||f===qt.FILL_STROKE)if(r){const T=o.getTransform();o.setTransform(...r),o.stroke(this.#n(w,T,r))}else o.lineWidth/=d,o.stroke(w);o.restore()}else(f===qt.FILL||f===qt.FILL_STROKE)&&o.fillText(e,t,i),(f===qt.STROKE||f===qt.FILL_STROKE)&&o.strokeText(e,t,i);m&&(this.pendingTextPaths||=[]).push({transform:Ye(o),x:t,y:i,fontSize:d,path:w})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let i=!1;for(let s=3;s<t.length;s+=4)if(t[s]>0&&t[s]<255){i=!0;break}return _e(this,"isFontSubpixelAAEnabled",i)}showText(e){const t=this.current,i=t.font;if(i.isType3Font)return this.showType3Text(e);const s=t.fontSize;if(s===0)return;const r=this.ctx,o=t.fontSizeScale,a=t.charSpacing,l=t.wordSpacing,c=t.fontDirection,d=t.textHScale*c,f=e.length,m=i.vertical,y=m?1:-1,v=i.defaultVMetrics,w=s*t.fontMatrix[0],T=t.textRenderingMode===qt.FILL&&!i.disableFontFace&&!t.patternFill;r.save(),r.transform(...t.textMatrix),r.translate(t.x,t.y+t.textRise),c>0?r.scale(d,-1):r.scale(d,1);let x,P;if(t.patternFill){r.save();const C=t.fillColor.getPattern(r,this,Wn(r),Gt.FILL);x=Ye(r),r.restore(),r.fillStyle=C}if(t.patternStroke){r.save();const C=t.strokeColor.getPattern(r,this,Wn(r),Gt.STROKE);P=Ye(r),r.restore(),r.strokeStyle=C}let S=t.lineWidth;const L=t.textMatrixScale;if(L===0||S===0){const C=t.textRenderingMode&qt.FILL_STROKE_MASK;(C===qt.STROKE||C===qt.FILL_STROKE)&&(S=this.getSinglePixelWidth())}else S/=L;if(o!==1&&(r.scale(o,o),S/=o),r.lineWidth=S,i.isInvalidPDFjsFont){const C=[];let A=0;for(const E of e)C.push(E.unicode),A+=E.width;r.fillText(C.join(""),0,0),t.x+=A*w*d,r.restore(),this.compose();return}let F=0,U;for(U=0;U<f;++U){const C=e[U];if(typeof C=="number"){F+=y*C*s/1e3;continue}let A=!1;const E=(C.isSpace?l:0)+a,D=C.fontChar,k=C.accent;let N,R,q=C.width;if(m){const W=C.vmetric||v,K=-(C.vmetric?W[1]:q*.5)*w,Ee=W[2]*w;q=W?-W[0]:q,N=K/o,R=(F+Ee)/o}else N=F/o,R=0;if(i.remeasure&&q>0){const W=r.measureText(D).width*1e3/s*o;if(q<W&&this.isFontSubpixelAAEnabled){const K=q/W;A=!0,r.save(),r.scale(K,1),N/=K}else q!==W&&(N+=(q-W)/2e3*s/o)}if(this.contentVisible&&(C.isInFont||i.missingFile)){if(T&&!k)r.fillText(D,N,R);else if(this.paintChar(D,N,R,x,P),k){const W=N+s*k.offset.x/o,K=R-s*k.offset.y/o;this.paintChar(k.fontChar,W,K,x,P)}}const te=m?q*w-E*c:q*w+E*c;F+=te,A&&r.restore()}m?t.y-=F:t.x+=F*d,r.restore(),this.compose()}showType3Text(e){const t=this.ctx,i=this.current,s=i.font,r=i.fontSize,o=i.fontDirection,a=s.vertical?1:-1,l=i.charSpacing,c=i.wordSpacing,d=i.textHScale*o,f=i.fontMatrix||bp,m=e.length,y=i.textRenderingMode===qt.INVISIBLE;let v,w,T,x;if(!(y||r===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),t.transform(...i.textMatrix),t.translate(i.x,i.y),t.scale(d,o),v=0;v<m;++v){if(w=e[v],typeof w=="number"){x=a*w*r/1e3,this.ctx.translate(x,0),i.x+=x*d;continue}const P=(w.isSpace?c:0)+l,S=s.charProcOperatorList[w.operatorListId];if(!S){ve(`Type3 character "${w.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=w,this.save(),t.scale(r,r),t.transform(...f),this.executeOperatorList(S),this.restore()),T=ae.applyTransform([w.width,0],f)[0]*r+P,t.translate(T,0),i.x+=T*d}t.restore(),this.processingType3=null}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,i,s,r,o){this.ctx.rect(i,s,r-i,o-s),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let t;if(e[0]==="TilingPattern"){const i=e[1],s=this.baseTransform||Ye(this.ctx),r={createCanvasGraphics:o=>new wo(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new Bg(e,i,this.ctx,r,s)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,t,i){this.ctx.strokeStyle=this.current.strokeColor=ae.makeHexColor(e,t,i),this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t,i){this.ctx.fillStyle=this.current.fillColor=ae.makeHexColor(e,t,i),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t=null){let i;return this.cachedPatterns.has(e)?i=this.cachedPatterns.get(e):(i=J$(this.getObject(e)),this.cachedPatterns.set(e,i)),t&&(i.matrix=t),i}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const i=this._getPattern(e);t.fillStyle=i.getPattern(t,this,Wn(t),Gt.SHADING);const s=Wn(t);if(s){const{width:r,height:o}=t.canvas,[a,l,c,d]=ae.getAxialAlignedBoundingBox([0,0,r,o],s);this.ctx.fillRect(a,l,c-a,d-l)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){Ue("Should not call beginInlineImage")}beginImageData(){Ue("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=Ye(this.ctx),t)){const i=t[2]-t[0],s=t[3]-t[1];this.ctx.rect(t[0],t[1],i,s),this.current.updateRectMinMax(Ye(this.ctx),t),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||sh("TODO: Support non-isolated groups."),e.knockout&&ve("Knockout groups not supported.");const i=Ye(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let s=ae.getAxialAlignedBoundingBox(e.bbox,Ye(t));const r=[0,0,t.canvas.width,t.canvas.height];s=ae.intersect(s,r)||[0,0,0,0];const o=Math.floor(s[0]),a=Math.floor(s[1]),l=Math.max(Math.ceil(s[2])-o,1),c=Math.max(Math.ceil(s[3])-a,1);this.current.startNewPathAndClipBox([0,0,l,c]);let d="groupAt"+this.groupLevel;e.smask&&(d+="_smask_"+this.smaskCounter++%2);const f=this.cachedCanvases.getCanvas(d,l,c),m=f.context;m.translate(-o,-a),m.transform(...i),e.smask?this.smaskStack.push({canvas:f.canvas,context:m,offsetX:o,offsetY:a,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(o,a),t.save()),za(t,m),this.ctx=m,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const s=Ye(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...s);const r=ae.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],s);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(r)}}beginAnnotation(e,t,i,s,r){if(this.#e(),su(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const o=t[2]-t[0],a=t[3]-t[1];if(r&&this.annotationCanvasMap){i=i.slice(),i[4]-=t[0],i[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=o,t[3]=a;const[l,c]=ae.singularValueDecompose2dScale(Ye(this.ctx)),{viewportScale:d}=this,f=Math.ceil(o*this.outputScaleX*d),m=Math.ceil(a*this.outputScaleY*d);this.annotationCanvas=this.canvasFactory.create(f,m);const{canvas:y,context:v}=this.annotationCanvas;this.annotationCanvasMap.set(e,y),this.annotationCanvas.savedCtx=this.ctx,this.ctx=v,this.ctx.save(),this.ctx.setTransform(l,0,0,-c,0,a*c),su(this.ctx)}else su(this.ctx),this.endPath(),this.ctx.rect(t[0],t[1],o,a),this.ctx.clip(),this.ctx.beginPath()}this.current=new _w(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...i),this.transform(...s)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#t(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;e=this.getObject(e.data,e),e.count=t;const i=this.ctx,s=this.processingType3;if(s&&(s.compiled===void 0&&(s.compiled=tj(e)),s.compiled)){s.compiled(i);return}const r=this._createMaskCanvas(e),o=r.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(o,r.offsetX,r.offsetY),i.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,i=0,s=0,r,o){if(!this.contentVisible)return;e=this.getObject(e.data,e);const a=this.ctx;a.save();const l=Ye(a);a.transform(t,i,s,r,0,0);const c=this._createMaskCanvas(e);a.setTransform(1,0,0,1,c.offsetX-l[4],c.offsetY-l[5]);for(let d=0,f=o.length;d<f;d+=2){const m=ae.transform(l,[t,i,s,r,o[d],o[d+1]]),[y,v]=ae.applyTransform([0,0],m);a.drawImage(c.canvas,y,v)}a.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,i=this.current.fillColor,s=this.current.patternFill;for(const r of e){const{data:o,width:a,height:l,transform:c}=r,d=this.cachedCanvases.getCanvas("maskCanvas",a,l),f=d.context;f.save();const m=this.getObject(o,r);bw(f,m),f.globalCompositeOperation="source-in",f.fillStyle=s?i.getPattern(f,this,Wn(t),Gt.FILL):i,f.fillRect(0,0,a,l),f.restore(),t.save(),t.transform(...c),t.scale(1,-1),iu(t,d.canvas,0,0,a,l,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);if(!t){ve("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,i,s){if(!this.contentVisible)return;const r=this.getObject(e);if(!r){ve("Dependent image isn't ready yet");return}const o=r.width,a=r.height,l=[];for(let c=0,d=s.length;c<d;c+=2)l.push({transform:[t,0,0,i,s[c],s[c+1]],x:0,y:0,w:o,h:a});this.paintInlineImageXObjectGroup(r,l)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:i,height:s}=e,r=this.cachedCanvases.getCanvas("inlineImage",i,s),o=r.context;return o.filter=this.current.transferMaps,o.drawImage(t,0,0),o.filter="none",r.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,i=e.height,s=this.ctx;if(this.save(),!jt){const{filter:a}=s;a!=="none"&&a!==""&&(s.filter="none")}s.scale(1/t,-1/i);let r;if(e.bitmap)r=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)r=e;else{const l=this.cachedCanvases.getCanvas("inlineImage",t,i).context;ww(l,e),r=this.applyTransferMapsToCanvas(l)}const o=this._scaleImage(r,Wn(s));s.imageSmoothingEnabled=Tw(Ye(s),e.interpolate),iu(s,o.img,0,0,o.paintWidth,o.paintHeight,0,-i,t,i),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const i=this.ctx;let s;if(e.bitmap)s=e.bitmap;else{const r=e.width,o=e.height,l=this.cachedCanvases.getCanvas("inlineImage",r,o).context;ww(l,e),s=this.applyTransferMapsToCanvas(l)}for(const r of t)i.save(),i.transform(...r.transform),i.scale(1,-1),iu(i,s,r.x,r.y,r.w,r.h,0,-1,1,1),i.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){const t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const i=this.ctx;this.pendingClip&&(t||(this.pendingClip===xw?i.clip("evenodd"):i.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),i.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=Ye(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),i=Math.hypot(e[0],e[2]),s=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(i,s)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:i,c:s,d:r}=this.ctx.getTransform();let o,a;if(i===0&&s===0){const l=Math.abs(t),c=Math.abs(r);if(l===c)if(e===0)o=a=1/l;else{const d=l*e;o=a=d<1?1/d:1}else if(e===0)o=1/l,a=1/c;else{const d=l*e,f=c*e;o=d<1?1/d:1,a=f<1?1/f:1}}else{const l=Math.abs(t*r-i*s),c=Math.hypot(t,i),d=Math.hypot(s,r);if(e===0)o=d/l,a=c/l;else{const f=e*l;o=d>f?d/f:1,a=c>f?c/f:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=a}return this._cachedScaleForStroking}rescaleAndStroke(e){const{ctx:t}=this,{lineWidth:i}=this.current,[s,r]=this.getScaleForStroking();if(t.lineWidth=i||1,s===1&&r===1){t.stroke();return}const o=t.getLineDash();if(e&&t.save(),t.scale(s,r),o.length>0){const a=Math.max(s,r);t.setLineDash(o.map(l=>l/a)),t.lineDashOffset/=a}t.stroke(),e&&t.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}}for(const n in Un)wo.prototype[n]!==void 0&&(wo.prototype[Un[n]]=wo.prototype[n]);class _l{static#e=null;static#t="";static get workerPort(){return this.#e}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");this.#e=e}static get workerSrc(){return this.#t}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");this.#t=e}}class rj{#e;#t;constructor({parsedData:e,rawData:t}){this.#e=e,this.#t=t}getRaw(){return this.#t}get(e){return this.#e.get(e)??null}getAll(){return kg(this.#e)}has(e){return this.#e.has(e)}}const so=Symbol("INTERNAL");class oj{#e=!1;#t=!1;#n=!1;#i=!0;constructor(e,{name:t,intent:i,usage:s,rbGroups:r}){this.#e=!!(e&bn.DISPLAY),this.#t=!!(e&bn.PRINT),this.name=t,this.intent=i,this.usage=s,this.rbGroups=r}get visible(){if(this.#n)return this.#i;if(!this.#i)return!1;const{print:e,view:t}=this.usage;return this.#e?t?.viewState!=="OFF":this.#t?e?.printState!=="OFF":!0}_setVisible(e,t,i=!1){e!==so&&Ue("Internal method `_setVisible` called."),this.#n=i,this.#i=t}}class aj{#e=null;#t=new Map;#n=null;#i=null;constructor(e,t=bn.DISPLAY){if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,this.#i=e.order;for(const i of e.groups)this.#t.set(i.id,new oj(t,i));if(e.baseState==="OFF")for(const i of this.#t.values())i._setVisible(so,!1);for(const i of e.on)this.#t.get(i)._setVisible(so,!0);for(const i of e.off)this.#t.get(i)._setVisible(so,!1);this.#n=this.getHash()}}#r(e){const t=e.length;if(t<2)return!0;const i=e[0];for(let s=1;s<t;s++){const r=e[s];let o;if(Array.isArray(r))o=this.#r(r);else if(this.#t.has(r))o=this.#t.get(r).visible;else return ve(`Optional content group not found: ${r}`),!0;switch(i){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return i==="And"}isVisible(e){if(this.#t.size===0)return!0;if(!e)return sh("Optional content group not defined."),!0;if(e.type==="OCG")return this.#t.has(e.id)?this.#t.get(e.id).visible:(ve(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return this.#r(e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!this.#t.has(t))return ve(`Optional content group not found: ${t}`),!0;if(this.#t.get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!this.#t.has(t))return ve(`Optional content group not found: ${t}`),!0;if(!this.#t.get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!this.#t.has(t))return ve(`Optional content group not found: ${t}`),!0;if(!this.#t.get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!this.#t.has(t))return ve(`Optional content group not found: ${t}`),!0;if(this.#t.get(t).visible)return!1}return!0}return ve(`Unknown optional content policy ${e.policy}.`),!0}return ve(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,i=!0){const s=this.#t.get(e);if(!s){ve(`Optional content group not found: ${e}`);return}if(i&&t&&s.rbGroups.length)for(const r of s.rbGroups)for(const o of r)o!==e&&this.#t.get(o)?._setVisible(so,!1,!0);s._setVisible(so,!!t,!0),this.#e=null}setOCGState({state:e,preserveRB:t}){let i;for(const s of e){switch(s){case"ON":case"OFF":case"Toggle":i=s;continue}const r=this.#t.get(s);if(r)switch(i){case"ON":this.setVisibility(s,!0,t);break;case"OFF":this.setVisibility(s,!1,t);break;case"Toggle":this.setVisibility(s,!r.visible,t);break}}this.#e=null}get hasInitialVisibility(){return this.#n===null||this.getHash()===this.#n}getOrder(){return this.#t.size?this.#i?this.#i.slice():[...this.#t.keys()]:null}getGroups(){return this.#t.size>0?kg(this.#t):null}getGroup(e){return this.#t.get(e)||null}getHash(){if(this.#e!==null)return this.#e;const e=new CA;for(const[t,i]of this.#t)e.update(`${t}:${i.visible}`);return this.#e=e.hexdigest()}}class lj{constructor(e,{disableRange:t=!1,disableStream:i=!1}){vt(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:s,initialData:r,progressiveDone:o,contentDispositionFilename:a}=e;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=a,r?.length>0){const l=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(l)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!i,this._isRangeSupported=!t,this._contentLength=s,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((l,c)=>{this._onReceiveData({begin:l,chunk:c})}),e.addProgressListener((l,c)=>{this._onProgress({loaded:l,total:c})}),e.addProgressiveReadListener(l=>{this._onReceiveData({chunk:l})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const i=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{const s=this._rangeReaders.some(function(r){return r._begin!==e?!1:(r._enqueue(i),!0)});vt(s,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(e){e.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:e.loaded}):this._fullRequestReader?.onProgress?.({loaded:e.loaded,total:e.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){vt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new cj(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=new uj(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(i),i}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeReaders.slice(0))t.cancel(e);this._pdfDataRangeTransport.abort()}}class cj{constructor(e,t,i=!1,s=null){this._stream=e,this._done=i||!1,this._filename=Dg(s)?s:null,this._queuedChunks=t||[],this._loaded=0;for(const r of this._queuedChunks)this._loaded+=r.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class uj{constructor(e,t,i){this._stream=e,this._begin=t,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function dj(n){let e=!0,t=i("filename\\*","i").exec(n);if(t){t=t[1];let d=a(t);return d=unescape(d),d=l(d),d=c(d),r(d)}if(t=o(n),t){const d=c(t);return r(d)}if(t=i("filename","i").exec(n),t){t=t[1];let d=a(t);return d=c(d),r(d)}function i(d,f){return new RegExp("(?:^|;)\\s*"+d+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',f)}function s(d,f){if(d){if(!/^[\x00-\xFF]+$/.test(f))return f;try{const m=new TextDecoder(d,{fatal:!0}),y=rh(f);f=m.decode(y),e=!1}catch{}}return f}function r(d){return e&&/[\x80-\xff]/.test(d)&&(d=s("utf-8",d),e&&(d=s("iso-8859-1",d))),d}function o(d){const f=[];let m;const y=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(m=y.exec(d))!==null;){let[,w,T,x]=m;if(w=parseInt(w,10),w in f){if(w===0)break;continue}f[w]=[T,x]}const v=[];for(let w=0;w<f.length&&w in f;++w){let[T,x]=f[w];x=a(x),T&&(x=unescape(x),w===0&&(x=l(x))),v.push(x)}return v.join("")}function a(d){if(d.startsWith('"')){const f=d.slice(1).split('\\"');for(let m=0;m<f.length;++m){const y=f[m].indexOf('"');y!==-1&&(f[m]=f[m].slice(0,y),f.length=m+1),f[m]=f[m].replaceAll(/\\(.)/g,"$1")}d=f.join('"')}return d}function l(d){const f=d.indexOf("'");if(f===-1)return d;const m=d.slice(0,f),v=d.slice(f+1).replace(/^[^']*'/,"");return s(m,v)}function c(d){return!d.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(d)?d:d.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(f,m,y,v){if(y==="q"||y==="Q")return v=v.replaceAll("_"," "),v=v.replaceAll(/=([0-9a-fA-F]{2})/g,function(w,T){return String.fromCharCode(parseInt(T,16))}),s(m,v);try{v=atob(v)}catch{}return s(m,v)})}return""}function FA(n,e){const t=new Headers;if(!n||!e||typeof e!="object")return t;for(const i in e){const s=e[i];s!==void 0&&t.append(i,s)}return t}function ch(n){try{return new URL(n).origin}catch{}return null}function VA({responseHeaders:n,isHttp:e,rangeChunkSize:t,disableRange:i}){const s={allowRangeRequests:!1,suggestedLength:void 0},r=parseInt(n.get("Content-Length"),10);return!Number.isInteger(r)||(s.suggestedLength=r,r<=2*t)||i||!e||n.get("Accept-Ranges")!=="bytes"||(n.get("Content-Encoding")||"identity")!=="identity"||(s.allowRangeRequests=!0),s}function OA(n){const e=n.get("Content-Disposition");if(e){let t=dj(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(Dg(t))return t}return null}function uh(n,e){return n===404||n===0&&e.startsWith("file:")?new jl('Missing PDF "'+e+'".'):new rd(`Unexpected server response (${n}) while retrieving PDF "${e}".`,n)}function UA(n){return n===200||n===206}function BA(n,e,t){return{method:"GET",headers:n,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function zA(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(ve(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class Ew{_responseOrigin=null;constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=FA(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return vt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new hj(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=new fj(this,e,t);return this._rangeRequestReaders.push(i),i}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class hj{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const i=new Headers(e.headers),s=t.url;fetch(s,BA(i,this._withCredentials,this._abortController)).then(r=>{if(e._responseOrigin=ch(r.url),!UA(r.status))throw uh(r.status,s);this._reader=r.body.getReader(),this._headersCapability.resolve();const o=r.headers,{allowRangeRequests:a,suggestedLength:l}=VA({responseHeaders:o,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=l||this._contentLength,this._filename=OA(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Is("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:zA(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}class fj{constructor(e,t,i){this._stream=e,this._reader=null,this._loaded=0;const s=e.source;this._withCredentials=s.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!s.disableStream,this._abortController=new AbortController;const r=new Headers(e.headers);r.append("Range",`bytes=${t}-${i-1}`);const o=s.url;fetch(o,BA(r,this._withCredentials,this._abortController)).then(a=>{const l=ch(a.url);if(l!==e._responseOrigin)throw new Error(`Expected range response-origin "${l}" to match "${e._responseOrigin}".`);if(!UA(a.status))throw uh(a.status,o);this._readCapability.resolve(),this._reader=a.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded}),{value:zA(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}const uf=200,df=206;function pj(n){const e=n.response;return typeof e!="string"?e:rh(e).buffer}class mj{_responseOrigin=null;constructor({url:e,httpHeaders:t,withCredentials:i}){this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=FA(this.isHttp,t),this.withCredentials=i||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,i=this.currXhrId++,s=this.pendingRequests[i]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[r,o]of this.headers)t.setRequestHeader(r,o);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),s.expectedStatus=df):s.expectedStatus=uf,t.responseType="arraybuffer",vt(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,i),t.onprogress=this.onProgress.bind(this,i),s.onHeadersReceived=e.onHeadersReceived,s.onDone=e.onDone,s.onError=e.onError,s.onProgress=e.onProgress,t.send(null),i}onProgress(e,t){const i=this.pendingRequests[e];i&&i.onProgress?.(t)}onStateChange(e,t){const i=this.pendingRequests[e];if(!i)return;const s=i.xhr;if(s.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),s.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],s.status===0&&this.isHttp){i.onError(s.status);return}const r=s.status||uf;if(!(r===uf&&i.expectedStatus===df)&&r!==i.expectedStatus){i.onError(s.status);return}const a=pj(s);if(r===df){const l=s.getResponseHeader("Content-Range"),c=/bytes (\d+)-(\d+)\/(\d+)/.exec(l);c?i.onDone({begin:parseInt(c[1],10),chunk:a}):(ve('Missing or invalid "Content-Range" header.'),i.onError(0))}else a?i.onDone({begin:0,chunk:a}):i.onError(s.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class gj{constructor(e){this._source=e,this._manager=new mj(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return vt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new yj(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const i=new vj(this._manager,e,t);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class yj{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=ch(t.responseURL);const i=t.getAllResponseHeaders(),s=new Headers(i?i.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(a=>{const[l,...c]=a.split(": ");return[l,c.join(": ")]}):[]),{allowRangeRequests:r,suggestedLength:o}=VA({responseHeaders:s,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=OA(s),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=uh(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){this.onProgress?.({loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class vj{constructor(e,t,i){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:i,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){const e=ch(this._manager.getRequestXhr(this._requestId)?.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??=uh(e,this._url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){this.isStreamingSupported||this.onProgress?.({loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const _j=/^[a-z][a-z0-9\-+.]+:/i;function wj(n){if(_j.test(n))return new URL(n);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(n))}class bj{constructor(e){this.source=e,this.url=wj(e.url),vt(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return vt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new Tj(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=new xj(this,e,t);return this._rangeRequestReaders.push(i),i}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class Tj{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const i=process.getBuiltinModule("fs");i.promises.lstat(this._url).then(s=>{this._contentLength=s.size,this._setReadableStream(i.createReadStream(this._url)),this._headersCapability.resolve()},s=>{s.code==="ENOENT"&&(s=new jl(`Missing PDF "${this._url}".`)),this._storedError=s,this._headersCapability.reject(s)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Is("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class xj{constructor(e,t,i){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const s=e.source;this._isStreamingSupported=!s.disableStream;const r=process.getBuiltinModule("fs");this._setReadableStream(r.createReadStream(this._url,{start:t,end:i-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const Ej=1e5,dn=30,Aj=.8;class nn{#e=Promise.withResolvers();#t=null;#n=!1;#i=!!globalThis.FontInspector?.enabled;#r=null;#s=null;#l=0;#a=0;#u=null;#c=null;#h=0;#d=0;#f=Object.create(null);#o=[];#p=null;#g=[];#m=new WeakMap;#y=null;static#w=new Map;static#v=new Map;static#b=new WeakMap;static#x=null;static#A=new Set;constructor({textContentSource:e,container:t,viewport:i}){if(e instanceof ReadableStream)this.#p=e;else if(typeof e=="object")this.#p=new ReadableStream({start(l){l.enqueue(e),l.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#t=this.#c=t,this.#d=i.scale*(globalThis.devicePixelRatio||1),this.#h=i.rotation,this.#s={div:null,properties:null,ctx:null};const{pageWidth:s,pageHeight:r,pageX:o,pageY:a}=i.rawDims;this.#y=[1,0,0,-1,-o,a+r],this.#a=s,this.#l=r,nn.#k(),Ar(t,i),this.#e.promise.finally(()=>{nn.#A.delete(this),this.#s=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=cn.platform;return _e(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{this.#u.read().then(({value:t,done:i})=>{if(i){this.#e.resolve();return}this.#r??=t.lang,Object.assign(this.#f,t.styles),this.#C(t.items),e()},this.#e.reject)};return this.#u=this.#p.getReader(),nn.#A.add(this),e(),this.#e.promise}update({viewport:e,onBefore:t=null}){const i=e.scale*(globalThis.devicePixelRatio||1),s=e.rotation;if(s!==this.#h&&(t?.(),this.#h=s,Ar(this.#c,{rotation:s})),i!==this.#d){t?.(),this.#d=i;const r={div:null,properties:null,ctx:nn.#S(this.#r)};for(const o of this.#g)r.properties=this.#m.get(o),r.div=o,this.#T(r)}}cancel(){const e=new Is("TextLayer task cancelled.");this.#u?.cancel(e).catch(()=>{}),this.#u=null,this.#e.reject(e)}get textDivs(){return this.#g}get textContentItemsStr(){return this.#o}#C(e){if(this.#n)return;this.#s.ctx??=nn.#S(this.#r);const t=this.#g,i=this.#o;for(const s of e){if(t.length>Ej){ve("Ignoring additional textDivs for performance reasons."),this.#n=!0;return}if(s.str===void 0){if(s.type==="beginMarkedContentProps"||s.type==="beginMarkedContent"){const r=this.#t;this.#t=document.createElement("span"),this.#t.classList.add("markedContent"),s.id!==null&&this.#t.setAttribute("id",`${s.id}`),r.append(this.#t)}else s.type==="endMarkedContent"&&(this.#t=this.#t.parentNode);continue}i.push(s.str),this.#P(s)}}#P(e){const t=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};this.#g.push(t);const s=ae.transform(this.#y,e.transform);let r=Math.atan2(s[1],s[0]);const o=this.#f[e.fontName];o.vertical&&(r+=Math.PI/2);let a=this.#i&&o.fontSubstitution||o.fontFamily;a=nn.fontFamilyMap.get(a)||a;const l=Math.hypot(s[2],s[3]),c=l*nn.#D(a,this.#r);let d,f;r===0?(d=s[4],f=s[5]-c):(d=s[4]+c*Math.sin(r),f=s[5]-c*Math.cos(r));const m="calc(var(--scale-factor)*",y=t.style;this.#t===this.#c?(y.left=`${(100*d/this.#a).toFixed(2)}%`,y.top=`${(100*f/this.#l).toFixed(2)}%`):(y.left=`${m}${d.toFixed(2)}px)`,y.top=`${m}${f.toFixed(2)}px)`),y.fontSize=`${m}${(nn.#x*l).toFixed(2)}px)`,y.fontFamily=a,i.fontSize=l,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,this.#i&&(t.dataset.fontName=o.fontSubstitutionLoadedName||e.fontName),r!==0&&(i.angle=r*(180/Math.PI));let v=!1;if(e.str.length>1)v=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const w=Math.abs(e.transform[0]),T=Math.abs(e.transform[3]);w!==T&&Math.max(w,T)/Math.min(w,T)>1.5&&(v=!0)}if(v&&(i.canvasWidth=o.vertical?e.height:e.width),this.#m.set(t,i),this.#s.div=t,this.#s.properties=i,this.#T(this.#s),i.hasText&&this.#t.append(t),i.hasEOL){const w=document.createElement("br");w.setAttribute("role","presentation"),this.#t.append(w)}}#T(e){const{div:t,properties:i,ctx:s}=e,{style:r}=t;let o="";if(nn.#x>1&&(o=`scale(${1/nn.#x})`),i.canvasWidth!==0&&i.hasText){const{fontFamily:a}=r,{canvasWidth:l,fontSize:c}=i;nn.#I(s,c*this.#d,a);const{width:d}=s.measureText(t.textContent);d>0&&(o=`scaleX(${l*this.#d/d}) ${o}`)}i.angle!==0&&(o=`rotate(${i.angle}deg) ${o}`),o.length>0&&(r.transform=o)}static cleanup(){if(!(this.#A.size>0)){this.#w.clear();for(const{canvas:e}of this.#v.values())e.remove();this.#v.clear()}}static#S(e=null){let t=this.#v.get(e||="");if(!t){const i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=e,document.body.append(i),t=i.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#v.set(e,t),this.#b.set(t,{size:0,family:""})}return t}static#I(e,t,i){const s=this.#b.get(e);t===s.size&&i===s.family||(e.font=`${t}px ${i}`,s.size=t,s.family=i)}static#k(){if(this.#x!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),this.#x=e.getBoundingClientRect().height,e.remove()}static#D(e,t){const i=this.#w.get(e);if(i)return i;const s=this.#S(t);s.canvas.width=s.canvas.height=dn,this.#I(s,dn,e);const r=s.measureText("");let o=r.fontBoundingBoxAscent,a=Math.abs(r.fontBoundingBoxDescent);if(o){const d=o/(o+a);return this.#w.set(e,d),s.canvas.width=s.canvas.height=0,d}s.strokeStyle="red",s.clearRect(0,0,dn,dn),s.strokeText("g",0,0);let l=s.getImageData(0,0,dn,dn).data;a=0;for(let d=l.length-1-3;d>=0;d-=4)if(l[d]>0){a=Math.ceil(d/4/dn);break}s.clearRect(0,0,dn,dn),s.strokeText("A",0,dn),l=s.getImageData(0,0,dn,dn).data,o=0;for(let d=0,f=l.length;d<f;d+=4)if(l[d]>0){o=dn-Math.floor(d/4/dn);break}s.canvas.width=s.canvas.height=0;const c=o?o/(o+a):Aj;return this.#w.set(e,c),c}}class Wl{static textContent(e){const t=[],i={items:t,styles:Object.create(null)};function s(r){if(!r)return;let o=null;const a=r.name;if(a==="#text")o=r.value;else if(Wl.shouldBuildText(a))r?.attributes?.textContent?o=r.attributes.textContent:r.value&&(o=r.value);else return;if(o!==null&&t.push({str:o}),!!r.children)for(const l of r.children)s(l)}return s(e),i}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const Ij=65536,Cj=100,Sj=5e3,Pj=jt?H$:B$,Rj=jt?G$:kA,kj=jt?q$:z$,Nj=jt?$$:DA;function Mj(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const e=new zg,{docId:t}=e,i=n.url?Dj(n.url):null,s=n.data?Lj(n.data):null,r=n.httpHeaders||null,o=n.withCredentials===!0,a=n.password??null,l=n.range instanceof qA?n.range:null,c=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:Ij;let d=n.worker instanceof Ct?n.worker:null;const f=n.verbosity,m=typeof n.docBaseUrl=="string"&&!ah(n.docBaseUrl)?n.docBaseUrl:null,y=typeof n.cMapUrl=="string"?n.cMapUrl:null,v=n.cMapPacked!==!1,w=n.CMapReaderFactory||Rj,T=typeof n.standardFontDataUrl=="string"?n.standardFontDataUrl:null,x=n.StandardFontDataFactory||Nj,P=n.stopAtErrors!==!0,S=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,L=n.isEvalSupported!==!1,F=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!jt,U=typeof n.isImageDecoderSupported=="boolean"?n.isImageDecoderSupported:!jt&&(cn.platform.isFirefox||!globalThis.chrome),C=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,A=typeof n.disableFontFace=="boolean"?n.disableFontFace:jt,E=n.fontExtraProperties===!0,D=n.enableXfa===!0,k=n.ownerDocument||globalThis.document,N=n.disableRange===!0,R=n.disableStream===!0,q=n.disableAutoFetch===!0,te=n.pdfBug===!0,W=n.CanvasFactory||Pj,K=n.FilterFactory||kj,Ee=n.enableHWA===!0,me=l?l.length:n.length??NaN,Et=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!jt&&!A,Ke=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:w===kA&&x===DA&&y&&T&&Qa(y,document.baseURI)&&Qa(T,document.baseURI),Re=null;v$(f);const ge={canvasFactory:new W({ownerDocument:k,enableHWA:Ee}),filterFactory:new K({docId:t,ownerDocument:k}),cMapReaderFactory:Ke?null:new w({baseUrl:y,isCompressed:v}),standardFontDataFactory:Ke?null:new x({baseUrl:T})};if(!d){const Be={verbosity:f,port:_l.workerPort};d=Be.port?Ct.fromPort(Be):new Ct(Be),e._worker=d}const kt={docId:t,apiVersion:"4.10.38",data:s,password:a,disableAutoFetch:q,rangeChunkSize:c,length:me,docBaseUrl:m,enableXfa:D,evaluatorOptions:{maxImageSize:S,disableFontFace:A,ignoreErrors:P,isEvalSupported:L,isOffscreenCanvasSupported:F,isImageDecoderSupported:U,canvasMaxAreaInBytes:C,fontExtraProperties:E,useSystemFonts:Et,cMapUrl:Ke?y:null,standardFontDataUrl:Ke?T:null}},at={disableFontFace:A,fontExtraProperties:E,ownerDocument:k,pdfBug:te,styleElement:Re,loadingParams:{disableAutoFetch:q,enableXfa:D}};return d.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const Be=d.messageHandler.sendWithPromise("GetDocRequest",kt,s?[s.buffer]:null);let Ae;if(l)Ae=new lj(l,{disableRange:N,disableStream:R});else if(!s){if(!i)throw new Error("getDocument - no `url` parameter provided.");let vn;if(jt)if(Qa(i)){if(typeof fetch>"u"||typeof Response>"u"||!("body"in Response.prototype))throw new Error("getDocument - the Fetch API was disabled in Node.js, see `--no-experimental-fetch`.");vn=Ew}else vn=bj;else vn=Qa(i)?Ew:gj;Ae=new vn({url:i,length:me,httpHeaders:r,withCredentials:o,rangeChunkSize:c,disableRange:N,disableStream:R})}return Be.then(vn=>{if(e.destroyed)throw new Error("Loading aborted");if(d.destroyed)throw new Error("Worker was destroyed");const pi=new Za(t,vn,d.port),Ot=new Uj(pi,e,Ae,at,ge);e._transport=Ot,pi.send("Ready",null)})}).catch(e._capability.reject),e}function Dj(n){if(n instanceof URL)return n.href;try{return new URL(n,window.location).href}catch{if(jt&&typeof n=="string")return n}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function Lj(n){if(jt&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return rh(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n?.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Aw(n){return typeof n=="object"&&Number.isInteger(n?.num)&&n.num>=0&&Number.isInteger(n?.gen)&&n.gen>=0}class zg{static#e=0;constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${zg.#e++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(e){throw this._worker?.port&&delete this._worker._pendingDestroy,e}this._transport=null,this._worker?.destroy(),this._worker=null}}class qA{constructor(e,t,i=!1,s=null){this.length=e,this.initialData=t,this.progressiveDone=i,this.contentDispositionFilename=s,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(const i of this._rangeListeners)i(e,t)}onDataProgress(e,t){this._readyCapability.promise.then(()=>{for(const i of this._progressListeners)i(e,t)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const t of this._progressiveReadListeners)t(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){Ue("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class Fj{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return _e(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class Vj{#e=null;#t=!1;constructor(e,t,i,s=!1){this._pageIndex=e,this._pageInfo=t,this._transport=i,this._stats=s?new dw:null,this._pdfBug=s,this.commonObjs=i.commonObjs,this.objs=new HA,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:i=0,offsetY:s=0,dontFlip:r=!1}={}){return new vc({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:i,offsetY:s,dontFlip:r})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return _e(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:e,viewport:t,intent:i="display",annotationMode:s=ns.ENABLE,transform:r=null,background:o=null,optionalContentConfigPromise:a=null,annotationCanvasMap:l=null,pageColors:c=null,printAnnotationStorage:d=null,isEditing:f=!1}){this._stats?.time("Overall");const m=this._transport.getRenderingIntent(i,s,d,f),{renderingIntent:y,cacheKey:v}=m;this.#t=!1,this.#i(),a||=this._transport.getOptionalContentConfig(y);let w=this._intentStates.get(v);w||(w=Object.create(null),this._intentStates.set(v,w)),w.streamReaderCancelTimeout&&(clearTimeout(w.streamReaderCancelTimeout),w.streamReaderCancelTimeout=null);const T=!!(y&bn.PRINT);w.displayReadyCapability||(w.displayReadyCapability=Promise.withResolvers(),w.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(m));const x=L=>{w.renderTasks.delete(P),(this._maybeCleanupAfterRender||T)&&(this.#t=!0),this.#n(!T),L?(P.capability.reject(L),this._abortOperatorList({intentState:w,reason:L instanceof Error?L:new Error(L)})):P.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},P=new ao({callback:x,params:{canvasContext:e,viewport:t,transform:r,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:l,operatorList:w.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!T,pdfBug:this._pdfBug,pageColors:c});(w.renderTasks||=new Set).add(P);const S=P.task;return Promise.all([w.displayReadyCapability.promise,a]).then(([L,F])=>{if(this.destroyed){x();return}if(this._stats?.time("Rendering"),!(F.renderingIntent&y))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");P.initializeGraphics({transparency:L,optionalContentConfig:F}),P.operatorListChanged()}).catch(x),S}getOperatorList({intent:e="display",annotationMode:t=ns.ENABLE,printAnnotationStorage:i=null,isEditing:s=!1}={}){function r(){a.operatorList.lastChunk&&(a.opListReadCapability.resolve(a.operatorList),a.renderTasks.delete(l))}const o=this._transport.getRenderingIntent(e,t,i,s,!0);let a=this._intentStates.get(o.cacheKey);a||(a=Object.create(null),this._intentStates.set(o.cacheKey,a));let l;return a.opListReadCapability||(l=Object.create(null),l.operatorListChanged=r,a.opListReadCapability=Promise.withResolvers(),(a.renderTasks||=new Set).add(l),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(o)),a.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(s){return s.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>Wl.textContent(i));const t=this.streamTextContent(e);return new Promise(function(i,s){function r(){o.read().then(function({value:l,done:c}){if(c){i(a);return}a.lang??=l.lang,Object.assign(a.styles,l.styles),a.items.push(...l.items),r()},s)}const o=t.getReader(),a={items:[],styles:Object.create(null),lang:null};r()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const i of t.renderTasks)e.push(i.completed),i.cancel();return this.objs.clear(),this.#t=!1,this.#i(),Promise.all(e)}cleanup(e=!1){this.#t=!0;const t=this.#n(!1);return e&&t&&(this._stats&&=new dw),t}#n(e=!1){if(this.#i(),!this.#t||this.destroyed)return!1;if(e)return this.#e=setTimeout(()=>{this.#e=null,this.#n(!1)},Sj),!1;for(const{renderTasks:t,operatorList:i}of this._intentStates.values())if(t.size>0||!i.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}#i(){this.#e&&(clearTimeout(this.#e),this.#e=null)}_startRenderPage(e,t){const i=this._intentStates.get(t);i&&(this._stats?.timeEnd("Page Request"),i.displayReadyCapability?.resolve(e))}_renderPageChunk(e,t){for(let i=0,s=e.length;i<s;i++)t.operatorList.fnArray.push(e.fnArray[i]),t.operatorList.argsArray.push(e.argsArray[i]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const i of t.renderTasks)i.operatorListChanged();e.lastChunk&&this.#n(!0)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:i,modifiedIds:s}){const{map:r,transfer:o}=i,l=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:r,modifiedIds:s},o).getReader(),c=this._intentStates.get(t);c.streamReader=l;const d=()=>{l.read().then(({value:f,done:m})=>{if(m){c.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(f,c),d())},f=>{if(c.streamReader=null,!this._transport.destroyed){if(c.operatorList){c.operatorList.lastChunk=!0;for(const m of c.renderTasks)m.operatorListChanged();this.#n(!0)}if(c.displayReadyCapability)c.displayReadyCapability.reject(f);else if(c.opListReadCapability)c.opListReadCapability.reject(f);else throw f}})};d()}_abortOperatorList({intentState:e,reason:t,force:i=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!i){if(e.renderTasks.size>0)return;if(t instanceof Mg){let s=Cj;t.extraDelay>0&&t.extraDelay<1e3&&(s+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},s);return}}if(e.streamReader.cancel(new Is(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[s,r]of this._intentStates)if(r===e){this._intentStates.delete(s);break}this.cleanup()}}}get stats(){return this._stats}}class Oj{#e=new Map;#t=Promise.resolve();postMessage(e,t){const i={data:structuredClone(e,t?{transfer:t}:null)};this.#t.then(()=>{for(const[s]of this.#e)s.call(this,i)})}addEventListener(e,t,i=null){let s=null;if(i?.signal instanceof AbortSignal){const{signal:r}=i;if(r.aborted){ve("LoopbackPort - cannot use an `aborted` signal.");return}const o=()=>this.removeEventListener(e,t);s=()=>r.removeEventListener("abort",o),r.addEventListener("abort",o)}this.#e.set(t,s)}removeEventListener(e,t){this.#e.get(t)?.(),this.#e.delete(t)}terminate(){for(const[,e]of this.#e)e?.();this.#e.clear()}}class Ct{static#e=0;static#t=!1;static#n;static{jt&&(this.#t=!0,_l.workerSrc||="./pdf.worker.mjs"),this._isSameOrigin=(e,t)=>{let i;try{if(i=new URL(e),!i.origin||i.origin==="null")return!1}catch{return!1}const s=new URL(t,i);return i.origin===s.origin},this._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))}}constructor({name:e=null,port:t=null,verbosity:i=_$()}={}){if(this.name=e,this.destroyed=!1,this.verbosity=i,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,t){if(Ct.#n?.has(t))throw new Error("Cannot use more than one PDFWorker per port.");(Ct.#n||=new WeakMap).set(t,this),this._initializeFromPort(t);return}this._initialize()}get promise(){return this._readyCapability.promise}#i(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new Za("main","worker",e),this._messageHandler.on("ready",function(){}),this.#i()}_initialize(){if(Ct.#t||Ct.#r){this._setupFakeWorker();return}let{workerSrc:e}=Ct;try{Ct._isSameOrigin(window.location.href,e)||(e=Ct._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),i=new Za("main","worker",t),s=()=>{r.abort(),i.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},r=new AbortController;t.addEventListener("error",()=>{this._webWorker||s()},{signal:r.signal}),i.on("test",a=>{if(r.abort(),this.destroyed||!a){s();return}this._messageHandler=i,this._port=t,this._webWorker=t,this.#i()}),i.on("ready",a=>{if(r.abort(),this.destroyed){s();return}try{o()}catch{this._setupFakeWorker()}});const o=()=>{const a=new Uint8Array;i.send("test",a,[a.buffer])};o();return}catch{sh("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){Ct.#t||(ve("Setting up fake worker."),Ct.#t=!0),Ct._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const t=new Oj;this._port=t;const i=`fake${Ct.#e++}`,s=new Za(i+"_worker",i,t);e.setup(s,t),this._messageHandler=new Za(i,i+"_worker",t),this.#i()}).catch(e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){this.destroyed=!0,this._webWorker?.terminate(),this._webWorker=null,Ct.#n?.delete(this._port),this._port=null,this._messageHandler?.destroy(),this._messageHandler=null}static fromPort(e){if(!e?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");const t=this.#n?.get(e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new Ct(e)}static get workerSrc(){if(_l.workerSrc)return _l.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get#r(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}}static get _setupFakeWorkerGlobal(){return _e(this,"_setupFakeWorkerGlobal",(async()=>this.#r?this.#r:(await import(this.workerSrc)).WorkerMessageHandler)())}}class Uj{#e=new Map;#t=new Map;#n=new Map;#i=new Map;#r=null;constructor(e,t,i,s,r){this.messageHandler=e,this.loadingTask=t,this.commonObjs=new HA,this.fontLoader=new O$({ownerDocument:s.ownerDocument,styleElement:s.styleElement}),this.loadingParams=s.loadingParams,this._params=s,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}#s(e,t=null){const i=this.#e.get(e);if(i)return i;const s=this.messageHandler.sendWithPromise(e,t);return this.#e.set(e,s),s}get annotationStorage(){return _e(this,"annotationStorage",new Og)}getRenderingIntent(e,t=ns.ENABLE,i=null,s=!1,r=!1){let o=bn.DISPLAY,a=Ep;switch(e){case"any":o=bn.ANY;break;case"display":break;case"print":o=bn.PRINT;break;default:ve(`getRenderingIntent - invalid intent: ${e}`)}const l=o&bn.PRINT&&i instanceof SA?i:this.annotationStorage;switch(t){case ns.DISABLE:o+=bn.ANNOTATIONS_DISABLE;break;case ns.ENABLE:break;case ns.ENABLE_FORMS:o+=bn.ANNOTATIONS_FORMS;break;case ns.ENABLE_STORAGE:o+=bn.ANNOTATIONS_STORAGE,a=l.serializable;break;default:ve(`getRenderingIntent - invalid annotationMode: ${t}`)}s&&(o+=bn.IS_EDITING),r&&(o+=bn.OPLIST);const{ids:c,hash:d}=l.modifiedIds,f=[o,a.hash,d];return{renderingIntent:o,cacheKey:f.join("_"),annotationStorageSerializable:a,modifiedIds:c}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#r?.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const i of this.#t.values())e.push(i._destroy());this.#t.clear(),this.#n.clear(),this.#i.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(),nn.cleanup(),this._networkStream?.cancelAllRequests(new Is("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(i,s)=>{vt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=r=>{this._lastProgress={loaded:r.loaded,total:r.total}},s.onPull=()=>{this._fullReader.read().then(function({value:r,done:o}){if(o){s.close();return}vt(r instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(r),1,[r])}).catch(r=>{s.error(r)})},s.onCancel=r=>{this._fullReader.cancel(r),s.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("ReaderHeadersReady",async i=>{await this._fullReader.headersReady;const{isStreamingSupported:s,isRangeSupported:r,contentLength:o}=this._fullReader;return(!s||!r)&&(this._lastProgress&&t.onProgress?.(this._lastProgress),this._fullReader.onProgress=a=>{t.onProgress?.({loaded:a.loaded,total:a.total})}),{isStreamingSupported:s,isRangeSupported:r,contentLength:o}}),e.on("GetRangeReader",(i,s)=>{vt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const r=this._networkStream.getRangeReader(i.begin,i.end);if(!r){s.close();return}s.onPull=()=>{r.read().then(function({value:o,done:a}){if(a){s.close();return}vt(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{s.error(o)})},s.onCancel=o=>{r.cancel(o),s.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("GetDoc",({pdfInfo:i})=>{this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,t._capability.resolve(new Fj(i,this))}),e.on("DocException",i=>{t._capability.reject(hn(i))}),e.on("PasswordRequest",i=>{this.#r=Promise.withResolvers();try{if(!t.onPassword)throw hn(i);const s=r=>{r instanceof Error?this.#r.reject(r):this.#r.resolve({password:r})};t.onPassword(s,i.code)}catch(s){this.#r.reject(s)}return this.#r.promise}),e.on("DataLoaded",i=>{t.onProgress?.({loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),e.on("StartRenderPage",i=>{if(this.destroyed)return;this.#t.get(i.pageIndex)._startRenderPage(i.transparency,i.cacheKey)}),e.on("commonobj",([i,s,r])=>{if(this.destroyed||this.commonObjs.has(i))return null;switch(s){case"Font":const{disableFontFace:o,fontExtraProperties:a,pdfBug:l}=this._params;if("error"in r){const m=r.error;ve(`Error during font loading: ${m}`),this.commonObjs.resolve(i,m);break}const c=l&&globalThis.FontInspector?.enabled?(m,y)=>globalThis.FontInspector.fontAdded(m,y):null,d=new U$(r,{disableFontFace:o,fontExtraProperties:a,inspectFont:c});this.fontLoader.bind(d).catch(()=>e.sendWithPromise("FontFallback",{id:i})).finally(()=>{!a&&d.data&&(d.data=null),this.commonObjs.resolve(i,d)});break;case"CopyLocalImage":const{imageRef:f}=r;vt(f,"The imageRef must be defined.");for(const m of this.#t.values())for(const[,y]of m.objs)if(y?.ref===f)return y.dataLen?(this.commonObjs.resolve(i,structuredClone(y)),y.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(i,r);break;default:throw new Error(`Got unknown common object type ${s}`)}return null}),e.on("obj",([i,s,r,o])=>{if(this.destroyed)return;const a=this.#t.get(s);if(!a.objs.has(i)){if(a._intentStates.size===0){o?.bitmap?.close();return}switch(r){case"Image":a.objs.resolve(i,o),o?.dataLen>p$&&(a._maybeCleanupAfterRender=!0);break;case"Pattern":a.objs.resolve(i,o);break;default:throw new Error(`Got unknown object type ${r}`)}}}),e.on("DocProgress",i=>{this.destroyed||t.onProgress?.({loaded:i.loaded,total:i.total})}),e.on("FetchBuiltInCMap",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(i)}),e.on("FetchStandardFontData",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(i)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&ve("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:this._fullReader?.filename??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,i=this.#n.get(t);if(i)return i;const s=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(r=>{if(this.destroyed)throw new Error("Transport destroyed");r.refStr&&this.#i.set(r.refStr,e);const o=new Vj(t,r,this,this._params.pdfBug);return this.#t.set(t,o),o});return this.#n.set(t,s),s}getPageIndex(e){return Aw(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return this.#s("GetFieldObjects")}hasJSActions(){return this.#s("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#s("GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return this.#s("GetOptionalContentConfig").then(t=>new aj(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=this.#e.get(e);if(t)return t;const i=this.messageHandler.sendWithPromise(e,null).then(s=>({info:s[0],metadata:s[1]?new rj(s[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#e.set(e,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of this.#t.values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(!0),nn.cleanup()}}cachedPageNumber(e){if(!Aw(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return this.#i.get(t)??null}}const qa=Symbol("INITIAL_DATA");class HA{#e=Object.create(null);#t(e){return this.#e[e]||={...Promise.withResolvers(),data:qa}}get(e,t=null){if(t){const s=this.#t(e);return s.promise.then(()=>t(s.data)),null}const i=this.#e[e];if(!i||i.data===qa)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return i.data}has(e){const t=this.#e[e];return!!t&&t.data!==qa}delete(e){const t=this.#e[e];return!t||t.data===qa?!1:(delete this.#e[e],!0)}resolve(e,t=null){const i=this.#t(e);i.data=t,i.resolve()}clear(){for(const e in this.#e){const{data:t}=this.#e[e];t?.bitmap?.close()}this.#e=Object.create(null)}*[Symbol.iterator](){for(const e in this.#e){const{data:t}=this.#e[e];t!==qa&&(yield[e,t])}}}class Bj{#e=null;constructor(e){this.#e=e,this.onContinue=null}get promise(){return this.#e.capability.promise}cancel(e=0){this.#e.cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=this.#e.operatorList;if(!e)return!1;const{annotationCanvasMap:t}=this.#e;return e.form||e.canvas&&t?.size>0}}class ao{#e=null;static#t=new WeakSet;constructor({callback:e,params:t,objs:i,commonObjs:s,annotationCanvasMap:r,operatorList:o,pageIndex:a,canvasFactory:l,filterFactory:c,useRequestAnimationFrame:d=!1,pdfBug:f=!1,pageColors:m=null}){this.callback=e,this.params=t,this.objs=i,this.commonObjs=s,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=a,this.canvasFactory=l,this.filterFactory=c,this._pdfBug=f,this.pageColors=m,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=d===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new Bj(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){if(this.cancelled)return;if(this._canvas){if(ao.#t.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");ao.#t.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:i,viewport:s,transform:r,background:o}=this.params;this.gfx=new wo(i,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:r,viewport:s,transparency:e,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(e=null,t=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#e&&(window.cancelAnimationFrame(this.#e),this.#e=null),ao.#t.delete(this._canvas),this.callback(e||new Mg(`Rendering cancelled, page ${this._pageIndex+1}`,t))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#e=window.requestAnimationFrame(()=>{this.#e=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),ao.#t.delete(this._canvas),this.callback())))}}const zj="4.10.38",qj="f9bea397f";function Iw(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function Ha(n){return Math.max(0,Math.min(255,255*n))}class Cw{static CMYK_G([e,t,i,s]){return["G",1-Math.min(1,.3*e+.59*i+.11*t+s)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=Ha(e),[e,e,e]}static G_HTML([e]){const t=Iw(e);return`#${t}${t}${t}`}static RGB_G([e,t,i]){return["G",.3*e+.59*t+.11*i]}static RGB_rgb(e){return e.map(Ha)}static RGB_HTML(e){return`#${e.map(Iw).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,i,s]){return["RGB",1-Math.min(1,e+s),1-Math.min(1,i+s),1-Math.min(1,t+s)]}static CMYK_rgb([e,t,i,s]){return[Ha(1-Math.min(1,e+s)),Ha(1-Math.min(1,i+s)),Ha(1-Math.min(1,t+s))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,i]){const s=1-e,r=1-t,o=1-i,a=Math.min(s,r,o);return["CMYK",s,r,o,a]}}class Hj{create(e,t,i=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const s=this._createSVG("svg:svg");return s.setAttribute("version","1.1"),i||(s.setAttribute("width",`${e}px`),s.setAttribute("height",`${t}px`)),s.setAttribute("preserveAspectRatio","none"),s.setAttribute("viewBox",`0 0 ${e} ${t}`),s}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){Ue("Abstract method `_createSVG` called.")}}class qg extends Hj{_createSVG(e){return document.createElementNS(_i,e)}}class GA{static setupStorage(e,t,i,s,r){const o=s.getValue(t,{value:null});switch(i.name){case"textarea":if(o.value!==null&&(e.textContent=o.value),r==="print")break;e.addEventListener("input",a=>{s.setValue(t,{value:a.target.value})});break;case"input":if(i.attributes.type==="radio"||i.attributes.type==="checkbox"){if(o.value===i.attributes.xfaOn?e.setAttribute("checked",!0):o.value===i.attributes.xfaOff&&e.removeAttribute("checked"),r==="print")break;e.addEventListener("change",a=>{s.setValue(t,{value:a.target.checked?a.target.getAttribute("xfaOn"):a.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&e.setAttribute("value",o.value),r==="print")break;e.addEventListener("input",a=>{s.setValue(t,{value:a.target.value})})}break;case"select":if(o.value!==null){e.setAttribute("value",o.value);for(const a of i.children)a.attributes.value===o.value?a.attributes.selected=!0:a.attributes.hasOwnProperty("selected")&&delete a.attributes.selected}e.addEventListener("input",a=>{const l=a.target.options,c=l.selectedIndex===-1?"":l[l.selectedIndex].value;s.setValue(t,{value:c})});break}}static setAttributes({html:e,element:t,storage:i=null,intent:s,linkService:r}){const{attributes:o}=t,a=e instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${s}`);for(const[l,c]of Object.entries(o))if(c!=null)switch(l){case"class":c.length&&e.setAttribute(l,c.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",c);break;case"style":Object.assign(e.style,c);break;case"textContent":e.textContent=c;break;default:(!a||l!=="href"&&l!=="newWindow")&&e.setAttribute(l,c)}a&&r.addLinkAttributes(e,o.href,o.newWindow),i&&o.dataId&&this.setupStorage(e,o.dataId,t,i)}static render(e){const t=e.annotationStorage,i=e.linkService,s=e.xfaHtml,r=e.intent||"display",o=document.createElement(s.name);s.attributes&&this.setAttributes({html:o,element:s,intent:r,linkService:i});const a=r!=="richText",l=e.div;if(l.append(o),e.viewport){const f=`matrix(${e.viewport.transform.join(",")})`;l.style.transform=f}a&&l.setAttribute("class","xfaLayer xfaFont");const c=[];if(s.children.length===0){if(s.value){const f=document.createTextNode(s.value);o.append(f),a&&Wl.shouldBuildText(s.name)&&c.push(f)}return{textDivs:c}}const d=[[s,-1,o]];for(;d.length>0;){const[f,m,y]=d.at(-1);if(m+1===f.children.length){d.pop();continue}const v=f.children[++d.at(-1)[1]];if(v===null)continue;const{name:w}=v;if(w==="#text"){const x=document.createTextNode(v.value);c.push(x),y.append(x);continue}const T=v?.attributes?.xmlns?document.createElementNS(v.attributes.xmlns,w):document.createElement(w);if(y.append(T),v.attributes&&this.setAttributes({html:T,element:v,storage:t,intent:r,linkService:i}),v.children?.length>0)d.push([v,-1,T]);else if(v.value){const x=document.createTextNode(v.value);a&&Wl.shouldBuildText(w)&&c.push(x),T.append(x)}}for(const f of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))f.setAttribute("readOnly",!0);return{textDivs:c}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const wc=1e3,Gj=9,Ir=new WeakSet;function ps(n){return{width:n[2]-n[0],height:n[3]-n[1]}}class $j{static create(e){switch(e.data.annotationType){case wt.LINK:return new $A(e);case wt.TEXT:return new jj(e);case wt.WIDGET:switch(e.data.fieldType){case"Tx":return new Wj(e);case"Btn":return e.data.radioButton?new jA(e):e.data.checkBox?new Yj(e):new Jj(e);case"Ch":return new Xj(e);case"Sig":return new Kj(e)}return new Or(e);case wt.POPUP:return new Ip(e);case wt.FREETEXT:return new WA(e);case wt.LINE:return new Zj(e);case wt.SQUARE:return new eW(e);case wt.CIRCLE:return new tW(e);case wt.POLYLINE:return new KA(e);case wt.CARET:return new iW(e);case wt.INK:return new Hg(e);case wt.POLYGON:return new nW(e);case wt.HIGHLIGHT:return new YA(e);case wt.UNDERLINE:return new sW(e);case wt.SQUIGGLY:return new rW(e);case wt.STRIKEOUT:return new oW(e);case wt.STAMP:return new JA(e);case wt.FILEATTACHMENT:return new aW(e);default:return new ft(e)}}}class ft{#e=null;#t=!1;#n=null;constructor(e,{isRenderable:t=!1,ignoreBorder:i=!1,createQuadrilaterals:s=!1}={}){this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(i)),s&&this._createQuadrilaterals()}static _hasPopupData({titleObj:e,contentsObj:t,richText:i}){return!!(e?.str||t?.str||i?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return ft._hasPopupData(this.data)}updateEdited(e){if(!this.container)return;this.#e||={rect:this.data.rect.slice(0)};const{rect:t}=e;t&&this.#i(t),this.#n?.popup.updateEdited(e)}resetEdited(){this.#e&&(this.#i(this.#e.rect),this.#n?.popup.resetEdited(),this.#e=null)}#i(e){const{container:{style:t},data:{rect:i,rotation:s},parent:{viewport:{rawDims:{pageWidth:r,pageHeight:o,pageX:a,pageY:l}}}}=this;i?.splice(0,4,...e);const{width:c,height:d}=ps(e);t.left=`${100*(e[0]-a)/r}%`,t.top=`${100*(o-e[3]+l)/o}%`,s===0?(t.width=`${100*c/r}%`,t.height=`${100*d/o}%`):this.setRotation(s)}_createContainer(e){const{data:t,parent:{page:i,viewport:s}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",t.id),this instanceof Or||(r.tabIndex=wc);const{style:o}=r;if(o.zIndex=this.parent.zIndex++,t.alternativeText&&(r.title=t.alternativeText),t.noRotate&&r.classList.add("norotate"),!t.rect||this instanceof Ip){const{rotation:w}=t;return!t.hasOwnCanvas&&w!==0&&this.setRotation(w,r),r}const{width:a,height:l}=ps(t.rect);if(!e&&t.borderStyle.width>0){o.borderWidth=`${t.borderStyle.width}px`;const w=t.borderStyle.horizontalCornerRadius,T=t.borderStyle.verticalCornerRadius;if(w>0||T>0){const P=`calc(${w}px * var(--scale-factor)) / calc(${T}px * var(--scale-factor))`;o.borderRadius=P}else if(this instanceof jA){const P=`calc(${a}px * var(--scale-factor)) / calc(${l}px * var(--scale-factor))`;o.borderRadius=P}switch(t.borderStyle.style){case Ba.SOLID:o.borderStyle="solid";break;case Ba.DASHED:o.borderStyle="dashed";break;case Ba.BEVELED:ve("Unimplemented border style: beveled");break;case Ba.INSET:ve("Unimplemented border style: inset");break;case Ba.UNDERLINE:o.borderBottomStyle="solid";break}const x=t.borderColor||null;x?(this.#t=!0,o.borderColor=ae.makeHexColor(x[0]|0,x[1]|0,x[2]|0)):o.borderWidth=0}const c=ae.normalizeRect([t.rect[0],i.view[3]-t.rect[1]+i.view[1],t.rect[2],i.view[3]-t.rect[3]+i.view[1]]),{pageWidth:d,pageHeight:f,pageX:m,pageY:y}=s.rawDims;o.left=`${100*(c[0]-m)/d}%`,o.top=`${100*(c[1]-y)/f}%`;const{rotation:v}=t;return t.hasOwnCanvas||v===0?(o.width=`${100*a/d}%`,o.height=`${100*l/f}%`):this.setRotation(v,r),r}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:i,pageHeight:s}=this.parent.viewport.rawDims,{width:r,height:o}=ps(this.data.rect);let a,l;e%180===0?(a=100*r/i,l=100*o/s):(a=100*o/i,l=100*r/s),t.style.width=`${a}%`,t.style.height=`${l}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,i,s)=>{const r=s.detail[t],o=r[0],a=r.slice(1);s.target.style[i]=Cw[`${o}_HTML`](a),this.annotationStorage.setValue(this.data.id,{[i]:Cw[`${o}_rgb`](a)})};return _e(this,"_commonActions",{display:t=>{const{display:i}=t.detail,s=i%2===1;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:s,noPrint:i===1||i===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:i}=t.detail;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:i,noView:i})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const i=t.detail.rotation;this.setRotation(i),this.annotationStorage.setValue(this.data.id,{rotation:i})}})}_dispatchEventFromSandbox(e,t){const i=this._commonActions;for(const s of Object.keys(t.detail))(e[s]||i[s])?.(t)}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const i=this._commonActions;for(const[s,r]of Object.entries(t)){const o=i[s];if(o){const a={detail:{[s]:r},target:e};o(a),delete t[s]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,i,s,r]=this.data.rect.map(w=>Math.fround(w));if(e.length===8){const[w,T,x,P]=e.subarray(2,6);if(s===w&&r===T&&t===x&&i===P)return}const{style:o}=this.container;let a;if(this.#t){const{borderColor:w,borderWidth:T}=o;o.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${w}" stroke-width="${T}">`],this.container.classList.add("hasBorder")}const l=s-t,c=r-i,{svgFactory:d}=this,f=d.createElement("svg");f.classList.add("quadrilateralsContainer"),f.setAttribute("width",0),f.setAttribute("height",0);const m=d.createElement("defs");f.append(m);const y=d.createElement("clipPath"),v=`clippath_${this.data.id}`;y.setAttribute("id",v),y.setAttribute("clipPathUnits","objectBoundingBox"),m.append(y);for(let w=2,T=e.length;w<T;w+=8){const x=e[w],P=e[w+1],S=e[w+2],L=e[w+3],F=d.createElement("rect"),U=(S-t)/l,C=(r-P)/c,A=(x-S)/l,E=(P-L)/c;F.setAttribute("x",U),F.setAttribute("y",C),F.setAttribute("width",A),F.setAttribute("height",E),y.append(F),a?.push(`<rect vector-effect="non-scaling-stroke" x="${U}" y="${C}" width="${A}" height="${E}"/>`)}this.#t&&(a.push("</g></svg>')"),o.backgroundImage=a.join("")),this.container.append(f),this.container.style.clipPath=`url(#${v})`}_createPopup(){const{data:e}=this,t=this.#n=new Ip({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation},parent:this.parent,elements:[this]});this.parent.div.append(t.render())}render(){Ue("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const i=[];if(this._fieldObjects){const s=this._fieldObjects[e];if(s)for(const{page:r,id:o,exportValues:a}of s){if(r===-1||o===t)continue;const l=typeof a=="string"?a:null,c=document.querySelector(`[data-element-id="${o}"]`);if(c&&!Ir.has(c)){ve(`_getElementsByName - element not allowed: ${o}`);continue}i.push({id:o,exportValue:l,domElement:c})}return i}for(const s of document.getElementsByName(e)){const{exportValue:r}=s,o=s.getAttribute("data-element-id");o!==t&&Ir.has(s)&&i.push({id:o,exportValue:r,domElement:s})}return i}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})})}}class $A extends ft{constructor(e,t=null){super(e,{isRenderable:!0,ignoreBorder:!!t?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:t}=this,i=document.createElement("a");i.setAttribute("data-element-id",e.id);let s=!1;return e.url?(t.addLinkAttributes(i,e.url,e.newWindow),s=!0):e.action?(this._bindNamedAction(i,e.action),s=!0):e.attachment?(this.#t(i,e.attachment,e.attachmentDest),s=!0):e.setOCGState?(this.#n(i,e.setOCGState),s=!0):e.dest?(this._bindLink(i,e.dest),s=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,e),s=!0),e.resetForm?(this._bindResetFormAction(i,e.resetForm),s=!0):this.isTooltipOnly&&!s&&(this._bindLink(i,""),s=!0)),this.container.classList.add("linkAnnotation"),s&&this.container.append(i),this.container}#e(){this.container.setAttribute("data-internal-link","")}_bindLink(e,t){e.href=this.linkService.getDestinationHash(t),e.onclick=()=>(t&&this.linkService.goToDestination(t),!1),(t||t==="")&&this.#e()}_bindNamedAction(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(t),!1),this.#e()}#t(e,t,i=null){e.href=this.linkService.getAnchorUrl(""),t.description&&(e.title=t.description),e.onclick=()=>(this.downloadManager?.openOrDownloadData(t.content,t.filename,i),!1),this.#e()}#n(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(t),!1),this.#e()}_bindJSAction(e,t){e.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const s of Object.keys(t.actions)){const r=i.get(s);r&&(e[r]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t.id,name:s}}),!1))}e.onclick||(e.onclick=()=>!1),this.#e()}_bindResetFormAction(e,t){const i=e.onclick;if(i||(e.href=this.linkService.getAnchorUrl("")),this.#e(),!this._fieldObjects){ve('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(e.onclick=()=>!1);return}e.onclick=()=>{i?.();const{fields:s,refs:r,include:o}=t,a=[];if(s.length!==0||r.length!==0){const d=new Set(r);for(const f of s){const m=this._fieldObjects[f]||[];for(const{id:y}of m)d.add(y)}for(const f of Object.values(this._fieldObjects))for(const m of f)d.has(m.id)===o&&a.push(m)}else for(const d of Object.values(this._fieldObjects))a.push(...d);const l=this.annotationStorage,c=[];for(const d of a){const{id:f}=d;switch(c.push(f),d.type){case"text":{const y=d.defaultValue||"";l.setValue(f,{value:y});break}case"checkbox":case"radiobutton":{const y=d.defaultValue===d.exportValues;l.setValue(f,{value:y});break}case"combobox":case"listbox":{const y=d.defaultValue||"";l.setValue(f,{value:y});break}default:continue}const m=document.querySelector(`[data-element-id="${f}"]`);if(m){if(!Ir.has(m)){ve(`_bindResetFormAction - element not allowed: ${f}`);continue}}else continue;m.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:c,name:"ResetForm"}}),!1}}}class jj extends ft{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class Or extends ft{render(){return this.container}showElementAndHideCanvas(e){this.data.hasOwnCanvas&&(e.previousSibling?.nodeName==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return cn.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,i,s,r){i.includes("mouse")?e.addEventListener(i,o=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:r(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):e.addEventListener(i,o=>{if(i==="blur"){if(!t.focused||!o.relatedTarget)return;t.focused=!1}else if(i==="focus"){if(t.focused)return;t.focused=!0}r&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:r(o)}})})}_setEventListeners(e,t,i,s){for(const[r,o]of i)(o==="Action"||this.data.actions?.[o])&&((o==="Focus"||o==="Blur")&&(t||={focused:!1}),this._setEventListener(e,t,r,o,s),o==="Focus"&&!this.data.actions?.Blur?this._setEventListener(e,t,"blur","Blur",null):o==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":ae.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:i}=this.data.defaultAppearanceData,s=this.data.defaultAppearanceData.fontSize||Gj,r=e.style;let o;const a=2,l=c=>Math.round(10*c)/10;if(this.data.multiLine){const c=Math.abs(this.data.rect[3]-this.data.rect[1]-a),d=Math.round(c/(rf*s))||1,f=c/d;o=Math.min(s,l(f/rf))}else{const c=Math.abs(this.data.rect[3]-this.data.rect[1]-a);o=Math.min(s,l(c/rf))}r.fontSize=`calc(${o}px * var(--scale-factor))`,r.color=ae.makeHexColor(i[0],i[1],i[2]),this.data.textAlignment!==null&&(r.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class Wj extends Or{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,i,s){const r=this.annotationStorage;for(const o of this._getElementsByName(e.name,e.id))o.domElement&&(o.domElement[t]=i),r.setValue(o.id,{[s]:i})}render(){const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){const s=e.getValue(t,{value:this.data.fieldValue});let r=s.value||"";const o=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;o&&r.length>o&&(r=r.slice(0,o));let a=s.formattedValue||this.data.textContent?.join(`
`)||null;a&&this.data.comb&&(a=a.replaceAll(/\s+/g,""));const l={userValue:r,formattedValue:a,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=a??r,this.data.doNotScroll&&(i.style.overflowY="hidden")):(i=document.createElement("input"),i.type="text",i.setAttribute("value",a??r),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),Ir.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=wc,this._setRequired(i,this.data.required),o&&(i.maxLength=o),i.addEventListener("input",d=>{e.setValue(t,{value:d.target.value}),this.setPropertyOnSiblings(i,"value",d.target.value,"value"),l.formattedValue=null}),i.addEventListener("resetform",d=>{const f=this.data.defaultFieldValue??"";i.value=l.userValue=f,l.formattedValue=null});let c=d=>{const{formattedValue:f}=l;f!=null&&(d.target.value=f),d.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",f=>{if(l.focused)return;const{target:m}=f;l.userValue&&(m.value=l.userValue),l.lastCommittedValue=m.value,l.commitKey=1,this.data.actions?.Focus||(l.focused=!0)}),i.addEventListener("updatefromsandbox",f=>{this.showElementAndHideCanvas(f.target);const m={value(y){l.userValue=y.detail.value??"",e.setValue(t,{value:l.userValue.toString()}),y.target.value=l.userValue},formattedValue(y){const{formattedValue:v}=y.detail;l.formattedValue=v,v!=null&&y.target!==document.activeElement&&(y.target.value=v),e.setValue(t,{formattedValue:v})},selRange(y){y.target.setSelectionRange(...y.detail.selRange)},charLimit:y=>{const{charLimit:v}=y.detail,{target:w}=y;if(v===0){w.removeAttribute("maxLength");return}w.setAttribute("maxLength",v);let T=l.userValue;!T||T.length<=v||(T=T.slice(0,v),w.value=l.userValue=T,e.setValue(t,{value:T}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:T,willCommit:!0,commitKey:1,selStart:w.selectionStart,selEnd:w.selectionEnd}}))}};this._dispatchEventFromSandbox(m,f)}),i.addEventListener("keydown",f=>{l.commitKey=1;let m=-1;if(f.key==="Escape"?m=0:f.key==="Enter"&&!this.data.multiLine?m=2:f.key==="Tab"&&(l.commitKey=3),m===-1)return;const{value:y}=f.target;l.lastCommittedValue!==y&&(l.lastCommittedValue=y,l.userValue=y,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:y,willCommit:!0,commitKey:m,selStart:f.target.selectionStart,selEnd:f.target.selectionEnd}}))});const d=c;c=null,i.addEventListener("blur",f=>{if(!l.focused||!f.relatedTarget)return;this.data.actions?.Blur||(l.focused=!1);const{value:m}=f.target;l.userValue=m,l.lastCommittedValue!==m&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:m,willCommit:!0,commitKey:l.commitKey,selStart:f.target.selectionStart,selEnd:f.target.selectionEnd}}),d(f)}),this.data.actions?.Keystroke&&i.addEventListener("beforeinput",f=>{l.lastCommittedValue=null;const{data:m,target:y}=f,{value:v,selectionStart:w,selectionEnd:T}=y;let x=w,P=T;switch(f.inputType){case"deleteWordBackward":{const S=v.substring(0,w).match(/\w*[^\w]*$/);S&&(x-=S[0].length);break}case"deleteWordForward":{const S=v.substring(w).match(/^[^\w]*\w*/);S&&(P+=S[0].length);break}case"deleteContentBackward":w===T&&(x-=1);break;case"deleteContentForward":w===T&&(P+=1);break}f.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:v,change:m||"",willCommit:!1,selStart:x,selEnd:P}})}),this._setEventListeners(i,l,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],f=>f.target.value)}if(c&&i.addEventListener("blur",c),this.data.comb){const f=(this.data.rect[2]-this.data.rect[0])/o;i.classList.add("comb"),i.style.letterSpacing=`calc(${f}px * var(--scale-factor) - 1ch)`}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class Kj extends Or{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class Yj extends Or{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,i=t.id;let s=e.getValue(i,{value:t.exportValue===t.fieldValue}).value;typeof s=="string"&&(s=s!=="Off",e.setValue(i,{value:s})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const r=document.createElement("input");return Ir.add(r),r.setAttribute("data-element-id",i),r.disabled=t.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=t.fieldName,s&&r.setAttribute("checked",!0),r.setAttribute("exportValue",t.exportValue),r.tabIndex=wc,r.addEventListener("change",o=>{const{name:a,checked:l}=o.target;for(const c of this._getElementsByName(a,i)){const d=l&&c.exportValue===t.exportValue;c.domElement&&(c.domElement.checked=d),e.setValue(c.id,{value:d})}e.setValue(i,{value:l})}),r.addEventListener("resetform",o=>{const a=t.defaultFieldValue||"Off";o.target.checked=a===t.exportValue}),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",o=>{const a={value(l){l.target.checked=l.detail.value!=="Off",e.setValue(i,{value:l.target.checked})}};this._dispatchEventFromSandbox(a,o)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class jA extends Or{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,i=t.id;let s=e.getValue(i,{value:t.fieldValue===t.buttonValue}).value;if(typeof s=="string"&&(s=s!==t.buttonValue,e.setValue(i,{value:s})),s)for(const o of this._getElementsByName(t.fieldName,i))e.setValue(o.id,{value:!1});const r=document.createElement("input");if(Ir.add(r),r.setAttribute("data-element-id",i),r.disabled=t.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=t.fieldName,s&&r.setAttribute("checked",!0),r.tabIndex=wc,r.addEventListener("change",o=>{const{name:a,checked:l}=o.target;for(const c of this._getElementsByName(a,i))e.setValue(c.id,{value:!1});e.setValue(i,{value:l})}),r.addEventListener("resetform",o=>{const a=t.defaultFieldValue;o.target.checked=a!=null&&a===t.buttonValue}),this.enableScripting&&this.hasJSActions){const o=t.buttonValue;r.addEventListener("updatefromsandbox",a=>{const l={value:c=>{const d=o===c.detail.value;for(const f of this._getElementsByName(c.target.name)){const m=d&&f.id===i;f.domElement&&(f.domElement.checked=m),e.setValue(f.id,{value:m})}}};this._dispatchEventFromSandbox(l,a)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class Jj extends $A{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",i=>{this._dispatchEventFromSandbox({},i)})),e}}class Xj extends Or{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,i=e.getValue(t,{value:this.data.fieldValue}),s=document.createElement("select");Ir.add(s),s.setAttribute("data-element-id",t),s.disabled=this.data.readOnly,this._setRequired(s,this.data.required),s.name=this.data.fieldName,s.tabIndex=wc;let r=this.data.combo&&this.data.options.length>0;this.data.combo||(s.size=this.data.options.length,this.data.multiSelect&&(s.multiple=!0)),s.addEventListener("resetform",d=>{const f=this.data.defaultFieldValue;for(const m of s.options)m.selected=m.value===f});for(const d of this.data.options){const f=document.createElement("option");f.textContent=d.displayValue,f.value=d.exportValue,i.value.includes(d.exportValue)&&(f.setAttribute("selected",!0),r=!1),s.append(f)}let o=null;if(r){const d=document.createElement("option");d.value=" ",d.setAttribute("hidden",!0),d.setAttribute("selected",!0),s.prepend(d),o=()=>{d.remove(),s.removeEventListener("input",o),o=null},s.addEventListener("input",o)}const a=d=>{const f=d?"value":"textContent",{options:m,multiple:y}=s;return y?Array.prototype.filter.call(m,v=>v.selected).map(v=>v[f]):m.selectedIndex===-1?null:m[m.selectedIndex][f]};let l=a(!1);const c=d=>{const f=d.target.options;return Array.prototype.map.call(f,m=>({displayValue:m.textContent,exportValue:m.value}))};return this.enableScripting&&this.hasJSActions?(s.addEventListener("updatefromsandbox",d=>{const f={value(m){o?.();const y=m.detail.value,v=new Set(Array.isArray(y)?y:[y]);for(const w of s.options)w.selected=v.has(w.value);e.setValue(t,{value:a(!0)}),l=a(!1)},multipleSelection(m){s.multiple=!0},remove(m){const y=s.options,v=m.detail.remove;y[v].selected=!1,s.remove(v),y.length>0&&Array.prototype.findIndex.call(y,T=>T.selected)===-1&&(y[0].selected=!0),e.setValue(t,{value:a(!0),items:c(m)}),l=a(!1)},clear(m){for(;s.length!==0;)s.remove(0);e.setValue(t,{value:null,items:[]}),l=a(!1)},insert(m){const{index:y,displayValue:v,exportValue:w}=m.detail.insert,T=s.children[y],x=document.createElement("option");x.textContent=v,x.value=w,T?T.before(x):s.append(x),e.setValue(t,{value:a(!0),items:c(m)}),l=a(!1)},items(m){const{items:y}=m.detail;for(;s.length!==0;)s.remove(0);for(const v of y){const{displayValue:w,exportValue:T}=v,x=document.createElement("option");x.textContent=w,x.value=T,s.append(x)}s.options.length>0&&(s.options[0].selected=!0),e.setValue(t,{value:a(!0),items:c(m)}),l=a(!1)},indices(m){const y=new Set(m.detail.indices);for(const v of m.target.options)v.selected=y.has(v.index);e.setValue(t,{value:a(!0)}),l=a(!1)},editable(m){m.target.disabled=!m.detail.editable}};this._dispatchEventFromSandbox(f,d)}),s.addEventListener("input",d=>{const f=a(!0),m=a(!1);e.setValue(t,{value:f}),d.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:l,change:m,changeEx:f,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(s,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],d=>d.target.value)):s.addEventListener("input",function(d){e.setValue(t,{value:a(!0)})}),this.data.combo&&this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class Ip extends ft{constructor(e){const{data:t,elements:i}=e;super(e,{isRenderable:ft._hasPopupData(t)}),this.elements=i,this.popup=null}render(){this.container.classList.add("popupAnnotation");const e=this.popup=new Qj({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(const i of this.elements)i.popup=e,i.container.ariaHasPopup="dialog",t.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",t.map(i=>`${Ng}${i}`).join(",")),this.container}}class Qj{#e=this.#C.bind(this);#t=this.#I.bind(this);#n=this.#S.bind(this);#i=this.#T.bind(this);#r=null;#s=null;#l=null;#a=null;#u=null;#c=null;#h=null;#d=!1;#f=null;#o=null;#p=null;#g=null;#m=null;#y=null;#w=!1;constructor({container:e,color:t,elements:i,titleObj:s,modificationDate:r,contentsObj:o,richText:a,parent:l,rect:c,parentRect:d,open:f}){this.#s=e,this.#m=s,this.#l=o,this.#g=a,this.#c=l,this.#r=t,this.#p=c,this.#h=d,this.#u=i,this.#a=IA.toDateObject(r),this.trigger=i.flatMap(m=>m.getElementsToTriggerPopup());for(const m of this.trigger)m.addEventListener("click",this.#i),m.addEventListener("mouseenter",this.#n),m.addEventListener("mouseleave",this.#t),m.classList.add("popupTriggerArea");for(const m of i)m.container?.addEventListener("keydown",this.#e);this.#s.hidden=!0,f&&this.#T()}render(){if(this.#f)return;const e=this.#f=document.createElement("div");if(e.className="popup",this.#r){const r=e.style.outlineColor=ae.makeHexColor(...this.#r);CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?e.style.backgroundColor=`color-mix(in srgb, ${r} 30%, white)`:e.style.backgroundColor=ae.makeHexColor(...this.#r.map(a=>Math.floor(.7*(255-a)+a)))}const t=document.createElement("span");t.className="header";const i=document.createElement("h1");if(t.append(i),{dir:i.dir,str:i.textContent}=this.#m,e.append(t),this.#a){const r=document.createElement("span");r.classList.add("popupDate"),r.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),r.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#a.valueOf()})),t.append(r)}const s=this.#v;if(s)GA.render({xfaHtml:s,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const r=this._formatContents(this.#l);e.append(r)}this.#s.append(e)}get#v(){const e=this.#g,t=this.#l;return e?.str&&(!t?.str||t.str===e.str)&&this.#g.html||null}get#b(){return this.#v?.attributes?.style?.fontSize||0}get#x(){return this.#v?.attributes?.style?.color||null}#A(e){const t=[],i={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},s={style:{color:this.#x,fontSize:this.#b?`calc(${this.#b}px * var(--scale-factor))`:""}};for(const r of e.split(`
`))t.push({name:"span",value:r,attributes:s});return i}_formatContents({str:e,dir:t}){const i=document.createElement("p");i.classList.add("popupContent"),i.dir=t;const s=e.split(/(?:\r\n?|\n)/);for(let r=0,o=s.length;r<o;++r){const a=s[r];i.append(document.createTextNode(a)),r<o-1&&i.append(document.createElement("br"))}return i}#C(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&this.#d)&&this.#T()}updateEdited({rect:e,popupContent:t}){this.#y||={contentsObj:this.#l,richText:this.#g},e&&(this.#o=null),t&&(this.#g=this.#A(t),this.#l=null),this.#f?.remove(),this.#f=null}resetEdited(){this.#y&&({contentsObj:this.#l,richText:this.#g}=this.#y,this.#y=null,this.#f?.remove(),this.#f=null,this.#o=null)}#P(){if(this.#o!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:i,pageX:s,pageY:r}}}=this.#c;let o=!!this.#h,a=o?this.#h:this.#p;for(const v of this.#u)if(!a||ae.intersect(v.data.rect,a)!==null){a=v.data.rect,o=!0;break}const l=ae.normalizeRect([a[0],e[3]-a[1]+e[1],a[2],e[3]-a[3]+e[1]]),d=o?a[2]-a[0]+5:0,f=l[0]+d,m=l[1];this.#o=[100*(f-s)/t,100*(m-r)/i];const{style:y}=this.#s;y.left=`${this.#o[0]}%`,y.top=`${this.#o[1]}%`}#T(){this.#d=!this.#d,this.#d?(this.#S(),this.#s.addEventListener("click",this.#i),this.#s.addEventListener("keydown",this.#e)):(this.#I(),this.#s.removeEventListener("click",this.#i),this.#s.removeEventListener("keydown",this.#e))}#S(){this.#f||this.render(),this.isVisible?this.#d&&this.#s.classList.add("focused"):(this.#P(),this.#s.hidden=!1,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)+1e3)}#I(){this.#s.classList.remove("focused"),!(this.#d||!this.isVisible)&&(this.#s.hidden=!0,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)-1e3)}forceHide(){this.#w=this.isVisible,this.#w&&(this.#s.hidden=!0)}maybeShow(){this.#w&&(this.#f||this.#S(),this.#w=!1,this.#s.hidden=!1)}get isVisible(){return this.#s.hidden===!1}}class WA extends ft{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=ye.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const i=document.createElement("span");i.textContent=t,e.append(i)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class Zj extends ft{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const e=this.data,{width:t,height:i}=ps(e.rect),s=this.svgFactory.create(t,i,!0),r=this.#e=this.svgFactory.createElement("svg:line");return r.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),r.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),r.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),r.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),r.setAttribute("stroke-width",e.borderStyle.width||1),r.setAttribute("stroke","transparent"),r.setAttribute("fill","transparent"),s.append(r),this.container.append(s),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class eW extends ft{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const e=this.data,{width:t,height:i}=ps(e.rect),s=this.svgFactory.create(t,i,!0),r=e.borderStyle.width,o=this.#e=this.svgFactory.createElement("svg:rect");return o.setAttribute("x",r/2),o.setAttribute("y",r/2),o.setAttribute("width",t-r),o.setAttribute("height",i-r),o.setAttribute("stroke-width",r||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),s.append(o),this.container.append(s),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class tW extends ft{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const e=this.data,{width:t,height:i}=ps(e.rect),s=this.svgFactory.create(t,i,!0),r=e.borderStyle.width,o=this.#e=this.svgFactory.createElement("svg:ellipse");return o.setAttribute("cx",t/2),o.setAttribute("cy",i/2),o.setAttribute("rx",t/2-r/2),o.setAttribute("ry",i/2-r/2),o.setAttribute("stroke-width",r||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),s.append(o),this.container.append(s),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class KA extends ft{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:t,borderStyle:i,popupRef:s}}=this;if(!t)return this.container;const{width:r,height:o}=ps(e),a=this.svgFactory.create(r,o,!0);let l=[];for(let d=0,f=t.length;d<f;d+=2){const m=t[d]-e[0],y=e[3]-t[d+1];l.push(`${m},${y}`)}l=l.join(" ");const c=this.#e=this.svgFactory.createElement(this.svgElementName);return c.setAttribute("points",l),c.setAttribute("stroke-width",i.width||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),a.append(c),this.container.append(a),!s&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class nW extends KA{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class iW extends ft{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class Hg extends ft{#e=null;#t=[];constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?ye.HIGHLIGHT:ye.INK}#n(e,t){switch(e){case 90:return{transform:`rotate(90) translate(${-t[0]},${t[1]}) scale(1,-1)`,width:t[3]-t[1],height:t[2]-t[0]};case 180:return{transform:`rotate(180) translate(${-t[2]},${t[1]}) scale(1,-1)`,width:t[2]-t[0],height:t[3]-t[1]};case 270:return{transform:`rotate(270) translate(${-t[2]},${t[3]}) scale(1,-1)`,width:t[3]-t[1],height:t[2]-t[0]};default:return{transform:`translate(${-t[0]},${t[3]}) scale(1,-1)`,width:t[2]-t[0],height:t[3]-t[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:t,inkLists:i,borderStyle:s,popupRef:r}}=this,{transform:o,width:a,height:l}=this.#n(t,e),c=this.svgFactory.create(a,l,!0),d=this.#e=this.svgFactory.createElement("svg:g");c.append(d),d.setAttribute("stroke-width",s.width||1),d.setAttribute("stroke-linecap","round"),d.setAttribute("stroke-linejoin","round"),d.setAttribute("stroke-miterlimit",10),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),d.setAttribute("transform",o);for(let f=0,m=i.length;f<m;f++){const y=this.svgFactory.createElement(this.svgElementName);this.#t.push(y),y.setAttribute("points",i[f].join(",")),d.append(y)}return!r&&this.hasPopupData&&this._createPopup(),this.container.append(c),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:t,points:i,rect:s}=e,r=this.#e;if(t>=0&&r.setAttribute("stroke-width",t||1),i)for(let o=0,a=this.#t.length;o<a;o++)this.#t[o].setAttribute("points",i[o].join(","));if(s){const{transform:o,width:a,height:l}=this.#n(this.data.rotation,s);r.parentElement.setAttribute("viewBox",`0 0 ${a} ${l}`),r.setAttribute("transform",o)}}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class YA extends ft{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=ye.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class sW extends ft{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class rW extends ft{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class oW extends ft{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class JA extends ft{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=ye.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class aW extends ft{#e=null;constructor(e){super(e,{isRenderable:!0});const{file:t}=this.data;this.filename=t.filename,this.content=t.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...t})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:t}=this;let i;t.hasAppearance||t.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(t.name)?"paperclip":"pushpin"}.svg`,t.fillAlpha&&t.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(t.fillAlpha*100)}%);`)),i.addEventListener("dblclick",this.#t.bind(this)),this.#e=i;const{isMac:s}=cn.platform;return e.addEventListener("keydown",r=>{r.key==="Enter"&&(s?r.metaKey:r.ctrlKey)&&this.#t()}),!t.popupRef&&this.hasPopupData?this._createPopup():i.classList.add("popupTriggerArea"),e.append(i),e}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}#t(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}class lW{#e=null;#t=null;#n=new Map;#i=null;constructor({div:e,accessibilityManager:t,annotationCanvasMap:i,annotationEditorUIManager:s,page:r,viewport:o,structTreeLayer:a}){this.div=e,this.#e=t,this.#t=i,this.#i=a||null,this.page=r,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=s}hasEditableAnnotations(){return this.#n.size>0}async#r(e,t){const i=e.firstChild||e,s=i.id=`${Ng}${t}`,r=await this.#i?.getAriaAttributes(s);if(r)for(const[o,a]of r)i.setAttribute(o,a);this.div.append(e),this.#e?.moveElementInDOM(this.div,e,i,!1)}async render(e){const{annotations:t}=e,i=this.div;Ar(i,this.viewport);const s=new Map,r={data:null,layer:i,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new qg,annotationStorage:e.annotationStorage||new Og,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const o of t){if(o.noHTML)continue;const a=o.annotationType===wt.POPUP;if(a){const d=s.get(o.id);if(!d)continue;r.elements=d}else{const{width:d,height:f}=ps(o.rect);if(d<=0||f<=0)continue}r.data=o;const l=$j.create(r);if(!l.isRenderable)continue;if(!a&&o.popupRef){const d=s.get(o.popupRef);d?d.push(l):s.set(o.popupRef,[l])}const c=l.render();o.hidden&&(c.style.visibility="hidden"),await this.#r(c,o.id),l._isEditable&&(this.#n.set(l.data.id,l),this._annotationEditorUIManager?.renderAnnotationElement(l))}this.#s()}update({viewport:e}){const t=this.div;this.viewport=e,Ar(t,{rotation:e.rotation}),this.#s(),t.hidden=!1}#s(){if(!this.#t)return;const e=this.div;for(const[t,i]of this.#t){const s=e.querySelector(`[data-annotation-id="${t}"]`);if(!s)continue;i.className="annotationContent";const{firstChild:r}=s;r?r.nodeName==="CANVAS"?r.replaceWith(i):r.classList.contains("annotationContent")?r.after(i):r.before(i):s.append(i)}this.#t.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(e){return this.#n.get(e)}}const ru=/\r\n?|\n/g;class bt extends de{#e;#t="";#n=`${this.id}-editor`;#i=null;#r;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const e=bt.prototype,t=r=>r.isEmpty(),i=Cs.TRANSLATE_SMALL,s=Cs.TRANSLATE_BIG;return _e(this,"_keyboardManager",new _c([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-i,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-s,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[i,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[s,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-i],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-s],checker:t}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,i],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,s],checker:t}]]))}static _type="freetext";static _editorType=ye.FREETEXT;constructor(e){super({...e,name:"freeTextEditor"}),this.#e=e.color||bt._defaultColor||de._defaultLineColor,this.#r=e.fontSize||bt._defaultFontSize}static initialize(e,t){de.initialize(e,t);const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,t){switch(e){case Ce.FREETEXT_SIZE:bt._defaultFontSize=t;break;case Ce.FREETEXT_COLOR:bt._defaultColor=t;break}}updateParams(e,t){switch(e){case Ce.FREETEXT_SIZE:this.#s(t);break;case Ce.FREETEXT_COLOR:this.#l(t);break}}static get defaultPropertiesToUpdate(){return[[Ce.FREETEXT_SIZE,bt._defaultFontSize],[Ce.FREETEXT_COLOR,bt._defaultColor||de._defaultLineColor]]}get propertiesToUpdate(){return[[Ce.FREETEXT_SIZE,this.#r],[Ce.FREETEXT_COLOR,this.#e]]}#s(e){const t=s=>{this.editorDiv.style.fontSize=`calc(${s}px * var(--scale-factor))`,this.translate(0,-(s-this.#r)*this.parentScale),this.#r=s,this.#u()},i=this.#r;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ce.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#l(e){const t=s=>{this.#e=this.editorDiv.style.color=s},i=this.#e;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ce.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(e,t){this._uiManager.translateSelectedEditors(e,t,!0)}getInitialTranslation(){const e=this.parentScale;return[-bt._internalPadding*e,-(bt._internalPadding+this.#r)*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(ye.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#i=new AbortController;const e=this._uiManager.combinedSignal(this.#i);this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e})}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#n),this._isDraggable=!0,this.#i?.abort(),this.#i=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#a(){const e=[];this.editorDiv.normalize();let t=null;for(const i of this.editorDiv.childNodes)t?.nodeType===Node.TEXT_NODE&&i.nodeName==="BR"||(e.push(bt.#c(i)),t=i);return e.join(`
`)}#u(){const[e,t]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:s,div:r}=this,o=r.style.display,a=r.classList.contains("hidden");r.classList.remove("hidden"),r.style.display="hidden",s.div.append(this.div),i=r.getBoundingClientRect(),r.remove(),r.style.display=o,r.classList.toggle("hidden",a)}this.rotation%180===this.parentRotation%180?(this.width=i.width/e,this.height=i.height/t):(this.width=i.height/e,this.height=i.width/t),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=this.#t,t=this.#t=this.#a().trimEnd();if(e===t)return;const i=s=>{if(this.#t=s,!s){this.remove();return}this.#h(),this._uiManager.rebuild(this),this.#u()};this.addCommands({cmd:()=>{i(t)},undo:()=>{i(e)},mustExec:!1}),this.#u()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(e){this.enterInEditMode()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){bt._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let e,t;this.width&&(e=this.x,t=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#n),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${this.#r}px * var(--scale-factor))`,i.color=this.#e,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),od(this,this.div,["dblclick","keydown"]),this.width){const[s,r]=this.parentDimensions;if(this.annotationElementId){const{position:o}=this._initialData;let[a,l]=this.getInitialTranslation();[a,l]=this.pageTranslationToScreen(a,l);const[c,d]=this.pageDimensions,[f,m]=this.pageTranslation;let y,v;switch(this.rotation){case 0:y=e+(o[0]-f)/c,v=t+this.height-(o[1]-m)/d;break;case 90:y=e+(o[0]-f)/c,v=t-(o[1]-m)/d,[a,l]=[l,-a];break;case 180:y=e-this.width+(o[0]-f)/c,v=t-(o[1]-m)/d,[a,l]=[-a,-l];break;case 270:y=e+(o[0]-f-this.height*d)/c,v=t+(o[1]-m-this.width*c)/d,[a,l]=[-l,a];break}this.setAt(y*s,v*r,a,l)}else this.setAt(e*s,t*r,this.width*s,this.height*r);this.#h(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#c(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(ru,"")}editorDivPaste(e){const t=e.clipboardData||window.clipboardData,{types:i}=t;if(i.length===1&&i[0]==="text/plain")return;e.preventDefault();const s=bt.#f(t.getData("text")||"").replaceAll(ru,`
`);if(!s)return;const r=window.getSelection();if(!r.rangeCount)return;this.editorDiv.normalize(),r.deleteFromDocument();const o=r.getRangeAt(0);if(!s.includes(`
`)){o.insertNode(document.createTextNode(s)),this.editorDiv.normalize(),r.collapseToStart();return}const{startContainer:a,startOffset:l}=o,c=[],d=[];if(a.nodeType===Node.TEXT_NODE){const y=a.parentElement;if(d.push(a.nodeValue.slice(l).replaceAll(ru,"")),y!==this.editorDiv){let v=c;for(const w of this.editorDiv.childNodes){if(w===y){v=d;continue}v.push(bt.#c(w))}}c.push(a.nodeValue.slice(0,l).replaceAll(ru,""))}else if(a===this.editorDiv){let y=c,v=0;for(const w of this.editorDiv.childNodes)v++===l&&(y=d),y.push(bt.#c(w))}this.#t=`${c.join(`
`)}${s}${d.join(`
`)}`,this.#h();const f=new Range;let m=c.reduce((y,v)=>y+v.length,0);for(const{firstChild:y}of this.editorDiv.childNodes)if(y.nodeType===Node.TEXT_NODE){const v=y.nodeValue.length;if(m<=v){f.setStart(y,m),f.setEnd(y,m);break}m-=v}r.removeAllRanges(),r.addRange(f)}#h(){if(this.editorDiv.replaceChildren(),!!this.#t)for(const e of this.#t.split(`
`)){const t=document.createElement("div");t.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(t)}}#d(){return this.#t.replaceAll(" "," ")}static#f(e){return e.replaceAll(" "," ")}get contentDiv(){return this.editorDiv}static async deserialize(e,t,i){let s=null;if(e instanceof WA){const{data:{defaultAppearanceData:{fontSize:o,fontColor:a},rect:l,rotation:c,id:d,popupRef:f},textContent:m,textPosition:y,parent:{page:{pageNumber:v}}}=e;if(!m||m.length===0)return null;s=e={annotationType:ye.FREETEXT,color:Array.from(a),fontSize:o,value:m.join(`
`),position:y,pageIndex:v-1,rect:l.slice(0),rotation:c,id:d,deleted:!1,popupRef:f}}const r=await super.deserialize(e,t,i);return r.#r=e.fontSize,r.#e=ae.makeHexColor(...e.color),r.#t=bt.#f(e.value),r.annotationElementId=e.id||null,r._initialData=s,r}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const t=bt._internalPadding*this.parentScale,i=this.getRect(t,t),s=de._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#e),r={annotationType:ye.FREETEXT,color:s,fontSize:this.#r,value:this.#d(),pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?r:this.annotationElementId&&!this.#o(r)?null:(r.id=this.annotationElementId,r)}#o(e){const{value:t,fontSize:i,color:s,pageIndex:r}=this._initialData;return this._hasBeenMoved||e.value!==t||e.fontSize!==i||e.color.some((o,a)=>o!==s[a])||e.pageIndex!==r}renderAnnotationElement(e){const t=super.renderAnnotationElement(e);if(this.deleted)return t;const{style:i}=t;i.fontSize=`calc(${this.#r}px * var(--scale-factor))`,i.color=this.#e,t.replaceChildren();for(const r of this.#t.split(`
`)){const o=document.createElement("div");o.append(r?document.createTextNode(r):document.createElement("br")),t.append(o)}const s=bt._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(s,s),popupContent:this.#t}),t}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}}class ee{static PRECISION=1e-4;toSVGPath(){Ue("Abstract method `toSVGPath` must be implemented.")}get box(){Ue("Abstract getter `box` must be implemented.")}serialize(e,t){Ue("Abstract method `serialize` must be implemented.")}static _rescale(e,t,i,s,r,o){o||=new Float32Array(e.length);for(let a=0,l=e.length;a<l;a+=2)o[a]=t+e[a]*s,o[a+1]=i+e[a+1]*r;return o}static _rescaleAndSwap(e,t,i,s,r,o){o||=new Float32Array(e.length);for(let a=0,l=e.length;a<l;a+=2)o[a]=t+e[a+1]*s,o[a+1]=i+e[a]*r;return o}static _translate(e,t,i,s){s||=new Float32Array(e.length);for(let r=0,o=e.length;r<o;r+=2)s[r]=t+e[r],s[r+1]=i+e[r+1];return s}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,i,s,r){switch(r){case 90:return[1-t/i,e/s];case 180:return[1-e/i,1-t/s];case 270:return[t/i,1-e/s];default:return[e/i,t/s]}}static _normalizePagePoint(e,t,i){switch(i){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,i,s,r,o){return[(e+5*i)/6,(t+5*s)/6,(5*i+r)/6,(5*s+o)/6,(i+r)/2,(s+o)/2]}}class or{#e;#t=[];#n;#i;#r=[];#s=new Float32Array(18);#l;#a;#u;#c;#h;#d;#f=[];static#o=8;static#p=2;static#g=or.#o+or.#p;constructor({x:e,y:t},i,s,r,o,a=0){this.#e=i,this.#d=r*s,this.#i=o,this.#s.set([NaN,NaN,NaN,NaN,e,t],6),this.#n=a,this.#c=or.#o*s,this.#u=or.#g*s,this.#h=s,this.#f.push(e,t)}isEmpty(){return isNaN(this.#s[8])}#m(){const e=this.#s.subarray(4,6),t=this.#s.subarray(16,18),[i,s,r,o]=this.#e;return[(this.#l+(e[0]-t[0])/2-i)/r,(this.#a+(e[1]-t[1])/2-s)/o,(this.#l+(t[0]-e[0])/2-i)/r,(this.#a+(t[1]-e[1])/2-s)/o]}add({x:e,y:t}){this.#l=e,this.#a=t;const[i,s,r,o]=this.#e;let[a,l,c,d]=this.#s.subarray(8,12);const f=e-c,m=t-d,y=Math.hypot(f,m);if(y<this.#u)return!1;const v=y-this.#c,w=v/y,T=w*f,x=w*m;let P=a,S=l;a=c,l=d,c+=T,d+=x,this.#f?.push(e,t);const L=-x/v,F=T/v,U=L*this.#d,C=F*this.#d;return this.#s.set(this.#s.subarray(2,8),0),this.#s.set([c+U,d+C],4),this.#s.set(this.#s.subarray(14,18),12),this.#s.set([c-U,d-C],16),isNaN(this.#s[6])?(this.#r.length===0&&(this.#s.set([a+U,l+C],2),this.#r.push(NaN,NaN,NaN,NaN,(a+U-i)/r,(l+C-s)/o),this.#s.set([a-U,l-C],14),this.#t.push(NaN,NaN,NaN,NaN,(a-U-i)/r,(l-C-s)/o)),this.#s.set([P,S,a,l,c,d],6),!this.isEmpty()):(this.#s.set([P,S,a,l,c,d],6),Math.abs(Math.atan2(S-l,P-a)-Math.atan2(x,T))<Math.PI/2?([a,l,c,d]=this.#s.subarray(2,6),this.#r.push(NaN,NaN,NaN,NaN,((a+c)/2-i)/r,((l+d)/2-s)/o),[a,l,P,S]=this.#s.subarray(14,18),this.#t.push(NaN,NaN,NaN,NaN,((P+a)/2-i)/r,((S+l)/2-s)/o),!0):([P,S,a,l,c,d]=this.#s.subarray(0,6),this.#r.push(((P+5*a)/6-i)/r,((S+5*l)/6-s)/o,((5*a+c)/6-i)/r,((5*l+d)/6-s)/o,((a+c)/2-i)/r,((l+d)/2-s)/o),[c,d,a,l,P,S]=this.#s.subarray(12,18),this.#t.push(((P+5*a)/6-i)/r,((S+5*l)/6-s)/o,((5*a+c)/6-i)/r,((5*l+d)/6-s)/o,((a+c)/2-i)/r,((l+d)/2-s)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const e=this.#r,t=this.#t;if(isNaN(this.#s[6])&&!this.isEmpty())return this.#y();const i=[];i.push(`M${e[4]} ${e[5]}`);for(let s=6;s<e.length;s+=6)isNaN(e[s])?i.push(`L${e[s+4]} ${e[s+5]}`):i.push(`C${e[s]} ${e[s+1]} ${e[s+2]} ${e[s+3]} ${e[s+4]} ${e[s+5]}`);this.#v(i);for(let s=t.length-6;s>=6;s-=6)isNaN(t[s])?i.push(`L${t[s+4]} ${t[s+5]}`):i.push(`C${t[s]} ${t[s+1]} ${t[s+2]} ${t[s+3]} ${t[s+4]} ${t[s+5]}`);return this.#w(i),i.join(" ")}#y(){const[e,t,i,s]=this.#e,[r,o,a,l]=this.#m();return`M${(this.#s[2]-e)/i} ${(this.#s[3]-t)/s} L${(this.#s[4]-e)/i} ${(this.#s[5]-t)/s} L${r} ${o} L${a} ${l} L${(this.#s[16]-e)/i} ${(this.#s[17]-t)/s} L${(this.#s[14]-e)/i} ${(this.#s[15]-t)/s} Z`}#w(e){const t=this.#t;e.push(`L${t[4]} ${t[5]} Z`)}#v(e){const[t,i,s,r]=this.#e,o=this.#s.subarray(4,6),a=this.#s.subarray(16,18),[l,c,d,f]=this.#m();e.push(`L${(o[0]-t)/s} ${(o[1]-i)/r} L${l} ${c} L${d} ${f} L${(a[0]-t)/s} ${(a[1]-i)/r}`)}newFreeDrawOutline(e,t,i,s,r,o){return new XA(e,t,i,s,r,o)}getOutlines(){const e=this.#r,t=this.#t,i=this.#s,[s,r,o,a]=this.#e,l=new Float32Array((this.#f?.length??0)+2);for(let f=0,m=l.length-2;f<m;f+=2)l[f]=(this.#f[f]-s)/o,l[f+1]=(this.#f[f+1]-r)/a;if(l[l.length-2]=(this.#l-s)/o,l[l.length-1]=(this.#a-r)/a,isNaN(i[6])&&!this.isEmpty())return this.#b(l);const c=new Float32Array(this.#r.length+24+this.#t.length);let d=e.length;for(let f=0;f<d;f+=2){if(isNaN(e[f])){c[f]=c[f+1]=NaN;continue}c[f]=e[f],c[f+1]=e[f+1]}d=this.#A(c,d);for(let f=t.length-6;f>=6;f-=6)for(let m=0;m<6;m+=2){if(isNaN(t[f+m])){c[d]=c[d+1]=NaN,d+=2;continue}c[d]=t[f+m],c[d+1]=t[f+m+1],d+=2}return this.#x(c,d),this.newFreeDrawOutline(c,l,this.#e,this.#h,this.#n,this.#i)}#b(e){const t=this.#s,[i,s,r,o]=this.#e,[a,l,c,d]=this.#m(),f=new Float32Array(36);return f.set([NaN,NaN,NaN,NaN,(t[2]-i)/r,(t[3]-s)/o,NaN,NaN,NaN,NaN,(t[4]-i)/r,(t[5]-s)/o,NaN,NaN,NaN,NaN,a,l,NaN,NaN,NaN,NaN,c,d,NaN,NaN,NaN,NaN,(t[16]-i)/r,(t[17]-s)/o,NaN,NaN,NaN,NaN,(t[14]-i)/r,(t[15]-s)/o],0),this.newFreeDrawOutline(f,e,this.#e,this.#h,this.#n,this.#i)}#x(e,t){const i=this.#t;return e.set([NaN,NaN,NaN,NaN,i[4],i[5]],t),t+=6}#A(e,t){const i=this.#s.subarray(4,6),s=this.#s.subarray(16,18),[r,o,a,l]=this.#e,[c,d,f,m]=this.#m();return e.set([NaN,NaN,NaN,NaN,(i[0]-r)/a,(i[1]-o)/l,NaN,NaN,NaN,NaN,c,d,NaN,NaN,NaN,NaN,f,m,NaN,NaN,NaN,NaN,(s[0]-r)/a,(s[1]-o)/l],t),t+=24}}class XA extends ee{#e;#t=new Float32Array(4);#n;#i;#r;#s;#l;constructor(e,t,i,s,r,o){super(),this.#l=e,this.#r=t,this.#e=i,this.#s=s,this.#n=r,this.#i=o,this.lastPoint=[NaN,NaN],this.#a(o);const[a,l,c,d]=this.#t;for(let f=0,m=e.length;f<m;f+=2)e[f]=(e[f]-a)/c,e[f+1]=(e[f+1]-l)/d;for(let f=0,m=t.length;f<m;f+=2)t[f]=(t[f]-a)/c,t[f+1]=(t[f+1]-l)/d}toSVGPath(){const e=[`M${this.#l[4]} ${this.#l[5]}`];for(let t=6,i=this.#l.length;t<i;t+=6){if(isNaN(this.#l[t])){e.push(`L${this.#l[t+4]} ${this.#l[t+5]}`);continue}e.push(`C${this.#l[t]} ${this.#l[t+1]} ${this.#l[t+2]} ${this.#l[t+3]} ${this.#l[t+4]} ${this.#l[t+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,t,i,s],r){const o=i-e,a=s-t;let l,c;switch(r){case 0:l=ee._rescale(this.#l,e,s,o,-a),c=ee._rescale(this.#r,e,s,o,-a);break;case 90:l=ee._rescaleAndSwap(this.#l,e,t,o,a),c=ee._rescaleAndSwap(this.#r,e,t,o,a);break;case 180:l=ee._rescale(this.#l,i,t,-o,a),c=ee._rescale(this.#r,i,t,-o,a);break;case 270:l=ee._rescaleAndSwap(this.#l,i,s,-o,-a),c=ee._rescaleAndSwap(this.#r,i,s,-o,-a);break}return{outline:Array.from(l),points:[Array.from(c)]}}#a(e){const t=this.#l;let i=t[4],s=t[5],r=i,o=s,a=i,l=s,c=i,d=s;const f=e?Math.max:Math.min;for(let y=6,v=t.length;y<v;y+=6){if(isNaN(t[y]))r=Math.min(r,t[y+4]),o=Math.min(o,t[y+5]),a=Math.max(a,t[y+4]),l=Math.max(l,t[y+5]),d<t[y+5]?(c=t[y+4],d=t[y+5]):d===t[y+5]&&(c=f(c,t[y+4]));else{const w=ae.bezierBoundingBox(i,s,...t.slice(y,y+6));r=Math.min(r,w[0]),o=Math.min(o,w[1]),a=Math.max(a,w[2]),l=Math.max(l,w[3]),d<w[3]?(c=w[2],d=w[3]):d===w[3]&&(c=f(c,w[2]))}i=t[y+4],s=t[y+5]}const m=this.#t;m[0]=r-this.#n,m[1]=o-this.#n,m[2]=a-r+2*this.#n,m[3]=l-o+2*this.#n,this.lastPoint=[c,d]}get box(){return this.#t}newOutliner(e,t,i,s,r,o=0){return new or(e,t,i,s,r,o)}getNewOutline(e,t){const[i,s,r,o]=this.#t,[a,l,c,d]=this.#e,f=r*c,m=o*d,y=i*c+a,v=s*d+l,w=this.newOutliner({x:this.#r[0]*f+y,y:this.#r[1]*m+v},this.#e,this.#s,e,this.#i,t??this.#n);for(let T=2;T<this.#r.length;T+=2)w.add({x:this.#r[T]*f+y,y:this.#r[T+1]*m+v});return w.getOutlines()}}class Cp{#e;#t;#n=[];#i=[];constructor(e,t=0,i=0,s=!0){let r=1/0,o=-1/0,a=1/0,l=-1/0;const c=10**-4;for(const{x:T,y:x,width:P,height:S}of e){const L=Math.floor((T-t)/c)*c,F=Math.ceil((T+P+t)/c)*c,U=Math.floor((x-t)/c)*c,C=Math.ceil((x+S+t)/c)*c,A=[L,U,C,!0],E=[F,U,C,!1];this.#n.push(A,E),r=Math.min(r,L),o=Math.max(o,F),a=Math.min(a,U),l=Math.max(l,C)}const d=o-r+2*i,f=l-a+2*i,m=r-i,y=a-i,v=this.#n.at(s?-1:-2),w=[v[0],v[2]];for(const T of this.#n){const[x,P,S]=T;T[0]=(x-m)/d,T[1]=(P-y)/f,T[2]=(S-y)/f}this.#e=new Float32Array([m,y,d,f]),this.#t=w}getOutlines(){this.#n.sort((t,i)=>t[0]-i[0]||t[1]-i[1]||t[2]-i[2]);const e=[];for(const t of this.#n)t[3]?(e.push(...this.#u(t)),this.#l(t)):(this.#a(t),e.push(...this.#u(t)));return this.#r(e)}#r(e){const t=[],i=new Set;for(const o of e){const[a,l,c]=o;t.push([a,l,o],[a,c,o])}t.sort((o,a)=>o[1]-a[1]||o[0]-a[0]);for(let o=0,a=t.length;o<a;o+=2){const l=t[o][2],c=t[o+1][2];l.push(c),c.push(l),i.add(l),i.add(c)}const s=[];let r;for(;i.size>0;){const o=i.values().next().value;let[a,l,c,d,f]=o;i.delete(o);let m=a,y=l;for(r=[a,c],s.push(r);;){let v;if(i.has(d))v=d;else if(i.has(f))v=f;else break;i.delete(v),[a,l,c,d,f]=v,m!==a&&(r.push(m,y,a,y===l?l:c),m=a),y=y===l?c:l}r.push(m,y)}return new cW(s,this.#e,this.#t)}#s(e){const t=this.#i;let i=0,s=t.length-1;for(;i<=s;){const r=i+s>>1,o=t[r][0];if(o===e)return r;o<e?i=r+1:s=r-1}return s+1}#l([,e,t]){const i=this.#s(e);this.#i.splice(i,0,[e,t])}#a([,e,t]){const i=this.#s(e);for(let s=i;s<this.#i.length;s++){const[r,o]=this.#i[s];if(r!==e)break;if(r===e&&o===t){this.#i.splice(s,1);return}}for(let s=i-1;s>=0;s--){const[r,o]=this.#i[s];if(r!==e)break;if(r===e&&o===t){this.#i.splice(s,1);return}}}#u(e){const[t,i,s]=e,r=[[t,i,s]],o=this.#s(s);for(let a=0;a<o;a++){const[l,c]=this.#i[a];for(let d=0,f=r.length;d<f;d++){const[,m,y]=r[d];if(!(c<=m||y<=l)){if(m>=l){if(y>c)r[d][1]=c;else{if(f===1)return[];r.splice(d,1),d--,f--}continue}r[d][2]=l,y>c&&r.push([t,c,y])}}}return r}}class cW extends ee{#e;#t;constructor(e,t,i){super(),this.#t=e,this.#e=t,this.lastPoint=i}toSVGPath(){const e=[];for(const t of this.#t){let[i,s]=t;e.push(`M${i} ${s}`);for(let r=2;r<t.length;r+=2){const o=t[r],a=t[r+1];o===i?(e.push(`V${a}`),s=a):a===s&&(e.push(`H${o}`),i=o)}e.push("Z")}return e.join(" ")}serialize([e,t,i,s],r){const o=[],a=i-e,l=s-t;for(const c of this.#t){const d=new Array(c.length);for(let f=0;f<c.length;f+=2)d[f]=e+c[f]*a,d[f+1]=s-c[f+1]*l;o.push(d)}return o}get box(){return this.#e}get classNamesForOutlining(){return["highlightOutline"]}}class Sp extends or{newFreeDrawOutline(e,t,i,s,r,o){return new uW(e,t,i,s,r,o)}}class uW extends XA{newOutliner(e,t,i,s,r,o=0){return new Sp(e,t,i,s,r,o)}}class Rn{#e=null;#t=null;#n;#i=null;#r=!1;#s=!1;#l=null;#a;#u=null;#c=null;#h;static#d=null;static get _keyboardManager(){return _e(this,"_keyboardManager",new _c([[["Escape","mac+Escape"],Rn.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Rn.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Rn.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Rn.prototype._moveToPrevious],[["Home","mac+Home"],Rn.prototype._moveToBeginning],[["End","mac+End"],Rn.prototype._moveToEnd]]))}constructor({editor:e=null,uiManager:t=null}){e?(this.#s=!1,this.#h=Ce.HIGHLIGHT_COLOR,this.#l=e):(this.#s=!0,this.#h=Ce.HIGHLIGHT_DEFAULT_COLOR),this.#c=e?._uiManager||t,this.#a=this.#c._eventBus,this.#n=e?.color||this.#c?.highlightColors.values().next().value||"#FFFF98",Rn.#d||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const e=this.#e=document.createElement("button");e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0);const t=this.#c._signal;e.addEventListener("click",this.#g.bind(this),{signal:t}),e.addEventListener("keydown",this.#p.bind(this),{signal:t});const i=this.#t=document.createElement("span");return i.className="swatch",i.setAttribute("aria-hidden",!0),i.style.backgroundColor=this.#n,e.append(i),e}renderMainDropdown(){const e=this.#i=this.#f();return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}#f(){const e=document.createElement("div"),t=this.#c._signal;e.addEventListener("contextmenu",$n,{signal:t}),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[i,s]of this.#c.highlightColors){const r=document.createElement("button");r.tabIndex="0",r.role="option",r.setAttribute("data-color",s),r.title=i,r.setAttribute("data-l10n-id",Rn.#d[i]);const o=document.createElement("span");r.append(o),o.className="swatch",o.style.backgroundColor=s,r.setAttribute("aria-selected",s===this.#n),r.addEventListener("click",this.#o.bind(this,s),{signal:t}),e.append(r)}return e.addEventListener("keydown",this.#p.bind(this),{signal:t}),e}#o(e,t){t.stopPropagation(),this.#a.dispatch("switchannotationeditorparams",{source:this,type:this.#h,value:e})}_colorSelectFromKeyboard(e){if(e.target===this.#e){this.#g(e);return}const t=e.target.getAttribute("data-color");t&&this.#o(t,e)}_moveToNext(e){if(!this.#y){this.#g(e);return}if(e.target===this.#e){this.#i.firstChild?.focus();return}e.target.nextSibling?.focus()}_moveToPrevious(e){if(e.target===this.#i?.firstChild||e.target===this.#e){this.#y&&this._hideDropdownFromKeyboard();return}this.#y||this.#g(e),e.target.previousSibling?.focus()}_moveToBeginning(e){if(!this.#y){this.#g(e);return}this.#i.firstChild?.focus()}_moveToEnd(e){if(!this.#y){this.#g(e);return}this.#i.lastChild?.focus()}#p(e){Rn._keyboardManager.exec(this,e)}#g(e){if(this.#y){this.hideDropdown();return}if(this.#r=e.detail===0,this.#u||(this.#u=new AbortController,window.addEventListener("pointerdown",this.#m.bind(this),{signal:this.#c.combinedSignal(this.#u)})),this.#i){this.#i.classList.remove("hidden");return}const t=this.#i=this.#f();this.#e.append(t)}#m(e){this.#i?.contains(e.target)||this.hideDropdown()}hideDropdown(){this.#i?.classList.add("hidden"),this.#u?.abort(),this.#u=null}get#y(){return this.#i&&!this.#i.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#s){if(!this.#y){this.#l?.unselect();return}this.hideDropdown(),this.#e.focus({preventScroll:!0,focusVisible:this.#r})}}updateColor(e){if(this.#t&&(this.#t.style.backgroundColor=e),!this.#i)return;const t=this.#c.highlightColors.values();for(const i of this.#i.children)i.setAttribute("aria-selected",t.next().value===e)}destroy(){this.#e?.remove(),this.#e=null,this.#t=null,this.#i?.remove(),this.#i=null}}class lt extends de{#e=null;#t=0;#n;#i=null;#r=null;#s=null;#l=null;#a=0;#u=null;#c=null;#h=null;#d=!1;#f=null;#o;#p=null;#g="";#m;#y="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=ye.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const e=lt.prototype;return _e(this,"_keyboardManager",new _c([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}constructor(e){super({...e,name:"highlightEditor"}),this.color=e.color||lt._defaultColor,this.#m=e.thickness||lt._defaultThickness,this.#o=e.opacity||lt._defaultOpacity,this.#n=e.boxes||null,this.#y=e.methodOfCreation||"",this.#g=e.text||"",this._isDraggable=!1,e.highlightId>-1?(this.#d=!0,this.#v(e),this.#P()):this.#n&&(this.#e=e.anchorNode,this.#t=e.anchorOffset,this.#l=e.focusNode,this.#a=e.focusOffset,this.#w(),this.#P(),this.rotate(this.rotation))}get telemetryInitialData(){return{action:"added",type:this.#d?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:this.#m,methodOfCreation:this.#y}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}#w(){const e=new Cp(this.#n,.001);this.#c=e.getOutlines(),[this.x,this.y,this.width,this.height]=this.#c.box;const t=new Cp(this.#n,.0025,.001,this._uiManager.direction==="ltr");this.#s=t.getOutlines();const{lastPoint:i}=this.#s;this.#f=[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height]}#v({highlightOutlines:e,highlightId:t,clipPathId:i}){this.#c=e;const s=1.5;if(this.#s=e.getNewOutline(this.#m/2+s,.0025),t>=0)this.#h=t,this.#i=i,this.parent.drawLayer.finalizeDraw(t,{bbox:e.box,path:{d:e.toSVGPath()}}),this.#p=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#s.box,path:{d:this.#s.toSVGPath()}},!0);else if(this.parent){const d=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#h,{bbox:lt.#T(this.#c.box,(d-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#p,{bbox:lt.#T(this.#s.box,d),path:{d:this.#s.toSVGPath()}})}const[r,o,a,l]=e.box;switch(this.rotation){case 0:this.x=r,this.y=o,this.width=a,this.height=l;break;case 90:{const[d,f]=this.parentDimensions;this.x=o,this.y=1-r,this.width=a*f/d,this.height=l*d/f;break}case 180:this.x=1-r,this.y=1-o,this.width=a,this.height=l;break;case 270:{const[d,f]=this.parentDimensions;this.x=1-o,this.y=r,this.width=a*f/d,this.height=l*d/f;break}}const{lastPoint:c}=this.#s;this.#f=[(c[0]-r)/a,(c[1]-o)/l]}static initialize(e,t){de.initialize(e,t),lt._defaultColor||=t.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(e,t){switch(e){case Ce.HIGHLIGHT_DEFAULT_COLOR:lt._defaultColor=t;break;case Ce.HIGHLIGHT_THICKNESS:lt._defaultThickness=t;break}}translateInPage(e,t){}get toolbarPosition(){return this.#f}updateParams(e,t){switch(e){case Ce.HIGHLIGHT_COLOR:this.#b(t);break;case Ce.HIGHLIGHT_THICKNESS:this.#x(t);break}}static get defaultPropertiesToUpdate(){return[[Ce.HIGHLIGHT_DEFAULT_COLOR,lt._defaultColor],[Ce.HIGHLIGHT_THICKNESS,lt._defaultThickness]]}get propertiesToUpdate(){return[[Ce.HIGHLIGHT_COLOR,this.color||lt._defaultColor],[Ce.HIGHLIGHT_THICKNESS,this.#m||lt._defaultThickness],[Ce.HIGHLIGHT_FREE,this.#d]]}#b(e){const t=(r,o)=>{this.color=r,this.#o=o,this.parent?.drawLayer.updateProperties(this.#h,{root:{fill:r,"fill-opacity":o}}),this.#r?.updateColor(r)},i=this.color,s=this.#o;this.addCommands({cmd:t.bind(this,e,lt._defaultOpacity),undo:t.bind(this,i,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ce.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)}#x(e){const t=this.#m,i=s=>{this.#m=s,this.#A(s)};this.addCommands({cmd:i.bind(this,e),undo:i.bind(this,t),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ce.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)}async addEditToolbar(){const e=await super.addEditToolbar();return e?(this._uiManager.highlightColors&&(this.#r=new Rn({editor:this}),e.addColorPicker(this.#r)),e):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#k())}getBaseTranslation(){return[0,0]}getRect(e,t){return super.getRect(e,t,this.#k())}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){this.#C(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#P(),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;this.parent&&!e?this.#C():e&&(this.#P(e),t=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),this.show(this._isVisible),t&&this.select()}#A(e){if(!this.#d)return;this.#v({highlightOutlines:this.#c.getNewOutline(e/2)}),this.fixAndSetPosition();const[t,i]=this.parentDimensions;this.setDims(this.width*t,this.height*i)}#C(){this.#h===null||!this.parent||(this.parent.drawLayer.remove(this.#h),this.#h=null,this.parent.drawLayer.remove(this.#p),this.#p=null)}#P(e=this.parent){this.#h===null&&({id:this.#h,clipPathId:this.#i}=e.drawLayer.draw({bbox:this.#c.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.#o},rootClass:{highlight:!0,free:this.#d},path:{d:this.#c.toSVGPath()}},!1,!0),this.#p=e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#d},bbox:this.#s.box,path:{d:this.#s.toSVGPath()}},this.#d),this.#u&&(this.#u.style.clipPath=this.#i))}static#T([e,t,i,s],r){switch(r){case 90:return[1-t-s,e,s,i];case 180:return[1-e-i,1-t-s,i,s];case 270:return[t,1-e-i,s,i]}return[e,t,i,s]}rotate(e){const{drawLayer:t}=this.parent;let i;this.#d?(e=(e-this.rotation+360)%360,i=lt.#T(this.#c.box,e)):i=lt.#T([this.x,this.y,this.width,this.height],e),t.updateProperties(this.#h,{bbox:i,root:{"data-main-rotation":e}}),t.updateProperties(this.#p,{bbox:lt.#T(this.#s.box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();this.#g&&(e.setAttribute("aria-label",this.#g),e.setAttribute("role","mark")),this.#d?e.classList.add("free"):this.div.addEventListener("keydown",this.#S.bind(this),{signal:this._uiManager._signal});const t=this.#u=document.createElement("div");e.append(t),t.setAttribute("aria-hidden","true"),t.className="internal",t.style.clipPath=this.#i;const[i,s]=this.parentDimensions;return this.setDims(this.width*i,this.height*s),od(this,this.#u,["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1}})}#S(e){lt._keyboardManager.exec(this,e)}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:this.#I(!0);break;case 1:case 3:this.#I(!1);break}}#I(e){if(!this.#e)return;const t=window.getSelection();e?t.setPosition(this.#e,this.#t):t.setPosition(this.#l,this.#a)}select(){super.select(),this.#p&&this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#p&&(this.parent?.drawLayer.updateProperties(this.#p,{rootClass:{selected:!1}}),this.#d||this.#I(!1))}get _mustFixPosition(){return!this.#d}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(this.#h,{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(this.#p,{rootClass:{hidden:!e}}))}#k(){return this.#d?this.rotation:0}#D(){if(this.#d)return null;const[e,t]=this.pageDimensions,[i,s]=this.pageTranslation,r=this.#n,o=new Float32Array(r.length*8);let a=0;for(const{x:l,y:c,width:d,height:f}of r){const m=l*e+i,y=(1-c)*t+s;o[a]=o[a+4]=m,o[a+1]=o[a+3]=y,o[a+2]=o[a+6]=m+d*e,o[a+5]=o[a+7]=y-f*t,a+=8}return o}#F(e){return this.#c.serialize(e,this.#k())}static startHighlighting(e,t,{target:i,x:s,y:r}){const{x:o,y:a,width:l,height:c}=i.getBoundingClientRect(),d=new AbortController,f=e.combinedSignal(d),m=y=>{d.abort(),this.#_(e,y)};window.addEventListener("blur",m,{signal:f}),window.addEventListener("pointerup",m,{signal:f}),window.addEventListener("pointerdown",En,{capture:!0,passive:!1,signal:f}),window.addEventListener("contextmenu",$n,{signal:f}),i.addEventListener("pointermove",this.#E.bind(this,e),{signal:f}),this._freeHighlight=new Sp({x:s,y:r},[o,a,l,c],e.scale,this._defaultThickness/2,t,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#E(e,t){this._freeHighlight.add(t)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#_(e,t){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(t,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(e,t,i){let s=null;if(e instanceof YA){const{data:{quadPoints:v,rect:w,rotation:T,id:x,color:P,opacity:S,popupRef:L},parent:{page:{pageNumber:F}}}=e;s=e={annotationType:ye.HIGHLIGHT,color:Array.from(P),opacity:S,quadPoints:v,boxes:null,pageIndex:F-1,rect:w.slice(0),rotation:T,id:x,deleted:!1,popupRef:L}}else if(e instanceof Hg){const{data:{inkLists:v,rect:w,rotation:T,id:x,color:P,borderStyle:{rawWidth:S},popupRef:L},parent:{page:{pageNumber:F}}}=e;s=e={annotationType:ye.HIGHLIGHT,color:Array.from(P),thickness:S,inkLists:v,boxes:null,pageIndex:F-1,rect:w.slice(0),rotation:T,id:x,deleted:!1,popupRef:L}}const{color:r,quadPoints:o,inkLists:a,opacity:l}=e,c=await super.deserialize(e,t,i);c.color=ae.makeHexColor(...r),c.#o=l||1,a&&(c.#m=e.thickness),c.annotationElementId=e.id||null,c._initialData=s;const[d,f]=c.pageDimensions,[m,y]=c.pageTranslation;if(o){const v=c.#n=[];for(let w=0;w<o.length;w+=8)v.push({x:(o[w]-m)/d,y:1-(o[w+1]-y)/f,width:(o[w+2]-o[w])/d,height:(o[w+1]-o[w+5])/f});c.#w(),c.#P(),c.rotate(c.rotation)}else if(a){c.#d=!0;const v=a[0],w={x:v[0]-m,y:f-(v[1]-y)},T=new Sp(w,[0,0,d,f],1,c.#m/2,!0,.001);for(let S=0,L=v.length;S<L;S+=2)w.x=v[S]-m,w.y=f-(v[S+1]-y),T.add(w);const{id:x,clipPathId:P}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:c.color,"fill-opacity":c._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:T.toSVGPath()}},!0,!0);c.#v({highlightOutlines:T.getOutlines(),highlightId:x,clipPathId:P}),c.#P()}return c}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const t=this.getRect(0,0),i=de._colorManager.convert(this.color),s={annotationType:ye.HIGHLIGHT,color:i,opacity:this.#o,thickness:this.#m,quadPoints:this.#D(),outlines:this.#F(t),pageIndex:this.pageIndex,rect:t,rotation:this.#k(),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!this.#M(s)?null:(s.id=this.annotationElementId,s)}#M(e){const{color:t}=this._initialData;return e.color.some((i,s)=>i!==t[s])}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}}class dW{#e=Object.create(null);updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,i]of Object.entries(e))this.updateProperty(t,i)}updateSVGProperty(e,t){this.#e[e]=t}toSVGProperties(){const e=this.#e;return this.#e=Object.create(null),{root:e}}reset(){this.#e=Object.create(null)}updateAll(e=this){this.updateProperties(e)}clone(){Ue("Not implemented")}}class ue extends de{#e=null;#t;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#n=null;static#i=null;static#r=null;static#s=NaN;static#l=null;static#a=null;static#u=NaN;static _INNER_MARGIN=3;constructor(e){super(e),this.#t=e.mustBeCommitted||!1,e.drawOutlines&&(this.#c(e),this.#f())}#c({drawOutlines:e,drawId:t,drawingOptions:i}){this.#e=e,this._drawingOptions||=i,t>=0?(this._drawId=t,this.parent.drawLayer.finalizeDraw(t,e.defaultProperties)):this._drawId=this.#h(e,this.parent),this.#g(e.box)}#h(e,t){const{id:i}=t.drawLayer.draw(ue._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return i}static _mergeSVGProperties(e,t){const i=new Set(Object.keys(e));for(const[s,r]of Object.entries(t))i.has(s)?Object.assign(e[s],r):e[s]=r;return e}static getDefaultDrawingOptions(e){Ue("Not implemented")}static get typesMap(){Ue("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,t){const i=this.typesMap.get(e);i&&this._defaultDrawingOptions.updateProperty(i,t),this._currentParent&&(ue.#n.updateProperty(i,t),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,t){const i=this.constructor.typesMap.get(e);i&&this._updateProperty(e,i,t)}static get defaultPropertiesToUpdate(){const e=[],t=this._defaultDrawingOptions;for(const[i,s]of this.typesMap)e.push([i,t[s]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:t}=this;for(const[i,s]of this.constructor.typesMap)e.push([i,t[s]]);return e}_updateProperty(e,t,i){const s=this._drawingOptions,r=s[t],o=a=>{s.updateProperty(t,a);const l=this.#e.updateProperty(t,a);l&&this.#g(l),this.parent?.drawLayer.updateProperties(this._drawId,s.toSVGProperties())};this.addCommands({cmd:o.bind(this,i),undo:o.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,ue._mergeSVGProperties(this.#e.getPathResizingSVGProperties(this.#p()),{bbox:this.#m()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,ue._mergeSVGProperties(this.#e.getPathResizedSVGProperties(this.#p()),{bbox:this.#m()}))}_onTranslating(e,t){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#m(e,t)})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,ue._mergeSVGProperties(this.#e.getPathTranslatedSVGProperties(this.#p(),this.parentDimensions),{bbox:this.#m()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#t&&(this.#t=!1,this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){this.#d(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#f(),this.#g(this.#e.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),this.#d()):e&&(this._uiManager.addShouldRescale(this),this.#f(e),t=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),t&&this.select()}#d(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#f(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#h(this.#e,e)}}#o([e,t,i,s]){const{parentDimensions:[r,o],rotation:a}=this;switch(a){case 90:return[t,1-e,i*(o/r),s*(r/o)];case 180:return[1-e,1-t,i,s];case 270:return[1-t,e,i*(o/r),s*(r/o)];default:return[e,t,i,s]}}#p(){const{x:e,y:t,width:i,height:s,parentDimensions:[r,o],rotation:a}=this;switch(a){case 90:return[1-t,e,i*(r/o),s*(o/r)];case 180:return[1-e,1-t,i,s];case 270:return[t,1-e,i*(r/o),s*(o/r)];default:return[e,t,i,s]}}#g(e){if([this.x,this.y,this.width,this.height]=this.#o(e),this.div){this.fixAndSetPosition();const[t,i]=this.parentDimensions;this.setDims(this.width*t,this.height*i)}this._onResized()}#m(){const{x:e,y:t,width:i,height:s,rotation:r,parentRotation:o,parentDimensions:[a,l]}=this;switch((r*4+o)/90){case 1:return[1-t-s,e,s,i];case 2:return[1-e-i,1-t-s,i,s];case 3:return[t,1-e-i,s,i];case 4:return[e,t-i*(a/l),s*(l/a),i*(a/l)];case 5:return[1-t,e,i*(a/l),s*(l/a)];case 6:return[1-e-s*(l/a),1-t,s*(l/a),i*(a/l)];case 7:return[t-i*(a/l),1-e-s*(l/a),i*(a/l),s*(l/a)];case 8:return[e-i,t-s,i,s];case 9:return[1-t,e-i,s,i];case 10:return[1-e,1-t,i,s];case 11:return[t-s,1-e,s,i];case 12:return[e-s*(l/a),t,s*(l/a),i*(a/l)];case 13:return[1-t-i*(a/l),e-s*(l/a),i*(a/l),s*(l/a)];case 14:return[1-e,1-t-i*(a/l),s*(l/a),i*(a/l)];case 15:return[t,1-e,i*(a/l),s*(l/a)];default:return[e,t,i,s]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,ue._mergeSVGProperties({bbox:this.#m()},this.#e.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#g(this.#e.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;const e=super.render();e.classList.add("draw");const t=document.createElement("div");e.append(t),t.setAttribute("aria-hidden","true"),t.className="internal";const[i,s]=this.parentDimensions;return this.setDims(this.width*i,this.height*s),this._uiManager.addShouldRescale(this),this.disableEditing(),e}static createDrawerInstance(e,t,i,s,r){Ue("Not implemented")}static startDrawing(e,t,i,s){const{target:r,offsetX:o,offsetY:a,pointerId:l,pointerType:c}=s;if(ue.#l&&ue.#l!==c)return;const{viewport:{rotation:d}}=e,{width:f,height:m}=r.getBoundingClientRect(),y=ue.#i=new AbortController,v=e.combinedSignal(y);if(ue.#s||=l,ue.#l??=c,window.addEventListener("pointerup",w=>{ue.#s===w.pointerId?this._endDraw(w):ue.#a?.delete(w.pointerId)},{signal:v}),window.addEventListener("pointercancel",w=>{ue.#s===w.pointerId?this._currentParent.endDrawingSession():ue.#a?.delete(w.pointerId)},{signal:v}),window.addEventListener("pointerdown",w=>{ue.#l===w.pointerType&&((ue.#a||=new Set).add(w.pointerId),ue.#n.isCancellable()&&(ue.#n.removeLastElement(),ue.#n.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:v}),window.addEventListener("contextmenu",$n,{signal:v}),r.addEventListener("pointermove",this._drawMove.bind(this),{signal:v}),r.addEventListener("touchmove",w=>{w.timeStamp===ue.#u&&En(w)},{signal:v}),e.toggleDrawing(),t._editorUndoBar?.hide(),ue.#n){e.drawLayer.updateProperties(this._currentDrawId,ue.#n.startNew(o,a,f,m,d));return}t.updateUIForDefaultProperties(this),ue.#n=this.createDrawerInstance(o,a,f,m,d),ue.#r=this.getDefaultDrawingOptions(),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(ue.#r.toSVGProperties(),ue.#n.defaultSVGProperties),!0,!1)}static _drawMove(e){if(ue.#u=-1,!ue.#n)return;const{offsetX:t,offsetY:i,pointerId:s}=e;if(ue.#s===s){if(ue.#a?.size>=1){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,ue.#n.add(t,i)),ue.#u=e.timeStamp,En(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,ue.#n=null,ue.#r=null,ue.#l=null,ue.#u=NaN),ue.#i&&(ue.#i.abort(),ue.#i=null,ue.#s=NaN,ue.#a=null)}static _endDraw(e){const t=this._currentParent;if(t){if(t.toggleDrawing(!0),this._cleanup(!1),e&&t.drawLayer.updateProperties(this._currentDrawId,ue.#n.end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const i=ue.#n,s=this._currentDrawId,r=i.getLastElement();t.addCommands({cmd:()=>{t.drawLayer.updateProperties(s,i.setLastElement(r))},undo:()=>{t.drawLayer.updateProperties(s,i.removeLastElement())},mustExec:!1,type:Ce.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const t=this._currentParent;if(!t)return null;if(t.toggleDrawing(!0),t.cleanUndoStack(Ce.DRAW_STEP),!ue.#n.isEmpty()){const{pageDimensions:[i,s],scale:r}=t,o=t.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:ue.#n.getOutlines(i*r,s*r,r,this._INNER_MARGIN),drawingOptions:ue.#r,mustBeCommitted:!e});return this._cleanup(!0),o}return t.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,t,i,s,r,o){Ue("Not implemented")}static async deserialize(e,t,i){const{rawDims:{pageWidth:s,pageHeight:r,pageX:o,pageY:a}}=t.viewport,l=this.deserializeDraw(o,a,s,r,this._INNER_MARGIN,e),c=await super.deserialize(e,t,i);return c.createDrawingOptions(e),c.#c({drawOutlines:l}),c.#f(),c.onScaleChanging(),c.rotate(),c}serializeDraw(e){const[t,i]=this.pageTranslation,[s,r]=this.pageDimensions;return this.#e.serialize([t,i,s,r],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}}class hW{#e=new Float64Array(6);#t;#n;#i;#r;#s;#l="";#a=0;#u=new dh;#c;#h;constructor(e,t,i,s,r,o){this.#c=i,this.#h=s,this.#i=r,this.#r=o,[e,t]=this.#d(e,t);const a=this.#t=[NaN,NaN,NaN,NaN,e,t];this.#s=[e,t],this.#n=[{line:a,points:this.#s}],this.#e.set(a,0)}updateProperty(e,t){e==="stroke-width"&&(this.#r=t)}#d(e,t){return ee._normalizePoint(e,t,this.#c,this.#h,this.#i)}isEmpty(){return!this.#n||this.#n.length===0}isCancellable(){return this.#s.length<=10}add(e,t){[e,t]=this.#d(e,t);const[i,s,r,o]=this.#e.subarray(2,6),a=e-r,l=t-o;return Math.hypot(this.#c*a,this.#h*l)<=2?null:(this.#s.push(e,t),isNaN(i)?(this.#e.set([r,o,e,t],2),this.#t.push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(this.#e[0])&&this.#t.splice(6,6),this.#e.set([i,s,r,o,e,t],0),this.#t.push(...ee.createBezierPoints(i,s,r,o,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const i=this.add(e,t);return i||(this.#s.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,i,s,r){this.#c=i,this.#h=s,this.#i=r,[e,t]=this.#d(e,t);const o=this.#t=[NaN,NaN,NaN,NaN,e,t];this.#s=[e,t];const a=this.#n.at(-1);return a&&(a.line=new Float32Array(a.line),a.points=new Float32Array(a.points)),this.#n.push({line:o,points:this.#s}),this.#e.set(o,0),this.#a=0,this.toSVGPath(),null}getLastElement(){return this.#n.at(-1)}setLastElement(e){return this.#n?(this.#n.push(e),this.#t=e.line,this.#s=e.points,this.#a=0,{path:{d:this.toSVGPath()}}):this.#u.setLastElement(e)}removeLastElement(){if(!this.#n)return this.#u.removeLastElement();this.#n.pop(),this.#l="";for(let e=0,t=this.#n.length;e<t;e++){const{line:i,points:s}=this.#n[e];this.#t=i,this.#s=s,this.#a=0,this.toSVGPath()}return{path:{d:this.#l}}}toSVGPath(){const e=ee.svgRound(this.#t[4]),t=ee.svgRound(this.#t[5]);if(this.#s.length===2)return this.#l=`${this.#l} M ${e} ${t} Z`,this.#l;if(this.#s.length<=6){const s=this.#l.lastIndexOf("M");this.#l=`${this.#l.slice(0,s)} M ${e} ${t}`,this.#a=6}if(this.#s.length===4){const s=ee.svgRound(this.#t[10]),r=ee.svgRound(this.#t[11]);return this.#l=`${this.#l} L ${s} ${r}`,this.#a=12,this.#l}const i=[];this.#a===0&&(i.push(`M ${e} ${t}`),this.#a=6);for(let s=this.#a,r=this.#t.length;s<r;s+=6){const[o,a,l,c,d,f]=this.#t.slice(s,s+6).map(ee.svgRound);i.push(`C${o} ${a} ${l} ${c} ${d} ${f}`)}return this.#l+=i.join(" "),this.#a=this.#t.length,this.#l}getOutlines(e,t,i,s){const r=this.#n.at(-1);return r.line=new Float32Array(r.line),r.points=new Float32Array(r.points),this.#u.build(this.#n,e,t,i,this.#i,this.#r,s),this.#e=null,this.#t=null,this.#n=null,this.#l=null,this.#u}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class dh extends ee{#e;#t=0;#n;#i;#r;#s;#l;#a;#u;build(e,t,i,s,r,o,a){this.#r=t,this.#s=i,this.#l=s,this.#a=r,this.#u=o,this.#n=a??0,this.#i=e,this.#d()}setLastElement(e){return this.#i.push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#i.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:t}of this.#i){if(e.push(`M${ee.svgRound(t[4])} ${ee.svgRound(t[5])}`),t.length===6){e.push("Z");continue}if(t.length===12){e.push(`L${ee.svgRound(t[10])} ${ee.svgRound(t[11])}`);continue}for(let i=6,s=t.length;i<s;i+=6){const[r,o,a,l,c,d]=t.subarray(i,i+6).map(ee.svgRound);e.push(`C${r} ${o} ${a} ${l} ${c} ${d}`)}}return e.join("")}serialize([e,t,i,s],r){const o=[],a=[],[l,c,d,f]=this.#h();let m,y,v,w,T,x,P,S,L;switch(this.#a){case 0:L=ee._rescale,m=e,y=t+s,v=i,w=-s,T=e+l*i,x=t+(1-c-f)*s,P=e+(l+d)*i,S=t+(1-c)*s;break;case 90:L=ee._rescaleAndSwap,m=e,y=t,v=i,w=s,T=e+c*i,x=t+l*s,P=e+(c+f)*i,S=t+(l+d)*s;break;case 180:L=ee._rescale,m=e+i,y=t,v=-i,w=s,T=e+(1-l-d)*i,x=t+c*s,P=e+(1-l)*i,S=t+(c+f)*s;break;case 270:L=ee._rescaleAndSwap,m=e+i,y=t+s,v=-i,w=-s,T=e+(1-c-f)*i,x=t+(1-l-d)*s,P=e+(1-c)*i,S=t+(1-l)*s;break}for(const{line:F,points:U}of this.#i)o.push(L(F,m,y,v,w,r?new Array(F.length):null)),a.push(L(U,m,y,v,w,r?new Array(U.length):null));return{lines:o,points:a,rect:[T,x,P,S]}}static deserialize(e,t,i,s,r,{paths:{lines:o,points:a},rotation:l,thickness:c}){const d=[];let f,m,y,v,w;switch(l){case 0:w=ee._rescale,f=-e/i,m=t/s+1,y=1/i,v=-1/s;break;case 90:w=ee._rescaleAndSwap,f=-t/s,m=-e/i,y=1/s,v=1/i;break;case 180:w=ee._rescale,f=e/i+1,m=-t/s,y=-1/i,v=1/s;break;case 270:w=ee._rescaleAndSwap,f=t/s+1,m=e/i+1,y=-1/s,v=-1/i;break}if(!o){o=[];for(const x of a){const P=x.length;if(P===2){o.push(new Float32Array([NaN,NaN,NaN,NaN,x[0],x[1]]));continue}if(P===4){o.push(new Float32Array([NaN,NaN,NaN,NaN,x[0],x[1],NaN,NaN,NaN,NaN,x[2],x[3]]));continue}const S=new Float32Array(3*(P-2));o.push(S);let[L,F,U,C]=x.subarray(0,4);S.set([NaN,NaN,NaN,NaN,L,F],0);for(let A=4;A<P;A+=2){const E=x[A],D=x[A+1];S.set(ee.createBezierPoints(L,F,U,C,E,D),(A-2)*3),[L,F,U,C]=[U,C,E,D]}}}for(let x=0,P=o.length;x<P;x++)d.push({line:w(o[x].map(S=>S??NaN),f,m,y,v),points:w(a[x].map(S=>S??NaN),f,m,y,v)});const T=new dh;return T.build(d,i,s,1,l,c,r),T}#c(e=this.#u){const t=this.#n+e/2*this.#l;return this.#a%180===0?[t/this.#r,t/this.#s]:[t/this.#s,t/this.#r]}#h(){const[e,t,i,s]=this.#e,[r,o]=this.#c(0);return[e+r,t+o,i-2*r,s-2*o]}#d(){const e=this.#e=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:s}of this.#i){if(s.length<=12){for(let a=4,l=s.length;a<l;a+=6){const[c,d]=s.subarray(a,a+2);e[0]=Math.min(e[0],c),e[1]=Math.min(e[1],d),e[2]=Math.max(e[2],c),e[3]=Math.max(e[3],d)}continue}let r=s[4],o=s[5];for(let a=6,l=s.length;a<l;a+=6){const[c,d,f,m,y,v]=s.subarray(a,a+6);ae.bezierBoundingBox(r,o,c,d,f,m,y,v,e),r=y,o=v}}const[t,i]=this.#c();e[0]=Math.min(1,Math.max(0,e[0]-t)),e[1]=Math.min(1,Math.max(0,e[1]-i)),e[2]=Math.min(1,Math.max(0,e[2]+t)),e[3]=Math.min(1,Math.max(0,e[3]+i)),e[2]-=e[0],e[3]-=e[1]}get box(){return this.#e}updateProperty(e,t){return e==="stroke-width"?this.#f(t):null}#f(e){const[t,i]=this.#c();this.#u=e;const[s,r]=this.#c(),[o,a]=[s-t,r-i],l=this.#e;return l[0]-=o,l[1]-=a,l[2]+=2*o,l[3]+=2*a,l}updateParentDimensions([e,t],i){const[s,r]=this.#c();this.#r=e,this.#s=t,this.#l=i;const[o,a]=this.#c(),l=o-s,c=a-r,d=this.#e;return d[0]-=l,d[1]-=c,d[2]+=2*l,d[3]+=2*c,d}updateRotation(e){return this.#t=e,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#e.map(ee.svgRound).join(" ")}get defaultProperties(){const[e,t]=this.#e;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ee.svgRound(e)} ${ee.svgRound(t)}`}}}get rotationTransform(){const[,,e,t]=this.#e;let i=0,s=0,r=0,o=0,a=0,l=0;switch(this.#t){case 90:s=t/e,r=-e/t,a=e;break;case 180:i=-1,o=-1,a=e,l=t;break;case 270:s=-t/e,r=e/t,l=t;break;default:return""}return`matrix(${i} ${s} ${r} ${o} ${ee.svgRound(a)} ${ee.svgRound(l)})`}getPathResizingSVGProperties([e,t,i,s]){const[r,o]=this.#c(),[a,l,c,d]=this.#e;if(Math.abs(c-r)<=ee.PRECISION||Math.abs(d-o)<=ee.PRECISION){const w=e+i/2-(a+c/2),T=t+s/2-(l+d/2);return{path:{"transform-origin":`${ee.svgRound(e)} ${ee.svgRound(t)}`,transform:`${this.rotationTransform} translate(${w} ${T})`}}}const f=(i-2*r)/(c-2*r),m=(s-2*o)/(d-2*o),y=c/i,v=d/s;return{path:{"transform-origin":`${ee.svgRound(a)} ${ee.svgRound(l)}`,transform:`${this.rotationTransform} scale(${y} ${v}) translate(${ee.svgRound(r)} ${ee.svgRound(o)}) scale(${f} ${m}) translate(${ee.svgRound(-r)} ${ee.svgRound(-o)})`}}}getPathResizedSVGProperties([e,t,i,s]){const[r,o]=this.#c(),a=this.#e,[l,c,d,f]=a;if(a[0]=e,a[1]=t,a[2]=i,a[3]=s,Math.abs(d-r)<=ee.PRECISION||Math.abs(f-o)<=ee.PRECISION){const T=e+i/2-(l+d/2),x=t+s/2-(c+f/2);for(const{line:P,points:S}of this.#i)ee._translate(P,T,x,P),ee._translate(S,T,x,S);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ee.svgRound(e)} ${ee.svgRound(t)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const m=(i-2*r)/(d-2*r),y=(s-2*o)/(f-2*o),v=-m*(l+r)+e+r,w=-y*(c+o)+t+o;if(m!==1||y!==1||v!==0||w!==0)for(const{line:T,points:x}of this.#i)ee._rescale(T,v,w,m,y,T),ee._rescale(x,v,w,m,y,x);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ee.svgRound(e)} ${ee.svgRound(t)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,t],i){const[s,r]=i,o=this.#e,a=e-o[0],l=t-o[1];if(this.#r===s&&this.#s===r)for(const{line:c,points:d}of this.#i)ee._translate(c,a,l,c),ee._translate(d,a,l,d);else{const c=this.#r/s,d=this.#s/r;this.#r=s,this.#s=r;for(const{line:f,points:m}of this.#i)ee._rescale(f,a,l,c,d,f),ee._rescale(m,a,l,c,d,m);o[2]*=c,o[3]*=d}return o[0]=e,o[1]=t,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${ee.svgRound(e)} ${ee.svgRound(t)}`}}}get defaultSVGProperties(){const e=this.#e;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${ee.svgRound(e[0])} ${ee.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}}class Gg extends dW{#e;constructor(e){super(),this.#e=e,super.updateProperties({fill:"none",stroke:de._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){e==="stroke-width"&&(t??=this["stroke-width"],t*=this.#e.realScale),super.updateSVGProperty(e,t)}clone(){const e=new Gg(this.#e);return e.updateAll(this),e}}class $g extends ue{static _type="ink";static _editorType=ye.INK;static _defaultDrawingOptions=null;constructor(e){super({...e,name:"inkEditor"}),this._willKeepAspectRatio=!0}static initialize(e,t){de.initialize(e,t),this._defaultDrawingOptions=new Gg(t.viewParameters)}static getDefaultDrawingOptions(e){const t=this._defaultDrawingOptions.clone();return t.updateProperties(e),t}static get supportMultipleDrawings(){return!0}static get typesMap(){return _e(this,"typesMap",new Map([[Ce.INK_THICKNESS,"stroke-width"],[Ce.INK_COLOR,"stroke"],[Ce.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,t,i,s,r){return new hW(e,t,i,s,r,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,t,i,s,r,o){return dh.deserialize(e,t,i,s,r,o)}static async deserialize(e,t,i){let s=null;if(e instanceof Hg){const{data:{inkLists:o,rect:a,rotation:l,id:c,color:d,opacity:f,borderStyle:{rawWidth:m},popupRef:y},parent:{page:{pageNumber:v}}}=e;s=e={annotationType:ye.INK,color:Array.from(d),thickness:m,opacity:f,paths:{points:o},boxes:null,pageIndex:v-1,rect:a.slice(0),rotation:l,id:c,deleted:!1,popupRef:y}}const r=await super.deserialize(e,t,i);return r.annotationElementId=e.id||null,r._initialData=s,r}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:t,parent:i}=this;t.updateSVGProperty("stroke-width"),i.drawLayer.updateProperties(e,t.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:t,opacity:i}){this._drawingOptions=$g.getDefaultDrawingOptions({stroke:ae.makeHexColor(...e),"stroke-width":t,"stroke-opacity":i})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:t,points:i,rect:s}=this.serializeDraw(e),{_drawingOptions:{stroke:r,"stroke-opacity":o,"stroke-width":a}}=this,l={annotationType:ye.INK,color:de._colorManager.convert(r),opacity:o,thickness:a,paths:{lines:t,points:i},pageIndex:this.pageIndex,rect:s,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?l:this.annotationElementId&&!this.#e(l)?null:(l.id=this.annotationElementId,l)}#e(e){const{color:t,thickness:i,opacity:s,pageIndex:r}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||e.color.some((o,a)=>o!==t[a])||e.thickness!==i||e.opacity!==s||e.pageIndex!==r}renderAnnotationElement(e){const{points:t,rect:i}=this.serializeDraw(!1);return e.updateEdited({rect:i,thickness:this._drawingOptions["stroke-width"],points:t}),null}}class jg extends de{#e=null;#t=null;#n=null;#i=null;#r=null;#s="";#l=null;#a=null;#u=!1;#c=!1;static _type="stamp";static _editorType=ye.STAMP;constructor(e){super({...e,name:"stampEditor"}),this.#i=e.bitmapUrl,this.#r=e.bitmapFile}static initialize(e,t){de.initialize(e,t)}static get supportedTypes(){return _e(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(t=>`image/${t}`))}static get supportedTypesStr(){return _e(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(e){return this.supportedTypes.includes(e)}static paste(e,t){t.pasteEditor(ye.STAMP,{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(e){const t=e.get("hasAltText");return{hasAltText:t.get(!0)??0,hasNoAltText:t.get(!1)??0}}#h(e,t=!1){if(!e){this.remove();return}this.#e=e.bitmap,t||(this.#t=e.id,this.#u=e.isSvg),e.file&&(this.#s=e.file.name),this.#o()}#d(){if(this.#n=null,this._uiManager.enableWaiting(!1),!!this.#l){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(e=null,t=!0){if(this.hasAltTextData())return null;const{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!await i.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:s,width:r,height:o}=e||this.copyCanvas(null,null,!0).imageData,a=await i.guess({name:"altText",request:{data:s,width:r,height:o,channels:s.length/(r*o)}});if(!a)throw new Error("No response from the AI service.");if(a.error)throw new Error("Error from the AI service.");if(a.cancel)return null;if(!a.output)throw new Error("No valid response from the AI service.");const l=a.output;return await this.setGuessedAltText(l),t&&!this.hasAltTextData()&&(this.altTextData={alt:l,decorative:!1}),l}#f(){if(this.#t){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#t).then(i=>this.#h(i,!0)).finally(()=>this.#d());return}if(this.#i){const i=this.#i;this.#i=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromUrl(i).then(s=>this.#h(s)).finally(()=>this.#d());return}if(this.#r){const i=this.#r;this.#r=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromFile(i).then(s=>this.#h(s)).finally(()=>this.#d());return}const e=document.createElement("input");e.type="file",e.accept=jg.supportedTypesStr;const t=this._uiManager._signal;this.#n=new Promise(i=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const s=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#h(s)}i()},{signal:t}),e.addEventListener("cancel",()=>{this.remove(),i()},{signal:t})}).finally(()=>this.#d()),e.click()}remove(){this.#t&&(this.#e=null,this._uiManager.imageManager.deleteId(this.#t),this.#l?.remove(),this.#l=null,this.#a&&(clearTimeout(this.#a),this.#a=null)),super.remove()}rebuild(){if(!this.parent){this.#t&&this.#f();return}super.rebuild(),this.div!==null&&(this.#t&&this.#l===null&&this.#f(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(this.#n||this.#e||this.#i||this.#r||this.#t)}get isResizable(){return!0}render(){if(this.div)return this.div;let e,t;if(this.width&&(e=this.x,t=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),this.#e?this.#o():this.#f(),this.width&&!this.annotationElementId){const[i,s]=this.parentDimensions;this.setAt(e*i,t*s,this.width*i,this.height*s)}return this._uiManager.addShouldRescale(this),this.div}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#a!==null&&clearTimeout(this.#a);const e=200;this.#a=setTimeout(()=>{this.#a=null,this.#g()},e)}#o(){const{div:e}=this;let{width:t,height:i}=this.#e;const[s,r]=this.pageDimensions,o=.75;if(this.width)t=this.width*s,i=this.height*r;else if(t>o*s||i>o*r){const d=Math.min(o*s/t,o*r/i);t*=d,i*=d}const[a,l]=this.parentDimensions;this.setDims(t*a/s,i*l/r),this._uiManager.enableWaiting(!1);const c=this.#l=document.createElement("canvas");c.setAttribute("role","img"),this.addContainer(c),this.width=t/s,this.height=i/r,this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),this.#g(),this.#c||(this.parent.addUndoableEditor(this),this.#c=!0),this._reportTelemetry({action:"inserted_image"}),this.#s&&c.setAttribute("aria-label",this.#s)}copyCanvas(e,t,i=!1){e||(e=224);const{width:s,height:r}=this.#e,o=new xp;let a=this.#e,l=s,c=r,d=null;if(t){if(s>t||r>t){const U=Math.min(t/s,t/r);l=Math.floor(s*U),c=Math.floor(r*U)}d=document.createElement("canvas");const m=d.width=Math.ceil(l*o.sx),y=d.height=Math.ceil(c*o.sy);this.#u||(a=this.#p(m,y));const v=d.getContext("2d");v.filter=this._uiManager.hcmFilter;let w="white",T="#cfcfd8";this._uiManager.hcmFilter!=="none"?T="black":window.matchMedia?.("(prefers-color-scheme: dark)").matches&&(w="#8f8f9d",T="#42414d");const x=15,P=x*o.sx,S=x*o.sy,L=new OffscreenCanvas(P*2,S*2),F=L.getContext("2d");F.fillStyle=w,F.fillRect(0,0,P*2,S*2),F.fillStyle=T,F.fillRect(0,0,P,S),F.fillRect(P,S,P,S),v.fillStyle=v.createPattern(L,"repeat"),v.fillRect(0,0,m,y),v.drawImage(a,0,0,a.width,a.height,0,0,m,y)}let f=null;if(i){let m,y;if(o.symmetric&&a.width<e&&a.height<e)m=a.width,y=a.height;else if(a=this.#e,s>e||r>e){const T=Math.min(e/s,e/r);m=Math.floor(s*T),y=Math.floor(r*T),this.#u||(a=this.#p(m,y))}const w=new OffscreenCanvas(m,y).getContext("2d",{willReadFrequently:!0});w.drawImage(a,0,0,a.width,a.height,0,0,m,y),f={width:m,height:y,data:w.getImageData(0,0,m,y).data}}return{canvas:d,width:l,height:c,imageData:f}}#p(e,t){const{width:i,height:s}=this.#e;let r=i,o=s,a=this.#e;for(;r>2*e||o>2*t;){const l=r,c=o;r>2*e&&(r=r>=16384?Math.floor(r/2)-1:Math.ceil(r/2)),o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2));const d=new OffscreenCanvas(r,o);d.getContext("2d").drawImage(a,0,0,l,c,0,0,r,o),a=d.transferToImageBitmap()}return a}#g(){const[e,t]=this.parentDimensions,{width:i,height:s}=this,r=new xp,o=Math.ceil(i*e*r.sx),a=Math.ceil(s*t*r.sy),l=this.#l;if(!l||l.width===o&&l.height===a)return;l.width=o,l.height=a;const c=this.#u?this.#e:this.#p(o,a),d=l.getContext("2d");d.filter=this._uiManager.hcmFilter,d.drawImage(c,0,0,c.width,c.height,0,0,o,a)}getImageForAltText(){return this.#l}#m(e){if(e){if(this.#u){const s=this._uiManager.imageManager.getSvgUrl(this.#t);if(s)return s}const t=document.createElement("canvas");return{width:t.width,height:t.height}=this.#e,t.getContext("2d").drawImage(this.#e,0,0),t.toDataURL()}if(this.#u){const[t,i]=this.pageDimensions,s=Math.round(this.width*t*jo.PDF_TO_CSS_UNITS),r=Math.round(this.height*i*jo.PDF_TO_CSS_UNITS),o=new OffscreenCanvas(s,r);return o.getContext("2d").drawImage(this.#e,0,0,this.#e.width,this.#e.height,0,0,s,r),o.transferToImageBitmap()}return structuredClone(this.#e)}static async deserialize(e,t,i){let s=null;if(e instanceof JA){const{data:{rect:v,rotation:w,id:T,structParent:x,popupRef:P},container:S,parent:{page:{pageNumber:L}}}=e,F=S.querySelector("canvas"),U=i.imageManager.getFromCanvas(S.id,F);F.remove();const C=(await t._structTree.getAriaAttributes(`${Ng}${T}`))?.get("aria-label")||"";s=e={annotationType:ye.STAMP,bitmapId:U.id,bitmap:U.bitmap,pageIndex:L-1,rect:v.slice(0),rotation:w,id:T,deleted:!1,accessibilityData:{decorative:!1,altText:C},isSvg:!1,structParent:x,popupRef:P}}const r=await super.deserialize(e,t,i),{rect:o,bitmap:a,bitmapUrl:l,bitmapId:c,isSvg:d,accessibilityData:f}=e;c&&i.imageManager.isValidId(c)?(r.#t=c,a&&(r.#e=a)):r.#i=l,r.#u=d;const[m,y]=r.pageDimensions;return r.width=(o[2]-o[0])/m,r.height=(o[3]-o[1])/y,r.annotationElementId=e.id||null,f&&(r.altTextData=f),r._initialData=s,r.#c=!!s,r}serialize(e=!1,t=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i={annotationType:ye.STAMP,bitmapId:this.#t,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#u,structTreeParentId:this._structTreeParentId};if(e)return i.bitmapUrl=this.#m(!0),i.accessibilityData=this.serializeAltText(!0),i;const{decorative:s,altText:r}=this.serializeAltText(!1);if(!s&&r&&(i.accessibilityData={type:"Figure",alt:r}),this.annotationElementId){const a=this.#y(i);if(a.isSame)return null;a.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1}if(i.id=this.annotationElementId,t===null)return i;t.stamps||=new Map;const o=this.#u?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!t.stamps.has(this.#t))t.stamps.set(this.#t,{area:o,serialized:i}),i.bitmap=this.#m(!1);else if(this.#u){const a=t.stamps.get(this.#t);o>a.area&&(a.area=o,a.serialized.bitmap.close(),a.serialized.bitmap=this.#m(!1))}return i}#y(e){const{pageIndex:t,accessibilityData:{altText:i}}=this._initialData,s=e.pageIndex===t,r=(e.accessibilityData?.alt||"")===i;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&s&&r,isSameAltText:r}}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}}class wi{#e;#t=!1;#n=null;#i=null;#r=null;#s=new Map;#l=!1;#a=!1;#u=!1;#c=null;#h=null;#d=null;#f=null;#o;static _initialized=!1;static#p=new Map([bt,$g,jg,lt].map(e=>[e._editorType,e]));constructor({uiManager:e,pageIndex:t,div:i,structTreeLayer:s,accessibilityManager:r,annotationLayer:o,drawLayer:a,textLayer:l,viewport:c,l10n:d}){const f=[...wi.#p.values()];if(!wi._initialized){wi._initialized=!0;for(const m of f)m.initialize(d,e)}e.registerEditorTypes(f),this.#o=e,this.pageIndex=t,this.div=i,this.#e=r,this.#n=o,this.viewport=c,this.#d=l,this.drawLayer=a,this._structTree=s,this.#o.addLayer(this)}get isEmpty(){return this.#s.size===0}get isInvisible(){return this.isEmpty&&this.#o.getMode()===ye.NONE}updateToolbar(e){this.#o.updateToolbar(e)}updateMode(e=this.#o.getMode()){switch(this.#v(),e){case ye.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case ye.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case ye.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const i of wi.#p.values())t.toggle(`${i._type}Editing`,e===i._editorType);this.div.hidden=!1}hasTextLayer(e){return e===this.#d?.div}setEditingState(e){this.#o.setEditingState(e)}addCommands(e){this.#o.addCommands(e)}cleanUndoStack(e){this.#o.cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){this.#n?.div.classList.toggle("disabled",!e)}async enable(){this.#u=!0,this.div.tabIndex=0,this.togglePointerEvents(!0);const e=new Set;for(const i of this.#s.values())i.enableEditing(),i.show(!0),i.annotationElementId&&(this.#o.removeChangedExistingAnnotation(i),e.add(i.annotationElementId));if(!this.#n){this.#u=!1;return}const t=this.#n.getEditableAnnotations();for(const i of t){if(i.hide(),this.#o.isDeletedAnnotationElement(i.data.id)||e.has(i.data.id))continue;const s=await this.deserialize(i);s&&(this.addOrRebuild(s),s.enableEditing())}this.#u=!1}disable(){this.#a=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1);const e=new Map,t=new Map;for(const s of this.#s.values())if(s.disableEditing(),!!s.annotationElementId){if(s.serialize()!==null){e.set(s.annotationElementId,s);continue}else t.set(s.annotationElementId,s);this.getEditableAnnotation(s.annotationElementId)?.show(),s.remove()}if(this.#n){const s=this.#n.getEditableAnnotations();for(const r of s){const{id:o}=r.data;if(this.#o.isDeletedAnnotationElement(o))continue;let a=t.get(o);if(a){a.resetAnnotationElement(r),a.show(!1),r.show();continue}a=e.get(o),a&&(this.#o.addChangedExistingAnnotation(a),a.renderAnnotationElement(r)&&a.show(!1)),r.show()}}this.#v(),this.isEmpty&&(this.div.hidden=!0);const{classList:i}=this.div;for(const s of wi.#p.values())i.remove(`${s._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#a=!1}getEditableAnnotation(e){return this.#n?.getEditableAnnotation(e)||null}setActiveEditor(e){this.#o.getActive()!==e&&this.#o.setActiveEditor(e)}enableTextSelection(){if(this.div.tabIndex=-1,this.#d?.div&&!this.#f){this.#f=new AbortController;const e=this.#o.combinedSignal(this.#f);this.#d.div.addEventListener("pointerdown",this.#g.bind(this),{signal:e}),this.#d.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#d?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#d.div.classList.remove("highlighting"))}#g(e){this.#o.unselectAll();const{target:t}=e;if(t===this.#d.div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&this.#d.div.contains(t)){const{isMac:i}=cn.platform;if(e.button!==0||e.ctrlKey&&i)return;this.#o.showAllEditors("highlight",!0,!0),this.#d.div.classList.add("free"),this.toggleDrawing(),lt.startHighlighting(this,this.#o.direction==="ltr",{target:this.#d.div,x:e.x,y:e.y}),this.#d.div.addEventListener("pointerup",()=>{this.#d.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#o._signal}),e.preventDefault()}}enableClick(){if(this.#i)return;this.#i=new AbortController;const e=this.#o.combinedSignal(this.#i);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){this.#i?.abort(),this.#i=null}attach(e){this.#s.set(e.id,e);const{annotationElementId:t}=e;t&&this.#o.isDeletedAnnotationElement(t)&&this.#o.removeDeletedAnnotationElement(e)}detach(e){this.#s.delete(e.id),this.#e?.removePointerInTextLayer(e.contentDiv),!this.#a&&e.annotationElementId&&this.#o.addDeletedAnnotationElement(e)}remove(e){this.detach(e),this.#o.removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){e.parent!==this&&(e.parent&&e.annotationElementId&&(this.#o.addDeletedAnnotationElement(e.annotationElementId),de.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),e.parent?.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),this.#o.addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!this.#u),this.#o.addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!this.#r&&(e._focusEventsAllowed=!1,this.#r=setTimeout(()=>{this.#r=null,e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this.#o._signal}),t.focus())},0)),e._structTreeParentId=this.#e?.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||=this,e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),i=()=>{e.remove()};this.addCommands({cmd:t,undo:i,mustExec:!1})}getNextId(){return this.#o.getId()}get#m(){return wi.#p.get(this.#o.getMode())}combinedSignal(e){return this.#o.combinedSignal(e)}#y(e){const t=this.#m;return t?new t.prototype.constructor(e):null}canCreateNewEmptyEditor(){return this.#m?.canCreateNewEmptyEditor()}pasteEditor(e,t){this.#o.updateToolbar(e),this.#o.updateMode(e);const{offsetX:i,offsetY:s}=this.#w(),r=this.getNextId(),o=this.#y({parent:this,id:r,x:i,y:s,uiManager:this.#o,isCentered:!0,...t});o&&this.add(o)}async deserialize(e){return await wi.#p.get(e.annotationType??e.annotationEditorType)?.deserialize(e,this,this.#o)||null}createAndAddNewEditor(e,t,i={}){const s=this.getNextId(),r=this.#y({parent:this,id:s,x:e.offsetX,y:e.offsetY,uiManager:this.#o,isCentered:t,...i});return r&&this.add(r),r}#w(){const{x:e,y:t,width:i,height:s}=this.div.getBoundingClientRect(),r=Math.max(0,e),o=Math.max(0,t),a=Math.min(window.innerWidth,e+i),l=Math.min(window.innerHeight,t+s),c=(r+a)/2-e,d=(o+l)/2-t,[f,m]=this.viewport.rotation%180===0?[c,d]:[d,c];return{offsetX:f,offsetY:m}}addNewEditor(){this.createAndAddNewEditor(this.#w(),!0)}setSelected(e){this.#o.setSelected(e)}toggleSelected(e){this.#o.toggleSelected(e)}unselect(e){this.#o.unselect(e)}pointerup(e){const{isMac:t}=cn.platform;if(!(e.button!==0||e.ctrlKey&&t)&&e.target===this.div&&this.#l&&(this.#l=!1,!(this.#m?.isDrawer&&this.#m.supportMultipleDrawings))){if(!this.#t){this.#t=!0;return}if(this.#o.getMode()===ye.STAMP){this.#o.unselectAll();return}this.createAndAddNewEditor(e,!1)}}pointerdown(e){if(this.#o.getMode()===ye.HIGHLIGHT&&this.enableTextSelection(),this.#l){this.#l=!1;return}const{isMac:t}=cn.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(this.#l=!0,this.#m?.isDrawer){this.startDrawingSession(e);return}const i=this.#o.getActive();this.#t=!i||i.isEmpty()}startDrawingSession(e){if(this.div.focus(),this.#c){this.#m.startDrawing(this,this.#o,!1,e);return}this.#o.setCurrentDrawingSession(this),this.#c=new AbortController;const t=this.#o.combinedSignal(this.#c);this.div.addEventListener("blur",({relatedTarget:i})=>{i&&!this.div.contains(i)&&(this.#h=null,this.commitOrRemove())},{signal:t}),this.#m.startDrawing(this,this.#o,!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&(this.#h=t);return}this.#h&&setTimeout(()=>{this.#h?.focus(),this.#h=null},0)}endDrawingSession(e=!1){return this.#c?(this.#o.setCurrentDrawingSession(null),this.#c.abort(),this.#c=null,this.#h=null,this.#m.endDrawing(e)):null}findNewParent(e,t,i){const s=this.#o.findParent(t,i);return s===null||s===this?!1:(s.changeParent(e),!0)}commitOrRemove(){return this.#c?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#c&&this.#m.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#o.getActive()?.parent===this&&(this.#o.commitOrRemove(),this.#o.setActiveEditor(null)),this.#r&&(clearTimeout(this.#r),this.#r=null);for(const e of this.#s.values())this.#e?.removePointerInTextLayer(e.contentDiv),e.setParent(null),e.isAttachedToDOM=!1,e.div.remove();this.div=null,this.#s.clear(),this.#o.removeLayer(this)}#v(){for(const e of this.#s.values())e.isEmpty()&&e.remove()}render({viewport:e}){this.viewport=e,Ar(this.div,e);for(const t of this.#o.getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){this.#o.commitOrRemove(),this.#v();const t=this.viewport.rotation,i=e.rotation;if(this.viewport=e,Ar(this.div,{rotation:i}),t!==i)for(const s of this.#s.values())s.rotate(i)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return this.#o.viewParameters.realScale}}class tn{#e=null;#t=0;#n=new Map;#i=new Map;constructor({pageIndex:e}){this.pageIndex=e}setParent(e){if(!this.#e){this.#e=e;return}if(this.#e!==e){if(this.#n.size>0)for(const t of this.#n.values())t.remove(),e.append(t);this.#e=e}}static get _svgFactory(){return _e(this,"_svgFactory",new qg)}static#r(e,[t,i,s,r]){const{style:o}=e;o.top=`${100*i}%`,o.left=`${100*t}%`,o.width=`${100*s}%`,o.height=`${100*r}%`}#s(){const e=tn._svgFactory.create(1,1,!0);return this.#e.append(e),e.setAttribute("aria-hidden",!0),e}#l(e,t){const i=tn._svgFactory.createElement("clipPath");e.append(i);const s=`clip_${t}`;i.setAttribute("id",s),i.setAttribute("clipPathUnits","objectBoundingBox");const r=tn._svgFactory.createElement("use");return i.append(r),r.setAttribute("href",`#${t}`),r.classList.add("clip"),s}#a(e,t){for(const[i,s]of Object.entries(t))s===null?e.removeAttribute(i):e.setAttribute(i,s)}draw(e,t=!1,i=!1){const s=this.#t++,r=this.#s(),o=tn._svgFactory.createElement("defs");r.append(o);const a=tn._svgFactory.createElement("path");o.append(a);const l=`path_p${this.pageIndex}_${s}`;a.setAttribute("id",l),a.setAttribute("vector-effect","non-scaling-stroke"),t&&this.#i.set(s,a);const c=i?this.#l(o,l):null,d=tn._svgFactory.createElement("use");return r.append(d),d.setAttribute("href",`#${l}`),this.updateProperties(r,e),this.#n.set(s,r),{id:s,clipPathId:`url(#${c})`}}drawOutline(e,t){const i=this.#t++,s=this.#s(),r=tn._svgFactory.createElement("defs");s.append(r);const o=tn._svgFactory.createElement("path");r.append(o);const a=`path_p${this.pageIndex}_${i}`;o.setAttribute("id",a),o.setAttribute("vector-effect","non-scaling-stroke");let l;if(t){const f=tn._svgFactory.createElement("mask");r.append(f),l=`mask_p${this.pageIndex}_${i}`,f.setAttribute("id",l),f.setAttribute("maskUnits","objectBoundingBox");const m=tn._svgFactory.createElement("rect");f.append(m),m.setAttribute("width","1"),m.setAttribute("height","1"),m.setAttribute("fill","white");const y=tn._svgFactory.createElement("use");f.append(y),y.setAttribute("href",`#${a}`),y.setAttribute("stroke","none"),y.setAttribute("fill","black"),y.setAttribute("fill-rule","nonzero"),y.classList.add("mask")}const c=tn._svgFactory.createElement("use");s.append(c),c.setAttribute("href",`#${a}`),l&&c.setAttribute("mask",`url(#${l})`);const d=c.cloneNode();return s.append(d),c.classList.add("mainOutline"),d.classList.add("secondaryOutline"),this.updateProperties(s,e),this.#n.set(i,s),i}finalizeDraw(e,t){this.#i.delete(e),this.updateProperties(e,t)}updateProperties(e,t){if(!t)return;const{root:i,bbox:s,rootClass:r,path:o}=t,a=typeof e=="number"?this.#n.get(e):e;if(a){if(i&&this.#a(a,i),s&&tn.#r(a,s),r){const{classList:l}=a;for(const[c,d]of Object.entries(r))l.toggle(c,d)}if(o){const c=a.firstChild.firstChild;this.#a(c,o)}}}updateParent(e,t){if(t===this)return;const i=this.#n.get(e);i&&(t.#e.append(i),this.#n.delete(e),t.#n.set(e,i))}remove(e){this.#i.delete(e),this.#e!==null&&(this.#n.get(e).remove(),this.#n.delete(e))}destroy(){this.#e=null;for(const e of this.#n.values())e.remove();this.#n.clear(),this.#i.clear()}}globalThis.pdfjsTestingUtils={HighlightOutliner:Cp};fe.AbortException;fe.AnnotationEditorLayer;fe.AnnotationEditorParamsType;fe.AnnotationEditorType;fe.AnnotationEditorUIManager;fe.AnnotationLayer;fe.AnnotationMode;fe.ColorPicker;fe.DOMSVGFactory;fe.DrawLayer;fe.FeatureTest;var fW=fe.GlobalWorkerOptions;fe.ImageKind;fe.InvalidPDFException;fe.MissingPDFException;fe.OPS;fe.OutputScale;fe.PDFDataRangeTransport;fe.PDFDateString;fe.PDFWorker;fe.PasswordResponses;fe.PermissionFlag;fe.PixelsPerInch;fe.RenderingCancelledException;fe.TextLayer;fe.TouchManager;fe.UnexpectedResponseException;fe.Util;fe.VerbosityLevel;fe.XfaLayer;fe.build;fe.createValidAbsoluteUrl;fe.fetchData;var vK=fe.getDocument;fe.getFilenameFromUrl;fe.getPdfFilenameFromUrl;fe.getXfaPageViewport;fe.isDataScheme;fe.isPdfFile;fe.noContextMenu;fe.normalizeUnicode;fe.setLayerDimensions;fe.shadow;fe.stopEvent;var pW=fe.version;fW.workerSrc=`https://cdn.jsdelivr.net/npm/pdfjs-dist@${pW}/build/pdf.worker.mjs`;const QA=document.getElementById("root");if(!QA)throw new Error("Could not find root element to mount to");const mW=SI.createRoot(QA);mW.render(g.jsx(bo.StrictMode,{children:g.jsx(SC,{children:g.jsx(f$,{})})}));export{CE as $,fK as A,PW as B,vL as C,iL as D,R8 as E,W8 as F,PE as G,Jc as H,hK as I,hA as J,M8 as K,gt as L,pK as M,yK as N,E_ as O,aK as P,gK as Q,cK as R,sp as S,io as T,k8 as U,es as V,dK as W,RW as X,VW as Y,j8 as Z,le as _,kW as a,mL as a0,OW as a1,SW as a2,tL as a3,Qd as a4,LW as a5,RE as a6,J8 as a7,T_ as a8,jW as a9,fL as aA,rL as aB,zw as aC,F8 as aD,FW as aE,tG as aF,b_ as aG,SE as aH,nK as aI,iK as aJ,sK as aK,DW as aL,eK as aa,$W as ab,uK as ac,WW as ad,KW as ae,YW as af,tK as ag,uL as ah,dL as ai,MW as aj,W1 as ak,as as al,hL as am,BW as an,zW as ao,HW as ap,GW as aq,qW as ar,NE as as,ZW as at,JW as au,XW as av,QW as aw,N8 as ax,Y8 as ay,CW as az,Dr as b,Kl as c,Cr as d,lK as e,gL as f,Bq as g,X8 as h,NW as i,g as j,bo as k,mK as l,xA as m,rK as n,oK as o,DE as p,pL as q,M as r,yW as s,d$ as t,IE as u,vK as v,Xc as w,yL as x,go as y,UW as z};
