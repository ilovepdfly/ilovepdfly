import{r as t,u as k,j as e,b as w,aq as S,ap as C,E as I,a8 as F}from"./main-OsKQTCQp.js";import E from"./html2canvas.esm-B0tyYwQk.js";const y="ilovepdfly_user_signature",$=()=>{const[l,s]=t.useState(null);t.useEffect(()=>{try{const a=localStorage.getItem(y);a&&s(a)}catch(a){console.error("Failed to load signature from localStorage",a)}},[]);const x=t.useCallback(a=>{try{localStorage.setItem(y,a),s(a)}catch(n){console.error("Failed to save signature to localStorage",n)}},[]),d=t.useCallback(()=>{try{localStorage.removeItem(y),s(null)}catch(a){console.error("Failed to delete signature from localStorage",a)}},[]);return{signature:l,saveSignature:x,deleteSignature:d}},D=({isOpen:l,onClose:s,onSave:x})=>{const{user:d}=k(),[a,n]=t.useState("signature"),[o,c]=t.useState(d?.username||"ilovepdfly"),[i,g]=t.useState(""),m=["Pacifico","Dancing Script","Caveat","Great Vibes","Homemade Apple","Kalam"],[b,p]=t.useState(m[0]),u=[{name:"Black",value:"#000000"},{name:"Blue",value:"#0055d4"},{name:"Red",value:"#dc3545"},{name:"Green",value:"#198754"}],[v,j]=t.useState(u[0].value);t.useEffect(()=>{d?.username&&c(d.username)},[d]),t.useEffect(()=>{const r=o.trim().split(/\s+/),h=r[0]?r[0][0]:"",f=r.length>1?r[r.length-1][0]:"";g((h+f).toUpperCase())},[o]);const N=async()=>{let r="";const h=document.getElementById(`font-preview-${b}`);h&&(r=(await E(h,{backgroundColor:null,scale:2})).toDataURL("image/png")),r&&x(r)};return l?e.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4",onClick:s,role:"dialog","aria-modal":"true","aria-labelledby":"signature-details-title",children:e.jsxs("div",{className:"bg-white dark:bg-black w-full max-w-2xl rounded-lg shadow-xl overflow-hidden",onClick:r=>r.stopPropagation(),children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsx("h2",{id:"signature-details-title",className:"text-xl font-bold text-gray-800 dark:text-gray-100",children:"Set your signature details"})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"grid sm:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"full-name",className:"block text-sm font-bold text-gray-700 dark:text-gray-300",children:"Full name:"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3",children:e.jsx("img",{src:"/logo.svg",alt:"user icon",className:"h-5 w-5"})}),e.jsx("input",{type:"text",id:"full-name",value:o,onChange:r=>c(r.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-brand-red focus:border-brand-red text-gray-800 dark:text-gray-100 bg-white dark:bg-gray-900"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"initials",className:"block text-sm font-bold text-gray-700 dark:text-gray-300",children:"Initials:"}),e.jsx("input",{type:"text",id:"initials",value:i,readOnly:!0,className:"w-full mt-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-gray-100 dark:bg-gray-800 text-gray-800 dark:text-gray-100"})]})]}),e.jsx("div",{className:"mt-6 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("nav",{className:"-mb-px flex space-x-6",children:[e.jsx("button",{onClick:()=>n("signature"),className:`py-3 px-1 border-b-2 font-semibold text-sm ${a==="signature"?"border-brand-red text-brand-red":"border-transparent text-gray-500 hover:text-brand-red"}`,children:"Signature"}),e.jsx("button",{onClick:()=>n("initials"),className:`py-3 px-1 border-b-2 font-semibold text-sm ${a==="initials"?"border-brand-red text-brand-red":"border-transparent text-gray-500 hover:text-brand-red"}`,children:"Initials"}),e.jsx("button",{onClick:()=>n("stamp"),className:`py-3 px-1 border-b-2 font-semibold text-sm ${a==="stamp"?"border-brand-red text-brand-red":"border-transparent text-gray-500 hover:text-brand-red"}`,children:"Company Stamp"})]})}),e.jsxs("div",{className:"mt-4",children:[a==="signature"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto pr-2",children:m.map(r=>e.jsx("div",{className:`p-4 rounded-md border-2 ${b===r?"border-brand-red bg-red-50 dark:bg-red-900/20":"border-transparent"}`,children:e.jsxs("label",{className:"flex items-center cursor-pointer",children:[e.jsx("input",{type:"radio",name:"signature-font",value:r,checked:b===r,onChange:()=>p(r),className:"h-5 w-5 text-brand-red focus:ring-brand-red"}),e.jsx("div",{id:`font-preview-${r}`,style:{fontFamily:r,color:v},className:"ml-4 text-3xl",children:o||"Your Name"})]})},r))}),e.jsxs("div",{className:"mt-4 flex items-center gap-4",children:[e.jsx("span",{className:"text-sm font-bold text-gray-700 dark:text-gray-300",children:"Color:"}),e.jsx("div",{className:"flex gap-2",children:u.map(r=>e.jsx("button",{onClick:()=>j(r.value),className:`w-6 h-6 rounded-full border-2 transition-transform ${v===r.value?"border-brand-red scale-110":"border-transparent"}`,style:{backgroundColor:r.value},"aria-label":`Select ${r.name} color`},r.name))})]})]}),a==="initials"&&e.jsx("div",{className:"p-8 text-center text-gray-500",children:"Initials feature is coming soon."}),a==="stamp"&&e.jsx("div",{className:"p-8 text-center text-gray-500",children:"Company Stamp feature is coming soon."})]})]}),e.jsxs("footer",{className:"flex justify-end items-center gap-4 p-4 bg-gray-50 dark:bg-gray-900/50 rounded-b-lg",children:[e.jsx("button",{onClick:s,className:"text-sm font-semibold text-gray-600 dark:text-gray-300 hover:underline",children:"Cancel"}),e.jsx("button",{onClick:N,className:"bg-brand-red hover:bg-brand-red-dark text-white font-bold py-2 px-6 rounded-md transition-colors",children:"Apply"})]})]})}):null},T=({className:l})=>e.jsx("div",{className:`p-2 bg-blue-600 rounded-md inline-block ${l}`,children:e.jsx("svg",{className:"h-6 w-6 text-white",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 00-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"})})}),A=({onEdit:l,onDelete:s})=>e.jsxs("div",{className:"absolute top-8 right-4 w-40 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-md shadow-lg z-10",children:[e.jsxs("button",{onClick:l,className:"w-full text-left flex items-center gap-3 px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700",children:[e.jsx(I,{className:"h-4 w-4"})," Edit Signature"]}),e.jsxs("button",{onClick:s,className:"w-full text-left flex items-center gap-3 px-4 py-2 text-sm text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20",children:[e.jsx(F,{className:"h-4 w-4"})," Delete Signature"]})]}),Y=()=>{const l=w(),{signature:s,saveSignature:x,deleteSignature:d}=$(),[a,n]=t.useState(!1),[o,c]=t.useState(!1),[i,g]=t.useState("sent"),m=()=>{window.confirm("Are you sure you want to delete your saved signature?")&&(d(),c(!1))},b=()=>{c(!1),n(!0)},p=u=>{x(u),n(!1),l("/sign-pdf")};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"w-full space-y-8",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(T,{}),e.jsxs("h1",{className:"text-3xl md:text-4xl font-extrabold text-gray-800 dark:text-gray-100",children:["I",e.jsx("span",{className:"text-brand-red",children:"â™¥"}),"PDF Signature"]})]}),e.jsx("button",{onClick:()=>n(!0),className:"bg-brand-red hover:bg-brand-red-dark text-white font-bold py-2 px-6 rounded-md transition-colors",children:"New signature"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-white dark:bg-surface-dark p-6 rounded-lg shadow-lg border border-gray-200 dark:border-gray-800",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Your signature"}),e.jsx("div",{className:"relative flex items-center justify-center h-40 bg-gray-50 dark:bg-gray-900/50 rounded-md border border-gray-200 dark:border-gray-700",children:s?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:s,alt:"Your saved signature",className:"max-h-24"}),e.jsxs("div",{className:"absolute top-2 right-2",children:[e.jsx("button",{onClick:()=>c(!o),className:"p-2 text-gray-500 hover:text-gray-800 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700",children:e.jsx(S,{className:"h-5 w-5"})}),o&&e.jsx(A,{onEdit:b,onDelete:m})]})]}):e.jsxs("button",{onClick:()=>n(!0),className:"text-center text-gray-500 hover:text-brand-red",children:[e.jsx("p",{className:"text-2xl",children:"+"}),e.jsx("p",{children:"Create your signature"})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-surface-dark p-6 rounded-lg shadow-lg border border-gray-200 dark:border-gray-800 flex flex-col",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Digital Signatures"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 flex-grow",children:"Certificate-based signatures are necessary to legally validate the signature's authenticity. You can acquire certified signatures by subscribing to I Love PDFLY Premium or purchasing a prepaid package."}),e.jsx("div",{className:"mt-4",children:e.jsx("button",{onClick:()=>l("/pricing"),className:"w-full bg-yellow-400 hover:bg-yellow-500 text-yellow-900 font-bold py-2 px-4 rounded-md transition-colors",children:"Upgrade to Premium"})})]})]}),e.jsxs("div",{className:"bg-white dark:bg-surface-dark rounded-lg shadow-lg border border-gray-200 dark:border-gray-800",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Last activity"}),e.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:e.jsxs("nav",{className:"-mb-px flex space-x-6",children:[e.jsx("button",{onClick:()=>g("sent"),className:`py-3 px-1 border-b-2 font-semibold text-sm ${i==="sent"?"border-brand-red text-brand-red":"border-transparent text-gray-500 hover:text-brand-red"}`,children:"Sent"}),e.jsx("button",{onClick:()=>g("inbox"),className:`py-3 px-1 border-b-2 font-semibold text-sm ${i==="inbox"?"border-brand-red text-brand-red":"border-transparent text-gray-500 hover:text-brand-red"}`,children:"Inbox"}),e.jsx("button",{onClick:()=>g("signed"),className:`py-3 px-1 border-b-2 font-semibold text-sm ${i==="signed"?"border-brand-red text-brand-red":"border-transparent text-gray-500 hover:text-brand-red"}`,children:"Signed"})]})})]}),e.jsxs("div",{className:"p-2",children:[i==="sent"&&e.jsx("div",{className:"p-6 text-center text-gray-500",children:"You haven't sent any signature requests yet."}),i==="inbox"&&e.jsx("div",{className:"p-6 text-center text-gray-500",children:"You don't have any pending signature requests."}),i==="signed"&&e.jsxs("div",{className:"p-4 text-center text-gray-500",children:["This section will show your signed documents.",e.jsxs("div",{className:"mt-4 border rounded-lg p-4 flex items-center justify-between text-left animate-pulse",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(C,{className:"h-8 w-8 text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-700 dark:text-gray-200",children:"example_contract_signed.pdf"}),e.jsx("p",{className:"text-xs",children:"Signed 2 minutes ago"})]})]}),e.jsx("span",{className:"text-xs font-bold text-green-600 bg-green-100 dark:bg-green-900/30 px-2 py-1 rounded-full",children:"COMPLETED"})]})]})]})]})]}),e.jsx(D,{isOpen:a,onClose:()=>n(!1),onSave:p})]})};export{Y as default};
