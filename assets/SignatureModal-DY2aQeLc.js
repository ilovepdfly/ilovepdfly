import{r as t,u as k,j as e}from"./main-DxKcSKLJ.js";import S from"./html2canvas.esm-B0tyYwQk.js";const u="ilovepdfly_user_signature",F=()=>{const[i,s]=t.useState(null);t.useEffect(()=>{try{const r=localStorage.getItem(u);r&&s(r)}catch(r){console.error("Failed to load signature from localStorage",r)}},[]);const c=t.useCallback(r=>{try{localStorage.setItem(u,r),s(r)}catch(n){console.error("Failed to save signature to localStorage",n)}},[]),l=t.useCallback(()=>{try{localStorage.removeItem(u),s(null)}catch(r){console.error("Failed to delete signature from localStorage",r)}},[]);return{signature:i,saveSignature:c,deleteSignature:l}},I=({isOpen:i,onClose:s,onSave:c})=>{const{user:l}=k(),[r,n]=t.useState("signature"),[d,g]=t.useState(l?.username||"ilovepdfly"),[h,f]=t.useState(""),x=["Pacifico","Dancing Script","Caveat","Great Vibes","Homemade Apple","Kalam"],[m,v]=t.useState(x[0]),b=[{name:"Black",value:"#000000"},{name:"Blue",value:"#0055d4"},{name:"Red",value:"#dc3545"},{name:"Green",value:"#198754"}],[p,j]=t.useState(b[0].value);t.useEffect(()=>{l?.username&&g(l.username)},[l]),t.useEffect(()=>{const a=d.trim().split(/\s+/),o=a[0]?a[0][0]:"",y=a.length>1?a[a.length-1][0]:"";f((o+y).toUpperCase())},[d]);const N=async()=>{let a="";const o=document.getElementById(`font-preview-${m}`);o&&(a=(await S(o,{backgroundColor:null,scale:2})).toDataURL("image/png")),a&&c(a)};return i?e.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4",onClick:s,role:"dialog","aria-modal":"true","aria-labelledby":"signature-details-title",children:e.jsxs("div",{className:"bg-white dark:bg-black w-full max-w-2xl rounded-lg shadow-xl overflow-hidden",onClick:a=>a.stopPropagation(),children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:e.jsx("h2",{id:"signature-details-title",className:"text-xl font-bold text-gray-800 dark:text-gray-100",children:"Set your signature details"})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"grid sm:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"full-name",className:"block text-sm font-bold text-gray-700 dark:text-gray-300",children:"Full name:"}),e.jsxs("div",{className:"relative mt-1",children:[e.jsx("span",{className:"absolute inset-y-0 left-0 flex items-center pl-3",children:e.jsx("img",{src:"/logo.svg",alt:"user icon",className:"h-5 w-5"})}),e.jsx("input",{type:"text",id:"full-name",value:d,onChange:a=>g(a.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-brand-red focus:border-brand-red text-gray-800 dark:text-gray-100 bg-white dark:bg-gray-900"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"initials",className:"block text-sm font-bold text-gray-700 dark:text-gray-300",children:"Initials:"}),e.jsx("input",{type:"text",id:"initials",value:h,readOnly:!0,className:"w-full mt-1 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-gray-100 dark:bg-gray-800 text-gray-800 dark:text-gray-100"})]})]}),e.jsx("div",{className:"mt-6 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("nav",{className:"-mb-px flex space-x-6",children:[e.jsx("button",{onClick:()=>n("signature"),className:`py-3 px-1 border-b-2 font-semibold text-sm ${r==="signature"?"border-brand-red text-brand-red":"border-transparent text-gray-500 hover:text-brand-red"}`,children:"Signature"}),e.jsx("button",{onClick:()=>n("initials"),className:`py-3 px-1 border-b-2 font-semibold text-sm ${r==="initials"?"border-brand-red text-brand-red":"border-transparent text-gray-500 hover:text-brand-red"}`,children:"Initials"}),e.jsx("button",{onClick:()=>n("stamp"),className:`py-3 px-1 border-b-2 font-semibold text-sm ${r==="stamp"?"border-brand-red text-brand-red":"border-transparent text-gray-500 hover:text-brand-red"}`,children:"Company Stamp"})]})}),e.jsxs("div",{className:"mt-4",children:[r==="signature"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto pr-2",children:x.map(a=>e.jsx("div",{className:`p-4 rounded-md border-2 ${m===a?"border-brand-red bg-red-50 dark:bg-red-900/20":"border-transparent"}`,children:e.jsxs("label",{className:"flex items-center cursor-pointer",children:[e.jsx("input",{type:"radio",name:"signature-font",value:a,checked:m===a,onChange:()=>v(a),className:"h-5 w-5 text-brand-red focus:ring-brand-red"}),e.jsx("div",{id:`font-preview-${a}`,style:{fontFamily:a,color:p},className:"ml-4 text-3xl",children:d||"Your Name"})]})},a))}),e.jsxs("div",{className:"mt-4 flex items-center gap-4",children:[e.jsx("span",{className:"text-sm font-bold text-gray-700 dark:text-gray-300",children:"Color:"}),e.jsx("div",{className:"flex gap-2",children:b.map(a=>e.jsx("button",{onClick:()=>j(a.value),className:`w-6 h-6 rounded-full border-2 transition-transform ${p===a.value?"border-brand-red scale-110":"border-transparent"}`,style:{backgroundColor:a.value},"aria-label":`Select ${a.name} color`},a.name))})]})]}),r==="initials"&&e.jsx("div",{className:"p-8 text-center text-gray-500",children:"Initials feature is coming soon."}),r==="stamp"&&e.jsx("div",{className:"p-8 text-center text-gray-500",children:"Company Stamp feature is coming soon."})]})]}),e.jsxs("footer",{className:"flex justify-end items-center gap-4 p-4 bg-gray-50 dark:bg-gray-900/50 rounded-b-lg",children:[e.jsx("button",{onClick:s,className:"text-sm font-semibold text-gray-600 dark:text-gray-300 hover:underline",children:"Cancel"}),e.jsx("button",{onClick:N,className:"bg-brand-red hover:bg-brand-red-dark text-white font-bold py-2 px-6 rounded-md transition-colors",children:"Apply"})]})]})}):null};export{I as S,F as u};
