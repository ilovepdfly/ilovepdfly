import{r,s as k,q as N,b as S,j as e,L}from"./main-DtCx-TiH.js";const P=()=>{const[l,h]=r.useState(""),[c,y]=r.useState(""),[g,s]=r.useState(""),[u,n]=r.useState(!1),{login:f,loginOrSignupWithGoogle:v}=k(),d=N(),o=S(),m=o.state?.from==="pricing",p=o.state?.from==="/invoice-generator",x=o.state?.plan;r.useEffect(()=>{document.title="Login | I Love PDFLY";const a=document.querySelector('meta[name="description"]');a&&a.setAttribute("content","Sign in to your I Love PDFLY account to access all your tools and premium features. Manage your documents easily and securely.")},[]);const b=()=>{const a=localStorage.getItem("pendingInvoiceData");p&&a?(localStorage.removeItem("pendingInvoiceData"),d("/invoice-generator",{state:{restoredData:JSON.parse(a)},replace:!0})):m?d("/payment",{state:{plan:x}}):d("/")},w=async a=>{a.preventDefault(),s(""),n(!0);try{await f(l,c),b()}catch(t){s(t.message||"Failed to login. Please try again.")}finally{n(!1)}},j=async a=>{s(""),n(!0);try{const t=a.credential,i=JSON.parse(atob(t.split(".")[1]));await v({email:i.email,name:i.name,picture:i.picture}),b()}catch(t){s(t.message||"Failed to sign in with Google.")}finally{n(!1)}};return r.useEffect(()=>{window.google&&(window.google.accounts.id.initialize({client_id:"974035582208-leq5h6cbrjr4n6q78pagt7br7piuvoep.apps.googleusercontent.com",callback:j}),window.google.accounts.id.renderButton(document.getElementById("google-signin-button"),{theme:"outline",size:"large",type:"standard",text:"signin_with",width:"300"}))},[]),e.jsx("div",{className:"min-h-[calc(100vh-200px)] flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8 bg-gray-50 dark:bg-black",children:e.jsxs("div",{className:"w-full max-w-md space-y-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"mt-6 text-center text-3xl font-bold tracking-tight text-gray-900 dark:text-white",children:m||p?"Sign in to Continue":"Sign in to your account"}),e.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600 dark:text-gray-400",children:["Or"," ",e.jsx(L,{to:"/signup",state:{from:o.state?.from,plan:x},className:"font-medium text-brand-red hover:text-brand-red-dark",children:"create a new account"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-black border border-gray-200 dark:border-gray-800 p-8 rounded-lg shadow-lg animated-border",children:[e.jsxs("form",{className:"space-y-6",onSubmit:w,children:[g&&e.jsx("p",{className:"text-center text-sm text-red-500 bg-red-100 dark:bg-red-900/30 p-3 rounded-md",children:g}),e.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"username",className:"sr-only",children:"Username"}),e.jsx("input",{id:"username",name:"username",type:"text",autoComplete:"username",required:!0,value:l,onChange:a=>h(a.target.value),className:"relative block w-full appearance-none rounded-none rounded-t-md border border-gray-300 dark:border-gray-700 px-3 py-2 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 bg-white dark:bg-black focus:z-10 focus:border-brand-red focus:outline-none focus:ring-brand-red sm:text-sm",placeholder:"Username"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),e.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:c,onChange:a=>y(a.target.value),className:"relative block w-full appearance-none rounded-none rounded-b-md border border-gray-300 dark:border-gray-700 px-3 py-2 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 bg-white dark:bg-black focus:z-10 focus:border-brand-red focus:outline-none focus:ring-brand-red sm:text-sm",placeholder:"Password"})]})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:u,className:"group relative flex w-full justify-center rounded-md border border-transparent bg-brand-red py-2 px-4 text-sm font-medium text-white hover:bg-brand-red-dark focus:outline-none focus:ring-2 focus:ring-brand-red-dark focus:ring-offset-2 disabled:bg-red-300 dark:disabled:bg-red-800 transition-colors",children:u?"Signing in...":"Sign in"})})]}),e.jsxs("div",{className:"relative my-6",children:[e.jsx("div",{className:"absolute inset-0 flex items-center","aria-hidden":"true",children:e.jsx("div",{className:"w-full border-t border-gray-300 dark:border-gray-700"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"bg-white dark:bg-black px-2 text-gray-500 dark:text-gray-400",children:"OR"})})]}),e.jsx("div",{id:"google-signin-button",className:"flex justify-center"})]})]})})};export{P as default};
