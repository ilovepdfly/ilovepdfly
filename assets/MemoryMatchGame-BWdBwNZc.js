import{r as a,T as v,j as e,L as N}from"./index-CKCUDViG.js";const C=()=>{const[r,i]=a.useState([]),[m,x]=a.useState([]),[g,u]=a.useState(0),[y,h]=a.useState(!1),[j,b]=a.useState(!1),p=a.useMemo(()=>[...v].sort(()=>.5-Math.random()).slice(0,8),[]),f=()=>{const t=p.flatMap((s,l)=>{const n={toolId:s.id,Icon:s.Icon,color:s.color};return[{...n,id:l*2,state:"down"},{...n,id:l*2+1,state:"down"}]});i(t.sort(()=>Math.random()-.5)),u(0),x([]),h(!1),b(!1)};a.useEffect(()=>{f()},[p]),a.useEffect(()=>{if(m.length===2){h(!0);const[t,s]=m,l=r[t],n=r[s];l.toolId===n.toolId?(i(o=>o.map((d,c)=>c===t||c===s?{...d,state:"matched"}:d)),x([]),h(!1)):setTimeout(()=>{i(o=>o.map((d,c)=>c===t||c===s?{...d,state:"down"}:d)),x([]),h(!1)},1e3),u(o=>o+1)}},[m,r]),a.useEffect(()=>{r.length>0&&r.every(t=>t.state==="matched")&&b(!0)},[r]);const k=t=>{y||r[t].state!=="down"||m.length>=2||(i(s=>s.map((l,n)=>n===t?{...l,state:"up"}:l)),x(s=>[...s,t]))};return e.jsx("div",{className:"py-16 bg-gray-50 dark:bg-black min-h-[calc(100vh-130px)]",children:e.jsxs("div",{className:"container mx-auto px-6 text-center",children:[e.jsx("h1",{className:"text-4xl font-extrabold text-gray-800 dark:text-gray-100",children:"Memory Match"}),e.jsx("p",{className:"mt-2 text-lg text-gray-600 dark:text-gray-300",children:"Match all the pairs of tool icons!"}),e.jsxs("div",{className:"flex justify-center items-center gap-8 my-6",children:[e.jsxs("div",{className:"text-xl font-bold",children:["Moves: ",e.jsx("span",{className:"text-brand-red",children:g})]}),e.jsx("button",{onClick:f,className:"bg-brand-red hover:bg-brand-red-dark text-white font-bold py-2 px-6 rounded-lg transition-colors",children:"New Game"})]}),e.jsxs("div",{className:"relative max-w-xl mx-auto",children:[e.jsx("div",{className:"grid grid-cols-4 gap-4 p-4 bg-white dark:bg-black rounded-lg shadow-lg",children:r.map((t,s)=>e.jsx("div",{className:"aspect-square",onClick:()=>k(s),children:e.jsxs("div",{className:`w-full h-full rounded-md transition-transform duration-500 [transform-style:preserve-3d] ${t.state!=="down"?"[transform:rotateY(180deg)]":""}`,children:[e.jsx("div",{className:"absolute w-full h-full bg-gray-300 dark:bg-gray-900 rounded-md flex items-center justify-center cursor-pointer [backface-visibility:hidden] hover:bg-gray-400 dark:hover:bg-gray-800",children:e.jsx("span",{className:"text-3xl font-bold text-brand-red",children:"♥"})}),e.jsx("div",{className:`absolute w-full h-full rounded-md flex items-center justify-center [backface-visibility:hidden] [transform:rotateY(180deg)] ${t.state==="matched"?"bg-green-100 dark:bg-green-900/50":"bg-gray-100 dark:bg-black"}`,children:e.jsx(t.Icon,{className:`h-1/2 w-1/2 ${t.color}`})})]})},s))}),j&&e.jsxs("div",{className:"absolute inset-0 bg-black/70 flex flex-col items-center justify-center rounded-lg animate-fade-in-down",children:[e.jsx("h2",{className:"text-4xl font-bold text-white",children:"Congratulations!"}),e.jsxs("p",{className:"text-xl text-gray-200 mt-2",children:["You completed the game in ",g," moves."]}),e.jsx("button",{onClick:f,className:"mt-6 bg-brand-red hover:bg-brand-red-dark text-white font-bold py-3 px-8 rounded-lg transition-colors",children:"Play Again"})]})]}),e.jsx(N,{to:"/play-game",className:"inline-block mt-8 text-gray-600 dark:text-gray-400 hover:text-brand-red dark:hover:text-brand-red font-medium transition-colors",children:"← Back to Arcade"})]})})};export{C as default};
