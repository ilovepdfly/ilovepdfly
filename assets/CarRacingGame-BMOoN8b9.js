import{r as c,j as n,L as C}from"./main-H5WMTIx8.js";const T=()=>{const g=c.useRef(null),[i,u]=c.useState(0),[w,y]=c.useState(!1),[x,N]=c.useState(()=>parseInt(localStorage.getItem("carRacingHighScore")||"0",10));c.useEffect(()=>{const o=g.current;if(!o)return;const l=o.getContext("2d");if(!l)return;let v,m=3,p=!1;const r=new Image;r.src="https://media.istockphoto.com/id/1146551901/photo/retro-video-game-background-3d-illustration.jpg?s=612x612&w=0&k=20&c=QTRz-D9-evP8M3XMYZaGxXbjgJghg3tOtl93pDvCPDI=",r.crossOrigin="Anonymous";const e={x:o.width/2-25,y:o.height-120,width:50,height:100,speed:5},d=[];let a=0;const h={};let s=null;const L=()=>{l.fillStyle="#e53935",l.fillRect(e.x,e.y,e.width,e.height),l.fillStyle="#212121",l.fillRect(e.x+5,e.y+10,e.width-10,30),l.fillStyle="#c62828",l.fillRect(e.x+5,e.y,e.width-10,10),l.fillStyle="yellow",l.fillRect(e.x+5,e.y,10,5),l.fillRect(e.x+e.width-15,e.y,10,5)},f=()=>{if(!p){if(l.clearRect(0,0,o.width,o.height),a+=m*2,a>o.height&&(a=0),l.drawImage(r,0,a,o.width,o.height),l.drawImage(r,0,a-o.height,o.width,o.height),h.ArrowLeft&&e.x>0&&(e.x-=e.speed),h.ArrowRight&&e.x<o.width-e.width&&(e.x+=e.speed),s!==null&&(e.x=Math.max(0,Math.min(o.width-e.width,s-e.width/2))),L(),Math.random()<.05&&d.length<5){const t=["#42a5f5","#66bb6a","#ffee58","#ab47bc"];d.push({x:Math.random()*(o.width-50),y:-100,width:50,height:100,color:t[Math.floor(Math.random()*t.length)]})}d.forEach((t,M)=>{t.y+=m,l.fillStyle=t.color,l.fillRect(t.x,t.y,t.width,t.height),l.fillStyle="#212121",l.fillRect(t.x+5,t.y+10,t.width-10,30),e.x<t.x+t.width&&e.x+e.width>t.x&&e.y<t.y+t.height&&e.y+e.height>t.y&&(p=!0,y(!0),i>x&&(localStorage.setItem("carRacingHighScore",i.toString()),N(i))),t.y>o.height&&(d.splice(M,1),u(A=>A+10))}),m+=.002,v=requestAnimationFrame(f)}},j=t=>{h[t.key]=!0},S=t=>{h[t.key]=!1},k=t=>{t.touches[0]&&(s=t.touches[0].clientX-o.getBoundingClientRect().left)},R=t=>{t.preventDefault(),t.touches[0]&&(s=t.touches[0].clientX-o.getBoundingClientRect().left)},b=()=>{s=null};return window.addEventListener("keydown",j),window.addEventListener("keyup",S),o.addEventListener("touchstart",k),o.addEventListener("touchmove",R),o.addEventListener("touchend",b),o.style.touchAction="none",r.onload=()=>{f()},r.onerror=()=>{console.error("Failed to load road image. Starting game with solid color."),f()},()=>{cancelAnimationFrame(v),window.removeEventListener("keydown",j),window.removeEventListener("keyup",S),o.removeEventListener("touchstart",k),o.removeEventListener("touchmove",R),o.removeEventListener("touchend",b)}},[w,i,x]);const E=()=>{u(0),y(!1)};return n.jsx("div",{className:"py-16 bg-gray-900 text-white min-h-screen flex flex-col items-center justify-center font-mono",children:n.jsxs("div",{className:"container mx-auto px-4 text-center",children:[n.jsx("h1",{className:"text-5xl font-extrabold text-white",style:{textShadow:"2px 2px #ff00ff, 4px 4px #00ffff"},children:"Retro Racer"}),n.jsxs("div",{className:"my-4 p-4 bg-black/50 border-2 border-cyan-400 rounded-lg max-w-lg mx-auto",children:[n.jsx("h2",{className:"text-lg font-bold text-yellow-300 mb-2",children:"How to Play"}),n.jsxs("p",{className:"text-sm",children:[n.jsx("strong",{className:"text-cyan-400",children:"Desktop:"})," Use ",n.jsx("kbd",{children:"←"})," and ",n.jsx("kbd",{children:"→"})," arrow keys to move."]}),n.jsxs("p",{className:"text-sm",children:[n.jsx("strong",{className:"text-cyan-400",children:"Mobile:"})," Touch and drag the car to move."]})]}),n.jsxs("div",{className:"flex justify-center items-center gap-8 my-4",children:[n.jsxs("div",{className:"text-xl font-bold",children:["Score: ",n.jsx("span",{className:"text-yellow-300",children:i})]}),n.jsxs("div",{className:"text-xl font-bold",children:["High Score: ",n.jsx("span",{className:"text-yellow-300",children:x})]})]}),n.jsxs("div",{className:"relative max-w-lg mx-auto border-4 border-gray-700 rounded-lg shadow-2xl overflow-hidden",children:[n.jsx("canvas",{ref:g,width:"400",height:"600",className:"w-full h-auto block"}),w&&n.jsxs("div",{className:"absolute inset-0 bg-black/80 flex flex-col items-center justify-center rounded-lg animate-fade-in-down",children:[n.jsx("h2",{className:"text-5xl font-bold text-red-500",style:{textShadow:"2px 2px #fff"},children:"GAME OVER"}),n.jsxs("p",{className:"text-2xl text-white mt-4",children:["Final Score: ",i]}),n.jsx("button",{onClick:E,className:"mt-8 bg-yellow-400 hover:bg-yellow-500 text-black font-bold py-3 px-8 rounded-lg transition-colors border-2 border-black text-xl",children:"RESTART"})]})]}),n.jsx(C,{to:"/play-game",className:"inline-block mt-8 text-cyan-400 hover:text-yellow-300 font-medium transition-colors",children:"← Back to Arcade"})]})})};export{T as default};
