import{r as g,j as r,L as Y}from"./main-H5WMTIx8.js";const X=()=>{const b=g.useRef(null),[y,v]=g.useState(0),[p,L]=g.useState(!1);g.useEffect(()=>{const t=b.current;if(!t)return;const n=t.getContext("2d");if(!n)return;let k;const c=15,j=["#ef4444","#3b82f6","#22c55e","#eab308","#8b5cf6","#ec4899"],M=13,N=8,w=.866;let d=[],o={color:"",isShooting:!1,x:0,y:0,dx:0,dy:0,speed:15},u="",l=Math.PI/2;const A=()=>{d=[];for(let e=0;e<N;e++){d[e]=[];const s=M-e%2;for(let a=0;a<s;a++)d[e][a]={color:f(),r:e,c:a}}S()};function f(){return j[Math.floor(Math.random()*j.length)]}function S(){o.color=u||f(),u=f(),o.isShooting=!1}const R=(e,s)=>{const a=s*c*2+(e%2?c:0)+c,i=e*c*2*w+c;return{x:a,y:i}},h=(e,s,a)=>{n.beginPath(),n.arc(e,s,c,0,Math.PI*2),n.fillStyle=a,n.fill()},C=()=>{d.forEach(e=>e.forEach(s=>{if(s){const{x:a,y:i}=R(s.r,s.c);h(a,i,s.color)}}))},E=()=>{n.clearRect(0,0,t.width,t.height),C();const e=t.width/2,s=t.height-30;n.strokeStyle="#616161",n.lineWidth=2,n.beginPath(),n.moveTo(e,s),n.lineTo(e+Math.cos(l)*80,s-Math.sin(l)*80),n.stroke(),o.isShooting?(o.x+=o.dx,o.y+=o.dy,h(o.x,o.y,o.color),(o.y<N*c*2*w||o.x<0||o.x>t.width)&&(v(a=>a+10),S())):h(e,s,o.color),n.fillStyle="#616161",n.font="16px sans-serif",n.fillText("Next:",20,t.height-25),h(70,t.height-25,u),k=requestAnimationFrame(E)},x=e=>{const s=t.getBoundingClientRect(),a="touches"in e?e.touches[0].clientX:e.clientX,i="touches"in e?e.touches[0].clientY:e.clientY,P=a-s.left,O=i-s.top,I=t.height-30,T=Math.atan2(I-O,P-t.width/2);l=Math.PI-T},m=()=>{o.isShooting||(o.isShooting=!0,o.x=t.width/2,o.y=t.height-30,o.dx=Math.cos(l)*o.speed,o.dy=-Math.sin(l)*o.speed)};return A(),E(),t.addEventListener("mousemove",x),t.addEventListener("click",m),t.addEventListener("touchmove",e=>{e.preventDefault(),x(e)}),t.addEventListener("touchend",m),t.style.touchAction="none",()=>{cancelAnimationFrame(k),t.removeEventListener("mousemove",x),t.removeEventListener("click",m),t.removeEventListener("touchmove",x),t.removeEventListener("touchend",m)}},[p]);const B=()=>{v(0),L(!1)};return r.jsx("div",{className:"py-16 bg-gray-50 dark:bg-black min-h-screen flex flex-col items-center justify-center",children:r.jsxs("div",{className:"container mx-auto px-4 text-center",children:[r.jsx("h1",{className:"text-4xl font-extrabold text-gray-800 dark:text-gray-100",children:"Bubble Shooter"}),r.jsxs("div",{className:"my-4 p-4 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg max-w-lg mx-auto",children:[r.jsx("h2",{className:"text-lg font-bold text-gray-700 dark:text-gray-200 mb-2",children:"How to Play"}),r.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[r.jsx("strong",{className:"text-brand-red",children:"Desktop:"})," Move mouse to aim, click to shoot."]}),r.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[r.jsx("strong",{className:"text-brand-red",children:"Mobile:"})," Touch and drag to aim, release to shoot."]})]}),r.jsx("div",{className:"flex justify-center items-center gap-8 my-4",children:r.jsxs("div",{className:"text-xl font-bold",children:["Score: ",r.jsx("span",{className:"text-brand-red",children:y})]})}),r.jsxs("div",{className:"relative max-w-lg mx-auto bg-blue-100 dark:bg-gray-900 rounded-lg shadow-lg overflow-hidden border-4 border-gray-300 dark:border-gray-700",children:[r.jsx("canvas",{ref:b,width:"420",height:"500",className:"w-full h-auto block"}),p&&r.jsxs("div",{className:"absolute inset-0 bg-black/70 flex flex-col items-center justify-center rounded-lg animate-fade-in-down",children:[r.jsx("h2",{className:"text-4xl font-bold text-white",children:"Game Over"}),r.jsxs("p",{className:"text-2xl text-gray-200 mt-2",children:["Final Score: ",y]}),r.jsx("button",{onClick:B,className:"mt-6 bg-brand-red hover:bg-brand-red-dark text-white font-bold py-3 px-8 rounded-lg transition-colors",children:"Play Again"})]})]}),r.jsx(Y,{to:"/play-game",className:"inline-block mt-8 text-gray-600 dark:text-gray-400 hover:text-brand-red dark:hover:text-brand-red font-medium transition-colors",children:"‚Üê Back to Arcade"})]})})};export{X as default};
