import{r as a,s as Q,q as X,b as Z,j as e,L as ee}from"./main-Co0eRREc.js";const re=()=>{const[i,U]=a.useState("email"),[S,P]=a.useState(""),[x,O]=a.useState(""),[o,C]=a.useState(""),[c,u]=a.useState(new Array(6).fill("")),[g,y]=a.useState("enter-phone"),[I,T]=a.useState(null),[D,n]=a.useState(""),[m,d]=a.useState(!1),[p,b]=a.useState(!1),[w,v]=a.useState(null),[l,j]=a.useState(0),{signup:Y,loginOrSignupWithGoogle:B,sendLoginOtp:E,verifyLoginOtp:G,displayedOtp:L}=Q(),k=X(),h=Z(),f=a.useRef([]),A=h.state?.from==="pricing",R=h.state?.from==="/invoice-generator",F=h.state?.plan;a.useEffect(()=>{document.title="Sign Up | Create Your Free I Love PDFLY Account";const t=document.querySelector('meta[name="description"]');t&&t.setAttribute("content","Create a free account with I Love PDFLY to unlock more features. Sign up to manage your documents more effectively.")},[]),a.useEffect(()=>{let t;return l>0&&(t=setInterval(()=>{j(r=>r-1)},1e3)),()=>clearInterval(t)},[l]);const q=t=>{v({message:t,visible:!0}),setTimeout(()=>{v(r=>r?{...r,visible:!1}:null),setTimeout(()=>v(null),500)},4500)},N=()=>{const t=localStorage.getItem("pendingInvoiceData");R&&t?(localStorage.removeItem("pendingInvoiceData"),k("/invoice-generator",{state:{restoredData:JSON.parse(t)},replace:!0})):A?k("/payment",{state:{plan:F}}):k("/")},M=async t=>{if(t.preventDefault(),x.length<6){n("Password must be at least 6 characters long.");return}n(""),d(!0);try{await Y(S,x),N()}catch(r){n(r.message||"Failed to create an account. Please try again.")}finally{d(!1)}},K=async()=>{if(!(l>0)){b(!0),n("");try{const t=await E(o);T(t),q(`A new OTP has been sent to ${o}.`),j(30)}catch(t){n(t.message)}finally{b(!1)}}},V=async t=>{if(t.preventDefault(),n(""),g==="enter-phone"){b(!0);try{const r=await E(o);T(r),q(`An OTP has been sent to ${o}.`),y("enter-otp"),j(30)}catch(r){n(r.message)}finally{b(!1)}}else{const r=c.join("");if(r.length!==6){n("Please enter the complete 6-digit OTP.");return}if(!I){n("Something went wrong. Please try sending the OTP again.");return}d(!0);try{await G(I,r),N()}catch(s){n(s.message)}finally{d(!1)}}},_=async()=>{n(""),d(!0);try{await B(),N()}catch(t){n(t.message||"Failed to sign up with Google.")}finally{d(!1)}};a.useEffect(()=>{window.google&&(window.google.accounts.id.initialize({client_id:"974035582208-leq5h6cbrjr4n6q78pagt7br7piuvoep.apps.googleusercontent.com",callback:_}),window.google.accounts.id.renderButton(document.getElementById("google-signup-button"),{theme:"outline",size:"large",type:"standard",text:"signup_with",width:"300"}))},[]);const z=t=>{U(t),n(""),P(""),O(""),C(""),u(new Array(6).fill("")),y("enter-phone")},J=(t,r)=>{const{value:s}=t.target;if(isNaN(Number(s)))return;const $=[...c];$[r]=s,u($),s&&r<5&&f.current[r+1]?.focus()},W=(t,r)=>{t.key==="Backspace"&&!c[r]&&r>0&&f.current[r-1]?.focus()},H=t=>{const r=t.clipboardData.getData("text");if(/^\d{6}$/.test(r)){const s=r.split("");u(s),f.current[5]?.focus()}};return e.jsxs(e.Fragment,{children:[w&&e.jsxs("div",{className:`fixed top-5 right-5 z-[200] p-4 rounded-lg shadow-lg text-white transition-all duration-500 ${w.visible?"opacity-100 translate-x-0":"opacity-0 translate-x-full"} bg-green-500`,children:[e.jsx("p",{className:"font-bold",children:"OTP Sent!"}),e.jsx("p",{className:"text-sm",children:w.message})]}),e.jsx("div",{className:"min-h-[calc(100vh-200px)] flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8 bg-gray-50 dark:bg-black",children:e.jsxs("div",{className:"w-full max-w-md space-y-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"mt-6 text-center text-3xl font-bold tracking-tight text-gray-900 dark:text-white",children:A||R?"Create an Account to Continue":"Create a new account"}),e.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600 dark:text-gray-400",children:["Already have an account?"," ",e.jsx(ee,{to:"/login",state:{from:h.state?.from,plan:F},className:"font-medium text-brand-red hover:text-brand-red-dark",children:"sign in"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-black border border-gray-200 dark:border-gray-800 p-8 rounded-lg shadow-lg animated-border",children:[D&&e.jsx("p",{className:"text-center text-sm text-red-500 bg-red-100 dark:bg-red-900/30 p-3 rounded-md mb-4",children:D}),e.jsxs("div",{className:"flex border-b border-gray-300 dark:border-gray-700 mb-6",children:[e.jsx("button",{type:"button",onClick:()=>z("email"),className:`flex-1 py-2 font-semibold transition-colors ${i==="email"?"text-brand-red border-b-2 border-brand-red":"text-gray-500 dark:text-gray-400"}`,children:"Email / Username"}),e.jsx("button",{type:"button",onClick:()=>z("phone"),className:`flex-1 py-2 font-semibold transition-colors ${i==="phone"?"text-brand-red border-b-2 border-brand-red":"text-gray-500 dark:text-gray-400"}`,children:"Phone Number"})]}),i==="email"&&e.jsxs("form",{className:"space-y-6",onSubmit:M,children:[e.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"identifier",className:"sr-only",children:"Email"}),e.jsx("input",{id:"identifier",name:"identifier",type:"email",autoComplete:"email",required:!0,value:S,onChange:t=>P(t.target.value),className:"relative block w-full appearance-none rounded-none rounded-t-md border border-gray-300 dark:border-gray-700 px-3 py-2 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 bg-white dark:bg-black focus:z-10 focus:border-brand-red focus:outline-none focus:ring-brand-red sm:text-sm",placeholder:"Email address"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),e.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,value:x,onChange:t=>O(t.target.value),className:"relative block w-full appearance-none rounded-none rounded-b-md border border-gray-300 dark:border-gray-700 px-3 py-2 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 bg-white dark:bg-black focus:z-10 focus:border-brand-red focus:outline-none focus:ring-brand-red sm:text-sm",placeholder:"Password"})]})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:m,className:"group relative flex w-full justify-center rounded-md border border-transparent bg-brand-red py-2 px-4 text-sm font-medium text-white hover:bg-brand-red-dark focus:outline-none focus:ring-2 focus:ring-brand-red-dark focus:ring-offset-2 disabled:bg-red-300 dark:disabled:bg-red-800 transition-colors",children:m?"Creating account...":"Create Account"})})]}),i==="phone"&&e.jsxs("form",{className:"space-y-6",onSubmit:V,children:[g==="enter-phone"&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phone-number",className:"sr-only",children:"Phone Number"}),e.jsx("input",{id:"phone-number",name:"phone-number",type:"tel",autoComplete:"tel",required:!0,value:o,onChange:t=>C(t.target.value),className:"relative block w-full appearance-none rounded-md border border-gray-300 dark:border-gray-700 px-3 py-2 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 bg-white dark:bg-black focus:z-10 focus:border-brand-red focus:outline-none focus:ring-brand-red sm:text-sm",placeholder:"Enter phone (e.g., +16505551234)"})]}),g==="enter-otp"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("p",{className:"text-center text-sm text-gray-600 dark:text-gray-400",children:["Enter the 6-digit code sent to ",o,".",e.jsx("button",{type:"button",onClick:()=>{y("enter-phone"),n(""),u(new Array(6).fill(""))},className:"font-medium text-brand-red hover:underline ml-1",children:"Change"})]}),e.jsx("div",{className:"flex justify-center gap-2",onPaste:H,children:c.map((t,r)=>e.jsx("input",{type:"text",maxLength:1,value:t,onChange:s=>J(s,r),onKeyDown:s=>W(s,r),ref:s=>{f.current[r]=s},className:"w-10 h-12 text-center text-lg font-semibold border border-gray-300 dark:border-gray-600 rounded-md focus:border-brand-red focus:ring-1 focus:ring-brand-red bg-white dark:bg-black"},r))}),L&&e.jsx("div",{className:"mt-4 p-3 bg-yellow-100 dark:bg-yellow-900/50 border-l-4 border-yellow-400 text-yellow-800 dark:text-yellow-300 rounded-md text-sm",children:e.jsxs("p",{children:[e.jsx("strong",{children:"ðŸ”’:"})," Your verification code is ",e.jsx("strong",{className:"font-mono",children:L})]})}),e.jsx("div",{className:"text-center text-sm",children:l>0?e.jsxs("p",{className:"text-gray-500",children:["Resend OTP in ",l,"s"]}):e.jsx("button",{type:"button",onClick:K,disabled:p,className:"font-medium text-brand-red hover:underline disabled:text-gray-500",children:p?"Sending...":"Resend OTP"})})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:m||p,className:"group relative flex w-full justify-center rounded-md border border-transparent bg-brand-red py-2 px-4 text-sm font-medium text-white hover:bg-brand-red-dark focus:outline-none focus:ring-2 focus:ring-brand-red-dark focus:ring-offset-2 disabled:bg-red-300 dark:disabled:bg-red-800 transition-colors",children:p?"Sending OTP...":m?"Verifying...":g==="enter-phone"?"Send OTP":"Verify & Sign Up"})})]}),e.jsxs("div",{className:"relative my-6",children:[e.jsx("div",{className:"absolute inset-0 flex items-center","aria-hidden":"true",children:e.jsx("div",{className:"w-full border-t border-gray-300 dark:border-gray-700"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"bg-white dark:bg-black px-2 text-gray-500 dark:text-gray-400",children:"OR"})})]}),e.jsx("div",{id:"google-signup-button",className:"flex justify-center"})]})]})})]})};export{re as default};
