import{s as v,r as t,j as e,U as P,S as U,a9 as A,t as D}from"./main-DtCx-TiH.js";const C=()=>{const{getAllUsers:g,updateUserPremiumStatus:h,updateUserApiPlan:m,logout:p,deleteUser:u}=v(),[s,b]=t.useState([]),[y,n]=t.useState(!0),[i,f]=t.useState(""),[c,j]=t.useState(""),d=()=>{n(!0);try{const r=g(),a=Object.keys(r).map(l=>({username:l,isPremium:r[l].isPremium||!1,creationDate:r[l].creationDate,apiPlan:r[l].apiPlan||"free"}));b(a)}catch{f("Failed to load user data.")}finally{n(!1)}};t.useEffect(()=>{d()},[]);const N=async(r,a)=>{try{await h(r,!a),d()}catch{alert(`Failed to update status for ${r}.`)}},w=async(r,a)=>{try{await m(r,a),d()}catch{alert(`Failed to update API plan for ${r}.`)}},k=async r=>{if(window.confirm(`Are you sure you want to delete user "${r}"? This cannot be undone.`))try{await u(r),d()}catch(a){alert(`Error deleting user: ${a.message}`)}},x=t.useMemo(()=>s.filter(r=>r.username.toLowerCase().includes(c.toLowerCase())),[s,c]),o=t.useMemo(()=>({totalUsers:s.length,premiumUsers:s.filter(r=>r.isPremium).length,apiUsers:s.filter(r=>r.apiPlan&&r.apiPlan!=="free").length}),[s]);return e.jsx("div",{className:"py-16 md:py-24 bg-gray-50 dark:bg-black",children:e.jsx("div",{className:"container mx-auto px-6",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center mb-8 gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-extrabold text-gray-800 dark:text-gray-100",children:"Admin Dashboard"}),e.jsx("p",{className:"mt-2 text-gray-500 dark:text-gray-400",children:"Manage users and monitor site activity."})]}),e.jsx("button",{onClick:p,className:"bg-red-500 text-white font-bold py-2 px-4 rounded-md hover:bg-red-600 transition-colors self-start sm:self-center",children:"Logout"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-900 p-6 rounded-lg shadow-md flex items-center gap-4 border-l-4 border-blue-500",children:[e.jsx(P,{className:"h-10 w-10 text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Users"}),e.jsx("p",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100",children:o.totalUsers})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-900 p-6 rounded-lg shadow-md flex items-center gap-4 border-l-4 border-yellow-500",children:[e.jsx(U,{className:"h-10 w-10 text-yellow-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Premium Users"}),e.jsx("p",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100",children:o.premiumUsers})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-900 p-6 rounded-lg shadow-md flex items-center gap-4 border-l-4 border-purple-500",children:[e.jsx(A,{className:"h-10 w-10 text-purple-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Active API Users"}),e.jsx("p",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100",children:o.apiUsers})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-lg shadow-xl overflow-hidden animated-border",children:[e.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:e.jsx("input",{type:"text",placeholder:"Search by username...",value:c,onChange:r=>j(r.target.value),className:"w-full px-4 py-2 bg-gray-100 dark:bg-gray-800 border border-transparent rounded-md focus:ring-brand-red focus:border-brand-red text-gray-800 dark:text-gray-200"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-left text-gray-500 dark:text-gray-400",children:[e.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-800 dark:text-gray-400",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Username"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Premium"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"API Plan"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Joined Date"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-center",children:"Actions"})]})}),e.jsx("tbody",{children:y?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"text-center p-6",children:"Loading users..."})}):i?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"text-center p-6 text-red-500",children:i})}):x.length>0?x.map(r=>e.jsxs("tr",{className:"bg-white dark:bg-gray-900 border-b dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800/50",children:[e.jsx("th",{scope:"row",className:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white",children:r.username}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("label",{htmlFor:`toggle-${r.username}`,className:"relative inline-flex items-center cursor-pointer",title:"Toggle Premium",children:[e.jsx("input",{type:"checkbox",id:`toggle-${r.username}`,className:"sr-only peer",checked:r.isPremium,onChange:()=>N(r.username,r.isPremium)}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 dark:bg-gray-700 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-brand-red"})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("select",{value:r.apiPlan,onChange:a=>w(r.username,a.target.value),className:"bg-gray-50 border border-gray-300 text-gray-900 text-xs rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-1.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",children:[e.jsx("option",{value:"free",children:"Free"}),e.jsx("option",{value:"developer",children:"Developer"}),e.jsx("option",{value:"business",children:"Business"})]})}),e.jsx("td",{className:"px-6 py-4",children:r.creationDate?new Date(r.creationDate).toLocaleDateString():"N/A"}),e.jsx("td",{className:"px-6 py-4 text-center",children:e.jsx("button",{onClick:()=>k(r.username),title:"Delete User",className:"p-2 text-gray-400 hover:text-red-500 rounded-full hover:bg-red-100 dark:hover:bg-red-900/50 transition-colors",children:e.jsx(D,{className:"h-5 w-5"})})})]},r.username)):e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"text-center p-6",children:"No users found."})})})]})})]})]})})})};export{C as default};
